(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"+3YS":function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},"+IV6":function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},"+Sw5":function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}},"+bRE":function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},0:function(t,e,n){t.exports=n("zUnb")},1:function(t,e){},2:function(t,e){},3:function(t,e){},4:function(t,e){},5:function(t,e){},6:function(t,e){},"63Ad":function(t,e){t.exports=function(t){return t&&t.__esModule?t:{default:t}}},K4DB:function(t,e,n){var r=n("e+GP"),i=n("T1e2");t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?i(t):e}},NToG:function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},NthX:function(t,e,n){t.exports=n("wcNg")},S411:function(t,e){t.exports=function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(l){i=!0,a=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}}},SDJZ:function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},T1e2:function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},WI9V:function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,r)}t.exports=n},Zhxd:function(t,e,n){var r=n("+Sw5");t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}},"e+GP":function(t,e){function n(e){return t.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n},"eef+":function(t,e,n){var r=n("WI9V");t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},fFdx:function(t,e){function n(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(u){return void n(u)}s.done?e(l):Promise.resolve(l).then(r,i)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise((function(i,a){var o=t.apply(e,r);function s(t){n(o,i,a,s,l,"next",t)}function l(t){n(o,i,a,s,l,"throw",t)}s(void 0)}))}}},nxTg:function(t,e,n){var r=n("+3YS"),i=n("S411"),a=n("Zhxd"),o=n("+bRE");t.exports=function(t,e){return r(t)||i(t,e)||a(t,e)||o()}},oRHb:function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"array",(function(){return O_})),n.d(r,"Dataset",(function(){return N_})),n.d(r,"zip",(function(){return F_})),n.d(r,"CSVDataset",(function(){return W_})),n.d(r,"TextLineDataset",(function(){return L_})),n.d(r,"csv",(function(){return ax})),n.d(r,"func",(function(){return ox})),n.d(r,"generator",(function(){return sx})),n.d(r,"microphone",(function(){return ux})),n.d(r,"webcam",(function(){return lx})),n.d(r,"FileDataSource",(function(){return rx})),n.d(r,"URLDataSource",(function(){return ix})),n.d(r,"version_data",(function(){return cx}));var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function a(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function o(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{l(r.next(t))}catch(t){a(t)}}function s(t){try{l(r.throw(t))}catch(t){a(t)}}function l(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(o,s)}l((r=r.apply(t,e||[])).next())}))}function s(t,e){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(t){a=[6,t],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}var l=function(){function t(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return t.prototype.setPlatform=function(t,e){null!=this.platform&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+e+"."),this.platformName=t,this.platform=e},t.prototype.registerFlag=function(t,e,n){if(this.flagRegistry[t]={evaluationFn:e,setHook:n},null!=this.urlFlags[t]){var r=this.urlFlags[t];console.warn("Setting feature override from URL "+t+": "+r+"."),this.set(t,r)}},t.prototype.get=function(t){return t in this.flags?this.flags[t]:(this.flags[t]=this.evaluateFlag(t),this.flags[t])},t.prototype.getNumber=function(t){return this.get(t)},t.prototype.getBool=function(t){return this.get(t)},t.prototype.getFlags=function(){return this.flags},Object.defineProperty(t.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),t.prototype.set=function(t,e){if(null==this.flagRegistry[t])throw new Error("Cannot set flag "+t+" as it has not been registered.");this.flags[t]=e,null!=this.flagRegistry[t].setHook&&this.flagRegistry[t].setHook(e)},t.prototype.evaluateFlag=function(t){if(null==this.flagRegistry[t])throw new Error("Cannot evaluate flag '"+t+"': no evaluation function found.");return this.flagRegistry[t].evaluationFn()},t.prototype.setFlags=function(t){this.flags=Object.assign({},t)},t.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},t.prototype.populateURLFlags=function(){var t=this;if(void 0!==this.global&&void 0!==this.global.location&&void 0!==this.global.location.search){var e,n=(e={},this.global.location.search.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return u(e,n[0],n[1]),n.join("=")})),e);"tfjsflags"in n&&n.tfjsflags.split(",").forEach((function(e){var n=e.split(":"),r=n[0];t.urlFlags[r]=function(t,e){if("true"===(e=e.toLowerCase())||"false"===e)return"true"===e;if(""+ +e===e)return+e;throw new Error("Could not parse value flag value "+e+" for flag "+t+".")}(r,n[1])}))}},t}();function u(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function c(){return h}var h=null,d=new Map,p=new Map;function f(t,e){var n=_(t,e);return d.get(n)}function m(t){return p.get(t)}function g(t){for(var e=d.entries(),n=[];;){var r=e.next(),i=r.value;if(r.done)break;var a=i[1];i[0].split("_")[0]===t&&n.push(a)}return n}function y(t){var e=t.kernelName,n=t.backendName,r=_(e,n);if(d.has(r))throw new Error("The kernel '"+e+"' for backend '"+n+"' is already registered");d.set(r,t)}function v(t){var e=t.kernelName;p.has(e)&&console.warn("Overriding the gradient for '"+e+"'"),p.set(e,t)}function b(t,e){var n=_(t,e);if(!d.has(n))throw new Error("The kernel '"+t+"' for backend '"+e+"' is not registered");d.delete(n)}function w(t){if(!p.has(t))throw new Error("The gradient '"+t+"' for backend is not registered");p.delete(t)}function _(t,e){return e+"_"+t}function x(t){for(var e=t.length,n=0,r=0;e>0;)r=Math.random()*e|0,n=t[--e],t[e]=t[r],t[r]=n}function C(t,e,n){return Math.max(t,Math.min(e,n))}function S(t){return t%2==0?t:t+1}function k(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return e}function E(t,e){if(!t)throw new Error("string"==typeof e?e:e())}function I(t,e,n){void 0===n&&(n=""),E(N(t,e),(function(){return n+" Shapes "+t+" and "+e+" must match"}))}function A(t){E(null!=t,(function(){return"The input to the tensor constructor must be a non-null value."}))}function D(t,e,n){if(void 0===e&&(e=[]),void 0===n&&(n=!1),null==e&&(e=[]),Array.isArray(t)||q(t)&&!n)for(var r=0;r<t.length;++r)D(t[r],e,n);else e.push(t);return e}function T(t){if(0===t.length)return 1;for(var e=t[0],n=1;n<t.length;n++)e*=t[n];return e}function N(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function R(t){return t%1==0}function O(t){if(null!=Math.tanh)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;var e=Math.exp(2*t);return(e-1)/(e+1)}function F(t){var e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function M(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function P(t,e,n){return void 0===e&&(e=function(t){return 0}),new Promise((function(r,i){var a=0,o=function(){if(t())r();else{var s=e(++a);null!=n&&a>=n?i():setTimeout(o,s)}};o()}))}function L(t,e){for(var n=1,r=-1,i=0;i<t.length;++i)if(t[i]>=0)n*=t[i];else if(-1===t[i]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+i);r=i}else if(t[i]<0)throw Error("Shapes can not be < 0. Found "+t[i]+" at dim "+i);if(-1===r){if(e>0&&e!==n)throw Error("Size("+e+") must match the product of shape "+t);return t}if(0===n)throw Error("Cannot infer the missing size in ["+t+"] when there are 0 elements");if(e%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+e+" / "+n);var a=t.slice();return a[r]=e/n,a}function z(t,e){var n=e.length;return E((t=null==t?e.map((function(t,e){return e})):[].concat(t)).every((function(t){return t>=-n&&t<n})),(function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+t})),E(t.every((function(t){return R(t)})),(function(){return"All values in axis param must be integers but got axis "+t})),t.map((function(t){return t<0?n+t:t}))}function V(t,e){for(var n=[],r=[],i=null!=e&&Array.isArray(e)&&0===e.length,a=null==e||i?null:z(e,t).sort(),o=0,s=0;s<t.length;++s){if(null!=a){if(a[o]===s&&1!==t[s])throw new Error("Can't squeeze axis "+s+" since its dim '"+t[s]+"' is not 1");(null==a[o]||a[o]>s)&&1===t[s]&&(n.push(t[s]),r.push(s)),a[o]<=s&&o++}1!==t[s]&&(n.push(t[s]),r.push(s))}return{newShape:n,keptDims:r}}function B(t,e){var n=null;if(null==t||"float32"===t)n=new Float32Array(e);else if("int32"===t)n=new Int32Array(e);else{if("bool"!==t)throw new Error("Unknown data type "+t);n=new Uint8Array(e)}return n}function j(t,e){var n=null;if(null==t||"float32"===t)n=new Float32Array(e);else if("int32"===t)n=new Int32Array(e);else if("bool"===t)n=new Uint8Array(e);else{if("string"!==t)throw new Error("Unknown data type "+t);n=new Array(e)}return n}function U(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+e+" being uploaded contains "+r+".")}}function W(t){return"bool"===t||"complex64"===t||"float32"===t||"int32"===t||"string"===t}function H(t,e){return!("complex64"===e||"float32"===e&&"complex64"!==t||"int32"===e&&"float32"!==t&&"complex64"!==t||"bool"===e&&"bool"===t)}function q(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array}function G(t){if("float32"===t||"int32"===t)return 4;if("complex64"===t)return 8;if("bool"===t)return 1;throw new Error("Unknown dtype "+t)}function $(t){if(null==t)return 0;var e=0;return t.forEach((function(t){return e+=t.length})),e}function K(t){return"string"==typeof t||t instanceof String}function X(t){return"boolean"==typeof t}function Y(t){return"number"==typeof t}function Z(t){return Array.isArray(t)?Z(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array?"int32":Y(t)?"float32":K(t)?"string":X(t)?"bool":"float32"}function Q(t){return!!(t&&t.constructor&&t.call&&t.apply)}function J(t,e){for(var n=e;n<t;++n)if(t%n==0)return n;return t}function tt(t){var e=t.length;if(e<2)return[];var n=new Array(e-1);n[e-2]=t[e-1];for(var r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function et(t,e,n){if("string"===e)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=D(t)),n&&U(t,e),function(t,e){return t instanceof Float32Array&&"float32"===e||t instanceof Int32Array&&"int32"===e||t instanceof Uint8Array&&"bool"===e}(t,e))return t;if(null==e||"float32"===e||"complex64"===e)return new Float32Array(t);if("int32"===e)return new Int32Array(t);if("bool"===e){for(var r=new Uint8Array(t.length),i=0;i<r.length;++i)0!==Math.round(t[i])&&(r[i]=1);return r}throw new Error("Unknown data type "+e)}function nt(t,e){if(0===t.length)return e[0];var n=t.reduce((function(t,e){return t*e}));if(0===n)return[];if(n!==e.length)throw new Error("["+t+"] does not match the input size.");return function t(e,n,r){var i=new Array;if(1===n.length)for(var a=n[0],o=0;o<a;o++)i[o]=r[e+o];else{a=n[0];var s=n.slice(1),l=s.reduce((function(t,e){return t*e}));for(o=0;o<a;o++)i[o]=t(e+o*l,s,r)}return i}(0,t,e)}function rt(t,e){for(var n=it(t,e),r=0;r<n.length;r++)n[r]=1;return n}function it(t,e){if(null==e||"float32"===e||"complex64"===e)return new Float32Array(t);if("int32"===e)return new Int32Array(t);if("bool"===e)return new Uint8Array(t);throw new Error("Unknown data type "+e)}function at(){return c().platform.now()}function ot(t){t.forEach((function(e){E(Number.isInteger(e)&&e>=0,(function(){return"Tensor must have a shape comprised of positive integers but got shape ["+t+"]."}))}))}function st(t,e){return void 0===e&&(e="utf-8"),e=e||"utf-8",c().platform.encode(t,e)}function lt(t,e){return void 0===e&&(e="utf-8"),e=e||"utf-8",c().platform.decode(t,e)}function ut(t,e,n){if(0===e)return 0;if(1===e)return t[0];for(var r=t[t.length-1],i=0;i<t.length-1;++i)r+=n[i]*t[i];return r}function ct(t,e,n){if(0===e)return[];if(1===e)return[t];for(var r=new Array(e),i=0;i<r.length-1;++i)r[i]=Math.floor(t/n[i]),t-=r[i]*n[i];return r[r.length-1]=t,r}var ht=Object.freeze({shuffle:x,clamp:C,nearestLargerEven:S,sum:k,randUniform:function(t,e){var n=Math.random();return e*n+(1-n)*t},distSquared:function(t,e){for(var n=0,r=0;r<t.length;r++){var i=Number(t[r])-Number(e[r]);n+=i*i}return n},assert:E,assertShapesMatch:I,assertNonNull:A,flatten:D,sizeFromShape:T,isScalarShape:function(t){return 0===t.length},arraysEqual:N,isInt:R,tanh:O,sizeToSquarishShape:F,createShuffledIndices:function(t){for(var e=new Uint32Array(t),n=0;n<t;++n)e[n]=n;return x(e),e},rightPad:M,repeatedTry:P,inferFromImplicitShape:L,parseAxisParam:z,squeezeShape:V,getTypedArrayFromDType:B,getArrayFromDType:j,checkConversionForErrors:U,isValidDtype:W,hasEncodingLoss:H,isTypedArray:q,bytesPerElement:G,bytesFromStringArray:$,isString:K,isBoolean:X,isNumber:Y,inferDtype:Z,isFunction:Q,nearestDivisor:J,computeStrides:tt,toTypedArray:et,toNestedArray:nt,makeOnesTypedArray:rt,makeZerosTypedArray:it,now:at,assertNonNegativeIntegerDimensions:ot,fetch:function(t,e){return c().platform.fetch(t,e)},encodeString:st,decodeString:lt,locToIndex:ut,indexToLoc:ct}),dt=function(){function t(t,e){this.backendTimer=t,this.logger=e,null==e&&(this.logger=new pt)}return t.prototype.profileKernel=function(t,e,n){var r,i=this,a=this.backendTimer.time((function(){r=n()}));return r.forEach((function(n){n.data().then((function(r){!function(t,e,n){if("float32"!==e)return!1;for(var r=0;r<t.length;r++){var i=t[r];if(isNaN(i)||!isFinite(i))return console.warn("Found "+i+" in the result of '"+n+"'"),!0}}(r,n.dtype,t),a.then((function(a){var o="";null!=a.getExtraProfileInfo&&(o=a.getExtraProfileInfo()),i.logger.logKernelProfile(t,n,r,a.kernelMs,e,o)}))}))})),r},t}(),pt=function(){function t(){}return t.prototype.logKernelProfile=function(t,e,n,r,i,a){var o="number"==typeof r?M(r+"ms",9):r.error,s=M(t,25),l=e.rank,u=e.size,c=M(e.shape.toString(),14),h="";for(var d in i){var p=i[d].shape||e.shape,f=p.length;h+=d+": "+f+"D "+(f>0?p:"")+" "}console.log("%c"+s+"\t%c"+o+"\t%c"+l+"D "+c+"\t%c"+u+"\t%c"+h+"\t%c"+a,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},t}(),ft=7;function mt(t,e,n){return M(Array.isArray(t)?parseFloat(t[0].toFixed(ft))+" + "+parseFloat(t[1].toFixed(ft))+"j":K(t)?"'"+t+"'":"bool"===n?gt(t):parseFloat(t.toFixed(ft)).toString(),e)}function gt(t){return 0===t?"false":"true"}function yt(t){for(var e=[],n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}var vt=function(){function t(t,e,n){var r=this;if(this.dtype=e,this.shape=t.slice(),this.size=T(t),null!=n){var i=n.length;E(i===this.size,(function(){return"Length of values '"+i+"' does not match the size inferred by the shape '"+r.size+"'."}))}if("complex64"===e)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||j(e,this.size),this.strides=tt(t)}return t.prototype.set=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];0===n.length&&(n=[0]),E(n.length===this.rank,(function(){return"The number of provided coordinates ("+n.length+") must match the rank ("+e.rank+")"}));var i=this.locToIndex(n);this.values[i]=t},t.prototype.get=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];0===t.length&&(t=[0]);for(var n=0,r=0,i=t;r<i.length;r++){var a=i[r];if(a<0||a>=this.shape[n]){var o="Requested out of range element at "+t+".   Buffer shape="+this.shape;throw new Error(o)}n++}for(var s=t[t.length-1],l=0;l<t.length-1;++l)s+=this.strides[l]*t[l];return this.values[s]},t.prototype.locToIndex=function(t){if(0===this.rank)return 0;if(1===this.rank)return t[0];for(var e=t[t.length-1],n=0;n<t.length-1;++n)e+=this.strides[n]*t[n];return e},t.prototype.indexToLoc=function(t){if(0===this.rank)return[];if(1===this.rank)return[t];for(var e=new Array(this.shape.length),n=0;n<e.length-1;++n)e[n]=Math.floor(t/this.strides[n]),t-=e[n]*this.strides[n];return e[e.length-1]=t,e},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.toTensor=function(){return bt().makeTensor(this.values,this.shape,this.dtype)},t}(),bt=null,wt=null,_t=null,xt=function(){function t(t,e,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=e||"float32",this.size=T(t),this.strides=tt(t),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}return t.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},t.prototype.asScalar=function(){return this.throwIfDisposed(),E(1===this.size,(function(){return"The array must have only 1 element."})),this.reshape([])},t.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},t.prototype.as2D=function(t,e){return this.throwIfDisposed(),this.reshape([t,e])},t.prototype.as3D=function(t,e,n){return this.throwIfDisposed(),this.reshape([t,e,n])},t.prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),this.reshape([t,e,n,r])},t.prototype.as5D=function(t,e,n,r,i){return this.throwIfDisposed(),this.reshape([t,e,n,r,i])},t.prototype.asType=function(t){return this.throwIfDisposed(),wt.cast(this,t)},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.buffer=function(){return o(this,void 0,void 0,(function(){var t;return s(this,(function(e){switch(e.label){case 0:return[4,this.data()];case 1:return t=e.sent(),[2,wt.buffer(this.shape,this.dtype,t)]}}))}))},t.prototype.bufferSync=function(){return wt.buffer(this.shape,this.dtype,this.dataSync())},t.prototype.array=function(){return o(this,void 0,void 0,(function(){var t;return s(this,(function(e){switch(e.label){case 0:return[4,this.data()];case 1:return t=e.sent(),[2,nt(this.shape,t)]}}))}))},t.prototype.arraySync=function(){return nt(this.shape,this.dataSync())},t.prototype.data=function(){return o(this,void 0,void 0,(function(){var t,e;return s(this,(function(n){switch(n.label){case 0:return this.throwIfDisposed(),t=bt().read(this.dataId),"string"!==this.dtype?[3,2]:[4,t];case 1:e=n.sent();try{return[2,e.map((function(t){return lt(t)}))]}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}n.label=2;case 2:return[2,t]}}))}))},t.prototype.dataSync=function(){this.throwIfDisposed();var t=bt().readSync(this.dataId);if("string"===this.dtype)try{return t.map((function(t){return lt(t)}))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t},t.prototype.bytes=function(){return o(this,void 0,void 0,(function(){var t;return s(this,(function(e){switch(e.label){case 0:return this.throwIfDisposed(),[4,bt().read(this.dataId)];case 1:return t=e.sent(),"string"===this.dtype?[2,t]:[2,new Uint8Array(t.buffer)]}}))}))},t.prototype.dispose=function(){this.isDisposed||(bt().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),t.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},t.prototype.toFloat=function(){return this.asType("float32")},t.prototype.toInt=function(){return this.asType("int32")},t.prototype.toBool=function(){return this.asType("bool")},t.prototype.print=function(t){return void 0===t&&(t=!1),wt.print(this,t)},t.prototype.reshape=function(t){return this.throwIfDisposed(),wt.reshape(this,t)},t.prototype.reshapeAs=function(t){return this.throwIfDisposed(),this.reshape(t.shape)},t.prototype.expandDims=function(t){return void 0===t&&(t=0),wt.expandDims(this,t)},t.prototype.cumsum=function(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=!1),void 0===n&&(n=!1),wt.cumsum(this,t,e,n)},t.prototype.squeeze=function(t){return this.throwIfDisposed(),wt.squeeze(this,t)},t.prototype.clone=function(){return this.throwIfDisposed(),wt.clone(this)},t.prototype.toString=function(t){return void 0===t&&(t=!1),function(t,e,n,r){var i=tt(e),a=function(t,e,n,r){var i=T(e),a=r[r.length-1],o=new Array(a).fill(0),s=e.length,l="complex64"===n?yt(t):t;if(s>1)for(var u=0;u<i/a;u++)for(var c=u*a,h=0;h<a;h++)o[h]=Math.max(o[h],mt(l[c+h],0,n).length);return o}(t,e,n,i),o=e.length,s=function t(e,n,r,i,a,o){void 0===o&&(o=!0);var s="complex64"===r?2:1,l=n[0],u=n.length;if(0===u)return"complex64"===r?[mt(yt(e)[0],0,r)]:"bool"===r?[gt(e[0])]:[e[0].toString()];if(1===u){if(l>20){var c=Array.from(e.slice(0,3*s)),h=Array.from(e.slice((l-3)*s,l*s));return"complex64"===r&&(c=yt(c),h=yt(h)),["["+c.map((function(t,e){return mt(t,a[e],r)})).join(", ")+", ..., "+h.map((function(t,e){return mt(t,a[l-3+e],r)})).join(", ")+"]"]}return["["+("complex64"===r?yt(e):Array.from(e)).map((function(t,e){return mt(t,a[e],r)})).join(", ")+"]"]}var d=n.slice(1),p=i.slice(1),f=i[0]*s,m=[];if(l>20){for(var g=0;g<3;g++){var y=(v=g*f)+f;m.push.apply(m,t(e.slice(v,y),d,r,p,a,!1))}for(m.push("..."),g=l-3;g<l;g++)y=(v=g*f)+f,m.push.apply(m,t(e.slice(v,y),d,r,p,a,g===l-1))}else for(g=0;g<l;g++){var v;y=(v=g*f)+f,m.push.apply(m,t(e.slice(v,y),d,r,p,a,g===l-1))}var b=2===u?",":"";for(m[0]="["+m[0]+b,g=1;g<m.length-1;g++)m[g]=" "+m[g]+b;var w=",\n";for(g=2;g<u;g++)w+="\n";return m[m.length-1]=" "+m[m.length-1]+"]"+(o?"":w),m}(t,e,n,i,a),l=["Tensor"];return r&&(l.push("  dtype: "+n),l.push("  rank: "+o),l.push("  shape: ["+e+"]"),l.push("  values:")),l.push(s.map((function(t){return"    "+t})).join("\n")),l.join("\n")}(this.dataSync(),this.shape,this.dtype,t)},t.prototype.gather=function(t,e){return void 0===e&&(e=0),this.throwIfDisposed(),wt.gather(this,t,e)},t.prototype.matMul=function(t,e,n){return void 0===e&&(e=!1),void 0===n&&(n=!1),this.throwIfDisposed(),wt.matMul(this,t,e,n)},t.prototype.dot=function(t){return this.throwIfDisposed(),wt.dot(this,t)},t.prototype.norm=function(t,e,n){return void 0===t&&(t="euclidean"),void 0===e&&(e=null),void 0===n&&(n=!1),this.throwIfDisposed(),wt.norm(this,t,e,n)},t.prototype.slice=function(t,e){return this.throwIfDisposed(),wt.slice(this,t,e)},t.prototype.reverse=function(t){return this.throwIfDisposed(),wt.reverse(this,t)},t.prototype.concat=function(e,n){return void 0===n&&(n=0),this.throwIfDisposed(),e instanceof t&&(e=[e]),wt.concat([this].concat(e),n)},t.prototype.split=function(t,e){return void 0===e&&(e=0),this.throwIfDisposed(),wt.split(this,t,e)},t.prototype.stack=function(t,e){return void 0===e&&(e=0),wt.stack([this,t],e)},t.prototype.unstack=function(t){return void 0===t&&(t=0),wt.unstack(this,t)},t.prototype.batchNormalization=function(t,e,n,r,i){return void 0===n&&(n=.001),_t("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(t,e,i,r,n)},t.prototype.all=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),wt.all(this,t,e)},t.prototype.any=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),wt.any(this,t,e)},t.prototype.logSumExp=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),wt.logSumExp(this,t,e)},t.prototype.sum=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),wt.sum(this,t,e)},t.prototype.prod=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),wt.prod(this,t,e)},t.prototype.mean=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),wt.mean(this,t,e)},t.prototype.min=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),wt.min(this,t,e)},t.prototype.max=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),wt.max(this,t,e)},t.prototype.argMin=function(t){return void 0===t&&(t=null),this.throwIfDisposed(),wt.argMin(this,t)},t.prototype.argMax=function(t){return void 0===t&&(t=null),this.throwIfDisposed(),wt.argMax(this,t)},t.prototype.cast=function(t){return this.throwIfDisposed(),wt.cast(this,t)},t.prototype.addStrict=function(t){return this.throwIfDisposed(),wt.addStrict(this,t)},t.prototype.atan2=function(t){return this.throwIfDisposed(),wt.atan2(this,t)},t.prototype.sub=function(t){return this.throwIfDisposed(),wt.sub(this,t)},t.prototype.subStrict=function(t){return this.throwIfDisposed(),wt.subStrict(this,t)},t.prototype.pow=function(t){return this.throwIfDisposed(),wt.pow(this,t)},t.prototype.powStrict=function(t){return this.throwIfDisposed(),wt.powStrict(this,t)},t.prototype.mul=function(t){return this.throwIfDisposed(),wt.mul(this,t)},t.prototype.mulStrict=function(t){return this.throwIfDisposed(),wt.mulStrict(this,t)},t.prototype.floorDiv=function(t){return this.throwIfDisposed(),wt.floorDiv(this,t)},t.prototype.divStrict=function(t){return this.throwIfDisposed(),wt.divStrict(this,t)},t.prototype.minimum=function(t){return this.throwIfDisposed(),wt.minimum(this,t)},t.prototype.minimumStrict=function(t){return this.throwIfDisposed(),wt.minimumStrict(this,t)},t.prototype.maximum=function(t){return this.throwIfDisposed(),wt.maximum(this,t)},t.prototype.maximumStrict=function(t){return this.throwIfDisposed(),wt.maximumStrict(this,t)},t.prototype.mod=function(t){return this.throwIfDisposed(),wt.mod(this,t)},t.prototype.modStrict=function(t){return this.throwIfDisposed(),wt.modStrict(this,t)},t.prototype.squaredDifferenceStrict=function(t){return this.throwIfDisposed(),wt.squaredDifferenceStrict(this,t)},t.prototype.notEqual=function(t){return this.throwIfDisposed(),wt.notEqual(this,t)},t.prototype.notEqualStrict=function(t){return this.throwIfDisposed(),wt.notEqualStrict(this,t)},t.prototype.less=function(t){return this.throwIfDisposed(),wt.less(this,t)},t.prototype.lessStrict=function(t){return this.throwIfDisposed(),wt.lessStrict(this,t)},t.prototype.equal=function(t){return this.throwIfDisposed(),wt.equal(this,t)},t.prototype.equalStrict=function(t){return this.throwIfDisposed(),wt.equalStrict(this,t)},t.prototype.lessEqual=function(t){return this.throwIfDisposed(),wt.lessEqual(this,t)},t.prototype.lessEqualStrict=function(t){return this.throwIfDisposed(),wt.lessEqualStrict(this,t)},t.prototype.greater=function(t){return this.throwIfDisposed(),wt.greater(this,t)},t.prototype.greaterStrict=function(t){return this.throwIfDisposed(),wt.greaterStrict(this,t)},t.prototype.greaterEqual=function(t){return this.throwIfDisposed(),wt.greaterEqual(this,t)},t.prototype.greaterEqualStrict=function(t){return this.throwIfDisposed(),wt.greaterEqualStrict(this,t)},t.prototype.logicalAnd=function(t){return this.throwIfDisposed(),wt.logicalAnd(this,t)},t.prototype.logicalOr=function(t){return this.throwIfDisposed(),wt.logicalOr(this,t)},t.prototype.logicalNot=function(){return this.throwIfDisposed(),wt.logicalNot(this)},t.prototype.logicalXor=function(t){return this.throwIfDisposed(),wt.logicalXor(this,t)},t.prototype.where=function(t,e){return this.throwIfDisposed(),wt.where(t,this,e)},t.prototype.neg=function(){return this.throwIfDisposed(),wt.neg(this)},t.prototype.ceil=function(){return this.throwIfDisposed(),wt.ceil(this)},t.prototype.floor=function(){return this.throwIfDisposed(),wt.floor(this)},t.prototype.sign=function(){return this.throwIfDisposed(),wt.sign(this)},t.prototype.isNaN=function(){return this.throwIfDisposed(),wt.isNaN(this)},t.prototype.isInf=function(){return this.throwIfDisposed(),wt.isInf(this)},t.prototype.isFinite=function(){return this.throwIfDisposed(),wt.isFinite(this)},t.prototype.exp=function(){return this.throwIfDisposed(),wt.exp(this)},t.prototype.expm1=function(){return this.throwIfDisposed(),wt.expm1(this)},t.prototype.log=function(){return this.throwIfDisposed(),wt.log(this)},t.prototype.log1p=function(){return this.throwIfDisposed(),wt.log1p(this)},t.prototype.sqrt=function(){return this.throwIfDisposed(),wt.sqrt(this)},t.prototype.rsqrt=function(){return this.throwIfDisposed(),wt.rsqrt(this)},t.prototype.square=function(){return this.throwIfDisposed(),wt.square(this)},t.prototype.reciprocal=function(){return this.throwIfDisposed(),wt.reciprocal(this)},t.prototype.abs=function(){return this.throwIfDisposed(),wt.abs(this)},t.prototype.clipByValue=function(t,e){return this.throwIfDisposed(),wt.clipByValue(this,t,e)},t.prototype.relu=function(){return this.throwIfDisposed(),wt.relu(this)},t.prototype.relu6=function(){return this.throwIfDisposed(),wt.relu6(this)},t.prototype.elu=function(){return this.throwIfDisposed(),wt.elu(this)},t.prototype.selu=function(){return this.throwIfDisposed(),wt.selu(this)},t.prototype.leakyRelu=function(t){return void 0===t&&(t=.2),this.throwIfDisposed(),wt.leakyRelu(this,t)},t.prototype.prelu=function(t){return this.throwIfDisposed(),wt.prelu(this,t)},t.prototype.sigmoid=function(){return this.throwIfDisposed(),wt.sigmoid(this)},t.prototype.logSigmoid=function(){return this.throwIfDisposed(),wt.logSigmoid(this)},t.prototype.softplus=function(){return this.throwIfDisposed(),wt.softplus(this)},t.prototype.zerosLike=function(){return this.throwIfDisposed(),wt.zerosLike(this)},t.prototype.onesLike=function(){return this.throwIfDisposed(),wt.onesLike(this)},t.prototype.sin=function(){return this.throwIfDisposed(),wt.sin(this)},t.prototype.cos=function(){return this.throwIfDisposed(),wt.cos(this)},t.prototype.tan=function(){return this.throwIfDisposed(),wt.tan(this)},t.prototype.asin=function(){return this.throwIfDisposed(),wt.asin(this)},t.prototype.acos=function(){return this.throwIfDisposed(),wt.acos(this)},t.prototype.atan=function(){return this.throwIfDisposed(),wt.atan(this)},t.prototype.sinh=function(){return this.throwIfDisposed(),wt.sinh(this)},t.prototype.cosh=function(){return this.throwIfDisposed(),wt.cosh(this)},t.prototype.tanh=function(){return this.throwIfDisposed(),wt.tanh(this)},t.prototype.asinh=function(){return this.throwIfDisposed(),wt.asinh(this)},t.prototype.acosh=function(){return this.throwIfDisposed(),wt.acosh(this)},t.prototype.atanh=function(){return this.throwIfDisposed(),wt.atanh(this)},t.prototype.erf=function(){return this.throwIfDisposed(),wt.erf(this)},t.prototype.round=function(){return this.throwIfDisposed(),wt.round(this)},t.prototype.step=function(t){return void 0===t&&(t=0),this.throwIfDisposed(),wt.step(this,t)},t.prototype.softmax=function(t){return void 0===t&&(t=-1),this.throwIfDisposed(),wt.softmax(this,t)},t.prototype.logSoftmax=function(t){return void 0===t&&(t=-1),this.throwIfDisposed(),wt.logSoftmax(this,t)},t.prototype.resizeBilinear=function(t,e){return void 0===e&&(e=!1),this.throwIfDisposed(),wt.image.resizeBilinear(this,t,e)},t.prototype.resizeNearestNeighbor=function(t,e){return void 0===e&&(e=!1),this.throwIfDisposed(),wt.image.resizeNearestNeighbor(this,t,e)},t.prototype.conv1d=function(t,e,n,r,i,a){return void 0===r&&(r="NWC"),void 0===i&&(i=1),this.throwIfDisposed(),wt.conv1d(this,t,e,n,r,i,a)},t.prototype.conv2d=function(t,e,n,r,i,a){return void 0===r&&(r="NHWC"),void 0===i&&(i=[1,1]),this.throwIfDisposed(),wt.conv2d(this,t,e,n,r,i,a)},t.prototype.conv2dTranspose=function(t,e,n,r,i){return this.throwIfDisposed(),wt.conv2dTranspose(this,t,e,n,r,i)},t.prototype.depthwiseConv2D=function(t,e,n,r,i,a){return void 0===r&&(r="NHWC"),void 0===i&&(i=[1,1]),this.throwIfDisposed(),wt.depthwiseConv2d(this,t,e,n,r,i,a)},t.prototype.separableConv2d=function(t,e,n,r,i,a){return void 0===i&&(i=[1,1]),void 0===a&&(a="NHWC"),this.throwIfDisposed(),wt.separableConv2d(this,t,e,n,r,i,a)},t.prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),wt.avgPool(this,t,e,n,r)},t.prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),wt.maxPool(this,t,e,n,r)},t.prototype.localResponseNormalization=function(t,e,n,r){return void 0===t&&(t=5),void 0===e&&(e=1),void 0===n&&(n=1),void 0===r&&(r=.5),wt.localResponseNormalization(this,t,e,n,r)},t.prototype.pool=function(t,e,n,r,i){return this.throwIfDisposed(),wt.pool(this,t,e,n,r,i)},t.prototype.variable=function(t,e,n){return void 0===t&&(t=!0),this.throwIfDisposed(),bt().makeVariable(this,t,e,n)},t.prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),wt.unsortedSegmentSum(this,t,e)},t.prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),wt.batchToSpaceND(this,t,e)},t.prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),wt.spaceToBatchND(this,t,e)},t.prototype.topk=function(t,e){return void 0===t&&(t=1),void 0===e&&(e=!0),this.throwIfDisposed(),wt.topk(this,t,e)},t.prototype.stridedSlice=function(t,e,n,r,i,a,o,s){return void 0===r&&(r=0),void 0===i&&(i=0),void 0===a&&(a=0),void 0===o&&(o=0),void 0===s&&(s=0),this.throwIfDisposed(),wt.stridedSlice(this,t,e,n,r,i,a,o,s)},t.prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),wt.depthToSpace(this,t,e)},t.prototype.fft=function(){return this.throwIfDisposed(),wt.spectral.fft(this)},t.prototype.ifft=function(){return this.throwIfDisposed(),wt.spectral.ifft(this)},t.prototype.rfft=function(){return this.throwIfDisposed(),wt.spectral.rfft(this)},t.prototype.irfft=function(){return this.throwIfDisposed(),wt.spectral.irfft(this)},t}();Object.defineProperty(xt,Symbol.hasInstance,{value:function(t){return!!t&&null!=t.dataId&&null!=t.shape&&null!=t.dtype}});var Ct,St,kt,Et,It,At,Dt=function(t){function e(e,n,r,i){var a=t.call(this,e.shape,e.dtype,e.dataId,i)||this;return a.trainable=n,a.name=r,a}return a(e,t),e.prototype.assign=function(t){if(t.dtype!==this.dtype)throw new Error("dtype of the new value ("+t.dtype+") and previous value ("+this.dtype+") must match");if(!N(t.shape,this.shape))throw new Error("shape of the new value ("+t.shape+") and previous value ("+this.shape+") must match");bt().disposeTensor(this),this.dataId=t.dataId,bt().incRef(this,null)},e.prototype.dispose=function(){bt().disposeVariable(this),this.isDisposedInternal=!0},e}(xt);Object.defineProperty(Dt,Symbol.hasInstance,{value:function(t){return t instanceof xt&&null!=t.assign&&t.assign instanceof Function}}),(At=Ct||(Ct={})).R0="R0",At.R1="R1",At.R2="R2",At.R3="R3",At.R4="R4",At.R5="R5",At.R6="R6",function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"}(St||(St={})),function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"}(kt||(kt={})),function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"}(Et||(Et={})),function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"}(It||(It={}));var Tt={float32:Et,int32:St,bool:kt,complex64:It};function Nt(t,e){if("string"===t||"string"===e){if("string"===t&&"string"===e)return"string";throw new Error("Can not upcast "+t+" with "+e)}return Tt[t][e]}function Rt(t){return Nt(t,"int32")}function Ot(t,e){if(t.dtype===e.dtype)return[t,e];var n=Nt(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function Ft(t,e){E(t.dtype===e.dtype,(function(){return"The dtypes of the first("+t.dtype+") and second("+e.dtype+") input must match"}))}function Mt(t){var e=[];return function t(e,n,r){if(null!=e)if(e instanceof xt)n.push(e);else if(i=e,Array.isArray(i)||"object"==typeof i){var i,a=e;for(var o in a){var s=a[o];r.has(s)||(r.add(s),t(s,n,r))}}}(t,e,new Set),e}var Pt,Lt=Object.freeze({makeTypesMatch:Ot,assertTypesMatch:Ft,isTensorInList:function(t,e){return e.some((function(e){return e.id===t.id}))},getTensorsInContainer:Mt}),zt=function(){function t(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return t.prototype.dispose=function(){for(var t in this.registeredVariables)this.registeredVariables[t].dispose()},t}(),Vt=function(){function t(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new zt}return t.prototype.ready=function(){return o(this,void 0,void 0,(function(){var t,e,n;return s(this,(function(r){switch(r.label){case 0:if(null!=this.pendingBackendInit)return[2,this.pendingBackendInit.then((function(){}))];if(null!=this.backendInstance)return[2];t=this.getSortedBackends(),e=0,r.label=1;case 1:return e<t.length?[4,this.initializeBackend(n=t[e]).success]:[3,5];case 2:return r.sent()?[4,this.setBackend(n)]:[3,4];case 3:return r.sent(),[2];case 4:return e++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}}))}))},Object.defineProperty(t.prototype,"backend",{get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var t=this.initializeBackendsAndReturnBest(),e=t.name;if(t.asyncInit)throw new Error("The highest priority backend '"+e+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(e)}return this.backendInstance},enumerable:!0,configurable:!0}),t.prototype.backendNames=function(){return Object.keys(this.registryFactory)},t.prototype.findBackend=function(t){if(!(t in this.registry)){if(!(t in this.registryFactory))return null;if(this.initializeBackend(t).asyncInit)return null}return this.registry[t]},t.prototype.findBackendFactory=function(t){return t in this.registryFactory?this.registryFactory[t].factory:null},t.prototype.registerBackend=function(t,e,n){return void 0===n&&(n=1),t in this.registryFactory?(console.warn(t+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[t]={factory:e,priority:n},!0)},t.prototype.setBackend=function(t){return o(this,void 0,void 0,(function(){var e,n,r;return s(this,(function(i){switch(i.label){case 0:if(null==this.registryFactory[t])throw new Error("Backend name '"+t+"' not found in registry");return this.backendName=t,null!=this.registry[t]?[3,4]:(this.backendInstance=null,e=this.initializeBackend(t),n=e.success,e.asyncInit?[4,n]:[3,2]);case 1:return r=i.sent(),[3,3];case 2:r=n,i.label=3;case 3:if(!r)return[2,!1];i.label=4;case 4:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new dt(this.backendInstance),[2,!0]}}))}))},t.prototype.setupRegisteredKernels=function(){var t=this;g(this.backendName).forEach((function(e){null!=e.setupFunc&&e.setupFunc(t.backendInstance)}))},t.prototype.disposeRegisteredKernels=function(t){var e=this;g(t).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(e.registry[t])}))},t.prototype.initializeBackend=function(t){var e=this,n=this.registryFactory[t];if(null==n)throw new Error("Cannot initialize backend "+t+", no registration found.");try{var r=n.factory();if(Promise.resolve(r)===r){var i=++this.pendingBackendInitId,a=r.then((function(n){return!(i<e.pendingBackendInitId||(e.registry[t]=n,e.pendingBackendInit=null,0))})).catch((function(n){return!(i<e.pendingBackendInitId||(e.pendingBackendInit=null,console.warn("Initialization of backend "+t+" failed"),console.warn(n.stack||n.message),1))}));return this.pendingBackendInit=a,{success:a,asyncInit:!0}}return this.registry[t]=r,{success:!0,asyncInit:!1}}catch(e){return console.warn("Initialization of backend "+t+" failed"),console.warn(e.stack||e.message),{success:!1,asyncInit:!1}}},t.prototype.removeBackend=function(t){if(!(t in this.registryFactory))throw new Error(t+" backend not found in registry");this.backendName===t&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},t.prototype.getSortedBackends=function(){var t=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(e,n){return t.registryFactory[n].priority-t.registryFactory[e].priority}))},t.prototype.initializeBackendsAndReturnBest=function(){for(var t=this.getSortedBackends(),e=0;e<t.length;e++){var n=t[e],r=this.initializeBackend(n),i=r.asyncInit;if(i||r.success)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")},t.prototype.moveData=function(t,e){var n=this.state.tensorInfo.get(e),r=n.backend,i=this.readSync(e);r.disposeData(e),n.backend=t,t.move(e,i,n.shape,n.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},t.prototype.tidy=function(t,e){var n,r=this,i=null;if(null==e){if("function"!=typeof t)throw new Error("Please provide a function to tidy()");e=t}else{if("string"!=typeof t&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof e)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");i=t}return this.scopedRun((function(){return r.startScope(i)}),(function(){return r.endScope(n)}),(function(){return(n=e())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))},t.prototype.scopedRun=function(t,e,n){t();try{var r=n();return e(),r}catch(t){throw e(),t}},t.prototype.nextTensorId=function(){return t.nextTensorId++},t.prototype.nextVariableId=function(){return t.nextVariableId++},t.prototype.clone=function(t){var e=this.makeTensorFromDataId(t.dataId,t.shape,t.dtype);return this.addTapeNode(this.state.activeScope.name,{x:t},[e],(function(t){return{x:function(){return t.toFloat()}}}),[],{}),e},t.prototype.runKernel=function(t,e,n,r,i){return this.runKernelFunc(null,e,null,t,n,r,i)},t.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},t.prototype.checkKernelForMemLeak=function(t,e,n){var r=this.backend.numDataIds(),i=0;n.forEach((function(t){i+="complex64"===t.dtype?3:1}));var a=r-e-i-this.state.numDataMovesStack[this.state.numDataMovesStack.length-1];if(a>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+a+" data ids) after running '"+t+"'")},t.prototype.runKernelFunc=function(t,e,n,r,i,a,o){var s,l=this,u=[],c=this.isTapeOn();null==r&&(r=null!=this.state.activeScope?this.state.activeScope.name:"");var h,d=this.state.numBytes,p=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var m,g=f(r,this.backendName);if(null!=g)h=function(){var t=l.backend.numDataIds();m=g.kernelFunc({inputs:e,attrs:i,backend:l.backend});var n=Array.isArray(m)?m:[m];l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(r,t,n);var s=n.map((function(t){return l.makeTensorFromDataId(t.dataId,t.shape,t.dtype)}));if(c){var h=l.getTensorsForGradient(r,e,s);if(null==h){null==o&&(o=[]);var d=s.filter((function(t,e){return o[e]}));h=(a||[]).slice().concat(d)}u=l.saveTensorsForBackwardMode(h)}return s};else{var y=function(t){c&&(u=t.map((function(t){return l.keep(l.clone(t))})))};h=function(){var e=l.backend.numDataIds();m=l.tidy((function(){return t(l.backend,y)}));var n=Array.isArray(m)?m:[m];return l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(r,e,n),n}}return this.scopedRun((function(){return l.state.kernelDepth++}),(function(){return l.state.kernelDepth--}),(function(){s=l.ENV.getBool("DEBUG")?l.profiler.profileKernel(r,e,(function(){return h()})):h()})),c&&this.addTapeNode(r,e,s,n,u,i),this.state.profiling&&this.state.activeProfile.kernels.push({name:r,bytesAdded:this.state.numBytes-d,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-p,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(e).map((function(t){return e[t].shape})),outputShapes:s.map((function(t){return t.shape}))}),Array.isArray(m)?s:s[0]},t.prototype.saveTensorsForBackwardMode=function(t){var e=this;return t.map((function(t){return e.keep(e.clone(t))}))},t.prototype.getTensorsForGradient=function(t,e,n){var r=m(t);if(null!=r){var i=r.inputsToSave||[],a=r.outputsToSave||[],o=void 0;r.saveAllInputs?(E(Array.isArray(e),(function(){return"saveAllInputs is true, expected inputs to be an array."})),o=Object.keys(e).map((function(t){return e[t]}))):o=i.map((function(t){return e[t]}));var s=n.filter((function(t,e){return a[e]}));return o.concat(s)}return null},t.prototype.makeTensor=function(t,e,n,r){if(null==t)throw new Error("Values passed to engine.makeTensor() are null");r=r||this.backend;var i=t;"string"===(n=n||"float32")&&K(t[0])&&(i=t.map((function(t){return st(t)})));var a=r.write(i,e,n),o=new xt(e,n,a,this.nextTensorId());if(this.incRef(o,r),"string"===n){var s=this.state.tensorInfo.get(a),l=$(i);this.state.numBytes+=l-s.bytes,s.bytes=l}return o},t.prototype.makeTensorFromDataId=function(t,e,n,r){var i=new xt(e,n=n||"float32",t,this.nextTensorId());return this.incRef(i,r),i},t.prototype.makeVariable=function(t,e,n,r){void 0===e&&(e=!0),n=n||this.nextVariableId().toString(),null!=r&&r!==t.dtype&&(t=t.asType(r));var i=new Dt(t,e,n,this.nextTensorId());if(null!=this.state.registeredVariables[i.name])throw new Error("Variable with name "+i.name+" was already registered");return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i},t.prototype.incRef=function(t,e){var n=this.state.tensorInfo.has(t.dataId)?this.state.tensorInfo.get(t.dataId).refCount:0;if(this.state.numTensors++,"string"===t.dtype&&this.state.numStringTensors++,0===n){this.state.numDataBuffers++;var r=0;"complex64"!==t.dtype&&"string"!==t.dtype&&(r=t.size*G(t.dtype)),this.state.tensorInfo.set(t.dataId,{backend:e||this.backend,dtype:t.dtype,shape:t.shape,bytes:r,refCount:0}),this.state.numBytes+=r}this.state.tensorInfo.get(t.dataId).refCount++,t instanceof Dt||this.track(t)},t.prototype.disposeTensor=function(t){if(this.state.tensorInfo.has(t.dataId)){this.state.numTensors--,"string"===t.dtype&&this.state.numStringTensors--;var e=this.state.tensorInfo.get(t.dataId);e.refCount<=1?("complex64"!==t.dtype&&(this.state.numBytes-=e.bytes),this.state.numDataBuffers--,e.backend.disposeData(t.dataId),this.state.tensorInfo.delete(t.dataId)):this.state.tensorInfo.get(t.dataId).refCount--}},t.prototype.disposeVariables=function(){for(var t in this.state.registeredVariables)this.disposeVariable(this.state.registeredVariables[t])},t.prototype.disposeVariable=function(t){this.disposeTensor(t),null!=this.state.registeredVariables[t.name]&&delete this.state.registeredVariables[t.name]},t.prototype.memory=function(){var t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,null==t.reasons&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t},t.prototype.profile=function(t){return o(this,void 0,void 0,(function(){var e,n;return s(this,(function(r){return this.state.profiling=!0,e=this.state.numBytes,n=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map((function(t){return t.totalBytesSnapshot}))),this.state.activeProfile.newBytes=this.state.numBytes-e,this.state.activeProfile.newTensors=this.state.numTensors-n,[2,this.state.activeProfile]}))}))},t.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth},t.prototype.addTapeNode=function(t,e,n,r,i,a){var o=this,s={id:this.state.nextTapeNodeId++,kernelName:t,inputs:e,outputs:n,saved:i},l=m(t);null!=l&&(r=l.gradFunc),null!=r&&(s.gradient=function(t){return t=t.map((function(t,e){if(null==t){var r=n[e],i=it(r.size,r.dtype);return o.makeTensor(i,r.shape,r.dtype)}return t})),r(t.length>1?t:t[0],i,a)}),this.state.activeTape.push(s)},t.prototype.keep=function(t){return t.kept=!0,t},t.prototype.startTape=function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++},t.prototype.endTape=function(){this.state.gradientDepth--},t.prototype.startScope=function(t){var e={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(e.name=t),this.state.scopeStack.push(e),this.state.activeScope=e},t.prototype.endScope=function(t){for(var e=this,n=Mt(t),r=new Set(n.map((function(t){return t.id}))),i=0;i<this.state.activeScope.track.length;i++){var a=this.state.activeScope.track[i];a.kept||r.has(a.id)||a.dispose()}var o=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(t){t.kept||t.scopeId!==o.id||e.track(t)}))},t.prototype.gradients=function(t,e,n,r){var i=this;if(void 0===r&&(r=!1),E(e.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '"+n.dtype+"'");var a=this.scopedRun((function(){return i.startTape()}),(function(){return i.endTape()}),(function(){return i.tidy("forward",t)}));E(a instanceof xt,(function(){return"The result y returned by f() must be a tensor."}));var o=function(t,e,n){for(var r={},i={},a=0;a<e.length;a++)r[e[a].id]=!0;for(a=0;a<t.length;a++){var o=(f=t[a]).inputs;for(var s in o){for(var l=o[s],u=!1,c=0;c<e.length;c++)if(r[l.id]){f.outputs.forEach((function(t){return r[t.id]=!0})),u=!0,i[f.id]=!0;break}if(u)break}}var h={};h[n.id]=!0;var d={};for(a=t.length-1;a>=0;a--)for(o=(f=t[a]).inputs,c=0;c<f.outputs.length;c++)if(h[f.outputs[c].id]){for(var s in o)h[o[s].id]=!0,d[f.id]=!0;break}var p=[];for(a=0;a<t.length;a++){var f;if(i[(f=t[a]).id]&&d[f.id]){var m={};for(var s in f.inputs){var g=f.inputs[s];r[g.id]&&(m[s]=g)}var y=Object.assign({},f);y.inputs=m,y.outputs=f.outputs,p.push(y)}}return p}(this.state.activeTape,e,a);if(!r&&0===o.length&&e.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var t,r,s={};s[a.id]=null==n?(r=rt(T(t=a.shape),"float32"),Bt.makeTensor(r,t,"float32")):n,function(t,e,n){for(var r=function(r){var i=e[r],a=[];if(i.outputs.forEach((function(e){var n=t[e.id];a.push(null!=n?n:null)})),null==i.gradient)throw new Error("Cannot compute gradient: gradient function not found for "+i.kernelName+".");var o=i.gradient(a),s=function(e){if(!(e in o))throw new Error("Cannot backprop through input "+e+". Available gradients found: "+Object.keys(o)+".");var r=n((function(){return o[e]()}));if("float32"!==r.dtype)throw new Error("Error in gradient for op "+i.kernelName+". The gradient of input "+e+" must have 'float32' dtype, but has '"+r.dtype+"'");var a=i.inputs[e];if(!N(r.shape,a.shape))throw new Error("Error in gradient for op "+i.kernelName+". The gradient of input '"+e+"' has shape '"+r.shape+"', which does not match the shape of the input '"+a.shape+"'");if(null==t[a.id])t[a.id]=r;else{var s=t[a.id];t[a.id]=s.add(r),s.dispose()}};for(var l in i.inputs)s(l)},i=e.length-1;i>=0;i--)r(i)}(s,o,(function(t){return i.tidy(t)}));var l=e.map((function(t){return s[t.id]}));return 0===i.state.gradientDepth&&(i.state.activeTape.forEach((function(t){for(var e=0,n=t.saved;e<n.length;e++)n[e].dispose()})),i.state.activeTape=null),{value:a,grads:l}}))},t.prototype.customGrad=function(t){var e=this;return E(Q(t),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];E(r.every((function(t){return t instanceof xt})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var a={};return r.forEach((function(t,e){a[e]=t})),e.runKernelFunc((function(e,i){return E((n=t.apply(void 0,r.concat([i]))).value instanceof xt,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),E(Q(n.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),n.value}),a,(function(t,e){var i=n.gradFunc(t,e),a=Array.isArray(i)?i:[i];E(a.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),E(a.every((function(t){return t instanceof xt})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var o={};return a.forEach((function(t,e){o[e]=function(){return t}})),o}))}},t.prototype.readSync=function(t){return this.state.tensorInfo.get(t).backend.readSync(t)},t.prototype.read=function(t){return this.state.tensorInfo.get(t).backend.read(t)},t.prototype.time=function(t){return o(this,void 0,void 0,(function(){var e,n;return s(this,(function(r){switch(r.label){case 0:return e=at(),[4,this.backend.time(t)];case 1:return(n=r.sent()).wallMs=at()-e,[2,n]}}))}))},t.prototype.track=function(t){return null!=this.state.activeScope&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t},Object.defineProperty(t.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),t.prototype.reset=function(){for(var t in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new zt,this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},t.nextTensorId=0,t.nextVariableId=0,t}(),Bt=function(){var t=function(){if(null==Pt){var t=void 0;if("undefined"!=typeof window)t=window;else if("undefined"!=typeof global)t=global;else if("undefined"!=typeof process)t=process;else{if("undefined"==typeof self)throw new Error("Could not find a global object");t=self}Pt=t}return Pt}();if(null==t._tfengine){var e=new l(t);t._tfengine=new Vt(e)}return function(t){h=t}(t._tfengine.ENV),bt=function(){return t._tfengine},t._tfengine}();function jt(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}var Ut=c();Ut.registerFlag("DEBUG",(function(){return!1}),(function(t){t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),Ut.registerFlag("IS_BROWSER",(function(){return jt()})),Ut.registerFlag("IS_NODE",(function(){return"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node})),Ut.registerFlag("IS_CHROME",(function(){return"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),Ut.registerFlag("PROD",(function(){return!1})),Ut.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return Ut.getBool("DEBUG")})),Ut.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),Ut.registerFlag("IS_TEST",(function(){return!1}));var Wt,Ht,qt,Gt={},$t={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Kt(t,e){Gt[t]=e}function Xt(t){t in Gt||(Gt[t]=function(t){if(1!==t&&2!==t)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var e=function(t){if("undefined"!=typeof OffscreenCanvas&&2===t)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(t);return e.addEventListener("webglcontextlost",(function(e){e.preventDefault(),delete Gt[t]}),!1),1===t?e.getContext("webgl",$t)||e.getContext("experimental-webgl",$t):e.getContext("webgl2",$t)}(t));var e=Gt[t];return e.isContextLost()?(delete Gt[t],Xt(t)):(e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.BLEND),e.disable(e.DITHER),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SAMPLE_COVERAGE),e.enable(e.SCISSOR_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),Gt[t])}function Yt(t,e){return[e,t]}function Zt(t){var e=T(t);return F(Math.ceil(e/4))}function Qt(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function Jt(t,e){var n,r,i,a,o,s,l,u,h,d=t;return 2===c().getNumber("WEBGL_VERSION")?(n=d.R32F,r=d.R16F,i=d.RGBA16F,a=d.RGBA32F,o=d.RED,s=4,l=1,u=d.HALF_FLOAT,h=d.FLOAT):(n=t.RGBA,r=t.RGBA,i=t.RGBA,a=d.RGBA,o=t.RGBA,s=4,l=4,u=null!=e?e.HALF_FLOAT_OES:null,h=t.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:a,textureFormatFloat:o,downloadTextureFormat:t.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:l,textureTypeHalfFloat:u,textureTypeFloat:h}}function te(t,e,n){var r=n();return e&&function(t){var e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+ie(t,e))}(t),r}!function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"}(Wt||(Wt={})),function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"}(Ht||(Ht={})),function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(qt||(qt={}));var ee=5.96e-8,ne=65504;function re(t){return!!(c().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===t||ee<Math.abs(t)&&Math.abs(t)<ne)}function ie(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+e}}function ae(t,e,n){return Ae(t,e,(function(){return t.getExtension(n)}),'Extension "'+n+'" not supported on this browser.')}function oe(t,e,n){var r=Ae(t,e,(function(){return t.createShader(t.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(te(t,e,(function(){return t.shaderSource(r,n)})),te(t,e,(function(){return t.compileShader(r)})),!1===t.getShaderParameter(r,t.COMPILE_STATUS))throw console.log(t.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function se(t,e,n){var r=Ae(t,e,(function(){return t.createShader(t.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(te(t,e,(function(){return t.shaderSource(r,n)})),te(t,e,(function(){return t.compileShader(r)})),!1===t.getShaderParameter(r,t.COMPILE_STATUS))throw function(t,e){var n=ce.exec(e);if(null==n)return console.log("Couldn't parse line number in error: "+e),void console.log(t);for(var r=+n[1],i=t.split("\n"),a=i.length.toString().length+2,o=i.map((function(t,e){return M((e+1).toString(),a)+t})),s=0,l=0;l<o.length;l++)s=Math.max(o[l].length,s);var u=o.slice(0,r-1),c=o.slice(r-1,r),h=o.slice(r);console.log(u.join("\n")),console.log(e.split("\n")[0]),console.log("%c "+M(c[0],s),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(h.join("\n"))}(n,t.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var le,ue,ce=/ERROR: [0-9]+:([0-9]+):/g;function he(t,e){return Ae(t,e,(function(){return t.createProgram()}),"Unable to create WebGLProgram.")}function de(t,e,n){if(te(t,e,(function(){return t.linkProgram(n)})),!1===t.getProgramParameter(n,t.LINK_STATUS))throw console.log(t.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function pe(t,e,n){if(te(t,e,(function(){return t.validateProgram(n)})),!1===t.getProgramParameter(n,t.VALIDATE_STATUS))throw console.log(t.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function fe(t,e,n){var r=Ae(t,e,(function(){return t.createBuffer()}),"Unable to create WebGLBuffer");return te(t,e,(function(){return t.bindBuffer(t.ARRAY_BUFFER,r)})),te(t,e,(function(){return t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW)})),r}function me(t,e,n){var r=Ae(t,e,(function(){return t.createBuffer()}),"Unable to create WebGLBuffer");return te(t,e,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r)})),te(t,e,(function(){return t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW)})),r}function ge(t,e){return Ae(t,e,(function(){return t.createTexture()}),"Unable to create WebGLTexture.")}function ye(t,e){var n=c().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){var r="["+t+"x"+e+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n)throw r="["+t+"x"+e+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU ["+n+"x"+n+"].")}function ve(t,e){return Ae(t,e,(function(){return t.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}function be(t,e,n,r,i,a,o,s){var l=t.getAttribLocation(n,r);return-1!==l&&(te(t,e,(function(){return t.bindBuffer(t.ARRAY_BUFFER,i)})),te(t,e,(function(){return t.vertexAttribPointer(l,a,t.FLOAT,!1,o,s)})),te(t,e,(function(){return t.enableVertexAttribArray(l)})),!0)}function we(t,e,n,r){De(t,r),te(t,e,(function(){return t.activeTexture(t.TEXTURE0+r)})),te(t,e,(function(){return t.bindTexture(t.TEXTURE_2D,n)}))}function _e(t,e,n,r){return Ae(t,e,(function(){return t.getUniformLocation(n,r)}),'uniform "'+r+'" not present in program.')}function xe(t,e,n){return t.getUniformLocation(e,n)}function Ce(t,e,n,r,i,a){te(t,e,(function(){return we(t,e,r,a)})),te(t,e,(function(){return t.uniform1i(i,a)}))}function Se(t,e,n,r){te(t,e,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,r)})),te(t,e,(function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0)}))}function ke(t,e,n){te(t,e,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,n)})),te(t,e,(function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)}))}function Ee(t){var e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Ie(t,e))}function Ie(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+e}}function Ae(t,e,n,r){var i=te(t,e,(function(){return n()}));if(null==i)throw new Error(r);return i}function De(t,e){var n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n)throw new Error("textureUnit must be in [gl.TEXTURE0, gl.TEXTURE"+n+"].")}function Te(t,e){return void 0===e&&(e=2),T(t.slice(0,t.length-e))}function Ne(t){if(0===t.length)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function Re(t){var e=[1,1,1];return 0===t.length||1===t.length&&1===t[0]||(e=[Te(t)].concat(Ne(t))),e}function Oe(t,e){var n;void 0===e&&(e=!1);var r=c().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e&&(r*=2,1===(t=t.map((function(e,n){return n>=t.length-2?S(t[n]):t[n]}))).length&&(t=[2,t[0]])),2!==t.length){var i=V(t);t=i.newShape}var a=T(t);if(t.length<=1&&a<=r)return[1,a];if(2===t.length&&t[0]<=r&&t[1]<=r)return t;if(3===t.length&&t[0]*t[1]<=r&&t[2]<=r)return[t[0]*t[1],t[2]];if(3===t.length&&t[0]<=r&&t[1]*t[2]<=r)return[t[0],t[1]*t[2]];if(4===t.length&&t[0]*t[1]*t[2]<=r&&t[3]<=r)return[t[0]*t[1]*t[2],t[3]];if(4===t.length&&t[0]<=r&&t[1]*t[2]*t[3]<=r)return[t[0],t[1]*t[2]*t[3]];if(e){var o=Te(t),s=2,l=2;return t.length&&(s=(n=Ne(t))[0],l=n[1]),F(a=o*(s/2)*(l/2)).map((function(t){return 2*t}))}return F(a)}function Fe(t){return t%2==0}function Me(t,e){if(N(t=t.slice(-2),e=e.slice(-2)))return!0;if(!t.length||!e.length)return!0;if(0===t[0]||0===t[1]||0===e[0]||0===e[1])return!0;if(t.length!==e.length){var n=t.slice(-1)[0],r=e.slice(-1)[0];if(n===r)return!0;if(Fe(n)&&Fe(r)&&(1===t[0]||1===e[0]))return!0}return t[1]===e[1]&&Fe(t[0])&&Fe(e[0])}function Pe(t){if(null==le){var e=Xt(t);le=e.getParameter(e.MAX_TEXTURE_SIZE)}return le}function Le(t){if(null==ue){var e=Xt(t);ue=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,ue)}function ze(t){if(0===t)return 0;var e=Xt(t);return Ve(e,"EXT_disjoint_timer_query_webgl2")&&2===t?2:Ve(e,"EXT_disjoint_timer_query")?1:0}function Ve(t,e){return null!=t.getExtension(e)}function Be(t){try{if(null!=Xt(t))return!0}catch(t){return!1}return!1}function je(t){if(0===t)return!1;var e=Xt(t);if(1===t){if(!Ve(e,"OES_texture_float"))return!1}else if(!Ve(e,"EXT_color_buffer_float"))return!1;return We(e)}function Ue(t){if(0===t)return!1;var e=Xt(t);if(1!==t){if(Ve(e,"EXT_color_buffer_float"))return We(e);if(Ve(e,"EXT_color_buffer_half_float")){var n=e.getExtension("EXT_color_buffer_half_float");return function(t,e){var n=Jt(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);var a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(i),a}(e,n)}return!1}return!!Ve(e,"OES_texture_float")&&!!Ve(e,"WEBGL_color_buffer_float")&&We(e)}function We(t){var e=Jt(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);var r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);var i=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(r),i}function He(t){return 2===t&&null!=Xt(t).fenceSync}var qe=Object.freeze({callAndCheck:te,canBeRepresented:re,getWebGLErrorMessage:ie,getExtensionOrThrow:ae,createVertexShader:oe,createFragmentShader:se,createProgram:he,linkProgram:de,validateProgram:pe,createStaticVertexBuffer:fe,createStaticIndexBuffer:me,getNumChannels:function(){return 2===c().getNumber("WEBGL_VERSION")?1:4},createTexture:ge,validateTextureSize:ye,createFramebuffer:ve,bindVertexBufferToProgramAttribute:be,bindTextureUnit:we,unbindTextureUnit:function(t,e,n){De(t,n),te(t,e,(function(){return t.activeTexture(t.TEXTURE0+n)})),te(t,e,(function(){return t.bindTexture(t.TEXTURE_2D,null)}))},getProgramUniformLocationOrThrow:_e,getProgramUniformLocation:xe,bindTextureToProgramUniformSampler:Ce,bindCanvasToFramebuffer:function(t,e){te(t,e,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),te(t,e,(function(){return t.viewport(0,0,t.canvas.width,t.canvas.height)})),te(t,e,(function(){return t.scissor(0,0,t.canvas.width,t.canvas.height)}))},bindColorTextureToFramebuffer:Se,unbindColorTextureFromFramebuffer:ke,validateFramebuffer:Ee,getFramebufferErrorMessage:Ie,getBatchDim:Te,getRowsCols:Ne,getShapeAs3D:Re,getTextureShapeFromLogicalShape:Oe,isReshapeFree:Me,getWebGLMaxTextureSize:Pe,resetMaxTextureSize:function(){le=null},resetMaxTexturesInShader:function(){ue=null},getMaxTexturesInShader:Le,getWebGLDisjointQueryTimerVersion:ze,hasExtension:Ve,isWebGLVersionEnabled:Be,isCapableOfRenderingToFloatTexture:je,isDownloadFloatTextureEnabled:Ue,isWebGLFenceEnabled:He}),Ge=c();function $e(){c().set("PROD",!0)}function Ke(){c().set("DEBUG",!0)}function Xe(){c().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function Ye(t){c().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Ze(){Bt.disposeVariables()}function Qe(){return Bt}function Je(){return Bt.memory()}function tn(t){return Bt.profile(t)}function en(t,e){return Bt.tidy(t,e)}function nn(t){Mt(t).forEach((function(t){return t.dispose()}))}function rn(t){return Bt.keep(t)}function an(t){return Bt.time(t)}function on(t){return Bt.setBackend(t)}function sn(){return Bt.ready()}function ln(){return Bt.backendName}function un(t){Bt.removeBackend(t)}function cn(t){return Bt.findBackend(t)}function hn(t){return Bt.findBackendFactory(t)}function dn(t,e,n){return void 0===n&&(n=1),Bt.registerBackend(t,e,n)}function pn(){return Bt.backend}function fn(t,e){c().setPlatform(t,e)}function mn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c().getBool("IS_TEST")||console.warn.apply(console,t)}function gn(t,e){var n=t;if(q(t))return"string"===e?[]:[t.length];if(!Array.isArray(t))return[];for(var r=[];Array.isArray(n)||q(n)&&"string"!==e;)r.push(n.length),n=n[0];return Array.isArray(t)&&c().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function t(e,n,r){if(r=r||[],Array.isArray(e)||q(e)){E(n.length>0,(function(){return"Element arr["+r.join("][")+"] should be a primitive, but is an array of "+e.length+" elements"})),E(e.length===n[0],(function(){return"Element arr["+r.join("][")+"] should have "+n[0]+" elements, but has "+e.length+" elements"}));for(var i=n.slice(1),a=0;a<e.length;++a)t(e[a],i,r.concat(a))}else E(0===n.length,(function(){return"Element arr["+r.join("][")+"] is a primitive, but should be an array/TypedArray of "+n[0]+" elements"}))}(t,r,[]),r}function yn(t,e,n,r){if(null!=t&&("numeric"!==t&&t!==e||"numeric"===t&&"string"===e))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+t+" tensor, but got "+e+" tensor")}function vn(t,e,n,r){if(void 0===r&&(r="numeric"),t instanceof xt)return yn(r,t.dtype,e,n),t;var i=Z(t);if("string"!==i&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),yn(r,i,e,n),null==t||!q(t)&&!Array.isArray(t)&&"number"!=typeof t&&"boolean"!=typeof t&&"string"!=typeof t)throw new Error("Argument '"+e+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+(null==t?"null":t.constructor.name)+"'");var a=gn(t,i);q(t)||Array.isArray(t)||(t=[t]);var o="string"!==i?et(t,i,c().getBool("DEBUG")):D(t,[],!0);return Bt.makeTensor(o,a,i)}function bn(t,e,n,r){if(void 0===r&&(r="numeric"),!Array.isArray(t))throw new Error("Argument "+e+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return t.map((function(t,r){return vn(t,e+"["+r+"]",n)}),r)}function wn(t,e){for(var n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function _n(t,e,n){for(var r=t.length+e.length,i=[],a=0,o=0,s=0;s<r;s++)-1===n.indexOf(s)?i.push(t[a++]):i.push(e[o++]);return i}function xn(t,e){for(var n=[],r=t.length,i=0;i<r;i++)-1===e.indexOf(i)&&n.push(t[i]);return[n,e.map((function(e){return t[e]}))]}function Cn(t,e){return _n(t,e.map((function(t){return 1})),e)}function Sn(t,e,n){E(wn(e,n),(function(){return t+" supports only inner-most axes for now. Got axes "+e+" and rank-"+n+" input."}))}function kn(t,e){if(wn(t,e))return null;for(var n=[],r=0;r<e;++r)-1===t.indexOf(r)&&n.push(r);return t.forEach((function(t){return n.push(t)})),n}function En(t){return t.map((function(t,e){return[e,t]})).sort((function(t,e){return t[1]-e[1]})).map((function(t){return t[0]}))}function In(t,e){for(var n=[],r=e-t;r<e;++r)n.push(r);return n}function An(t,e){var n=t[0].length;t.forEach((function(t,e){E(t.length===n,(function(){return"Error in concat"+n+"D: rank of tensors["+e+"] must be the same as the rank of the rest ("+n+")"}))})),E(e>=0&&e<n,(function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."}));var r=t[0];t.forEach((function(t,i){for(var a=0;a<n;a++)E(a===e||t[a]===r[a],(function(){return"Error in concat"+n+"D: Shape of tensors["+i+"] ("+t+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+i+"."}))}))}function Dn(t,e){for(var n=t[0].slice(),r=1;r<t.length;r++)n[e]+=t[r][e];return n}function Tn(t){var e=Object.keys(t);if(1!==e.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+e.length+" keys.");var n=e[0],r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var i=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Bt.startScope(n);try{var i=r.apply(void 0,t);return i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),Bt.endScope(i),i}catch(t){throw Bt.endScope(null),t}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}Ge.registerFlag("HAS_WEBGL",(function(){return Ge.getNumber("WEBGL_VERSION")>0})),Ge.registerFlag("WEBGL_VERSION",(function(){return Be(2)?2:Be(1)?1:0})),Ge.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===Ge.get("WEBGL_VERSION")})),Ge.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),Ge.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),Ge.registerFlag("WEBGL_PACK",(function(){return Ge.getBool("HAS_WEBGL")})),Ge.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return Ge.getBool("WEBGL_PACK")})),Ge.registerFlag("WEBGL_PACK_CLIP",(function(){return Ge.getBool("WEBGL_PACK")})),Ge.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return!1})),Ge.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return Ge.getBool("WEBGL_PACK")})),Ge.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return Ge.getBool("WEBGL_PACK")})),Ge.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return Ge.getBool("WEBGL_PACK")})),Ge.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return Ge.getBool("WEBGL_PACK")})),Ge.registerFlag("WEBGL_PACK_REDUCE",(function(){return Ge.getBool("WEBGL_PACK")})),Ge.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return Ge.getBool("WEBGL_PACK")})),Ge.registerFlag("WEBGL_CONV_IM2COL",(function(){return Ge.getBool("WEBGL_PACK")})),Ge.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return Pe(Ge.getNumber("WEBGL_VERSION"))})),Ge.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return Le(Ge.getNumber("WEBGL_VERSION"))})),Ge.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var t=Ge.getNumber("WEBGL_VERSION");return 0===t?0:ze(t)})),Ge.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return Ge.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(t=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))));var t})),Ge.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return je(Ge.getNumber("WEBGL_VERSION"))})),Ge.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!Ge.getBool("WEBGL_FORCE_F16_TEXTURES")&&Ge.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),Ge.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return Ue(Ge.getNumber("WEBGL_VERSION"))})),Ge.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return He(Ge.getNumber("WEBGL_VERSION"))})),Ge.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return Ge.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),_t=Ye;var Nn=Tn({complex_:function(t,e){var n=vn(t,"real","complex"),r=vn(e,"imag","complex");return I(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),Bt.runKernelFunc((function(t){return t.complex(n,r)}),{$real:n,$imag:r})}}),Rn=Tn({real_:function(t){var e=vn(t,"input","real");return Bt.runKernelFunc((function(t){return t.real(e)}),{$input:e})}}),On=Tn({imag_:function(t){var e=vn(t,"input","imag");return Bt.runKernelFunc((function(t){return t.imag(e)}),{$input:e})}});function Fn(t,e,n){return Mn(t,e,gn(t,n),n)}function Mn(t,e,n,r){if(null==r&&(r=Z(t)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!q(t)&&!Array.isArray(t)&&"number"!=typeof t&&"boolean"!=typeof t&&"string"!=typeof t)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=e){ot(e);var i=T(e),a=T(n);E(i===a,(function(){return"Based on the provided shape, ["+e+"], the tensor should have "+i+" values but has "+a}));for(var o=0;o<n.length;++o){var s=o!==n.length-1||n[o]!==T(e.slice(o));E(n[o]===e[o]||!s,(function(){return"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+e+"). "}))}}return q(t)||Array.isArray(t)||(t=[t]),e=e||n,t="string"!==r?et(t,r,c().getBool("DEBUG")):D(t,[],!0),Bt.makeTensor(t,e,r)}function Pn(t,e){if((q(t)&&"string"!==e||Array.isArray(t))&&"complex64"!==e)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===e&&q(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Mn(t,[],[],e)}function Ln(t,e){A(t);var n=gn(t,e);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Mn(t,null,n,e)}function zn(t,e,n){if(A(t),null!=e&&2!==e.length)throw new Error("tensor2d() requires shape to have two numbers");var r=gn(t,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Mn(t,e,r,n)}function Vn(t,e,n){if(A(t),null!=e&&3!==e.length)throw new Error("tensor3d() requires shape to have three numbers");var r=gn(t,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Mn(t,e,r,n)}function Bn(t,e,n){if(A(t),null!=e&&4!==e.length)throw new Error("tensor4d() requires shape to have four numbers");var r=gn(t,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Mn(t,e,r,n)}function jn(t,e,n){if(A(t),null!=e&&5!==e.length)throw new Error("tensor5d() requires shape to have five numbers");var r=gn(t,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Mn(t,e,r,n)}function Un(t,e,n){if(A(t),null!=e&&6!==e.length)throw new Error("tensor6d() requires shape to have six numbers");var r=gn(t,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Mn(t,e=e||r,r,n)}function Wn(t,e,n,r){return void 0===e&&(e=!0),Bt.makeVariable(t,e,n,r)}function Hn(t,e){if(void 0===e&&(e="float32"),"complex64"===e){var n=Hn(t,"float32"),r=qn(t,"float32");return Nn(n,r)}var i=rt(T(t),e);return Bt.makeTensor(i,t,e)}function qn(t,e){if(void 0===e&&(e="float32"),"complex64"===e){var n=qn(t,"float32"),r=qn(t,"float32");return Nn(n,r)}var i=it(T(t),e);return Bt.makeTensor(i,t,e)}function Gn(t,e,n){return Bt.runKernelFunc((function(r){return r.fill(t,e,n)}),{})}function $n(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");return Bt.runKernelFunc((function(r){return r.linspace(t,e,n)}),{})}function Kn(t,e,n,r){if(void 0===n&&(n=1),void 0===r&&(r="float32"),0===n)throw new Error("Cannot have a step of zero");if(t===e||t<e&&n<0||e<t&&n>1)return qn([0],r);var i=it(Math.abs(Math.ceil((e-t)/n)),r);e<t&&1===n&&(n=-1),i[0]=t;for(var a=1;a<i.length;a++)i[a]=i[a-1]+n;return Ln(i,r)}var Xn=Tn({onesLike_:function(t){var e=vn(t,"x","onesLike");if("complex64"===e.dtype){var n=Xn(Rn(e)),r=Yn(On(e));return Nn(n,r)}return Bt.runKernelFunc((function(t){return t.onesLike(e)}),{x:e},(function(t,e){return{x:function(){return Yn(t)}}}),"OnesLike")}}),Yn=Tn({zerosLike_:function(t){var e=vn(t,"x","zerosLike");return Bt.runKernelFunc((function(t){return t.zerosLike(e)}),{x:e},(function(t,e){return{x:function(){return Yn(t)}}}),"ZerosLike")}}),Zn=Tn({concat_:function(t,e){void 0===e&&(e=0),E(t.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=bn(t,"tensors","concat");"complex64"===n[0].dtype&&n.forEach((function(t){if("complex64"!==t.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype "+t.dtype+". ")})),e=z(e,n[0].shape)[0];var r=Dn(n.map((function(t){return t.shape})),e);if(0===T(r))return Fn([],r);if(1===(n=n.filter((function(t){return t.size>0}))).length)return n[0];var i=n.map((function(t){return t.shape}));return An(i,e),Bt.runKernelFunc((function(t){return t.concat(n,e)}),n,(function(t){var n=i.map((function(t){return t[e]}));return nr(t,n,e).map((function(t){return function(){return t}}))}),"Concat",{axis:e})}}),Qn=Tn({concat1d_:function(t){return Zn(t,0)}}),Jn=Tn({concat2d_:function(t,e){return Zn(t,e)}}),tr=Tn({concat3d_:function(t,e){return Zn(t,e)}}),er=Tn({concat4d_:function(t,e){return Zn(t,e)}}),nr=Tn({split_:function(t,e,n){void 0===n&&(n=0);var r,i=vn(t,"x","split");return n=z(n,i.shape)[0],"number"==typeof e?(E(i.shape[n]%e==0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(e).fill(i.shape[n]/e)):(E(i.shape[n]===e.reduce((function(t,e){return t+e})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=e),Bt.runKernelFunc((function(t){return t.split(i,r,n)}),{$x:i},(function(t){return{$x:function(){return Zn(t,n)}}}))}});function rr(t,e,n){return void 0===e&&(e="float32"),e=e||"float32",ot(t),new vt(t,e,n)}function ir(t,e){void 0===e&&(e=!1),console.log(t.toString(e))}var ar=Tn({batchToSpaceND_:function(t,e,n){var r=vn(t,"x","batchToSpaceND"),i=e.reduce((function(t,e){return t*e}));return E(r.rank>=1+e.length,(function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+e.length})),E(n.length===e.length,(function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+e.length})),E(r.shape[0]%i==0,(function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+e.join(" * ")+" === "+i})),Bt.runKernelFunc((function(t){return t.batchToSpaceND(r,e,n)}),{$x:r},(function(t){return{$x:function(){return t.spaceToBatchND(e,n)}}}))}}),or=Tn({cast_:function(t,e){var n=vn(t,"x","cast");if(!W(e))throw new Error("Failed to cast to unknown dtype "+e);if("string"===e&&"string"!==n.dtype||"string"!==e&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");return Bt.runKernelFunc((function(t){return t.cast(n,e)}),{x:n},(function(t){return{x:function(){return t.clone()}}}),"Cast",{dtype:e})}}),sr=Tn({cumsum_:function(t,e,n,r){void 0===e&&(e=0),void 0===n&&(n=!1),void 0===r&&(r=!1);var i=vn(t,"x","cumsum"),a=kn([e|=0],i.rank),o=i;null!=a&&(o=i.transpose(a));var s=In(1,i.rank)[0],l=Bt.runKernelFunc((function(t){return t.cumsum(o,s,n,r)}),{permutedX:o},(function(t){return{permutedX:function(){return t.cumsum(e,n,!r)}}}));return null!=a&&(l=l.transpose(a)),l}}),lr=Tn({depthToSpace_:function(t,e,n){void 0===n&&(n="NHWC");var r=vn(t,"x","depthToSpace"),i="NHWC"===n?r.shape[1]:r.shape[2],a="NHWC"===n?r.shape[2]:r.shape[3],o="NHWC"===n?r.shape[3]:r.shape[1];return E(i*e>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n      "+i+" and "+e+"  for depthToSpace with input shape\n      "+r.shape})),E(a*e>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n      "+a+" and "+e+" for depthToSpace with input shape\n          "+r.shape})),E(o%(e*e)==0,(function(){return"Dimension size must be evenly divisible by "+e*e+" but is "+o+" for depthToSpace with input shape "+r.shape})),Bt.runKernelFunc((function(t){return t.depthToSpace(r,e,n)}),{$x:r})}}),ur=Tn({expandDims_:function(t,e){void 0===e&&(e=0);var n=vn(t,"x","expandDims",null);E(e<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n.shape.slice();return e<0&&(E(-(n.rank+1)<=e,(function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"})),e=n.rank+e+1),r.splice(e,0,1),cr(n,r)}}),cr=Tn({reshape_:function(t,e){var n=vn(t,"x","reshape",null);return e=L(e,n.size),E(n.size===T(e),(function(){return"new shape and old shape must have the same number of elements."})),Bt.runKernelFunc((function(t){return t.reshape(n,e)}),{x:n},(function(t){return{x:function(){return t.reshape(n.shape)}}}),"Reshape",{shape:e})}}),hr=Tn({spaceToBatchND_:function(t,e,n){var r=vn(t,"x","spaceToBatchND");return E(r.rank>=1+e.length,(function(){return"input rank "+r.rank+" should be > than [blockShape] "+e.length})),E(n.length===e.length,(function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+e.length})),E(r.shape.reduce((function(t,r,i){return i>0&&i<=e.length?t&&(r+n[i-1][0]+n[i-1][1])%e[i-1]==0:t}),!0),(function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+e.toString()})),Bt.runKernelFunc((function(t){return t.spaceToBatchND(r,e,n)}),{$x:r},(function(t){return{$x:function(){return t.batchToSpaceND(e,n)}}}))}}),dr=Tn({squeeze_:function(t,e){var n=vn(t,"x","squeeze");return cr(n,V(n.shape,e).newShape)}}),pr=Tn({stack_:function(t,e){void 0===e&&(e=0);var n=bn(t,"tensors","stack");if(E(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),1===n.length)return n[0].expandDims(e);var r=n[0].shape,i=n[0].dtype;E(e<=n[0].rank,(function(){return"Axis must be <= rank of the tensor"})),n.forEach((function(t){I(r,t.shape,"All tensors passed to stack must have matching shapes")})),n.forEach((function(t){E(i===t.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var a=n.map((function(t){return t.expandDims(e)}));return Zn(a,e)}}),fr=Tn({unstack_:function(t,e){void 0===e&&(e=0),e=e||0;var n=vn(t,"x","unstack");return E(e>=-n.shape.length&&e<n.shape.length,(function(){return"Axis = "+e+" is not in [-"+n.shape.length+", "+n.shape.length+")"})),e<0&&(e+=n.shape.length),Bt.runKernelFunc((function(t){return t.unstack(n,e)}),{x:n},(function(t){return{x:function(){return pr(t,e)}}}),"Unpack",{axis:e})}}),mr=function(t,e){return o(this,void 0,void 0,(function(){var n,r,i,a,o,l,u,c,h,d;return s(this,(function(s){switch(s.label){case 0:return n=vn(t,"x","setdiff1d"),r=vn(e,"y","setdiff1d"),E(n.dtype===r.dtype,(function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."})),E(1===n.rank,(function(){return"x should be 1D tensor, but got x ("+n.shape+")."})),E(1===r.rank,(function(){return"y should be 1D tensor, but got y ("+r.shape+")."})),[4,n.data()];case 1:return i=s.sent(),[4,r.data()];case 2:for(a=s.sent(),o=new Set(a),l=0,h=0;h<i.length;h++)o.has(i[h])||l++;for(u=new vt([l],n.dtype),c=new vt([l],"int32"),h=0,d=0;h<i.length;h++)o.has(i[h])||(u.values[d]=i[h],c.values[d]=h,d++);return[2,[u.toTensor(),c.toTensor()]]}}))}))};function gr(t,e,n,r){void 0===r&&(r=!0);var i=[];if(r)(i=i.concat(e.slice(0))).push(t[0]/n),i=i.concat(t.slice(1));else{i=i.concat(t[0]);for(var a=e.length,o=0;o<a;++o)i=i.concat([t[o+1]/e[o],e[o]]);i=i.concat(t.slice(a+1))}return i}function yr(t,e,n){void 0===n&&(n=!0);var r=[];if(n){r.push(e);for(var i=e+1;i<t;++i)i<=2*e?(r.push(i),r.push(i-(e+1))):r.push(i)}else{var a=[],o=[];for(i=1;i<t;++i)i>=2*e+1||i%2==1?o.push(i):a.push(i);r.push.apply(r,a),r.push(0),r.push.apply(r,o)}return r}function vr(t,e,n,r){void 0===r&&(r=!0);var i=[];i.push(r?t[0]/n:t[0]*n);for(var a=1;a<t.length;++a)i.push(a<=e.length?r?e[a-1]*t[a]:t[a]/e[a-1]:t[a]);return i}function br(t,e){for(var n=[0],r=0;r<e;++r)n.push(t[r][0]);return n}function wr(t,e,n){for(var r=t.slice(0,1),i=0;i<n;++i)r.push(t[i+1]-e[i][0]-e[i][1]);return r}var _r="Div",xr="SquaredDifference",Cr="BroadcastTo",Sr="OneHot",kr="Identity",Er="Tile",Ir="PadV2",Ar=Tn({add_:function(t,e){var n,r=vn(t,"a","add"),i=vn(e,"b","add");return n=Ot(r,i),Bt.runKernelFunc((function(t,e){var n=t.add(r,i);return e([r,i]),n}),{a:r=n[0],b:i=n[1]},null,"Add")}});function Dr(t,e){for(var n=t.length,r=[],i=0;i<n;i++){var a=n-1-i;(e[e.length-1-i]||1)>1&&1===(t[a]||1)&&r.unshift(a)}return r}function Tr(t,e){for(var n=[],r=0;r<e.length;r++){var i=t[t.length-r-1],a=e.length-r-1;(null==i||1===i&&e[a]>1)&&n.unshift(a)}return n}function Nr(t,e){for(var n=[],r=Math.max(t.length,e.length),i=0;i<r;i++){var a=t[t.length-i-1];null==a&&(a=1);var o=e[e.length-i-1];if(null==o&&(o=1),1===a)n.unshift(o);else if(1===o)n.unshift(a);else{if(a!==o)throw Error("Operands could not be broadcast together with shapes "+t+" and "+e+".");n.unshift(a)}}return n}var Rr=Tn({abs_:function(t){var e=vn(t,"x","abs");return"complex64"===e.dtype?Bt.runKernelFunc((function(t){return t.complexAbs(e)}),{$x:e}):Bt.runKernelFunc((function(t,n){var r=t.abs(e);return n([e]),r}),{x:e},(function(t,e){var n=e[0];return{x:function(){return t.mul(n.toFloat().step(-1))}}}),"Abs")}}),Or=Tn({acos_:function(t){var e=vn(t,"x","acos");return Bt.runKernelFunc((function(t,n){var r=t.acos(e);return n([e]),r}),{$x:e},(function(t,e){var n=e[0];return{$x:function(){return t.divStrict(Pn(1).sub(n.toFloat().square()).sqrt()).neg()}}}))}}),Fr=Tn({acosh_:function(t){var e=vn(t,"x","acosh");return Bt.runKernelFunc((function(t,n){var r=t.acosh(e);return n([e]),r}),{$x:e},(function(t,e){var n=e[0];return{$x:function(){return t.divStrict(n.toFloat().square().sub(1).sqrt())}}}))}}),Mr=Tn({asin_:function(t){var e=vn(t,"x","asin");return Bt.runKernelFunc((function(t,n){var r=t.asin(e);return n([e]),r}),{$x:e},(function(t,e){var n=e[0];return{$x:function(){return t.divStrict(Pn(1).sub(n.toFloat().square()).sqrt())}}}))}}),Pr=Tn({asinh_:function(t){var e=vn(t,"x","asinh");return Bt.runKernelFunc((function(t,n){var r=t.asinh(e);return n([e]),r}),{$x:e},(function(t,e){var n=e[0];return{$x:function(){return t.divStrict(Pn(1).add(n.toFloat().square()).sqrt())}}}))}}),Lr=Tn({atan_:function(t){var e=vn(t,"x","atan");return Bt.runKernelFunc((function(t,n){var r=t.atan(e);return n([e]),r}),{$x:e},(function(t,e){var n=e[0];return{$x:function(){return t.div(n.toFloat().square().add(1))}}}))}}),zr=Tn({atanh_:function(t){var e=vn(t,"x","atanh");return Bt.runKernelFunc((function(t,n){var r=t.atanh(e);return n([e]),r}),{$x:e},(function(t,e){var n=e[0];return{$x:function(){return t.div(Pn(1).sub(n.toFloat().square()))}}}))}}),Vr=Tn({ceil_:function(t){var e=vn(t,"x","ceil");return Bt.runKernelFunc((function(t){return t.ceil(e)}),{$x:e},(function(t){return{$x:function(){return Yn(t)}}}))}}),Br=Tn({clipByValue_:function(t,e,n){var r=vn(t,"x","clipByValue");return E(e<=n,(function(){return"Error in clip: min ("+e+") must be less than or equal to max ("+n+")."})),Bt.runKernelFunc((function(t,i){var a=t.clip(r,e,n);return i([r]),a}),{x:r},(function(t,r){var i=r[0];return{x:function(){return t.where(i.greaterEqual(e).logicalAnd(i.lessEqual(n)),Yn(t))}}}),"ClipByValue",{min:e,max:n},[r])}}),jr=Tn({cos_:function(t){var e=vn(t,"x","cos");return Bt.runKernelFunc((function(t,n){var r=t.cos(e);return n([e]),r}),{x:e},(function(t,e){var n=e[0];return{x:function(){return n.toFloat().sin().neg().mul(t)}}}),"Cos",{},[e])}}),Ur=Tn({cosh_:function(t){var e=vn(t,"x","cosh");return Bt.runKernelFunc((function(t,n){var r=t.cosh(e);return n([e]),r}),{$x:e},(function(t,e){var n=e[0];return{$x:function(){return n.toFloat().sinh().mulStrict(t)}}}))}}),Wr=Tn({erf_:function(t){var e=vn(t,"x","erf");return E("int32"===e.dtype||"float32"===e.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===e.dtype&&(e=e.toFloat()),Bt.runKernelFunc((function(t,n){var r=t.erf(e);return n([e]),r}),{$x:e},(function(t,e){var n=e[0];return{$x:function(){return t.mul(n.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}}))}}),Hr=Tn({exp_:function(t){var e=vn(t,"x","exp");return Bt.runKernelFunc((function(t,n){var r=t.exp(e);return n([r]),r}),{x:e},(function(t,e){return{x:function(){return t.mulStrict(e[0])}}}),"Exp",{},[],[!0])}}),qr=Tn({expm1_:function(t){var e=vn(t,"x","expm1");return Bt.runKernelFunc((function(t,n){var r=t.expm1(e);return n([e]),r}),{$x:e},(function(t,e){var n=e[0];return{$x:function(){return t.mul(n.exp())}}}))}}),Gr=Tn({floor_:function(t){var e=vn(t,"x","floor");return Bt.runKernelFunc((function(t){return t.floor(e)}),{$x:e},(function(t){return{$x:function(){return Yn(t)}}}))}}),$r=Tn({log_:function(t){var e=vn(t,"x","log");return Bt.runKernelFunc((function(t,n){var r=t.log(e);return n([e]),r}),{x:e},(function(t,e){var n=e[0];return{x:function(){return t.div(n.toFloat())}}}),"Log",{},[e])}}),Kr=Tn({log1p_:function(t){var e=vn(t,"x","log1p");return Bt.runKernelFunc((function(t,n){var r=t.log1p(e);return n([e]),r}),{$x:e},(function(t,e){var n=e[0];return{$x:function(){return t.div(n.add(1))}}}))}}),Xr=Tn({logSigmoid_:function(t){var e=vn(t,"x","logSigmoid");return Bt.runKernelFunc((function(t,n){var r=t.softplus(e.neg()).neg();return n([e]),r}),{$x:e},(function(t,e){var n=e[0];return{$x:function(){return t.mul(n.neg().sigmoid())}}}))}}),Yr=Tn({neg_:function(t){var e=vn(t,"x","neg");return Bt.runKernelFunc((function(t){return t.neg(e)}),{x:e},(function(t){return{x:function(){return t.neg()}}}),"Neg",{},[e])}}),Zr=Tn({reciprocal_:function(t){var e=vn(t,"x","reciprocal");return Bt.runKernelFunc((function(t,n){var r=t.reciprocal(e);return n([e]),r}),{$x:e},(function(t,e){var n=e[0];return{$x:function(){return t.div(n.square().neg())}}}))}}),Qr=Tn({round_:function(t){var e=vn(t,"x","round");return Bt.runKernelFunc((function(t){return t.round(e)}),{$x:e},(function(t){return{$x:function(){return Yn(t)}}}))}}),Jr=Tn({rsqrt_:function(t){var e=vn(t,"x","rsqrt");return Bt.runKernelFunc((function(t,n){var r=t.rsqrt(e);return n([e]),r}),{x:e},(function(t,e){var n=e[0];return{x:function(){return t.div(n.pow(1.5).mul(2)).neg()}}}),"Rsqrt",{},[e])}}),ti=Tn({sigmoid_:function(t){var e=vn(t,"x","sigmoid");return Bt.runKernelFunc((function(t,n){var r=t.sigmoid(e);return n([r]),r}),{x:e},(function(t,e){var n=e[0];return{x:function(){return t.mul(n.mul(Pn(1).sub(n)))}}}),"Sigmoid")}}),ei=Tn({sign_:function(t){var e=vn(t,"x","sign");return Bt.runKernelFunc((function(t){return t.sign(e)}),{$x:e},(function(t){return{$x:function(){return Yn(t)}}}))}}),ni=Tn({isNaN_:function(t){var e=vn(t,"x","isNaN");return Bt.runKernelFunc((function(t){return t.isNaN(e)}),{$x:e},(function(t){return{$x:function(){return Yn(t)}}}))}}),ri=Tn({isInf_:function(t){var e=vn(t,"x","isInf");return Bt.runKernelFunc((function(t){return t.isInf(e)}),{$x:e},(function(t){return{$x:function(){return Yn(t)}}}))}}),ii=Tn({isFinite_:function(t){var e=vn(t,"x","isFinite");return Bt.runKernelFunc((function(t){return t.isFinite(e)}),{$x:e},(function(t){return{$x:function(){return Yn(t)}}}))}}),ai=Tn({sin_:function(t){var e=vn(t,"x","sin");return Bt.runKernelFunc((function(t,n){var r=t.sin(e);return n([e]),r}),{x:e},(function(t,e){var n=e[0];return{x:function(){return n.toFloat().cos().mul(t)}}}),"Sin",{},[e])}}),oi=Tn({sinh_:function(t){var e=vn(t,"x","sinh");return Bt.runKernelFunc((function(t,n){var r=t.sinh(e);return n([e]),r}),{$x:e},(function(t,e){var n=e[0];return{$x:function(){return n.toFloat().cosh().mulStrict(t)}}}))}}),si=Tn({softplus_:function(t){var e=vn(t,"x","softplus");return Bt.runKernelFunc((function(t,n){var r=t.softplus(e);return n([e]),r}),{$x:e},(function(t,e){var n=e[0];return{$x:function(){return t.mul(n.sigmoid())}}}))}}),li=Tn({sqrt_:function(t){var e=vn(t,"x","sqrt");return Bt.runKernelFunc((function(t,n){var r=t.sqrt(e);return n([e]),r}),{$x:e},(function(t,e){var n=e[0];return{$x:function(){return t.div(n.toFloat().sqrt().mul(2))}}}))}}),ui=Tn({step_:function(t,e){void 0===e&&(e=0);var n=vn(t,"x","step");return Bt.runKernelFunc((function(t){return t.step(n,e)}),{$x:n},(function(t){return{$x:function(){return Yn(t)}}}))}}),ci=Tn({tan_:function(t){var e=vn(t,"x","tan");return Bt.runKernelFunc((function(t,n){var r=t.tan(e);return n([e]),r}),{$x:e},(function(t,e){var n=e[0];return{$x:function(){return t.div(n.cos().square())}}}))}}),hi=Tn({tanh_:function(t){var e=vn(t,"x","tanh");return Bt.runKernelFunc((function(t,n){var r=t.tanh(e);return n([r]),r}),{x:e},(function(t,e){var n=e[0];return{x:function(){return Pn(1).sub(n.square()).mulStrict(t)}}}),"Tanh",{},null,[!0])}}),di=Tn({addStrict_:function(t,e){var n=vn(t,"a","addStrict"),r=vn(e,"b","addStrict");return I(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),pi=Tn({atan2_:function(t,e){var n,r=vn(t,"a","atan2"),i=vn(e,"b","atan2");n=Ot(r,i);var a=Nr((r=n[0]).shape,(i=n[1]).shape);return Bt.runKernelFunc((function(t,e){var n=t.atan2(r,i);return e([r,i]),n}),{$a:r,$b:i},(function(t,e){var n=e[0],r=e[1];return{$a:function(){var e=Ar(n.square(),r.square()),i=t.mul(r.div(e)),o=Tr(n.shape,a);return o.length>0&&(i=i.sum(o)),i.reshape(n.shape)},$b:function(){var e=Ar(n.square(),r.square()),i=Yr(t.mul(n.div(e))),o=Tr(r.shape,a);return o.length>0&&(i=i.sum(o)),i.reshape(r.shape)}}}))}}),fi=Tn({divStrict_:function(t,e){var n=vn(t,"a","div"),r=vn(e,"b","div");return I(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),mi=Tn({floorDiv_:function(t,e){var n,r=vn(t,"a","floorDiv"),i=vn(e,"b","floorDiv");n=Ot(r,i);var a=Nr((r=n[0]).shape,(i=n[1]).shape);return Bt.runKernelFunc((function(t,e){var n=t.floorDiv(r,i);return e([r,i]),n}),{a:r,b:i},(function(t,e){var n=e[0],r=e[1];return{a:function(){var e=t.div(r.toFloat()),i=Tr(n.shape,a);return i.length>0?e.sum(i).reshape(n.shape):e},b:function(){var e=t.mul(n.toFloat()),i=Tr(r.shape,a);i.length>0&&(e=e.sum(i).reshape(r.shape));var o=r.square();return e.div(o.toFloat()).neg()}}}),"FloorDiv")}}),gi=Tn({maximum_:function(t,e){var n,r=vn(t,"a","maximum"),i=vn(e,"b","maximum");return n=Ot(r,i),i=n[1],"bool"===(r=n[0]).dtype&&(r=r.toInt(),i=i.toInt()),Nr(r.shape,i.shape),Bt.runKernelFunc((function(t,e){var n=t.maximum(r,i);return e([r,i]),n}),{a:r,b:i},(function(t,e){var n=e[0],r=e[1];return{a:function(){return t.mul(n.greaterEqual(r).toFloat())},b:function(){return t.mul(n.less(r).toFloat())}}}),"Maximum")}}),yi=Tn({maximumStrict_:function(t,e){var n=vn(t,"a","maximumStrict"),r=vn(e,"b","maximumStrict");return I(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),vi=Tn({minimum_:function(t,e){var n,r=vn(t,"a","minimum"),i=vn(e,"b","minimum");return n=Ot(r,i),i=n[1],"bool"===(r=n[0]).dtype&&(r=r.toInt(),i=i.toInt()),Nr(r.shape,i.shape),Bt.runKernelFunc((function(t,e){var n=t.minimum(r,i);return e([r,i]),n}),{a:r,b:i},(function(t,e){var n=e[0],r=e[1];return{a:function(){return t.mul(n.lessEqual(r).toFloat())},b:function(){return t.mul(n.greater(r).toFloat())}}}),"Minimum")}}),bi=Tn({minimumStrict_:function(t,e){var n=vn(t,"a","minimumStrict"),r=vn(e,"b","minimumStrict");return I(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),wi=Tn({mod_:function(t,e){var n,r=vn(t,"a","mod"),i=vn(e,"b","mod");n=Ot(r,i);var a=Nr((r=n[0]).shape,(i=n[1]).shape);return Bt.runKernelFunc((function(t,e){var n=t.mod(r,i);return e([r,i]),n}),{$a:r,$b:i},(function(t,e){var n=e[0],r=e[1];return{$a:function(){var e=Tr(n.shape,a);return e.length>0?t.sum(e).reshape(n.shape):t},$b:function(){var e=t.mul(n.div(r).floor().neg()),i=Tr(r.shape,a);return i.length>0?e.sum(i).reshape(r.shape):e}}}))}}),_i=Tn({modStrict_:function(t,e){var n=vn(t,"a","modStrict"),r=vn(e,"b","modStrict");return I(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),xi=Tn({mul_:function(t,e){var n,r=vn(t,"a","mul"),i=vn(e,"b","mul");n=Ot(r,i);var a=Nr((r=n[0]).shape,(i=n[1]).shape);return Bt.runKernelFunc((function(t,e){var n=t.multiply(r,i);return e([r,i]),n}),{a:r,b:i},(function(t,e){var n=e[0],r=e[1];return{a:function(){var e=t.mul(r.toFloat()),i=Tr(n.shape,a);return i.length>0?e.sum(i).reshape(n.shape):e},b:function(){var e=t.mul(n.toFloat()),i=Tr(r.shape,a);return i.length>0?e.sum(i).reshape(r.shape):e}}}),"Mul")}}),Ci=Tn({mulStrict_:function(t,e){var n=vn(t,"a","mul"),r=vn(e,"b","mul");return I(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),Si=Tn({pow_:function(t,e){var n,r=vn(t,"base","pow"),i=vn(e,"exp","pow");n=Ot(r,i);var a=Nr((r=n[0]).shape,(i=n[1]).shape);return Bt.runKernelFunc((function(t,e){var n=t.pow(r,i);return e([r,i,n]),n}),{a:r,b:i},(function(t,e){var n=e[0],r=e[1],i=e[2];return{a:function(){var e=r.toFloat(),i=t.mul(e.mul(n.pow(e.sub(Pn(1))))),o=Tr(n.shape,a);return o.length>0&&(i=i.sum(o)),i.reshape(n.shape)},b:function(){var e=n.greater(0),o=n.log().where(e,Yn(n)),s=t.mul(i.mul(o)),l=Tr(r.shape,a);return l.length>0&&(s=s.sum(l)),s.reshape(r.shape)}}}),"Pow",{},[r,i],[!0])}}),ki=Tn({powStrict_:function(t,e){return I(t.shape,e.shape,"Error in powStrict: "),t.pow(e)}}),Ei=Tn({squaredDifferenceStrict_:function(t,e){var n=vn(t,"a","squaredDifferenceStrict"),r=vn(e,"b","squaredDifferenceStrict");return I(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),Ii=Tn({sub_:function(t,e){var n,r=vn(t,"a","sub"),i=vn(e,"b","sub");n=Ot(r,i);var a=Nr((r=n[0]).shape,(i=n[1]).shape);return Bt.runKernelFunc((function(t){return t.subtract(r,i)}),{a:r,b:i},(function(t){return{a:function(){var e=t,n=Tr(r.shape,a);return n.length>0&&(e=e.sum(n)),e.reshape(r.shape)},b:function(){var e=t,n=Tr(i.shape,a);return n.length>0&&(e=e.sum(n)),e.neg().reshape(i.shape)}}}),"Sub")}}),Ai=Tn({subStrict_:function(t,e){var n=vn(t,"a","subStrict"),r=vn(e,"b","subStrict");return I(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}}),Di=Tn({div_:function(t,e){var n,r=vn(t,"a","div"),i=vn(e,"b","div");return n=Ot(r,i),i=n[1],"int32"===(r=n[0]).dtype&&"int32"===i.dtype?mi(r,i):Bt.runKernelFunc((function(t,e){var n=t.realDivide(r,i);return e([r,i]),n}),{a:r,b:i},null,_r,{})}});function Ti(t,e){if(t.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if("int32"!==e.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+e.dtype+".");if(e.shape[e.rank-1]>t.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+e.shape[e.rank-1]+" vs. "+t.rank);if(0===t.size)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+t.shape+".");for(var n=e.shape,r=n[n.length-1],i=1,a=0;a<n.length-1;++a)i*=n[a];var o=t.shape,s=n.slice();s.pop();var l=1;for(a=r;a<t.rank;++a)l*=o[a],s.push(o[a]);var u=tt(t.shape).map((function(t){return t/l})).concat([1]).slice(0,r);return[s,i,l,u]}var Ni=Object.freeze({prepareAndValidate:Ti}),Ri=30;function Oi(t){return t<=Ri?t:J(t,Math.floor(Math.sqrt(t)))}function Fi(t,e,n){var r=e.rank>1?e.shape[e.rank-1]:1,i=e.rank>1?e.rank-1:1,a="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+e.shape+", shape: "+t+", sliceDim: "+r+", and batchDim: "+i+".";if(n.rank<i)throw new Error(a+" update.rank < "+i+". ");if(t.length<r+(n.rank-i))throw new Error(a+" Output shape length < "+(r+(n.rank-i)));if(n.rank!==i+t.length-r)throw new Error(a+" update.rank != "+(i+t.length-r));for(var o=0;o<i;++o)if(n.shape[o]!==e.shape[o])throw new Error(a+" updates.shape["+o+"] ("+n.shape[o]+") != indices.shape["+o+"] ("+e.shape[o]+").");for(o=0;o<n.rank-i;++o)if(n.shape[o+i]!==t[o+r])throw new Error(a+" updates.shape["+(o+i)+"] ("+n.shape[o+i]+") != shape["+(o+i)+"] ("+t[o+i]+")")}function Mi(t,e,n){if(e.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+t.rank+".");if("int32"!==e.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: "+e.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(0===n.length){if(0===e.size)throw new Error("Indices specified for empty output. indices shape: "+e.shape);if(0===t.size)throw new Error("Updates specified for empty output. updates shape: "+t.shape)}Fi(n,e,t)}function Pi(t,e,n){for(var r=e.shape.length,i=r>1?e.shape[r-1]:1,a=n.length,o=1,s=i;s<a;++s)o*=n[s];var l=i<1?1:i;return{sliceRank:i,numUpdates:T(e.shape)/l,sliceSize:o,strides:tt(n.slice(0,i)).concat([1]),outputSize:T(n)}}var Li=Object.freeze({validateUpdateShape:Fi,validateInput:Mi,calculateShapes:Pi});function zi(t,e,n){E(t.rank===e.length,(function(){return"Error in slice"+t.rank+"D: Length of begin "+e+" must match the rank of the array ("+t.rank+")."})),E(t.rank===n.length,(function(){return"Error in slice"+t.rank+"D: Length of size "+n+" must match the rank of the array ("+t.rank+")."}));for(var r=function(r){E(e[r]+n[r]<=t.shape[r],(function(){return"Error in slice"+t.rank+"D: begin["+r+"] + size["+r+"] ("+(e[r]+n[r])+") would overflow input.shape["+r+"] ("+t.shape[r]+")"}))},i=0;i<t.rank;++i)r(i)}function Vi(t){for(var e=[],n=0;t>0;)1&t&&e.push(n),t/=2,n++;return e}function Bi(t,e,n){for(var r=[],i=0;i<t.length;i++)r[i]=Math.ceil((e[i]-t[i])/n[i]);return r}function ji(t,e,n,r,i){var a=e[i];(t&1<<i||null==a)&&(a=(n[i]||1)>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var o=r[i];return a<0&&(a+=o),C(0,a,o-1)}function Ui(t,e,n,r,i){var a=e[i],o=n[i]||1;(t&1<<i||null==a)&&(a=o>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=r[i];return a<0&&(a+=s),o>0?C(0,a,s):C(-1,a,s-1)}function Wi(t,e,n){for(var r=n.length,i=0;i<n.length;i++)if(n[i]>1){r=i;break}for(i=r+1;i<n.length;i++)if(e[i]>0||n[i]!==t[i])return!1;return!0}function Hi(t,e){for(var n=t.length>0?t[t.length-1]:1,r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}var qi=Object.freeze({assertParamsValid:zi,maskToAxes:Vi,computeOutShape:Bi,startForAxis:ji,stopForAxis:Ui,isSliceContinous:Wi,computeFlatOffset:Hi});function Gi(t){return E(Q(t),(function(){return"The f passed in grad(f) must be a function"})),function(e,n){var r=vn(e,"x","tf.grad",null),i=null!=n?vn(n,"dy","tf.grad"):null;return Bt.tidy((function(){var e=Bt.gradients((function(){return t(r)}),[r],i),n=e.grads;return null!=i&&I(e.value.shape,i.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),Qi(n),n[0]}))}}function $i(t){return E(Q(t),(function(){return"The f passed in grads(f) must be a function"})),function(e,n){E(Array.isArray(e),(function(){return"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s"}));var r=bn(e,"args","tf.grads",null),i=null!=n?vn(n,"dy","tf.grads"):null;return Bt.tidy((function(){var e=Bt.gradients((function(){return t.apply(void 0,r)}),r,i),n=e.grads;return null!=i&&I(e.value.shape,i.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Qi(n),n}))}}function Ki(t){return E(Q(t),(function(){return"The f passed in valueAndGrad(f) must be a function"})),function(e,n){E(e instanceof xt,(function(){return"The x passed in valueAndGrad(f)(x) must be a tensor"})),E(null==n||n instanceof xt,(function(){return"The dy passed in valueAndGrad(f)(x, dy) must be a tensor"}));var r=Bt.gradients((function(){return t(e)}),[e],n),i=r.grads,a=r.value;return Qi(i),{grad:i[0],value:a}}}function Xi(t){return E(Q(t),(function(){return"The f passed in valueAndGrads(f) must be a function"})),function(e,n){E(Array.isArray(e)&&e.every((function(t){return t instanceof xt})),(function(){return"The args passed in valueAndGrads(f)(args) must be array of tensors"})),E(null==n||n instanceof xt,(function(){return"The dy passed in valueAndGrads(f)(args, dy) must be a tensor"}));var r=Bt.gradients((function(){return t.apply(void 0,e)}),e,n);return null!=n&&I(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Qi(r.grads),r}}function Yi(t,e){E(Q(t),(function(){return"The f passed in variableGrads(f) must be a function"})),E(null==e||Array.isArray(e)&&e.every((function(t){return t instanceof Dt})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=null!=e;if(!n)for(var r in e=[],Bt.registeredVariables)e.push(Bt.registeredVariables[r]);var i=n?e.filter((function(t){return!t.trainable})):null,a=e.length;E((e=e.filter((function(t){return t.trainable}))).length>0,(function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+a+" variables is trainable."}));var o=Bt.gradients(t,e,null,!0),s=o.value,l=o.grads;E(l.some((function(t){return null!=t})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),E(0===s.rank,(function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+s.rank+" tensor"}));var u={};return e.forEach((function(t,e){null!=l[e]&&(u[t.name]=l[e])})),null!=i&&i.forEach((function(t){return u[t.name]=null})),{value:s,grads:u}}function Zi(t){return Bt.customGrad(t)}function Qi(t){if(t.filter((function(t){return null==t})).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}var Ji=Tn({softmax_:function(t,e){void 0===e&&(e=-1);var n=vn(t,"logits","softmax","float32");if(-1===e&&(e=n.rank-1),e!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+e);return Bt.runKernelFunc((function(t,r){var i=t.softmax(n,e);return r([i]),i}),{logits:n},(function(t,n){var r=n[0],i=t.mul(r);return{logits:function(){return i.sub(i.sum([e],!0).mul(r))}}}),"Softmax",{dim:e},[],[!0])}}),ta=Tn({logSoftmax_:function(t,e){void 0===e&&(e=-1);var n=vn(t,"logits","logSoftmax");if(-1===e&&(e=n.rank-1),e!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+e);return Zi((function(t,n){var r=t.max(e,!0),i=t.sub(r),a=i.toFloat().sub(i.exp().sum(e,!0).log());return n([a]),{value:a,gradFunc:function(t,n){var r=n[0].exp();return t.sub(t.sum(e,!0).mul(r))}}}))(n)}}),ea=Tn({transpose_:function(t,e){var n=vn(t,"x","transpose");return null==e&&(e=n.shape.map((function(t,e){return e})).reverse()),E(n.rank===e.length,(function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+e+"."})),e.forEach((function(t){E(t>=0&&t<n.rank,(function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+e}))})),n.rank<=1?n.clone():Bt.runKernelFunc((function(t){return t.transpose(n,e)}),{x:n},null,"Transpose",{perm:e})}}),na=function(){function t(t,e){this.backend=t,this.dataMover=e,this.data=new WeakMap,this.dataIdsCount=0}return t.prototype.get=function(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)},t.prototype.set=function(t,e){this.dataIdsCount++,this.data.set(t,e)},t.prototype.has=function(t){return this.data.has(t)},t.prototype.delete=function(t){return this.dataIdsCount--,this.data.delete(t)},t.prototype.numDataIds=function(){return this.dataIdsCount},t}(),ra=function(){function t(){}return t.prototype.time=function(t){return ia("time")},t.prototype.read=function(t){return ia("read")},t.prototype.readSync=function(t){return ia("readSync")},t.prototype.numDataIds=function(){return ia("numDataIds")},t.prototype.disposeData=function(t){return ia("disposeData")},t.prototype.write=function(t,e,n){return ia("write")},t.prototype.move=function(t,e,n,r){return ia("move")},t.prototype.memory=function(){return ia("memory")},t.prototype.floatPrecision=function(){return ia("floatPrecision")},t.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},t.prototype.batchMatMul=function(t,e,n,r){return ia("batchMatMul")},t.prototype.fusedBatchMatMul=function(t){return ia("fusedBatchMatMul")},t.prototype.slice=function(t,e,n){return ia("slice")},t.prototype.stridedSlice=function(t,e,n,r){return ia("stridedSlice")},t.prototype.unstack=function(t,e){return ia("unstack")},t.prototype.reverse=function(t,e){return ia("reverse")},t.prototype.concat=function(t,e){return ia("concat")},t.prototype.neg=function(t){return ia("neg")},t.prototype.add=function(t,e){return ia("add")},t.prototype.addN=function(t){return ia("addN")},t.prototype.subtract=function(t,e){return ia("subtract")},t.prototype.multiply=function(t,e){return ia("multiply")},t.prototype.realDivide=function(t,e){return ia("realDivide")},t.prototype.floorDiv=function(t,e){return ia("floorDiv")},t.prototype.sum=function(t,e){return ia("sum")},t.prototype.prod=function(t,e){return ia("prod")},t.prototype.unsortedSegmentSum=function(t,e,n){return ia("unsortedSegmentSum")},t.prototype.argMin=function(t,e){return ia("argMin")},t.prototype.argMax=function(t,e){return ia("argMax")},t.prototype.equal=function(t,e){return ia("equal")},t.prototype.notEqual=function(t,e){return ia("notEqual")},t.prototype.less=function(t,e){return ia("less")},t.prototype.lessEqual=function(t,e){return ia("lessEqual")},t.prototype.greater=function(t,e){return ia("greater")},t.prototype.greaterEqual=function(t,e){return ia("greaterEqual")},t.prototype.logicalNot=function(t){return ia("logicalNot")},t.prototype.logicalAnd=function(t,e){return ia("logicalAnd")},t.prototype.logicalOr=function(t,e){return ia("logicalOr")},t.prototype.where=function(t){return ia("where")},t.prototype.select=function(t,e,n){return ia("select")},t.prototype.topk=function(t,e,n){return ia("topk")},t.prototype.min=function(t,e){return ia("min")},t.prototype.minimum=function(t,e){return ia("minimum")},t.prototype.mod=function(t,e){return ia("mod")},t.prototype.max=function(t,e){return ia("max")},t.prototype.maximum=function(t,e){return ia("maximum")},t.prototype.all=function(t,e){return ia("all")},t.prototype.any=function(t,e){return ia("any")},t.prototype.squaredDifference=function(t,e){return ia("squaredDifference")},t.prototype.ceil=function(t){return ia("ceil")},t.prototype.floor=function(t){return ia("floor")},t.prototype.round=function(t){return ia("round")},t.prototype.sign=function(t){return ia("sign")},t.prototype.isNaN=function(t){return ia("isNaN")},t.prototype.isInf=function(t){return ia("isInf")},t.prototype.isFinite=function(t){return ia("isFinite")},t.prototype.pow=function(t,e){return ia("pow")},t.prototype.exp=function(t){return ia("exp")},t.prototype.expm1=function(t){return ia("expm1")},t.prototype.softmax=function(t,e){return ia("softmax")},t.prototype.log=function(t){return ia("log")},t.prototype.log1p=function(t){return ia("log1p")},t.prototype.sqrt=function(t){return ia("sqrt")},t.prototype.rsqrt=function(t){return ia("rsqrt")},t.prototype.square=function(t){return ia("square")},t.prototype.reciprocal=function(t){return ia("reciprocal")},t.prototype.relu=function(t){return ia("relu")},t.prototype.relu6=function(t){return ia("relu6")},t.prototype.prelu=function(t,e){return ia("prelu")},t.prototype.elu=function(t){return ia("elu")},t.prototype.eluDer=function(t,e){return ia("eluDer")},t.prototype.selu=function(t){return ia("selu")},t.prototype.int=function(t){return ia("int")},t.prototype.clip=function(t,e,n){return ia("clip")},t.prototype.abs=function(t){return ia("abs")},t.prototype.complexAbs=function(t){return ia("complexAbs")},t.prototype.sigmoid=function(t){return ia("sigmoid")},t.prototype.softplus=function(t){return ia("softplus")},t.prototype.sin=function(t){return ia("sin")},t.prototype.cos=function(t){return ia("cos")},t.prototype.tan=function(t){return ia("tan")},t.prototype.asin=function(t){return ia("asin")},t.prototype.acos=function(t){return ia("acos")},t.prototype.atan=function(t){return ia("atan")},t.prototype.atan2=function(t,e){return ia("atan2")},t.prototype.sinh=function(t){return ia("sinh")},t.prototype.cosh=function(t){return ia("cosh")},t.prototype.tanh=function(t){return ia("tanh")},t.prototype.asinh=function(t){return ia("asinh")},t.prototype.acosh=function(t){return ia("acosh")},t.prototype.atanh=function(t){return ia("atanh")},t.prototype.erf=function(t){return ia("erf")},t.prototype.step=function(t,e){return ia("step")},t.prototype.fusedConv2d=function(t){return ia("fusedConv2d")},t.prototype.conv2d=function(t,e,n){return ia("conv2d")},t.prototype.conv2dDerInput=function(t,e,n){return ia("conv2dDerInput")},t.prototype.conv2dDerFilter=function(t,e,n){return ia("conv2dDerFilter")},t.prototype.fusedDepthwiseConv2D=function(t){return ia("fusedDepthwiseConv2D")},t.prototype.depthwiseConv2D=function(t,e,n){return ia("depthwiseConv2D")},t.prototype.depthwiseConv2DDerInput=function(t,e,n){return ia("depthwiseConv2DDerInput")},t.prototype.depthwiseConv2DDerFilter=function(t,e,n){return ia("depthwiseConv2DDerFilter")},t.prototype.conv3d=function(t,e,n){return ia("conv3d")},t.prototype.conv3dDerInput=function(t,e,n){return ia("conv3dDerInput")},t.prototype.conv3dDerFilter=function(t,e,n){return ia("conv3dDerFilter")},t.prototype.maxPool=function(t,e){return ia("maxPool")},t.prototype.maxPoolBackprop=function(t,e,n,r){return ia("maxPoolBackprop")},t.prototype.avgPool=function(t,e){return ia("avgPool")},t.prototype.avgPoolBackprop=function(t,e,n){return ia("avgPoolBackprop")},t.prototype.avgPool3d=function(t,e){return ia("avgPool3d")},t.prototype.avgPool3dBackprop=function(t,e,n){return ia("avgPool3dBackprop")},t.prototype.maxPool3d=function(t,e){return ia("maxPool3d")},t.prototype.maxPool3dBackprop=function(t,e,n,r){return ia("maxPool3dBackprop")},t.prototype.reshape=function(t,e){return ia("reshape")},t.prototype.cast=function(t,e){return ia("cast")},t.prototype.tile=function(t,e){return ia("tile")},t.prototype.pad=function(t,e,n){return ia("pad")},t.prototype.transpose=function(t,e){return ia("transpose")},t.prototype.gather=function(t,e,n){return ia("gather")},t.prototype.gatherND=function(t,e){return ia("gatherND")},t.prototype.scatterND=function(t,e,n){return ia("scatterND")},t.prototype.batchToSpaceND=function(t,e,n){return ia("batchToSpaceND")},t.prototype.spaceToBatchND=function(t,e,n){return ia("spaceToBatchND")},t.prototype.resizeBilinear=function(t,e,n,r){return ia("resizeBilinear")},t.prototype.resizeBilinearBackprop=function(t,e,n){return ia("resizeBilinearBackprop")},t.prototype.resizeNearestNeighbor=function(t,e,n,r){return ia("resizeNearestNeighbor")},t.prototype.resizeNearestNeighborBackprop=function(t,e,n){return ia("resizeNearestNeighborBackprop")},t.prototype.batchNormalization=function(t,e,n,r,i,a){return ia("batchNormalization")},t.prototype.localResponseNormalization4D=function(t,e,n,r,i){return ia("localResponseNormalization4D")},t.prototype.LRNGrad=function(t,e,n,r,i,a,o){return ia("LRNGrad")},t.prototype.multinomial=function(t,e,n,r){return ia("multinomial")},t.prototype.oneHot=function(t,e,n,r){return ia("oneHot")},t.prototype.cumsum=function(t,e,n,r){return ia("cumsum")},t.prototype.nonMaxSuppression=function(t,e,n,r,i){return ia("nonMaxSuppression")},t.prototype.fft=function(t){return ia("fft")},t.prototype.ifft=function(t){return ia("ifft")},t.prototype.complex=function(t,e){return ia("complex")},t.prototype.real=function(t){return ia("real")},t.prototype.imag=function(t){return ia("imag")},t.prototype.cropAndResize=function(t,e,n,r,i,a){return ia("cropAndResize")},t.prototype.depthToSpace=function(t,e,n){return ia("depthToSpace")},t.prototype.split=function(t,e,n){return ia("split")},t.prototype.sparseToDense=function(t,e,n,r){return ia("sparseToDense")},t.prototype.diag=function(t){return ia("diag")},t.prototype.fill=function(t,e,n){return ia("fill")},t.prototype.onesLike=function(t){return ia("onesLike")},t.prototype.zerosLike=function(t){return ia("zerosLike")},t.prototype.linspace=function(t,e,n){return ia("linspace")},t.prototype.dispose=function(){return ia("dispose")},t}();function ia(t){throw new Error("'"+t+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function aa(t,e,n,r,i,a,o){void 0===o&&(o="channelsLast");var s,l=ca(e),u=l[0],c=l[1];if("channelsLast"===o)s=[u,c,t[3],t[3]];else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat "+o);s=[u,c,t[1],t[1]]}return sa(t,s,n,r,i,a,!1,o)}function oa(t,e,n,r,i,a,o){void 0===o&&(o="NDHWC");var s,l,u=ha(e),c=u[0],h=u[1],d=u[2];if("NDHWC"===o)l="channelsLast",s=[c,h,d,t[4],t[4]];else{if("NCDHW"!==o)throw new Error("Unknown dataFormat "+o);l="channelsFirst",s=[c,h,d,t[1],t[1]]}return la(t,s,n,r,i,!1,l,a)}function sa(t,e,n,r,i,a,o,s){void 0===o&&(o=!1),void 0===s&&(s="channelsLast");var l=[-1,-1,-1,-1],u=l[0],c=l[1],h=l[2],d=l[3];if("channelsLast"===s)u=t[0],c=t[1],h=t[2],d=t[3];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat "+s);u=t[0],d=t[1],c=t[2],h=t[3]}var p,f=e[0],m=e[1],g=e[3],y=ca(n),v=y[0],b=y[1],w=ca(r),_=w[0],x=w[1],C=da(f,_),S=da(m,x),k=function(t,e,n,r,i,a,o,s){var l,u,c;if("number"==typeof t){l={top:t,bottom:t,left:t,right:t,type:0===t?"VALID":"NUMBER"};var h=function(t,e,n,r,i){null==r&&(r=ua(t,e,n));var a=t[1],o=pa((t[0]-e+2*r)/n+1,i);E(R(o),(function(){return"The output # of rows ("+o+") must be an integer. Change the stride and/or zero pad parameters"}));var s=pa((a-e+2*r)/n+1,i);return E(R(s),(function(){return"The output # of columns ("+s+") must be an integer. Change the stride and/or zero pad parameters"})),[o,s]}([e,n],a,r,t,s);u=h[0],c=h[1]}else if("same"===t){u=Math.ceil(e/r),c=Math.ceil(n/i);var d=Math.max(0,(u-1)*r+a-e),p=Math.max(0,(c-1)*i+o-n),f=Math.floor(d/2),m=d-f,g=Math.floor(p/2);l={top:f,bottom:m,left:g,right:p-g,type:"SAME"}}else{if("valid"!==t)throw Error("Unknown padding parameter: "+t);l={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((e-a+1)/r),c=Math.ceil((n-o+1)/i)}return{padInfo:l,outHeight:u,outWidth:c}}(i,c,h,v,b,C,S,a),I=k.outHeight,A=k.outWidth,D=o?g*d:g;return"channelsFirst"===s?p=[u,D,I,A]:"channelsLast"===s&&(p=[u,I,A,D]),{batchSize:u,dataFormat:s,inHeight:c,inWidth:h,inChannels:d,outHeight:I,outWidth:A,outChannels:D,padInfo:k.padInfo,strideHeight:v,strideWidth:b,filterHeight:f,filterWidth:m,effectiveFilterHeight:C,effectiveFilterWidth:S,dilationHeight:_,dilationWidth:x,inShape:t,outShape:p,filterShape:e}}function la(t,e,n,r,i,a,o,s){void 0===a&&(a=!1),void 0===o&&(o="channelsLast");var l=[-1,-1,-1,-1,-1],u=l[0],c=l[1],h=l[2],d=l[3],p=l[4];if("channelsLast"===o)u=t[0],c=t[1],h=t[2],d=t[3],p=t[4];else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat "+o);u=t[0],p=t[1],c=t[2],h=t[3],d=t[4]}var f,m=e[0],g=e[1],y=e[2],v=e[4],b=ha(n),w=b[0],_=b[1],x=b[2],C=ha(r),S=C[0],k=C[1],I=C[2],A=da(m,S),D=da(g,k),T=da(y,I),N=function(t,e,n,r,i,a,o,s,l,u,c){var h,d,p,f;if("number"==typeof t){h={top:t,bottom:t,left:t,right:t,front:t,back:t,type:0===t?"VALID":"NUMBER"};var m=function(t,e,n,r,i,a){null==i&&(i=ua(t,e,r));var o=t[1],s=t[2],l=pa((t[0]-e+2*i)/r+1,a);E(R(l),(function(){return"The output # of depths ("+l+") must be an integer. Change the stride and/or zero pad parameters"}));var u=pa((o-e+2*i)/r+1,a);E(R(u),(function(){return"The output # of rows ("+u+") must be an integer. Change the stride and/or zero pad parameters"}));var c=pa((s-e+2*i)/r+1,a);return E(R(c),(function(){return"The output # of columns ("+c+") must be an integer. Change the stride and/or zero pad parameters"})),[l,u,c,1]}([e,n,r,1],s,0,i,t,c);d=m[0],p=m[1],f=m[2]}else if("same"===t){var g=((d=Math.ceil(e/i))-1)*i+s-e,y=((p=Math.ceil(n/a))-1)*a+l-n,v=((f=Math.ceil(r/o))-1)*o+u-r,b=Math.floor(g/2),w=g-b,_=Math.floor(y/2),x=y-_,C=Math.floor(v/2);h={top:_,bottom:x,left:C,right:v-C,front:b,back:w,type:"SAME"}}else{if("valid"!==t)throw Error("Unknown padding parameter: "+t);h={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},d=Math.ceil((e-s+1)/i),p=Math.ceil((n-l+1)/a),f=Math.ceil((r-u+1)/o)}return{padInfo:h,outDepth:d,outHeight:p,outWidth:f}}(i,c,h,d,w,_,x,A,D,T,s),O=N.outDepth,F=N.outHeight,M=N.outWidth,P=a?v*p:v;return"channelsFirst"===o?f=[u,P,O,F,M]:"channelsLast"===o&&(f=[u,O,F,M,P]),{batchSize:u,dataFormat:o,inDepth:c,inHeight:h,inWidth:d,inChannels:p,outDepth:O,outHeight:F,outWidth:M,outChannels:P,padInfo:N.padInfo,strideDepth:w,strideHeight:_,strideWidth:x,filterDepth:m,filterHeight:g,filterWidth:y,effectiveFilterDepth:A,effectiveFilterHeight:D,effectiveFilterWidth:T,dilationDepth:S,dilationHeight:k,dilationWidth:I,inShape:t,outShape:f,filterShape:e}}function ua(t,e,n,r){void 0===r&&(r=1);var i=da(e,r);return Math.floor((t[0]*(n-1)-n+i)/2)}function ca(t){return"number"==typeof t?[t,t,t]:2===t.length?[t[0],t[1],1]:t}function ha(t){return"number"==typeof t?[t,t,t]:t}function da(t,e){return e<=1?t:t+(t-1)*(e-1)}function pa(t,e){if(!e)return t;switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error("Unknown roundingMode "+e)}}function fa(t){var e=ca(t);return 1===e[0]&&1===e[1]&&1===e[2]}function ma(t,e){return fa(t)||fa(e)}function ga(t){if("NHWC"===t)return"channelsLast";if("NCHW"===t)return"channelsFirst";throw new Error("Unknown dataFormat "+t)}function ya(t,e,n){if("complex64"===e){if("complex64"===t.dtype)return t.clone();var r=qn(t.shape),i=t.toFloat(),a=n.complex(i,r);return r.dispose(),i.dispose(),a}if(!H(t.dtype,e))return Bt.makeTensorFromDataId(t.dataId,t.shape,e);if("complex64"===t.dtype){var o=n.real(t);return a=o.cast(e),o.dispose(),a}if("int32"===e)return n.int(t);if("bool"===e){var s=Pn(0,t.dtype);return a=n.notEqual(t,s),s.dispose(),a}throw new Error("Error in Cast: failed to cast "+t.dtype+" to "+e)}function va(t,e){return Bt.makeTensorFromDataId(t.dataId,e,t.dtype)}function ba(t,e,n){var r=(e-t)/(n-1),i=it(n,"float32");i[0]=t;for(var a=1;a<i.length;a++)i[a]=i[a-1]+r;return Ln(i,"float32")}var wa=Object.freeze({castTensor:ya,reshapeTensor:va,linspaceImpl:ba,upcastType:Nt,axesAreInnerMostDims:wn,combineLocations:_n,computeOutAndReduceShapes:xn,expandShapeToKeepDim:Cn,assertAxesAreInnerMostDims:Sn,getAxesPermutation:kn,getUndoAxesPermutation:En,getInnerMostAxes:In,getBroadcastDims:Dr,getReductionAxes:Tr,assertAndGetBroadcastShape:Nr,assertParamsConsistent:An,computeOutShape:Dn,computePool2DInfo:aa,computePool3DInfo:oa,computeConv2DInfo:sa,computeConv3DInfo:la,computeDefaultPad:ua,tupleValuesAreOne:fa,eitherStridesOrDilationsAreOne:ma,convertConv2DDataFormat:ga,PARALLELIZE_THRESHOLD:Ri,computeOptimalWindowSize:Oi});function _a(t,e){if(t.length!==e.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+t.length+", imag: "+e.length+".");for(var n=new Float32Array(2*t.length),r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function xa(t,e){return{real:t[2*e],imag:t[2*e+1]}}function Ca(t,e,n,r){t[2*r]=e,t[2*r+1]=n}function Sa(t,e,n){var r=(n?2:-2)*Math.PI*(t/e);return{real:Math.cos(r),imag:Math.sin(r)}}function ka(t,e,n){var r=function(t,e,n){return function(t,e,n){for(var r=0,i=t.length,a=0,o=!1;r<i;){var s=n(e,t[a=r+(i-r>>>1)]);s>0?r=a+1:(i=a,o=!s)}return o?r:-r-1}(t,e,n||Ea)}(t,e,n);t.splice(r<0?-(r+1):r,0,e)}function Ea(t,e){return t>e?1:t<e?-1:0}function Ia(t,e,n,r,i){return Da(t,e,n,r,i,0).selectedIndices}function Aa(t,e,n,r,i,a){var o=Da(t,e,n,r,i,a,!0);return o.numValidOutputs.dispose(),{selectedIndices:o.selectedIndices,selectedScores:o.selectedScores}}function Da(t,e,n,r,i,a,o,s){void 0===o&&(o=!1),void 0===s&&(s=!1);for(var l=Array.from(e).map((function(t,e){return{score:t,boxIndex:e,suppressBeginIndex:0}})).filter((function(t){return t.score>i})).sort(Ra),u=a>0?-.5/a:0,c=[],h=[];c.length<n&&l.length>0;){var d=l.pop(),p=d.score,f=d.boxIndex,m=d.suppressBeginIndex;if(p<i)break;for(var g=!1,y=c.length-1;y>=m;--y){var v=Ta(t,f,c[y]);if(v>=r){g=!0;break}if(d.score=d.score*Na(r,u,v),d.score<=i)break}d.suppressBeginIndex=c.length,g||(d.score===p?(c.push(f),h.push(d.score)):d.score>i&&ka(l,d,Ra))}var b=c.length;return s&&(c.fill(0,b),h.fill(0,b)),{selectedIndices:Ln(c,"int32"),selectedScores:Ln(h,"float32"),numValidOutputs:Pn(b,"int32")}}function Ta(t,e,n){var r=t.subarray(4*e,4*e+4),i=t.subarray(4*n,4*n+4),a=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),u=Math.min(i[0],i[2]),c=Math.min(i[1],i[3]),h=Math.max(i[0],i[2]),d=Math.max(i[1],i[3]),p=(s-a)*(l-o),f=(h-u)*(d-c);if(p<=0||f<=0)return 0;var m=Math.max(a,u),g=Math.max(o,c),y=Math.min(s,h),v=Math.min(l,d),b=Math.max(y-m,0)*Math.max(v-g,0);return b/(p+f-b)}function Na(t,e,n){var r=Math.exp(e*n*n);return n<=t?r:0}function Ra(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}function Oa(t,e,n){var r=new Array(t.rank).fill(0),i=t.shape.slice();return e.map((function(e){i[n]=e;var a=t.slice(r,i);return r[n]+=e,a}))}function Fa(t,e){for(var n=new Array(t.rank),r=0;r<n.length;r++)n[r]=t.shape[r]*e[r];var i=rr(n,t.dtype);for(r=0;r<i.values.length;++r){for(var a=i.indexToLoc(r),o=new Array(t.rank),s=0;s<o.length;s++)o[s]=a[s]%t.shape[s];var l=t.locToIndex(o);i.values[r]=t.values[l]}return i.toTensor()}function Ma(t,e,n,r,i){for(var a=e[e.length-1],o=[t.length/a,a],s=o[0],l=o[1],u=B(n,s*r),c=B("int32",s*r),h=0;h<s;h++){for(var d=h*l,p=t.subarray(d,d+l),f=[],m=0;m<p.length;m++)f.push({value:p[m],index:m});f.sort((function(t,e){return e.value-t.value}));var g=h*r,y=u.subarray(g,g+r),v=c.subarray(g,g+r);for(m=0;m<r;m++)y[m]=f[m].value,v[m]=f[m].index}var b=e.slice();return b[b.length-1]=r,[Fn(u,b,n),Fn(c,b,"int32")]}function Pa(t,e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(r);var i=rr(t,"int32"),a=rr([n.length,t.length],"int32");for(r=0;r<n.length;r++){var o=i.indexToLoc(n[r]);a.values.set(o,r*t.length)}return a.toTensor()}var La=function(t,e){this.outputShape=[],this.outputShape=t,this.variableNames=e.map((function(t,e){return"T"+e}));var n=[];this.variableNames.forEach((function(t){n.push("float v"+t+" = get"+t+"AtOutCoords();")}));var r=this.variableNames.map((function(t){return"v"+t})).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        float result = "+r+";\n        setOutput(result);\n      }\n    "},za=function(t,e){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=e.map((function(t,e){return"T"+e}));var n=[];this.variableNames.forEach((function(t){n.push("vec4 v"+t+" = get"+t+"AtOutCoords();")}));var r=this.variableNames.map((function(t){return"v"+t})).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        vec4 result = "+r+";\n        setOutput(result);\n      }\n    "},Va=function(t,e,n){this.variableNames=["A"];var r=t.windowSize,i=t.batchSize,a=Math.ceil(t.inSize/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[i,a],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+r+";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < "+r+"; i++) {\n          int inIdx = "+(n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));")+";\n          float candidate = getA(batch, inIdx);\n          if (candidate "+("max"===e?">":"<")+" bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    "};function Ba(t,e){return["x","y","z","w","u","v"].slice(0,e).map((function(e){return t+"."+e}))}function ja(t,e){return 1===e?[t]:Ba(t,e)}function Ua(){var t,e,n,r,i,a,o,s,l,u;return 2===c().getNumber("WEBGL_VERSION")?(t="#version 300 es",e="in",n="out",r="in",i="texture",a="outputColor",o="out vec4 outputColor;",s="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",l="",u="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(t="",e="attribute",n="varying",r="varying",i="texture2D",a="gl_FragColor",o="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",l="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",u="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:i,output:a,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:l,defineRound:u}}function Wa(t,e,n){void 0===n&&(n="index");var r=tt(e);return r.map((function(e,i){return"int "+t[i]+" = "+n+" / "+e+"; "+(i===r.length-1?"int "+t[i+1]+" = "+n+" - "+t[i]+" * "+e:"index -= "+t[i]+" * "+e)+";"})).join("")}function Ha(t){var e=tt(t).map((function(t){return t.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * "+e[0]+" + coords.y * "+e[1]+" + coords.z;\n  }\n"}var qa="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n";function Ga(t){return"offset"+t}function $a(t){var e=t.name,n=T(t.shapeInfo.logicalShape);return n<2?"return "+e+";":"\n    for (int i = 0; i < "+n+"; i++) {\n      if (i == index) {\n        return "+e+"[i];\n      }\n    }\n  "}function Ka(t){if(t<=1)return"int";if(2===t)return"ivec2";if(3===t)return"ivec3";if(4===t)return"ivec4";if(5===t)return"ivec5";if(6===t)return"ivec6";throw Error("GPU for rank "+t+" is not yet supported")}function Xa(t,e){var n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function Ya(t,e){return e.map((function(e){return t[e]})).join(", ")}var Za=function(t,e,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,E(t.length>2,(function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."}));var i=Math.ceil(t[t.length-1]/e);this.outputShape=t.slice(0,-1),i>1&&this.outputShape.push(i),r||this.variableNames.push("bestIndicesA");var a,o,s=this.outputShape,l=s.length,u=Ka(l),c=ja("coords",l);if(1===i){var h=Ka(o=l+1);a="\n        "+h+" sourceLocR = "+h+"("+c.join()+", 0);\n        ++"+c[l-1]+";\n        "+h+" sourceLocG = "+h+"("+c.join()+", 0);\n        ++"+c[l-2]+";\n        "+h+" sourceLocA = "+h+"("+c.join()+", 0);\n        --"+c[l-1]+";\n        "+h+" sourceLocB = "+h+"("+c.join()+", 0);\n        --"+c[l-2]+";"}else o=l,a="\n        "+u+" sourceLocR = coords;\n        ++"+c[l-1]+";\n        "+u+" sourceLocG = coords;\n        ++"+c[l-2]+";\n        "+u+" sourceLocA = coords;\n        --"+c[l-1]+";\n        "+u+" sourceLocB = coords;\n        --"+c[l-2]+";";var d=["x","y","z","w","u","v"].slice(0,o),p="."+d[o-1],f=d.map((function(t){return"int "+t})),m=ja("sourceLocR",o-1).concat("inIdx.r"),g=ja("sourceLocG",o-1).concat("inIdx.g"),y=ja("sourceLocB",o-1).concat("inIdx.b"),v=ja("sourceLocA",o-1).concat("inIdx.a"),b="max"===n?"greaterThan":"lessThan",w=r?"":"\n          inIdx = round(vec4(getBestIndicesAChannel("+m.join()+"),\n                             getBestIndicesAChannel("+g.join()+"),\n                             getBestIndicesAChannel("+y.join()+"),\n                             getBestIndicesAChannel("+v.join()+")));",_="vec4(\n            getAChannel("+m.join()+"),\n            hasNextCol ? getAChannel("+g.join()+") : 0.,\n            hasNextRow ? getAChannel("+y.join()+") : 0.,\n            hasNextRow && hasNextCol ? getAChannel("+v.join()+") : 0.)",x=r?"":"\n      float getBestIndicesAChannel("+f.join()+") {\n        return getChannel(getBestIndicesA("+d.join()+"),\n                                          vec2("+d.slice(-2).join()+"));\n      }";this.userCode="\n      float getAChannel("+f.join()+") {\n        return getChannel(getA("+d.join()+"),\n                               vec2("+d.slice(-2).join()+"));\n      }\n      "+x+"\n      void main() {\n        "+u+" coords = getOutputCoords();\n        bool hasNextCol = "+c[l-1]+" < "+(s[l-1]-1)+";\n        bool hasNextRow = "+c[l-2]+" < "+(s[l-2]-1)+";\n        "+a+"\n        ivec4 srcIdx = ivec4(sourceLocR"+p+", sourceLocG"+p+",\n          sourceLocB"+p+", sourceLocA"+p+") * "+e+";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = "+_+";\n\n        for (int i = 0; i < "+e+"; i++) {\n          inIdx = srcIdx;\n          "+w+"\n          vec4 candidate = "+_+";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4("+b+"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    "},Qa=function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var e=t.effectiveFilterHeight,n=t.effectiveFilterWidth;this.userCode="\n      const ivec2 pads = ivec2("+(e-1-t.padInfo.top)+", "+(n-1-t.padInfo.left)+");\n      const float avgMultiplier = float("+1/(t.filterHeight*t.filterWidth)+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+e+";\n            wR += "+t.dilationHeight+") {\n          float dyR = float(dyRCorner + wR) / "+t.strideHeight+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+n+";\n            wC+= "+t.dilationWidth+") {\n            float dyC = float(dyCCorner + wC) / "+t.strideWidth+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Ja=function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var e=t.effectiveFilterDepth,n=t.effectiveFilterHeight,r=t.effectiveFilterWidth;this.userCode="\n      const ivec3 pads = ivec3("+(e-1-t.padInfo.front)+", "+(n-1-t.padInfo.top)+", "+(r-1-t.padInfo.left)+");\n      const float avgMultiplier = float("+1/(t.filterDepth*t.filterHeight*t.filterWidth)+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+e+";\n            wD += "+t.dilationDepth+") {\n          float dyD = float(dyDCorner + wD) / "+t.strideDepth+".0;\n\n          if (dyD < 0.0 || dyD >= "+t.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+n+";\n              wR += "+t.dilationHeight+") {\n            float dyR = float(dyRCorner + wR) / "+t.strideHeight+".0;\n\n            if (dyR < 0.0 || dyR >= "+t.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+r+";\n                wC += "+t.dilationWidth+") {\n              float dyC = float(dyCCorner + wC) / "+t.strideWidth+".0;\n\n              if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},to=function(t,e,n,r,i,a){this.outputShape=[],this.variableNames=["x","mean","variance"],Nr(t,e),Nr(t,n);var o="0.0";null!=r&&(Nr(t,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var s="1.0";null!=i&&(Nr(t,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = "+o+";\n        float scale = "+s+";\n        float inv = scale * inversesqrt(variance + float("+a+"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    "},eo=function(t,e,n,r,i,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Nr(t,e),Nr(t,n);var o="vec4(0.0)";null!=r&&(Nr(t,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var s="vec4(1.0)";null!=i&&(Nr(t,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        vec4 offset = "+o+";\n        vec4 scale = "+s+";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4("+a+"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    "},no=function(t,e,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Nr(e,n),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        "+t+"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    "},ro="return a + b;",io="return a - b;",ao="return a * b;",oo="return (a < 0.) ? b * a : a;",so=function(t,e,n){this.variableNames=["A","B"],this.outputShape=Nr(e,n),this.userCode="\n      float binaryOperation(float a, float b) {\n        "+t+"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    "},lo="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",uo=function(t,e,n,r){void 0===r&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Nr(e,n);var i=this.outputShape.length,a="";if(r)if(0===i||1===T(this.outputShape))a="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(a="\n          "+Ka(i)+" coords = getOutputCoords();\n        ",1===i)a+="\n            result.y = (coords + 1) >= "+this.outputShape[0]+" ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ";else{var o=ja("coords",i);a+="\n            bool nextRowOutOfBounds =\n              ("+o[i-2]+" + 1) >= "+this.outputShape[i-2]+";\n            bool nextColOutOfBounds =\n              ("+o[i-1]+" + 1) >= "+this.outputShape[i-1]+";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        "+t+"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        "+a+"\n\n        setOutput(result);\n      }\n    "},co=function(){function t(t){this.variableNames=["A"],this.outputShape=t,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t,e){var n=this;return function(r,i){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(i,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(i,"maxVal")),r.gl.uniform1f(n.minLoc,t),r.gl.uniform1f(n.maxLoc,e)}},t}(),ho=function(){function t(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t,e){var n=this;return function(r,i){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(i,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(i,"maxVal")),r.gl.uniform1f(n.minLoc,t),r.gl.uniform1f(n.maxLoc,e)}},t}(),po=function(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "},fo=function(t){this.outputShape=[],this.outputShape=Dn(t,1),this.variableNames=t.map((function(t,e){return"T"+e}));var e=new Array(t.length-1);e[0]=t[0][1];for(var n=1;n<e.length;n++)e[n]=e[n-1]+t[n][1];var r=["if (yC < "+e[0]+") setOutput(getT0(yR, yC));"];for(n=1;n<e.length;n++)r.push("else if (yC < "+e[n]+") setOutput(getT"+n+"(yR, yC-"+e[n-1]+"));");r.push("else setOutput(getT"+e.length+"(yR, yC-"+e[e.length-1]+"));"),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        "+r.join("\n        ")+"\n      }\n    "},mo=function(t,e){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Dn(t,e);var n=this.outputShape,r=n.length,i=Ka(r),a=ja("coords",r),o=["x","y","z","w","u","v"].slice(0,r);this.variableNames=t.map((function(t,e){return"T"+e}));var s=new Array(t.length-1);s[0]=t[0][e];for(var l=1;l<s.length;l++)s[l]=s[l-1]+t[l][e];var u=o[e],c=o.slice(-2),h=o.join(),d="if ("+u+" < "+s[0]+") {\n        return getChannel(\n            getT0("+h+"), vec2("+c.join()+"));\n        }";for(l=1;l<s.length;l++){var p=s[l-1];d+="\n        if ("+u+" < "+s[l]+"  && "+u+" >= "+s[l-1]+") {\n          return getChannel(\n            getT"+l+"("+go(o,u,p)+"),\n            vec2("+go(c,u,p)+"));\n        }"}var f=s[s.length-1];d+="\n        return getChannel(\n          getT"+s.length+"("+go(o,u,f)+"),\n          vec2("+go(c,u,f)+"));",this.userCode="\n      float getValue("+o.map((function(t){return"int "+t}))+") {\n        "+d+"\n      }\n\n      void main() {\n        "+i+" coords = getOutputCoords();\n        vec4 result = vec4(getValue("+a+"), 0., 0., 0.);\n\n        "+a[r-1]+" = "+a[r-1]+" + 1;\n        if ("+a[r-1]+" < "+n[r-1]+") {\n          result.g = getValue("+a+");\n        }\n\n        "+a[r-2]+" = "+a[r-2]+" + 1;\n        if ("+a[r-2]+" < "+n[r-2]+") {\n          result.a = getValue("+a+");\n        }\n\n        "+a[r-1]+" = "+a[r-1]+" - 1;\n        if ("+a[r-2]+" < "+n[r-2]+" &&\n            "+a[r-1]+" < "+n[r-1]+") {\n          result.b = getValue("+a+");\n        }\n        setOutput(result);\n      }\n    "};function go(t,e,n){var r=t.indexOf(e);return t.map((function(t,e){return e===r?t+" - "+n:t})).join()}var yo=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+t.batchSize+"; b++) {\n          for (int yR = 0; yR < "+t.outHeight+"; yR++) {\n            int xR = wR + yR * "+t.strideHeight+" - "+t.padInfo.top+";\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+t.outWidth+"; yC++) {\n              int xC = wC + yC * "+t.strideWidth+" - "+t.padInfo.left+";\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              if ("+("channelsLast"===t.dataFormat)+") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},vo=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r="channelsLast"===t.dataFormat;this.userCode="\n      const ivec2 pads = ivec2("+(e-1-t.padInfo.top)+", "+(n-1-t.padInfo.left)+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords["+(r?3:1)+"];\n\n        ivec2 dyCorner = ivec2(coords["+(r?1:2)+"], coords["+(r?2:3)+"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+e+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+t.strideHeight+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+e+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+t.strideWidth+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            for (int d2 = 0; d2 < "+t.outChannels+"; d2++) {\n\n              if ("+r+") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},bo=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape,this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+t.batchSize+"; b++) {\n          for (int yF = 0; yF < "+t.outDepth+"; yF++) {\n            int xF = wF + yF * "+t.strideDepth+" - "+t.padInfo.front+";\n\n            if (xF < 0 || xF >= "+t.inDepth+") {\n              continue;\n            }\n\n            for (int yR = 0; yR < "+t.outHeight+"; yR++) {\n              int xR = wR + yR * "+t.strideHeight+" - "+t.padInfo.top+";\n\n              if (xR < 0 || xR >= "+t.inHeight+") {\n                continue;\n              }\n\n              for (int yC = 0; yC < "+t.outWidth+"; yC++) {\n                int xC = wC + yC * "+t.strideWidth+" - "+t.padInfo.left+";\n\n                if (xC < 0 || xC >= "+t.inWidth+") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},wo=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterDepth,n=t.filterHeight,r=t.filterWidth;this.userCode="\n      const ivec3 pads = ivec3("+(e-1-t.padInfo.front)+", "+(n-1-t.padInfo.top)+", "+(r-1-t.padInfo.left)+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+e+"; wF++) {\n          float dyF = float(dyFCorner + wF) / "+t.strideDepth+".0;\n\n          if (dyF < 0.0 || dyF >= "+t.outDepth+".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = "+e+" - 1 - wF;\n\n          for (int wR = 0; wR < "+n+"; wR++) {\n            float dyR = float(dyRCorner + wR) / "+t.strideHeight+".0;\n\n            if (dyR < 0.0 || dyR >= "+t.outHeight+".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = "+n+" - 1 - wR;\n\n            for (int wC = 0; wC < "+r+"; wC++) {\n              float dyC = float(dyCCorner + wC) / "+t.strideWidth+".0;\n\n              if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = "+r+" - 1 - wC;\n\n              for (int d2 = 0; d2 < "+t.outChannels+"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},_o=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * "+t.outChannels/t.inChannels+" + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < "+t.batchSize+"; b++) {\n          for (int yR = 0; yR < "+t.outHeight+"; yR++) {\n            int xR = wR + yR * "+t.strideHeight+" - "+t.padInfo.top+";\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+t.outWidth+"; yC++) {\n              int xC = wC + yC * "+t.strideWidth+" - "+t.padInfo.left+";\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},xo=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 pads = ivec2("+(e-1-t.padInfo.top)+", "+(n-1-t.padInfo.left)+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < "+e+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+t.strideHeight+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+e+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+t.strideWidth+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < "+r+"; dm++) {\n              int d2 = d1 * "+r+" + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Co=function(t,e,n,r){void 0===e&&(e=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var i=t.padInfo.top,a=t.padInfo.left,o=t.strideHeight,s=t.strideWidth,l=t.dilationHeight,u=t.dilationWidth,c=t.filterHeight,h=t.filterWidth,d=4*Math.floor(t.inChannels/4),p=t.inChannels%4,f="channelsLast"===t.dataFormat,m=f?1:2,g=f?2:3,y=f?3:1,v="",b="";n&&(v=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",b="result = activation(result);");var w=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+v+"\n\n      const ivec2 strides = ivec2("+o+", "+s+");\n      const ivec2 pads = ivec2("+i+", "+a+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords["+y+"];\n\n        ivec2 xRCCorner =\n            ivec2(coords["+m+"], coords["+g+"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+c+"; wR++) {\n          int xR = xRCorner + wR * "+l+";\n\n          if (xR < 0 || xR >= "+t.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+h+"; wC++) {\n            int xC = xCCorner + wC * "+u+";\n\n            if (xC < 0 || xC >= "+t.inWidth+") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < "+d+"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if ("+f+") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if ("+(1===p)+") {\n\n              if ("+f+") {\n                dotProd +=\n                    getX(batch, xR, xC, "+d+") *\n                    getW(wR, wC, "+d+", d2);\n              } else {\n                dotProd +=\n                    getX(batch, "+d+", xR, xC) *\n                    getW(wR, wC, "+d+", d2);\n              }\n\n            } else if ("+(2===p)+") {\n              vec2 wValues = vec2(\n                getW(wR, wC, "+d+", d2),\n                getW(wR, wC, "+d+" + 1, d2)\n              );\n\n              if ("+f+") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, "+d+"),\n                  getX(batch, xR, xC, "+d+" + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, "+d+", xR, xC),\n                  getX(batch, "+d+" + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if ("+(3===p)+") {\n              vec3 wValues = vec3(\n                getW(wR, wC, "+d+", d2),\n                getW(wR, wC, "+d+" + 1, d2),\n                getW(wR, wC, "+d+" + 2, d2)\n              );\n\n              if ("+f+") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, "+d+"),\n                  getX(batch, xR, xC, "+d+" + 1),\n                  getX(batch, xR, xC, "+d+" + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, "+d+", xR, xC),\n                  getX(batch, "+d+" + 1, xR, xC),\n                  getX(batch, "+d+" + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        "+w+"\n        "+b+"\n        setOutput(result);\n      }\n    "},So=function(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var e=t.padInfo.front,n=t.padInfo.top,r=t.padInfo.left,i=t.strideDepth,a=t.strideHeight,o=t.strideWidth,s=t.dilationDepth,l=t.dilationHeight,u=t.dilationWidth,c=t.filterDepth,h=t.filterHeight,d=t.filterWidth,p=4*Math.floor(t.inChannels/4),f=t.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3("+i+", "+a+", "+o+");\n      const ivec3 pads = ivec3("+e+", "+n+", "+r+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+c+"; wF++) {\n          int xF = xFCorner + wF * "+s+";\n\n          if (xF < 0 || xF >= "+t.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+h+"; wR++) {\n            int xR = xRCorner + wR * "+l+";\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+d+"; wC++) {\n              int xC = xCCorner + wC * "+u+";\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < "+p+"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if ("+(1===f)+") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, "+p+") *\n                  getW(wF, wR, wC, "+p+", d2);\n              } else if ("+(2===f)+") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, "+p+"),\n                  getX(batch, xF, xR, xC, "+p+" + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, "+p+", d2),\n                  getW(wF, wR, wC, "+p+" + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if ("+(3===f)+") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, "+p+"),\n                  getX(batch, xF, xR, xC, "+p+" + 1),\n                  getX(batch, xF, xR, xC, "+p+" + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, "+p+", d2),\n                  getW(wF, wR, wC, "+p+" + 1, d2),\n                  getW(wF, wR, wC, "+p+" + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},ko=function(t,e,n,r){void 0===e&&(e=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var i=t.inHeight,a=t.inWidth,o=t.padInfo.top,s=t.padInfo.left,l=t.strideHeight,u=t.strideWidth,c=t.dilationHeight,h=t.dilationWidth,d=t.filterHeight,p=t.filterWidth,f=t.outChannels/t.inChannels,m="",g="";n&&(m=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",g="result = activation(result);");var y=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+m+"\n\n      const ivec2 strides = ivec2("+l+", "+u+");\n      const ivec2 pads = ivec2("+o+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / "+f+";\n        int q = d2 - d1 * "+f+";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < "+d+"; wR++) {\n          int xR = xRCorner + wR * "+c+";\n\n          if (xR < 0 || xR >= "+i+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+p+"; wC++) {\n            int xC = xCCorner + wC * "+h+";\n\n            if (xC < 0 || xC >= "+a+") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        "+y+"\n        "+g+"\n        setOutput(result);\n      }\n    "},Eo=function(t,e,n,r){void 0===e&&(e=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.outShape;for(var i=t.inHeight,a=t.inWidth,o=t.padInfo.top,s=t.padInfo.left,l=t.strideHeight,u=t.strideWidth,c=t.dilationHeight,h=t.dilationWidth,d=t.filterHeight,p=t.filterWidth,f=p,m="int xR; int xC; int xCOffset;",g=0;g<d;g++)for(var y=0;y<p;y++)m+="\n          vec4 xTexelR"+g+"C"+2*y+" = vec4(0.);\n          vec4 wR"+g+"C"+y+" = vec4(0.);\n          vec4 xR"+g+"C"+y+" = vec4(0.);";for(g=0;g<d;g++)for(var v=0;v<f;v++){if(m+="\n          xR = xRCorner + "+g*c+";\n          xC = xCCorner + "+(y=2*v)*h+";\n        ",1===u){if(y<p&&(m+=s%2==1?"\n                xCOffset = xC + 1;\n                if(xR >= 0 && xR < "+i+" && xCOffset >= 0 && xCOffset < "+a+") {\n                  xTexelR"+g+"C"+y+" = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= "+a+") {\n                    xTexelR"+g+"C"+y+".zw = vec2(0.);\n                  }\n                } else {\n                  xTexelR"+g+"C"+y+" = vec4(0.);\n                }\n\n                xCOffset = xC + 1 - 2;\n                if(xR >= 0 && xR < "+i+" && xCOffset >= 0 && xCOffset < "+a+") {\n                  vec4 previous = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= "+a+") {\n                    previous.zw = vec2(0.);\n                  }\n\n                  xR"+g+"C"+y+" = vec4(previous.zw, xTexelR"+g+"C"+y+".xy);\n                } else {\n                  xR"+g+"C"+y+" = vec4(0, 0, xTexelR"+g+"C"+y+".xy);\n                }\n              ":"\n                if(xR >= 0 && xR < "+i+" && xC >= 0 && xC < "+a+") {\n                  xTexelR"+g+"C"+y+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+g+"C"+y+" = vec4(0.);\n                }\n\n                xR"+g+"C"+y+" = xTexelR"+g+"C"+y+";\n              ",y+1<p)){var b=s%2==0?S(h):h;h%2==0&&s%2==1||h%2!=0&&s%2!=1?(m+="\n                  xCOffset = xC + "+s%2+" + "+b+";\n\n                  if(xR >= 0 && xR < "+i+" &&\n                    xCOffset >= 0 && xCOffset < "+a+") {\n                    xTexelR"+g+"C"+(y+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n                ",h>1&&(m+="\n                    xCOffset -= 2;\n                    if(xR >= 0 && xR < "+i+" &&\n                      xCOffset >= 0 && xCOffset < "+a+") {\n                      xTexelR"+g+"C"+y+" = getX(batch, xR, xCOffset, d1);\n                    } else {\n                      xTexelR"+g+"C"+y+" = vec4(0.);\n                    }\n                  "),m+="\n                  xR"+g+"C"+(y+1)+" = vec4(\n                    xTexelR"+g+"C"+y+".zw, xTexelR"+g+"C"+(y+2)+".xy);\n                "):m+="\n                  xCOffset = xC + "+b+";\n\n                  if(xR >= 0 && xR < "+i+" &&\n                    xCOffset >= 0 && xCOffset < "+a+") {\n                    xTexelR"+g+"C"+(y+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n\n                  xR"+g+"C"+(y+1)+" = xTexelR"+g+"C"+(y+2)+";\n                "}}else y<p&&(m+="\n              if(xR >= 0 && xR < "+i+") {\n            ",s%2==1?(m+="\n                xCOffset = xC + 1 - "+u+";\n                if(xCOffset >= 0 && xCOffset < "+a+") {\n                  xTexelR"+g+"C"+y+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+g+"C"+y+" = vec4(0.);\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < "+a+") {\n                  xTexelR"+g+"C"+(y+2)+" = getX(batch, xR, xC + 1, d1);\n                } else {\n                  xTexelR"+g+"C"+(y+2)+" = vec4(0.);\n                }\n\n                xR"+g+"C"+y+" = vec4(\n                  xTexelR"+g+"C"+y+".zw, xTexelR"+g+"C"+(y+2)+".zw);\n              ",y+1<p&&(m+="\n                  vec4 final = vec4(0.);\n                  xCOffset = xC + 1 + "+u+";\n                  if(xCOffset >= 0 && xCOffset < "+a+") {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xR"+g+"C"+(y+1)+" = vec4(xTexelR"+g+"C"+(y+2)+".xy, final.xy);\n                ")):(m+="\n                if(xC >= 0 && xC < "+a+") {\n                  xTexelR"+g+"C"+y+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+g+"C"+y+" = vec4(0.);\n                }\n\n                xCOffset = xC + "+u+";\n                if(xCOffset >= 0 && xCOffset < "+a+") {\n                  xTexelR"+g+"C"+(y+2)+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+g+"C"+(y+2)+" = vec4(0.);\n                }\n\n                xR"+g+"C"+y+" = vec4(\n                  xTexelR"+g+"C"+y+".xy, xTexelR"+g+"C"+(y+2)+".xy);\n              ",y+1<p&&(m+="\n                  xR"+g+"C"+(y+1)+" = vec4(\n                    xTexelR"+g+"C"+y+".zw, xTexelR"+g+"C"+(y+2)+".zw);\n                ")),m+="}");y<p&&(m+="\n            vec4 wTexelR"+g+"C"+y+" = getW("+g+", "+y+", d1, q);\n            wR"+g+"C"+y+" = vec4(wTexelR"+g+"C"+y+".xz, wTexelR"+g+"C"+y+".xz);\n          ",y+1<p&&(m+="\n              vec4 wTexelR"+g+"C"+(y+1)+" = getW("+g+", "+(y+1)+", d1, q);\n              wR"+g+"C"+(y+1)+" =\n                vec4(wTexelR"+g+"C"+(y+1)+".xz, wTexelR"+g+"C"+(y+1)+".xz);"))}for(g=0;g<d;g++)for(y=0;y<p;y++)m+="dotProd += xR"+g+"C"+y+" * wR"+g+"C"+y+";";var w="",_="";n&&(w=r?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"vec4 activation(vec4 x) {\n          "+n+"\n        }",_="result = activation(result);");var x=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+w+"\n\n      const ivec2 strides = ivec2("+l+", "+u+");\n      const ivec2 pads = ivec2("+o+", "+s+");\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2;\n        int q = 0;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        vec4 dotProd = vec4(0.);\n\n        "+m+"\n\n        vec4 result = dotProd;\n        "+x+"\n        "+_+"\n        setOutput(result);\n      }\n    "},Io=function(t,e,n,r,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var a=t[0],o=t[1],s=t[2],l=n[0],u=n[1];this.outputShape=[e[0],l,u,t[3]];var c=[o-1+".0",s-1+".0"],h=c[0],d=c[1],p=l>1?[""+(o-1)/(l-1),"(y2-y1) * height_ratio","y1*"+h+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+h],f=u>1?[""+(s-1)/(u-1),"(x2-x1) * width_ratio","x1*"+d+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+d];this.userCode="\n      const float height_ratio = float("+p[0]+");\n      const float width_ratio = float("+f[0]+");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= "+a+") {\n          return;\n        }\n\n        float height_scale = "+p[1]+";\n        float width_scale = "+f[1]+";\n\n        float in_y = "+p[2]+";\n        if( in_y < 0.0 || in_y > "+h+" ) {\n          setOutput(float("+i+"));\n          return;\n        }\n        float in_x = "+f[2]+";\n        if( in_x < 0.0 || in_x > "+d+" ) {\n          setOutput(float("+i+"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if("+("bilinear"===r?1:0)+" == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    "},Ao=function(t,e,n){this.variableNames=["x"],this.outputShape=t;var r=t.length,i=t[t.length-1],a=n?"<":">";this.userCode="\n      int getIndex(int i) {\n        "+(n?"return "+i+" -i - 1;":"return i;")+"\n      }\n\n      void main() {\n        "+Ka(r)+" coords = getOutputCoords();\n        int end = "+Do(r,"coords")+";\n        float val = 0.0;\n        for (int i = "+i+" - 1; i >= 0; i -= 1) {\n          int idx = getIndex(i);\n          if (idx "+a+" end) {\n            continue;\n          }\n          if (idx == end && "+e+") {\n            continue;\n          }\n          "+Do(r,"coords")+" = idx;\n          val += getX("+function(t,e){if(1===t)return""+e;if(2===t)return e+".x, "+e+".y";if(3===t)return e+".x, "+e+".y, "+e+".z";if(4===t)return e+".x, "+e+".y, "+e+".z, "+e+".w";throw Error("Cumulative sum for rank "+t+" is not yet supported")}(r,"coords")+");\n        }\n        setOutput(val);\n      }\n    "};function Do(t,e){if(1===t)return""+e;if(2===t)return e+".y";if(3===t)return e+".z";if(4===t)return e+".w";throw Error("Cumulative sum for rank "+t+" is not yet supported")}var To=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Wt.DENSE;var e=Zt(t),n=Ua();this.outputShape=t,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+Wa(["r","c","d"],t)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+e[0]+", "+e[1]+"));\n        int index = 4 * (resTexRC.x * "+e[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        "+n.output+" = result;\n      }\n    "},No=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Wt.DENSE;var e=Zt(t),n=Ua();this.outputShape=t,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+Wa(["r","c","d"],t)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+e[0]+", "+e[1]+"));\n        int index = 4 * (resTexRC.x * "+e[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        "+n.output+" = result;\n      }\n    "},Ro=function(){function t(t,e,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=e,this.dataFormat=n,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = "+this.getHeightCoordString()+";\n      int w = "+this.getWidthCoordString()+";\n      int d = "+this.getDepthCoordString()+";\n\n      int in_h = h / "+e+";\n      int offset_h = imod(h, "+e+");\n      int in_w = w / "+e+";\n      int offset_w = imod(w, "+e+");\n      int offset_d = (offset_h * "+e+" + offset_w) *\n        "+this.getOutputDepthSize()+";\n      int in_d = d + offset_d;\n\n      float result = "+this.getInputSamplingString()+";\n      setOutput(result);\n    }\n  "}return t.prototype.getHeightCoordString=function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"},t.prototype.getWidthCoordString=function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"},t.prototype.getDepthCoordString=function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"},t.prototype.getOutputDepthSize=function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]},t.prototype.getInputSamplingString=function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},t}(),Oo=function(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "},Fo=function(t){this.variableNames=["A"],this.outTexUsage=Ht.DOWNLOAD;var e=Ua();this.outputShape=t,this.userCode="\n      "+qa+"\n\n      void main() {\n        float x = getAAtOutCoords();\n        "+e.output+" = encode_float(x);\n      }\n    "},Mo=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Ht.DOWNLOAD;var e=Ua();this.outputShape=t,this.userCode="\n      "+qa+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        "+e.output+" = encode_float(x);\n      }\n    "},Po=function(t,e,n){void 0===n&&(n=!1),this.variableNames=["A"];var r=Ua(),i=e[0],a=e[1];this.outputShape=t;var o="result";n&&(o="floor(result * 255. + 0.5)"),this.userCode="\n      "+Ha(t)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n        \n        int r = flatIndex / "+a+";\n        int c = imod(flatIndex, "+a+");\n        vec2 uv = (vec2(c, r) + halfCR) / vec2("+a+".0, "+i+".0);\n        vec4 values = "+r.texture2D+"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        "+r.output+" = vec4("+o+", 0., 0., 0.);\n      }\n    "},Lo=function(t,e,n){void 0===n&&(n=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=Ua(),i=e[0],a=e[1];this.outputShape=t;var o="",s="result";n&&(s="floor(result * 255. + 0.5)");for(var l=0;l<=1;l++)for(var u=0;u<=1;u++){var c=2*l+u;o+="\n          localCoords = coords;\n          if(localCoords[2] + "+u+" < "+t[2]+") {\n            localCoords[2] += "+u+";\n            if(localCoords[1] + "+l+" < "+t[1]+") {\n              localCoords[1] += "+l+";\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n\n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / "+a+";\n              c = imod(flatIndex, "+a+");\n              uv = (vec2(c, r) + halfCR) / vec2("+a+".0, "+i+".0);\n              values = "+r.texture2D+"(A, uv);\n\n              if(offset == 0) {\n                result["+c+"] = values[0];\n              } else if(offset == 1) {\n                result["+c+"] = values[1];\n              } else if(offset == 2) {\n                result["+c+"] = values[2];\n              } else {\n                result["+c+"] = values[3];\n              }\n            }\n          }\n        "}this.userCode="\n      "+Ha(t)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n\n        "+o+"\n\n        "+r.output+" = "+s+";\n      }\n    "},zo=function(t,e,n){this.variableNames=["real","imag"];var r=e[1];this.outputShape=e;var i=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI;this.userCode="\n      const float exponentMultiplier = "+i+";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        "+t+"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float("+r+");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < "+r+"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / "+(n?r+".0":"1.0")+";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    "},Vo=function(){function t(t,e){this.outputShape=[],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t){var e=this;return function(n,r){null==e.valueLoc&&(e.valueLoc=n.getUniformLocationNoThrow(r,"value")),n.gl.uniform1f(e.valueLoc,t)}},t}(),Bo=function(t,e,n){this.variableNames=["A","indices"];var r=t.slice();r[n]=e,this.outputShape=r,this.rank=r.length;var i=Ka(this.rank),a=function(t,e){var n=t.length;if(n>4)throw Error("Gather for rank "+n+" is not yet supported");if(1===n)return"int(getIndices(resRC))";for(var r=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[],a=0;a<t.length;a++)i.push(a===e?"int(getIndices("+r[a]+"))":""+r[a]);return i.join()}(t,n);this.userCode="\n      void main() {\n        "+i+" resRC = getOutputCoords();\n        setOutput(getA("+a+"));\n      }\n    "},jo=function(t,e,n){this.sliceDim=t,this.strides=e,this.variableNames=["x","indices"],this.outputShape=n;var r=Ka(e.length),i=Ka(n.length);this.userCode="\n        "+r+" strides = "+r+"("+this.strides+");\n         void main() {\n          "+i+" coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < "+this.sliceDim+"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * "+(this.sliceDim>1?"strides[j]":"strides")+";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      "};function Uo(t,e){var n=Ua();return oe(t,e,n.version+"\n    precision highp float;\n    "+n.attribute+" vec3 clipSpacePos;\n    "+n.attribute+" vec2 uv;\n    "+n.varyingVs+" vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }")}function Wo(t,e){return fe(t,e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function Ho(t,e){return me(t,e,new Uint16Array([0,1,2,2,1,3]))}function qo(t,e,n,r,i,a,o){ye(n,r);var s=ge(t,e),l=t.TEXTURE_2D;return te(t,e,(function(){return t.bindTexture(l,s)})),te(t,e,(function(){return t.texParameteri(l,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)})),te(t,e,(function(){return t.texParameteri(l,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)})),te(t,e,(function(){return t.texParameteri(l,t.TEXTURE_MIN_FILTER,t.NEAREST)})),te(t,e,(function(){return t.texParameteri(l,t.TEXTURE_MAG_FILTER,t.NEAREST)})),te(t,e,(function(){return t.texImage2D(l,0,i,n,r,0,a,o,null)})),te(t,e,(function(){return t.bindTexture(t.TEXTURE_2D,null)})),s}function Go(t,e,n,r,i){var a=Yt(n,r);return qo(t,e,a[0],a[1],i.internalFormatFloat,i.textureFormatFloat,t.FLOAT)}function $o(t,e,n,r,i){var a=Yt(n,r);return qo(t,e,a[0],a[1],i.internalFormatHalfFloat,i.textureFormatFloat,i.textureTypeHalfFloat)}function Ko(t,e,n,r,i){var a=Yt(n,r);return qo(t,e,a[0],a[1],t.RGBA,t.RGBA,t.UNSIGNED_BYTE)}function Xo(t,e,n,r,i){var a=Qt(n,r);return qo(t,e,a[0],a[1],i.internalFormatPackedFloat,t.RGBA,t.FLOAT)}function Yo(t,e,n,r,i){var a=Qt(n,r);return qo(t,e,a[0],a[1],i.internalFormatPackedHalfFloat,t.RGBA,i.textureTypeHalfFloat)}function Zo(t,e,n,r){return te(t,e,(function(){return t.bindBuffer(t.ARRAY_BUFFER,r)})),be(t,e,n,"clipSpacePos",r,3,20,0)&&be(t,e,n,"uv",r,2,20,12)}function Qo(t,e,n,r,i,a,o){var s,l,u;te(t,e,(function(){return t.bindTexture(t.TEXTURE_2D,n)})),a instanceof Uint8Array?(s=new Uint8Array(r*i*4),l=t.UNSIGNED_BYTE,u=t.RGBA):(s=new Float32Array(r*i*4),l=t.FLOAT,u=o.internalFormatPackedFloat),s.set(a),te(t,e,(function(){return t.texImage2D(t.TEXTURE_2D,0,u,r,i,0,t.RGBA,l,s)})),te(t,e,(function(){return t.bindTexture(t.TEXTURE_2D,null)}))}function Jo(t,e,n,r){te(t,e,(function(){return t.bindTexture(t.TEXTURE_2D,n)})),r.data instanceof Uint8Array?te(t,e,(function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,r.width,r.height,0,t.RGBA,t.UNSIGNED_BYTE,r.data)})):te(t,e,(function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r)})),te(t,e,(function(){return t.bindTexture(t.TEXTURE_2D,null)}))}function ts(t,e,n,r,i){var a=t.createBuffer();te(t,e,(function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,a)}));var o=16*n*r;return te(t,e,(function(){return t.bufferData(t.PIXEL_PACK_BUFFER,o,t.STREAM_READ)})),te(t,e,(function(){return t.readPixels(0,0,r,n,t.RGBA,t.FLOAT,0)})),te(t,e,(function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,null)})),a}function es(t,e,n){var r=t,i=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function ns(t,e,n,r,i){var a=Yt(n,r),o=a[0],s=a[1],l=new Uint8Array(n*r*4);return te(t,e,(function(){return t.readPixels(0,0,o,s,i.downloadTextureFormat,t.UNSIGNED_BYTE,l)})),new Float32Array(l.buffer)}function rs(t,e,n,r,i,a,o,s){var l=t,u=new Float32Array(function(t,e){var n=Qt(t,e);return n[0]*n[1]*4}(a,o));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}function is(t,e,n,r){var i=new Float32Array(n*r*4);return te(t,e,(function(){return t.readPixels(0,0,r,n,t.RGBA,t.FLOAT,i)})),i}var as=Object.freeze({createVertexShader:Uo,createVertexBuffer:Wo,createIndexBuffer:Ho,createFloat32MatrixTexture:Go,createFloat16MatrixTexture:$o,createUnsignedBytesMatrixTexture:Ko,createPackedMatrixTexture:Xo,createFloat16PackedMatrixTexture:Yo,bindVertexProgramAttributeStreams:Zo,uploadDenseMatrixToTexture:Qo,uploadPixelDataToTexture:Jo,createBufferFromOutputTexture:ts,downloadFloat32MatrixFromBuffer:es,downloadByteEncodedFloatMatrixFromOutputTexture:ns,downloadPackedMatrixFromBuffer:rs,downloadMatrixFromPackedOutputTexture:is}),os=function(){function t(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var e=c().getNumber("WEBGL_VERSION");null!=t?(this.gl=t,Kt(e,t)):this.gl=Xt(e);var n="WEBGL_color_buffer_float";if(1===c().getNumber("WEBGL_VERSION")){if(this.textureFloatExtension=ae(this.gl,this.debug,"OES_texture_float"),Ve(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=ae(this.gl,this.debug,"OES_texture_half_float");else if(c().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),Ve(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=ae(this.gl,this.debug,"EXT_color_buffer_half_float");else if(c().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(Ve(this.gl,n="EXT_color_buffer_float"))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!Ve(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=Wo(this.gl,this.debug),this.indexBuffer=Ho(this.gl,this.debug),this.framebuffer=ve(this.gl,this.debug),this.textureConfig=Jt(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(t.prototype,"debug",{get:function(){return c().getBool("DEBUG")},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){var t=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var e=this.gl;te(e,this.debug,(function(){return e.finish()})),te(e,this.debug,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)})),te(e,this.debug,(function(){return e.deleteFramebuffer(t.framebuffer)})),te(e,this.debug,(function(){return e.bindBuffer(e.ARRAY_BUFFER,null)})),te(e,this.debug,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)})),te(e,this.debug,(function(){return e.deleteBuffer(t.indexBuffer)})),this.disposed=!0}},t.prototype.createFloat32MatrixTexture=function(t,e){return this.throwIfDisposed(),Go(this.gl,this.debug,t,e,this.textureConfig)},t.prototype.createFloat16MatrixTexture=function(t,e){return this.throwIfDisposed(),$o(this.gl,this.debug,t,e,this.textureConfig)},t.prototype.createUnsignedBytesMatrixTexture=function(t,e){return this.throwIfDisposed(),Ko(this.gl,this.debug,t,e)},t.prototype.uploadPixelDataToTexture=function(t,e){this.throwIfDisposed(),Jo(this.gl,this.debug,t,e)},t.prototype.uploadDenseMatrixToTexture=function(t,e,n,r){this.throwIfDisposed(),Qo(this.gl,this.debug,t,e,n,r,this.textureConfig)},t.prototype.createFloat16PackedMatrixTexture=function(t,e){return this.throwIfDisposed(),Yo(this.gl,this.debug,t,e,this.textureConfig)},t.prototype.createPackedMatrixTexture=function(t,e){return this.throwIfDisposed(),Xo(this.gl,this.debug,t,e,this.textureConfig)},t.prototype.deleteMatrixTexture=function(t){var e=this;this.throwIfDisposed(),this.outputTexture===t&&(ke(this.gl,this.debug,this.framebuffer),this.outputTexture=null),te(this.gl,this.debug,(function(){return e.gl.deleteTexture(t)}))},t.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(t,e,n){var r=this;return this.downloadMatrixDriver(t,(function(){return ns(r.gl,r.debug,e,n,r.textureConfig)}))},t.prototype.downloadPackedMatrixFromBuffer=function(t,e,n,r,i,a){return rs(this.gl,t,0,0,0,i,a)},t.prototype.downloadFloat32MatrixFromBuffer=function(t,e){return es(this.gl,t,e)},t.prototype.createBufferFromTexture=function(t,e,n){this.bindTextureToFrameBuffer(t);var r=ts(this.gl,this.debug,e,n);return this.unbindTextureToFrameBuffer(),r},t.prototype.createAndWaitForFence=function(){var t=this.createFence(this.gl);return this.pollFence(t)},t.prototype.createFence=function(t){var e,n,r=this;if(c().getBool("WEBGL_FENCE_API_ENABLED")){var i=t,a=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),n=function(){var t=i.clientWaitSync(a,0,0);return t===i.ALREADY_SIGNALED||t===i.CONDITION_SATISFIED},e=a}else c().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(e=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(e,c().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:e,isFencePassed:n}},t.prototype.downloadMatrixFromPackedTexture=function(t,e,n){var r=this;return this.downloadMatrixDriver(t,(function(){return is(r.gl,r.debug,e,n)}))},t.prototype.createProgram=function(t){this.throwIfDisposed();var e=this.gl,n=se(e,this.debug,t),r=Uo(e,this.debug),i=he(e,this.debug);return te(e,this.debug,(function(){return e.attachShader(i,r)})),te(e,this.debug,(function(){return e.attachShader(i,n)})),de(e,this.debug,i),this.debug&&pe(e,this.debug,i),this.vertexAttrsAreBound||(this.setProgram(i),this.vertexAttrsAreBound=Zo(e,this.debug,this.program,this.vertexBuffer)),i},t.prototype.deleteProgram=function(t){var e=this;this.throwIfDisposed(),t===this.program&&(this.program=null),null!=t&&te(this.gl,this.debug,(function(){return e.gl.deleteProgram(t)}))},t.prototype.setProgram=function(t){var e=this;this.throwIfDisposed(),this.program=t,null!=this.program&&this.debug&&pe(this.gl,this.debug,this.program),te(this.gl,this.debug,(function(){return e.gl.useProgram(t)}))},t.prototype.getUniformLocation=function(t,e,n){return void 0===n&&(n=!0),this.throwIfDisposed(),n?_e(this.gl,this.debug,t,e):xe(this.gl,t,e)},t.prototype.getAttributeLocation=function(t,e){var n=this;return this.throwIfDisposed(),te(this.gl,this.debug,(function(){return n.gl.getAttribLocation(t,e)}))},t.prototype.getUniformLocationNoThrow=function(t,e){return this.throwIfDisposed(),this.gl.getUniformLocation(t,e)},t.prototype.setInputMatrixTexture=function(t,e,n){this.throwIfDisposed(),this.throwIfNoProgram(),Ce(this.gl,this.debug,0,t,e,n)},t.prototype.setOutputMatrixTexture=function(t,e,n){this.setOutputMatrixTextureDriver(t,n,e)},t.prototype.setOutputPackedMatrixTexture=function(t,e,n){this.throwIfDisposed();var r=Qt(e,n);this.setOutputMatrixTextureDriver(t,r[0],r[1])},t.prototype.setOutputMatrixWriteRegion=function(t,e,n,r){this.setOutputMatrixWriteRegionDriver(n,t,r,e)},t.prototype.setOutputPackedMatrixWriteRegion=function(t,e,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},t.prototype.debugValidate=function(){null!=this.program&&pe(this.gl,this.debug,this.program),Ee(this.gl)},t.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var t=this.gl;this.debug&&this.debugValidate(),te(t,this.debug,(function(){return t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0)}))},t.prototype.blockUntilAllProgramsCompleted=function(){var t=this;this.throwIfDisposed(),te(this.gl,this.debug,(function(){return t.gl.finish()}))},t.prototype.getQueryTimerExtension=function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=ae(this.gl,this.debug,2===c().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},t.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},t.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},t.prototype.beginQuery=function(){if(2===c().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var t=this.gl,e=this.getQueryTimerExtensionWebGL2(),n=t.createQuery();return t.beginQuery(e.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),i=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,i),i},t.prototype.endQuery=function(){if(2!==c().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}else{var e=this.gl,n=this.getQueryTimerExtensionWebGL2();e.endQuery(n.TIME_ELAPSED_EXT)}},t.prototype.waitForQueryAndGetTime=function(t){return o(this,void 0,void 0,(function(){var e=this;return s(this,(function(n){switch(n.label){case 0:return[4,P((function(){return e.disposed||e.isQueryAvailable(t,c().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}))];case 1:return n.sent(),[2,this.getQueryTime(t,c().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}}))}))},t.prototype.getQueryTime=function(t,e){if(0===e)return null;if(2===e){var n=this.gl;return n.getQueryParameter(t,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(t,r.QUERY_RESULT_EXT)/1e6},t.prototype.isQueryAvailable=function(t,e){if(0===e)return!0;if(2===e){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),i=n.getQueryParameter(t,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint}return i=(r=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(t,r.QUERY_RESULT_AVAILABLE_EXT),null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint},t.prototype.pollFence=function(t){var e=this;return new Promise((function(n){e.addItemToPoll((function(){return t.isFencePassed()}),(function(){return n()}))}))},t.prototype.pollItems=function(){for(var t=function(t){for(var e=0;e<t.length&&t[e]();++e);return e-1}(this.itemsToPoll.map((function(t){return t.isDoneFn}))),e=0;e<=t;++e)(0,this.itemsToPoll[e].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(t+1)},t.prototype.addItemToPoll=function(t,e){var n=this;this.itemsToPoll.push({isDoneFn:t,resolveFn:e}),this.itemsToPoll.length>1||P((function(){return n.pollItems(),0===n.itemsToPoll.length}))},t.prototype.bindTextureToFrameBuffer=function(t){this.throwIfDisposed(),Se(this.gl,this.debug,t,this.framebuffer),this.debug&&Ee(this.gl)},t.prototype.unbindTextureToFrameBuffer=function(){null!=this.outputTexture?(Se(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&Ee(this.gl)):ke(this.gl,this.debug,this.framebuffer)},t.prototype.downloadMatrixDriver=function(t,e){this.bindTextureToFrameBuffer(t);var n=e();return this.unbindTextureToFrameBuffer(),n},t.prototype.setOutputMatrixTextureDriver=function(t,e,n){this.throwIfDisposed();var r=this.gl;Se(r,this.debug,t,this.framebuffer),this.debug&&Ee(r),this.outputTexture=t,te(r,this.debug,(function(){return r.viewport(0,0,e,n)})),te(r,this.debug,(function(){return r.scissor(0,0,e,n)}))},t.prototype.setOutputMatrixWriteRegionDriver=function(t,e,n,r){var i=this;this.throwIfDisposed(),te(this.gl,this.debug,(function(){return i.gl.scissor(t,e,n,r)}))},t.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},t.prototype.throwIfNoProgram=function(){if(null==this.program)throw new Error("No GPU program is currently set.")},t}();function ss(t,e){if(t.length!==e.length)throw Error("Binary was compiled with "+t.length+" inputs, but was executed with "+e.length+" inputs");t.forEach((function(t,n){var r=t.logicalShape,i=e[n],a=i.shape;if(!N(r,a))throw Error("Binary was compiled with different shapes than the current args. Shapes "+r+" and "+a+" must match");if(!t.isUniform||!i.isUniform){var o=t.texShape,s=i.isUniform?null:i.texData.texShape;if(!N(o,s))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+o+" and "+s+" must match")}}))}var ls=function(t,e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var r=n.inChannels,i=n.strideWidth,a=n.strideHeight,o=n.padInfo,s=n.outWidth,l=n.dilationWidth,u=n.dilationHeight,c=n.dataFormat,h=o.left,d=o.top,p=r*n.filterWidth,f=Ua(),m="channelsLast"===c,g=m?0:1,y=m?1:2,v="",b=0;b<=1;b++)for(var w=0;w<=1;w++)v+="\n          blockIndex = rc.y + "+w+";\n          pos = rc.x + "+b+";\n\n          if(blockIndex < "+t[1]+" && pos < "+t[0]+") {\n            offsetY = int(blockIndex / ("+s+")) * "+a+" - "+d+";\n            d0 = offsetY + "+u+" * (pos / "+p+");\n\n            if(d0 < "+e[g]+" && d0 >= 0) {\n\n              offsetX = int(mod(float(blockIndex), "+s+".) * "+i+". - "+h+".);\n              d1 = offsetX + "+l+" * (int(mod(float(pos), "+p+".) / "+r+".));\n\n              if(d1 < "+e[y]+" && d1 >= 0) {\n\n                ch = int(mod(float(pos), "+r+".));\n\n                if ("+m+") {\n                  innerDims = vec2(d1, ch);\n                  result["+(2*b+w)+"] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result["+(2*b+w)+"] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ";this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        "+v+"\n\n        "+f.output+" = result;\n      }\n    "},us=function(t,e,n,r,i){this.variableNames=["x"],this.outputShape=[];var a=e,o=t[3]-1;this.outputShape=t;var s="float("+n+") + float("+r+") * sum";this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -"+a+"; j <= "+a+"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  "+o+") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * "+(.5===i?"inversesqrt("+s+")":1===i?"1.0/("+s+")":"exp(log("+s+") * float(-"+i+"));")+";\n        setOutput(val);\n      }\n    "},cs=function(t,e,n,r,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=e,this.bias=n,this.alpha=r,this.beta=i,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < "+this.depth+"; ++d) {\n          int depthBegin = int(max(0.0, float(d - "+e+")));\n          int depthEnd = int(min(float("+this.depth+"),\n              float(d + "+e+" + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = "+this.depth+";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float("+r+") * norm + float("+n+");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float("+r+")\n                * float("+i+")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * "+i+");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    "},hs=function(t,e,n,r,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var a=e,o=t[3]-1;this.outputShape=t;var s="float("+n+") + float("+r+") * sum";this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < "+this.outputShape[3]+";\n        bool hasNextRow = c < "+this.outputShape[2]+";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - "+a+";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - "+a+"; j <= "+a+"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2("+o+"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * "+(.5===i?"inversesqrt("+s+")":1===i?"1.0/("+s+")":"exp(log("+s+") * float(-"+i+"));")+";\n        setOutput(result);\n      }\n    "},ds=function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var e=t.effectiveFilterHeight,n=t.effectiveFilterWidth;this.userCode="\n      const ivec2 pads = ivec2("+(e-1-t.padInfo.top)+", "+(n-1-t.padInfo.left)+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+e+";\n          wR += "+t.dilationHeight+") {\n          float dyR = float(dyRCorner + wR) / "+t.strideHeight+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+t.strideWidth+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = "+(e*n-1)+" - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * "+n+" + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},ps=function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var e=t.effectiveFilterDepth,n=t.effectiveFilterHeight,r=t.effectiveFilterWidth;this.userCode="\n      const ivec3 pads = ivec3("+(e-1-t.padInfo.front)+", "+(n-1-t.padInfo.top)+", "+(r-1-t.padInfo.left)+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+e+";\n           wD += "+t.dilationDepth+") {\n          float dyD = float(dyDCorner + wD) / "+t.strideDepth+".0;\n\n          if (dyD < 0.0 || dyD >= "+t.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+n+";\n              wR += "+t.dilationHeight+") {\n            float dyR = float(dyRCorner + wR) / "+t.strideHeight+".0;\n\n            if (dyR < 0.0 || dyR >= "+t.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+r+";\n                wC += "+t.dilationWidth+") {\n              float dyC = float(dyCCorner + wC) / "+t.strideWidth+".0;\n\n              if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = "+(e*n*r-1)+" -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * "+n+" * "+r+" +\n                  wR * "+r+" + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},fs=function(t,e,n,r,i,a,o){void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===i&&(i=!1),void 0===a&&(a=null),void 0===o&&(o=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;var s=Math.ceil((n?t[1]:t[2])/2),l=n?"i * 2, rc.y":"rc.y, i * 2",u=r?"rc.z, i * 2":"i * 2, rc.z",c=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],h=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],d="",p="";a&&(d=o?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+a+"\n        }":"vec4 activation(vec4 x) {\n          "+a+"\n        }",p="result = activation(result);");var f=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+d+"\n\n      const float sharedDimension = "+s+".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < "+s+"; i++) {\n          vec4 a = getMatrixA(rc.x, "+l+");\n          vec4 b = getMatrixB(rc.x, "+u+");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += ("+c[0]+" * "+h[0]+");\n          result += ("+c[1]+" * "+h[1]+");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        "+f+"\n\n        "+p+"\n\n        setOutput(result);\n      }\n    "},ms=function(){function t(t,e,n){this.variableNames=["probs"],this.outputShape=[t,n],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < "+(e-1)+"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float("+(e-1)+"));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t){var e=this;return function(n,r){null==e.seedLoc&&(e.seedLoc=n.getUniformLocation(r,"seed")),n.gl.uniform1f(e.seedLoc,t)}},t}(),gs=function(t,e,n,r){this.variableNames=["indices"],this.outputShape=[t,e],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float("+r+"), float("+n+"),\n                      float(index == coords.y)));\n      }\n    "},ys=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t;var e=t.length;if(0===e)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=ja("rc",e),r=Ka(e),i=function(t,e,n){if(1===t)return"rc > "+e[0];for(var r="",i=t-2;i<t;i++)r+=n[i]+" >= "+e[i],i<t-1&&(r+="||");return r}(e,t,n),a=function(t,e,n,r){if(1===t)return"";var i=r.slice(-2);return"\n    int r = "+i[0]+";\n    int c = "+i[1]+";\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= "+e+";\n    bool rEdge = rp1 >= "+n+";\n  "}(e,t[t.length-1],t[t.length-2],n),o=function(t,e){var n=t.length,r=function(t,e){for(var n=[],r=0;r<=1;r++)for(var i=0;i<=1;i++){for(var a=(0===r?"r":"rp1")+", "+(0===i?"c":"cp1"),o=2;o<t;o++)a=e[e.length-1-o]+","+a;n.push(a)}return n}(n,e);return 1===n?"getA(rc),\n            rc + 1 >= "+t[0]+" ? 0. : getA(rc + 1),\n            0, 0":"getA("+r[0]+"),\n          cEdge ? 0. : getA("+r[1]+"),\n          rEdge ? 0. : getA("+r[2]+"),\n          rEdge || cEdge ? 0. : getA("+r[3]+")"}(t,n);this.userCode="\n        void main() {\n          "+r+" rc = getOutputCoords();\n\n          if("+i+") {\n            setOutput(vec4(0));\n          } else {\n            "+a+"\n\n            setOutput(vec4("+o+"));\n          }\n        }\n      "}},vs=function(t,e,n){this.variableNames=["x"],this.outputShape=e.map((function(e,n){return e[0]+t[n]+e[1]}));var r=t.length,i=Ka(r),a=e.map((function(t){return t[0]})).join(","),o=e.map((function(e,n){return e[0]+t[n]})).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?"\n      "+i+" start = "+i+"("+a+");\n      "+i+" end = "+i+"("+o+");\n\n      void main() {\n        "+i+" outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float("+n+"));\n        } else {\n          "+i+" coords = outC - start;\n          setOutput(getX("+s+"));\n        }\n      }\n    ":"\n        int start = "+a+";\n        int end = "+o+";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float("+n+"));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      "},bs=function(t,e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.map((function(e,n){return e[0]+t[n]+e[1]}));for(var r=t.length,i=Ka(r),a=e.map((function(t){return t[0]})).join(","),o=e.map((function(e,n){return e[0]+t[n]})).join(","),s=ja("rc",r),l=ja("source",r),u=s[r-1]+" < "+this.outputShape[r-1],c=1===r?"source":"vec2("+l.slice(-2).join()+")",h=[i+" rc = outputLoc;",s[r-1]+" += 1;\n       if("+u+") {\n      ",1===r?"":"}\n       rc = outputLoc;\n       "+s[r-2]+" += 1;\n       if("+s[r-2]+" < "+this.outputShape[r-2]+") {",1===r?"":"  "+s[r-1]+" += 1;\n         if("+u+") {"],d=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",p="",f=0,m=1===r?2:4;f<m;f++)p+="\n        "+h[f]+"\n        if ("+d+") {\n          result["+f+"] = float("+n+");\n        } else {\n          "+i+" source = rc - start;\n          result["+f+"] = getChannel(getX("+l.join()+"), "+c+");\n        }\n      ";this.userCode="\n      const "+i+" start = "+i+"("+a+");\n      const "+i+" end = "+i+"("+o+");\n\n      void main() {\n        "+i+" outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        "+(p+=1===r?"} ":"}}")+"\n        setOutput(result);\n      }\n    "},ws=function(t,e,n,r,i){if(void 0===r&&(r=!1),void 0===i&&(i=!1),this.variableNames=["x"],"avg"===e&&n)throw new Error("Cannot compute positions for average pool.");var a=t.filterWidth,o=t.strideHeight,s=t.strideWidth,l=t.dilationHeight,u=t.dilationWidth,c=t.effectiveFilterHeight,h=t.effectiveFilterWidth,d=t.padInfo.top,p=t.padInfo.left;this.outputShape=t.outShape;var f="avg"===e,m="0.0";if(f||(m="-1.0 / 1e-20"),n)this.userCode="\n        const ivec2 strides = ivec2("+o+", "+s+");\n        const ivec2 pads = ivec2("+d+", "+p+");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < "+c+";\n              wR += "+l+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+h+";\n                wC += "+u+") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = "+(r?i?"((batch  * "+t.inHeight+" + xR) * "+t.inWidth+" + xC) * "+t.inChannels+" + d":"(xR * "+t.inWidth+" + xC) * "+t.inChannels+" + d":"wR * "+h+" + wC")+";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var g=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===e&&(g="avgValue / count");var y=4*Math.floor(a/4),v=a%4,b="\n      if ("+f+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec2 strides = ivec2("+o+", "+s+");\n      const ivec2 pads = ivec2("+d+", "+p+");\n      const float initializationValue = "+m+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= "+t.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+m+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < "+c+";\n            wR += "+l+") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+t.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+y+"; wC += 4) {\n            int xC = xCCorner + wC * "+u+";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+u+", d),\n              getValue(batch, xR, xC + 2 * "+u+", d),\n              getValue(batch, xR, xC + 3 * "+u+", d)\n            );\n\n            "+b+"\n          }\n\n          int xC = xCCorner + "+y+";\n          if ("+(1===v)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            "+b+"\n          } else if ("+(2===v)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+u+", d),\n              initializationValue,\n              initializationValue\n            );\n\n            "+b+"\n          } else if ("+(3===v)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+u+", d),\n              getValue(batch, xR, xC + 2 * "+u+", d),\n              initializationValue\n            );\n\n            "+b+"\n          }\n        }\n        setOutput("+g+");\n      }\n    "}},_s=function(t,e,n,r,i){if(void 0===r&&(r=!1),void 0===i&&(i=!1),this.variableNames=["x"],"avg"===e&&n)throw new Error("Cannot compute positions for average pool.");var a=t.filterWidth,o=t.strideDepth,s=t.strideHeight,l=t.strideWidth,u=t.dilationDepth,c=t.dilationHeight,h=t.dilationWidth,d=t.effectiveFilterDepth,p=t.effectiveFilterHeight,f=t.effectiveFilterWidth,m=t.padInfo.front,g=t.padInfo.top,y=t.padInfo.left;this.outputShape=t.outShape;var v="avg"===e,b="0.0";if(v||(b="-1.0 / 1e-20"),n)this.userCode="\n        const ivec3 strides =\n            ivec3("+o+", "+s+", "+l+");\n        const ivec3 pads = ivec3("+m+", "+g+", "+y+");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < "+d+";\n              wD += "+u+") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= "+t.inDepth+") {\n              continue;\n            }\n\n            for (int wR = 0; wR < "+p+";\n                wR += "+c+") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= "+t.inHeight+") {\n                continue;\n              }\n\n              for (int wC = 0; wC < "+f+";\n                  wC += "+h+") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= "+t.inWidth+") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value >= currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = "+(r?i?"(((batch * "+t.inDepth+" + xD) * "+t.inHeight+" + xR) * "+t.inWidth+" + xC) * "+t.inChannels+" + ch":"((xD * "+t.inHeight+" + xR) * "+t.inWidth+" + xC) * "+t.inChannels+" + ch":"wD * "+p+" * "+f+" +\n                      wR * "+f+" + wC")+";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var w=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===e&&(w="avgValue / count");var _=4*Math.floor(a/4),x=a%4,C="\n      if ("+v+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec3 strides =\n        ivec3("+o+", "+s+", "+l+");\n      const ivec3 pads = ivec3("+m+", "+g+", "+y+");\n      const float initializationValue = "+b+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= "+t.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+b+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < "+d+";\n            wD += "+u+") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= "+t.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+p+";\n            wR += "+c+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+_+"; wC += 4) {\n              int xC = xCCorner + wC * "+h+";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+h+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+h+", ch),\n                getValue(batch, xD, xR, xC + 3 * "+h+", ch)\n              );\n\n              "+C+"\n            }\n\n            int xC = xCCorner + "+_+";\n            if ("+(1===x)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              "+C+"\n            } else if ("+(2===x)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+h+", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              "+C+"\n            } else if ("+(3===x)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+h+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+h+", ch),\n                initializationValue\n              );\n\n              "+C+"\n            }\n          }\n          setOutput("+w+");\n        }\n      }\n    "}},xs=function(t,e){this.variableNames=["x"];var n=t.windowSize,r=t.batchSize,i=t.inSize,a=Math.ceil(i/n);this.outputShape=[r,a];var o="0.0",s="";"prod"===e?o="1.0":"min"===e?(o="1.0 / 1e-20",s="min"):"max"===e&&(o="-1.0 / 1e-20",s="max");var l=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===e?l="sumValue":"prod"===e?l="prodValue":"all"===e?l="allValue":"any"===e&&(l="anyValue");var u=4*Math.floor(n/4),c=n%4,h="\n      if ("+("sum"===e)+") {\n        sumValue += dot(values, ones);\n      } else if ("+("prod"===e)+") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = "+s+"(values, minMaxValue);\n      }\n    ",d="vec4";"all"===e?(o="1.0",h="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",d="bvec4"):"any"===e&&(o="0.0",h="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",d="bvec4");var p="";i%n>0&&(p="\n        if (inIdx < 0 || inIdx >= "+i+") {\n          return initializationValue;\n        }\n      "),this.userCode="\n      const float initializationValue = "+o+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        "+p+"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+n+";\n\n        vec4 minMaxValue = vec4("+o+");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < "+u+"; i += 4) {\n          int inIdx = inOffset + i;\n          "+d+" values = "+d+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          "+h+"\n        }\n\n        int inIdx = inOffset + "+u+";\n        if ("+(1===c)+") {\n          "+d+" values = "+d+"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          "+h+"\n        } else if ("+(2===c)+") {\n          "+d+" values = "+d+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          "+h+"\n        } else if ("+(3===c)+") {\n          "+d+" values = "+d+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          "+h+"\n        }\n        setOutput("+l+");\n      }\n    "},Cs=function(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var n="",r=0;r<4;r++){var i="thisRC = rc;";r%2==1&&(i+="thisRC.z += 1;"),r>1&&(i+="thisRC.y += 1;"),n+="\n        "+i+"\n        "+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+"\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result["+r+"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        "+(r>0?"}":"")+"\n      "}this.userCode="\n      \n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      "+Wa(["r","c","d"],e)+"\n      return ivec3(r, c, d);\n    }\n  \n      "+Ha(t)+"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = "+t[1]+";\n        int cols = "+t[2]+";\n\n        "+n+"\n\n        setOutput(result);\n      }\n    "},Ss=function(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,i=r[1],a=r[2],o=t.shape,s=o[1],l=o[2],u=[n&&s>1?i-1:i,n&&l>1?a-1:a],c=[n&&s>1?s-1:s,n&&l>1?l-1:l],h=u[0]/c[0],d=u[1]/c[1],p=1/h,f=1/d,m=2*Math.ceil(p)+2,g=2*Math.ceil(f)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+h+");\n        const float widthScale = float("+d+");\n\n        const float invHeightScale = float("+p+");\n        const float invWidthScale = float("+f+");\n\n        const int winHeight = int("+m+");\n        const int winWidth = int("+g+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+l+") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), "+(i-1)+".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), "+(a-1)+".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},ks=function(t,e,n,r){this.variableNames=["A"],this.outputShape=[];var i=t[1],a=t[2];this.outputShape=[t[0],e,n,t[3]];var o=[r&&e>1?i-1:i,r&&n>1?a-1:a],s=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+o[0]/s[0]+",\n          "+o[1]/s[1]+");\n      const vec2 inputShapeRC = vec2("+i+".0, "+a+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    "},Es=function(t,e,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var i=t[1],a=t[2],o=t[3];this.outputShape=[t[0],e,n,o];var s=[r&&e>1?i-1:i,r&&n>1?a-1:a],l=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          "+s[0]/l[0]+",\n          "+s[1]/l[1]+",\n          "+s[1]/l[1]+");\n      const vec3 inputShapeRC = vec3("+i+".0, "+a+".0,\n                                     "+a+".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < "+(o-1)+";\n        bool hasNextRow = coords.z < "+(n-1)+";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    "},Is=function(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,i=r[1],a=r[2],o=t.shape,s=o[1],l=o[2],u=[n&&s>1?i-1:i,n&&l>1?a-1:a],c=[n&&s>1?s-1:s,n&&l>1?l-1:l],h=u[0]/c[0],d=u[1]/c[1],p=1/h,f=1/d,m=2*Math.ceil(p)+2,g=2*Math.ceil(f)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+h+");\n        const float widthScale = float("+d+");\n\n        const float invHeightScale = float("+p+");\n        const float invWidthScale = float("+f+");\n\n        const int winHeight = int("+m+");\n        const int winWidth = int("+g+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+l+") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float("+u[0]+") *\n                (float(dyR) / float("+c[0]+"));\n\n            float sourceFracCol =\n                float("+u[1]+") *\n                  (float(dyC) / float("+c[1]+"));\n\n            int sourceNearestRow = int(min(\n                float(int("+i+") - 1),\n                "+n+" ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int("+a+") - 1),\n                "+n+" ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},As=function(t,e,n,r){this.variableNames=["A"],this.outputShape=[];var i=t[1],a=t[2];this.outputShape=[t[0],e,n,t[3]];var o=[r&&e>1?i-1:i,r&&n>1?a-1:a],s=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+o[0]/s[0]+",\n          "+o[1]/s[1]+");\n      const vec2 inputShapeRC = vec2("+i+".0, "+a+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + "+(r?"0.5":"0.0")+")));\n\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    "},Ds=function(t,e){this.variableNames=["x"];var n=t.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=t,1!==n){var r=t.map((function(n,r){return function(n){return-1!==e.indexOf(n)&&1!==t[n]?t[n]+" - coords["+n+"] - 1":"coords["+n+"]"}(r)})).join(","),i=Ka(n);this.userCode="\n      void main() {\n        "+i+" coords = getOutputCoords();\n        setOutput(getX("+r+"));\n      }\n    "}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX("+t[0]+" - coord - 1));\n        }\n      "},Ts=function(t,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var n=t.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");this.outputShape=t;var r=ja("rc",n),i=r[n-1]+" + 1 < "+this.outputShape[n-1],a=r[n-2]+" + 1 < "+this.outputShape[n-2],o=Ka(n);function s(n){var r=t.map((function(r,i){return function(n,r){return-1!==e.indexOf(n)&&1!==t[n]?t[n]+" - "+r[n]+" - 1":""+r[n]}(i,n)}));return"getChannel(getX("+r.join(",")+"), vec2("+r.slice(-2).join(",")+"))"}this.userCode=1===n?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX("+t[0]+" - rc - 1),\n            "+t[0]+" - rc - 1);\n          if("+i+"){\n              result.g = getChannel(getX("+t[0]+" - (rc  + 1) - 1),\n                "+t[0]+" - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      ":"\n        void main() {\n          "+o+" rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = "+function(t){return s(t)}(r.slice())+";\n          if("+i+"){\n            result.g = "+function(t){return t[n-1]="("+t[n-1]+" + 1)",s(t)}(r.slice())+";\n          }\n          if("+a+") {\n            result.b = "+function(t){return t[n-2]="("+t[n-2]+" + 1)",s(t)}(r.slice())+";\n            if("+i+") {\n              result.a = "+function(t){return t[n-1]="("+t[n-1]+" + 1)",t[n-2]="("+t[n-2]+" + 1)",s(t)}(r.slice())+";\n            }\n          }\n          setOutput(result);\n        }\n    "},Ns=function(t,e,n,r,i,a,o){void 0===o&&(o=!0),this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;var s=Ka(i.length),l=Ka(a.length),u="";1===n?u="i":2===n&&(u="i, j");var c="";1===r?c="i":2===r&&(c="i, coords[1]"),this.userCode="\n        "+s+" strides = "+s+"("+i+");\n\n        void main() {\n          "+l+" coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < "+t+"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < "+e+"; j++) {\n              int index = round(getIndices("+u+"));\n              flattenedIndex += index * "+(e>1?"strides[j]":"strides")+";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += getUpdates("+c+");\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      "},Rs=function(t,e){this.variableNames=["x","segmentIds"];var n=t.windowSize,r=t.batchSize,i=t.inSize,a=t.numSegments,o=a*Math.ceil(i/n);this.outputShape=[r,o];var s=4*Math.floor(n/4),l=n%4,u="\n        sumValue += dot(values, segFilter);\n    ",c="";i%n>0&&(c="\n        if (inIdx < 0 || inIdx >= "+i+") {\n          return initializationValue;\n        }\n      ");var h="";i%n>0&&(h="\n        if (inIdx < 0 || inIdx >= "+i+") {\n          return -1.0;\n        }\n      "),this.userCode="\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        "+c+"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        "+h+"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          "+a+")) * float("+n+"));\n        int currentSeg = int(mod(float(outIdx), float("+a+")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < "+s+"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          "+u+"\n        }\n\n        int inIdx = inOffset + "+s+";\n        if ("+(1===l)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          "+u+"\n        } else if ("+(2===l)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          "+u+"\n        } else if ("+(3===l)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          "+u+"\n        }\n        setOutput(sumValue);\n      }\n    "},Os=function(t,e,n){var r,i;if(this.variableNames=["c","a","b"],this.outputShape=e,n>4)throw Error("Where for rank "+n+" is not yet supported");if(1===n)i="resRC",r="resRC";else{for(var a=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],s=[],l=0;l<e.length;l++)s.push(""+a[l]),l<t&&o.push(""+a[l]);r=o.join(),i=s.join()}var u=Ka(n);this.userCode="\n      void main() {\n        "+u+" resRC = getOutputCoords();\n        float cVal = getC("+r+");\n        if (cVal >= 1.0) {\n          setOutput(getA("+i+"));\n        } else {\n          setOutput(getB("+i+"));\n        }\n      }\n    "},Fs=function(){function t(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var e,n=Ka(this.rank),r="uniform int start["+this.rank+"];",i=function(t){if(1===t)return"sourceLoc";if(t<=6)return Ms.slice(0,t).map((function(t){return"sourceLoc."+t})).join(",");throw Error("Slicing for rank "+t+" is not yet supported")}(this.rank);e="\n        "+n+" sourceLoc;\n        "+n+" coords = getOutputCoords();\n        "+t.map((function(t,e){return"sourceLoc."+Ms[e]+" = start["+e+"] + coords."+Ms[e]+";"})).join("\n")+"\n      ",this.userCode="\n      "+r+"\n      void main() {\n        "+e+"\n        setOutput(getSource("+i+"));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t){var e=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(n,r){null==e.startLoc&&(e.startLoc=n.getUniformLocationNoThrow(r,"start"),null==e.startLoc)||n.gl.uniform1iv(e.startLoc,t)}},t}(),Ms=["x","y","z","w","u","v"],Ps=function(){function t(t){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length;var e=Ka(this.rank),n=ja("coords",this.rank),r=ja("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":"vec2("+r.slice(-2).join()+")",a="getChannel(getSource("+r.join()+"), "+i+")",o="\n      result.x = "+a+";\n      if (++"+n[this.rank-1]+" < "+t[this.rank-1]+") {\n        ++"+r[this.rank-1]+";\n        result.y = "+a+";\n        --"+r[this.rank-1]+";\n      }\n    ",s=1===this.rank?"":"\n      --"+n[this.rank-1]+";\n      if (++"+n[this.rank-2]+" < "+t[this.rank-2]+") {\n        ++"+r[this.rank-2]+";\n        result.z = "+a+";\n        if (++"+n[this.rank-1]+" < "+t[this.rank-1]+") {\n          ++"+r[this.rank-1]+";\n          result.w = "+a+";\n        }\n      }\n    ",l=this.rank<=4?"sourceLoc = coords +\n            "+e+"("+t.map((function(t,e){return"start["+e+"]"})).join()+");":t.map((function(t,e){return r[e]+" = "+n[e]+" + start["+e+"];"})).join("\n");this.userCode="\n      uniform int start["+this.rank+"];\n      void main() {\n        "+e+" coords = getOutputCoords();\n        "+e+" sourceLoc;\n        "+l+"\n        vec4 result = vec4(0.);\n        "+o+"\n        "+s+"\n        setOutput(result);\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t){var e=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(n,r){null==e.startLoc&&(e.startLoc=n.getUniformLocationNoThrow(r,"start"),null==e.startLoc)||n.gl.uniform1iv(e.startLoc,t)}},t}(),Ls=function(t,e,n){this.variableNames=["x"],this.outputShape=n;var r=n.length,i=Ka(n.length),a=Ka(n.length),o="";if(1===r)o="coords * strides + begin";else{var s=0;o=n.map((function(t,e){return s++,1===n.length?"coords * strides["+e+"] + begin["+e+"]":"coords["+(s-1)+"] * strides["+e+"] + begin["+e+"]"})).join(",")}this.userCode="\n      "+i+" begin = "+i+"("+t+");\n      "+i+" strides = "+i+"("+e+");\n\n      void main() {\n        "+a+" coords = getOutputCoords();\n        setOutput(getX("+o+"));\n      }\n    "},zs=function(){function t(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return t.prototype.acquireTexture=function(t,e,n){var r,i=Vs(e,n),a=Bs(t,i,n);if(a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]),this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var o=this.freeTextures[a].shift();return this.usedTextures[a].push(o),o}return this.numUsedTextures++,this.log(),i===qt.PACKED_2X2_FLOAT32?r=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):i===qt.PACKED_2X2_FLOAT16?r=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):i===qt.UNPACKED_FLOAT32?r=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):i===qt.UNPACKED_FLOAT16?r=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):i===qt.PACKED_4X1_UNSIGNED_BYTE&&(r=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[a].push(r),r},t.prototype.releaseTexture=function(t,e,n,r){if(null!=this.freeTextures){var i=Bs(e,Vs(n,r),r);i in this.freeTextures||(this.freeTextures[i]=[]),this.freeTextures[i].push(t),this.numFreeTextures++,this.numUsedTextures--;var a=this.usedTextures[i],o=a.indexOf(t);if(o<0)throw new Error("Cannot release a texture that was never provided by this texture manager");a.splice(o,1),this.log()}},t.prototype.log=function(){this.logEnabled&&console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+(this.numFreeTextures+this.numUsedTextures)+")")},t.prototype.getNumUsedTextures=function(){return this.numUsedTextures},t.prototype.getNumFreeTextures=function(){return this.numFreeTextures},t.prototype.dispose=function(){var t=this;if(null!=this.freeTextures){for(var e in this.freeTextures)this.freeTextures[e].forEach((function(e){t.gpgpu.deleteMatrixTexture(e)}));for(var e in this.usedTextures)this.usedTextures[e].forEach((function(e){t.gpgpu.deleteMatrixTexture(e)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},t}();function Vs(t,e){if(t===Ht.UPLOAD)return qt.PACKED_2X2_FLOAT32;if(t===Ht.RENDER||null==t)return function(t){return c().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?qt.PACKED_2X2_FLOAT32:qt.UNPACKED_FLOAT32:t?qt.PACKED_2X2_FLOAT16:qt.UNPACKED_FLOAT16}(e);if(t===Ht.DOWNLOAD||t===Ht.PIXELS)return qt.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+t)}function Bs(t,e,n){return t[0]+"_"+t[1]+"_"+e+"_"+n}var js=function(t,e){this.variableNames=["A"];for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[r]*e[r];this.outputShape=n,this.rank=n.length;var i=Ka(this.rank),a=function(t){var e=t.length;if(e>5)throw Error("Tile for rank "+e+" is not yet supported");if(1===e)return"imod(resRC, "+t[0]+")";for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],i=0;i<t.length;i++)r.push("imod("+n[i]+", "+t[i]+")");return r.join()}(t);this.userCode="\n      void main() {\n        "+i+" resRC = getOutputCoords();\n        setOutput(getA("+a+"));\n      }\n    "},Us=function(t,e){this.variableNames=["A"],this.outputShape=t,this.userCode="\n      float unaryOperation(float x) {\n        "+e+"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},Ws="if (isnan(x)) return x;",Hs="return x;",qs="return abs(x);",Gs=Ws+"\n  return (x < 0.0) ? 0.0 : x;\n",$s=Ws+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",Ks="return (x >= 0.0) ? x : (exp(x) - 1.0);",Xs="return -x;",Ys="return ceil(x);",Zs="return floor(x);",Qs="return exp(x);",Js="return exp(x) - 1.0;",tl="return x;",el="return x;",nl="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",rl="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",il="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",al=function(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        "+e+"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},ol=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t;var e=t.length,n=ja("rc",e),r=Ka(e),i=function(t,e){if(1===t)return"rc";for(var n="",r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}(e,n),a=n.slice(-2),o=e<=1?"rc":"vec2("+a.join(",")+")";this.userCode="\n      void main() {\n        "+r+" rc = getOutputCoords();\n        vec4 packedInput = getA("+i+");\n\n        setOutput(getChannel(packedInput, "+o+"));\n      }\n    "},sl={};function ll(t,e){if(void 0===e&&(e=!1),"linear"===t)return e?el:Hs;if("relu"===t)return e?nl:Gs;if("elu"===t)return e?il:Ks;if("relu6"===t)return e?rl:$s;if("prelu"===t)return e?lo:oo;throw new Error("Activation "+t+" has not been implemented for the WebGL backend.")}var ul=600,cl=function(t){function e(e){var n,r=t.call(this)||this;if(r.pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.warnedAboutMemory=!1,r.pendingDeletes=0,r.disposed=!1,!c().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==e){var i=Xt(c().getNumber("WEBGL_VERSION"));r.binaryCache=(n=c().getNumber("WEBGL_VERSION"))in sl?sl[n]:(sl[n]={},sl[n]),r.gpgpu=new os(i),r.canvas=i.canvas,r.gpgpuCreatedLocally=!0}else r.gpgpu=e,r.binaryCache={},r.gpgpuCreatedLocally=!1,r.canvas=e.gl.canvas;return r.textureManager=new zs(r.gpgpu),r.numMBBeforeWarning=null==c().global.screen?1024:c().global.screen.height*c().global.screen.width*window.devicePixelRatio*ul/1024/1024,r.texData=new na(r,Bt),r}return a(e,t),e.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},e.prototype.write=function(t,e,n){if(c().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===n&&null!=t)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={};return this.texData.set(r,{shape:e,dtype:n,values:t,usage:Ht.UPLOAD}),r},e.prototype.move=function(t,e,n,r){if(c().getBool("DEBUG")&&this.checkNumericalProblems(e),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(t,{shape:n,dtype:r,values:e,usage:Ht.UPLOAD})},e.prototype.readSync=function(t){var e=this.texData.get(t),n=e.values,r=e.dtype,i=e.complexTensors,a=e.shape;if(null!=e.slice){var o;o=e.isPacked?new al(a,tl):new Us(a,tl);var s=this.runWebGLProgram(o,[{dataId:t,shape:a,dtype:r}],r),l=this.readSync(s.dataId);return this.disposeData(s.dataId),l}if(null!=n)return this.convertAndCacheOnCPU(t);if("string"===r)return n;var u,c,h=null!=this.activeTimers;return h&&(u=at()),c="complex64"===r?_a(i.real.dataSync(),i.imag.dataSync()):this.getValuesFromTexture(t),h&&(this.downloadWaitMs+=at()-u),this.convertAndCacheOnCPU(t,c)},e.prototype.read=function(t){return o(this,void 0,void 0,(function(){var e,n,r,i,a,o,l,u,h,d,p,f,m,g,y,v,b,w,_;return s(this,(function(s){switch(s.label){case 0:if(this.pendingRead.has(t))return e=this.pendingRead.get(t),[2,new Promise((function(t){return e.push(t)}))];if(n=this.texData.get(t),r=n.values,i=n.shape,a=n.dtype,o=n.complexTensors,l=n.isPacked,null!=n.slice)return u=l?new al(i,tl):new Us(i,tl),h=this.runWebGLProgram(u,[{dataId:t,shape:i,dtype:a}],a),d=this.read(h.dataId),this.disposeData(h.dataId),[2,d];if(null!=r)return[2,this.convertAndCacheOnCPU(t)];if(!c().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===c().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return p=null,"complex64"!==a&&c().get("WEBGL_BUFFER_SUPPORTED")&&(f=this.decode(t),m=this.texData.get(f.dataId),p=(_=this.gpgpu).createBufferFromTexture.apply(_,[m.texture].concat(Zt(i)))),this.pendingRead.set(t,[]),"complex64"===a?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:s.sent(),s.label=2;case 2:return"complex64"!==a?[3,4]:[4,Promise.all([o.real.data(),o.imag.data()])];case 3:return y=s.sent(),g=_a(y[0],y[1]),[3,5];case 4:null==p?g=this.getValuesFromTexture(t):(v=T(i),g=this.gpgpu.downloadFloat32MatrixFromBuffer(p,v)),s.label=5;case 5:return null!=f&&this.disposeData(f.dataId),b=this.convertAndCacheOnCPU(t,g),w=this.pendingRead.get(t),this.pendingRead.delete(t),w.forEach((function(t){return t(b)})),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t),this.pendingDeletes--),[2,b]}}))}))},e.prototype.checkNumericalProblems=function(t){if(null!=t)for(var e=0;e<t.length;e++){var n=t[e];if(!re(n)){if(c().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value "+n+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value "+n+" cannot be represented on this device.")}}},e.prototype.getValuesFromTexture=function(t){var e,n=this.texData.get(t),r=n.shape,i=n.dtype,a=n.isPacked,o=T(r);if(c().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var s=this.decode(t),l=this.texData.get(s.dataId),u=(e=this.gpgpu).downloadMatrixFromPackedTexture.apply(e,[l.texture].concat(Zt(r))).subarray(0,o);return this.disposeData(s.dataId),u}var h=c().getBool("WEBGL_PACK")&&!0===a,d=h?Re(r):r,p=h?new Mo(d):new Fo(d),f=this.runWebGLProgram(p,[{shape:d,dtype:i,dataId:t}],"float32"),m=this.texData.get(f.dataId),g=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(m.texture,m.texShape[0],m.texShape[1]).subarray(0,o);return this.disposeData(f.dataId),g},e.prototype.time=function(t){return o(this,void 0,void 0,(function(){var e,n,r,i,a,o,l;return s(this,(function(s){switch(s.label){case 0:return e=this.activeTimers,n=[],r=!1,null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,t(),i=D(this.activeTimers.map((function(t){return t.query}))).filter((function(t){return null!=t})),a=D(this.activeTimers.map((function(t){return t.name}))).filter((function(t){return null!=t})),this.activeTimers=e,r&&(this.programTimersStack=null),o={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},c().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(i)]:[3,2];case 1:return l=s.sent(),o.kernelMs=k(l),o.getExtraProfileInfo=function(){return l.map((function(t,e){return{name:a[e],ms:t}})).map((function(t){return t.name+": "+t.ms})).join(", ")},[3,3];case 2:o.kernelMs={error:"WebGL query timers are not supported in this environment."},s.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,o]}}))}))},e.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},e.prototype.startTimer=function(){return c().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:at(),endMs:null}},e.prototype.endTimer=function(t){return c().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),t):(t.endMs=at(),t)},e.prototype.getQueryTime=function(t){return o(this,void 0,void 0,(function(){var e;return s(this,(function(n){return c().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(t)]:[2,(e=t).endMs-e.startMs]}))}))},e.prototype.disposeData=function(t){if(!this.pendingDisposal.has(t)){if(this.pendingRead.has(t))return this.pendingDisposal.add(t),void this.pendingDeletes++;if(this.texData.has(t)){this.releaseGPUData(t);var e=this.texData.get(t).complexTensors;null!=e&&(e.real.dispose(),e.imag.dispose()),this.texData.delete(t)}}},e.prototype.releaseGPUData=function(t){var e=this.texData.get(t),n=e.texture,r=e.dtype,i=e.texShape,a=e.usage,o=e.isPacked,s=e.slice,l=s&&s.origDataId||t,u=this.dataRefCount.get(l);u>1?this.dataRefCount.set(l,u-1):(this.dataRefCount.delete(l),null!=n&&(this.numBytesInGPU-=this.computeBytes(i,r),this.textureManager.releaseTexture(n,i,a,o)));var c=this.texData.get(t);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null},e.prototype.getTexture=function(t){return this.uploadToGPU(t),this.texData.get(t).texture},e.prototype.getDataInfo=function(t){return this.texData.get(t)},e.prototype.getCPUBackend=function(){return c().getBool("WEBGL_CPU_FORWARD")?(null==this.cpuBackend&&(this.cpuBackend=Bt.findBackend("cpu")),this.cpuBackend):null},e.prototype.shouldExecuteOnCPU=function(t,e){var n=this;return void 0===e&&(e=128),null!=this.getCPUBackend()&&t.every((function(t){return null==n.texData.get(t.dataId).texture&&T(t.shape)<e}))},e.prototype.getGPGPUContext=function(){return this.gpgpu},e.prototype.complex=function(t,e){var n=this.makeOutput(t.shape,"complex64");return this.texData.get(n.dataId).complexTensors={real:Bt.keep(t.clone()),imag:Bt.keep(e.clone())},n},e.prototype.real=function(t){return this.texData.get(t.dataId).complexTensors.real.clone()},e.prototype.imag=function(t){return this.texData.get(t.dataId).complexTensors.imag.clone()},e.prototype.slice=function(t,e,n){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.slice(t,e,n);if(0===T(n))return Fn([],n,t.dtype);var r=this.texData.get(t.dataId).isPacked,i=Wi(t.shape,e,n);if(r||!i){var a=c().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Ps(n):new Fs(n),o=a.getCustomSetupFunc(e);return this.compileAndRun(a,[t],null,o)}return this.uploadToGPU(t.dataId),this.shallowSlice(t,e,n)},e.prototype.shallowSlice=function(t,e,n){var r=this.texData.get(t.dataId),i=this.makeOutput(n,t.dtype),a=this.texData.get(i.dataId);Object.assign(a,r),a.shape=n,a.dtype=t.dtype;var o=Hi(e,t.strides);r.slice&&(o+=r.slice.flatOffset),a.slice={flatOffset:o,origDataId:r.slice&&r.slice.origDataId||t.dataId};var s=this.dataRefCount.get(a.slice.origDataId)||1;return this.dataRefCount.set(a.slice.origDataId,s+1),i},e.prototype.stridedSlice=function(t,e,n,r){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.stridedSlice(t,e,n,r);var i=Bi(e,n,r);if(i.some((function(t){return 0===t})))return Fn([],i);var a=new Ls(e,r,i);return this.compileAndRun(a,[t])},e.prototype.reverse=function(t,e){var n=c().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Ts(t.shape,e):new Ds(t.shape,e);return this.compileAndRun(n,[t])},e.prototype.concat=function(t,e){if("complex64"===t[0].dtype){var n=t.map((function(t){return Rn(t)})),r=t.map((function(t){return On(t)}));return Nn(this.concat(n,e),this.concat(r,e))}if(this.shouldExecuteOnCPU(t))return this.cpuBackend.concat(t,e);if(1===t.length)return t[0];if(t.length>c().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var i=Math.floor(t.length/2),a=this.concat(t.slice(0,i),e),o=this.concat(t.slice(i),e);return this.concat([a,o],e)}if(c().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&t[0].rank>1){var s=new mo(t.map((function(t){return t.shape})),e);return this.compileAndRun(s,t)}var l=Dn(t.map((function(t){return t.shape})),e),u=t.map((function(t){return t.as2D(-1,T(t.shape.slice(e)))})),h=new fo(u.map((function(t){return t.shape})));return this.compileAndRun(h,u).reshape(l)},e.prototype.neg=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.neg(t);if(c().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,Xs,t.dtype);var e=new Us(t.shape,Xs);return this.compileAndRun(e,[t])},e.prototype.batchMatMul=function(t,e,n,r){var i=n?t.shape[2]:t.shape[1],a=r?e.shape[1]:e.shape[2],o=n?t.shape[1]:t.shape[2],s=t.shape[0];if((1===i||1===a)&&o>1e3){n&&(t=ea(t,[0,2,1])),r&&(e=ea(e,[0,2,1]));var l=1===a?t:t.as3D(s,o,1),u=1===a?2:1,c=1===a?e.as3D(s,1,o):e;return this.multiply(l,c).sum(u,!0)}var h=Nt(t.dtype,e.dtype),d=new fs(t.shape,[s,i,a],n,r);return this.compileAndRun(d,[t,e],h)},e.prototype.fusedBatchMatMul=function(t){var e=t.a,n=t.b,r=t.transposeA,i=t.transposeB,a=t.bias,o=t.activation,s=t.preluActivationWeights,l=r?e.shape[2]:e.shape[1],u=i?n.shape[1]:n.shape[2],c=e.shape[0],h=Nt(e.dtype,n.dtype),d=null!=a,p=null!=s,f=o?ll(o,!0):null,m=new fs(e.shape,[c,l,u],r,i,d,f,p),g=[e,n];return a&&g.push(a),s&&g.push(s),this.compileAndRun(m,g,h)},e.prototype.multiply=function(t,e){if("complex64"===t.dtype){var n=this.texData.get(t.dataId),r=this.texData.get(e.dataId),i=new no("return areal * breal - aimag * bimag;",t.shape,e.shape),a=new no("return areal * bimag + aimag * breal;",t.shape,e.shape),o=[this.makeComplexComponentTensorInfo(t,n.complexTensors.real),this.makeComplexComponentTensorInfo(t,n.complexTensors.imag),this.makeComplexComponentTensorInfo(e,r.complexTensors.real),this.makeComplexComponentTensorInfo(e,r.complexTensors.imag)],s=this.compileAndRun(i,o),l=this.compileAndRun(a,o),u=this.complex(s,l);return s.dispose(),l.dispose(),u}if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.multiply(t,e);if(c().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,ao,t.dtype);var h=new so(ao,t.shape,e.shape);return this.compileAndRun(h,[t,e],t.dtype)},e.prototype.batchNormalization=function(t,e,n,r,i,a){var o=[t,e,n],s=null;null!=a&&(s=a.shape,o.push(a));var l=null;if(null!=i&&(l=i.shape,o.push(i)),c().getBool("WEBGL_PACK_NORMALIZATION")){var u=new eo(t.shape,e.shape,n.shape,s,l,r);return this.compileAndRun(u,o)}var h=new to(t.shape,e.shape,n.shape,s,l,r);return this.compileAndRun(h,o)},e.prototype.localResponseNormalization4D=function(t,e,n,r,i){var a=c().getBool("WEBGL_PACK_NORMALIZATION")?new hs(t.shape,e,n,r,i):new us(t.shape,e,n,r,i);return this.compileAndRun(a,[t])},e.prototype.LRNGrad=function(t,e,n,r,i,a,o){var s=new cs(e.shape,r,i,a,o);return this.compileAndRun(s,[e,n,t])},e.prototype.tile=function(t,e){if("string"===t.dtype){var n=this.readSync(t.dataId).map((function(t){return lt(t)}));return Fa(rr(t.shape,t.dtype,n),e)}var r=new js(t.shape,e);return this.compileAndRun(r,[t])},e.prototype.pad=function(t,e,n){var r=c().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new bs(t.shape,e,n):new vs(t.shape,e,n);return this.compileAndRun(r,[t])},e.prototype.gather=function(t,e,n){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.gather(t,e,n);var r=new Bo(t.shape,e.size,n);return this.compileAndRun(r,[t,e])},e.prototype.batchToSpaceND=function(t,e,n){E(t.rank<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var r=e.reduce((function(t,e){return t*e})),i=gr(t.shape,e,r),a=yr(i.length,e.length),o=vr(t.shape,e,r),s=br(n,e.length),l=wr(o,n,e.length);return ea(t.reshape(i),a).reshape(o).slice(s,l)},e.prototype.spaceToBatchND=function(t,e,n){E(t.rank<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var r=e.reduce((function(t,e){return t*e})),i=[[0,0]];i.push.apply(i,n);for(var a=1+e.length;a<t.shape.length;++a)i.push([0,0]);var o=t.pad(i),s=gr(o.shape,e,r,!1),l=yr(s.length,e.length,!1),u=vr(o.shape,e,r,!1);return ea(o.reshape(s),l).reshape(u)},e.prototype.reduce=function(t,e,n){var r=t.shape[0],i=t.shape[1],a=Oi(i),o=new xs({windowSize:a,inSize:i,batchSize:r},e),s=this.compileAndRun(o,[t],n);return 1===s.shape[1]?s:this.reduce(s,e,n)},e.prototype.argReduce=function(t,e,n){void 0===n&&(n=null);var r=t.shape[0],i=t.shape[1];null!=n&&(r=n.shape[0],i=n.shape[1]);var a=Oi(i),o=new Va({windowSize:a,inSize:i,batchSize:r},e,null==n),s=[t];null!=n&&s.push(n);var l=this.compileAndRun(o,s,"int32");return 1===l.shape[1]?l:this.argReduce(t,e,l)},e.prototype.argReducePacked=function(t,e,n){void 0===n&&(n=null);var r=null!=n?n.shape:t.shape,i=Oi(r[r.length-1]),a=new Za(r,i,e,null==n),o=this.compileAndRun(a,null==n?[t]:[t,n],"int32");return o.rank===t.rank?this.argReducePacked(t,e,o):o},e.prototype.sum=function(t,e){Sn("sum",e,t.rank);var n=xn(t.shape,e),r=n[0],i=T(n[1]),a=t.as2D(-1,i),o=Rt(t.dtype);return this.reduce(a,"sum",o).reshape(r)},e.prototype.prod=function(t,e){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.prod(t,e);var n=xn(t.shape,e),r=n[0],i=T(n[1]),a=t.as2D(-1,i),o=Rt(t.dtype);return this.reduce(a,"prod",o).reshape(r)},e.prototype.unsortedSegmentSum=function(t,e,n){var r=0,i=kn([r],t.rank),a=t;null!=i&&(a=ea(t,i),r=In(1,t.rank)[0]);var o=function(t,e,n){for(var r=[],i=t.length,a=0;a<i;a++)r.push(a!==e?t[a]:n);return r}(a.shape,r,n),s=T([a.shape[r]]),l=a.as2D(-1,s),u=Rt(t.dtype),c=this.segOpCompute(l,"unsortedSegmentSum",e,u,n).reshape(o);return null!=i&&(c=ea(c,En(i))),c},e.prototype.segOpCompute=function(t,e,n,r,i){var a=t.shape[0],o=t.shape[1],s=function(t,e){var n,r=!1;for(t<=Ri?(n=t,r=!0):n=J(t,Math.floor(Math.sqrt(t)));!r;)n>e||n===t?r=!0:n=J(t,n+1);return n}(o,i),l=new Rs({windowSize:s,inSize:o,batchSize:a,numSegments:i},e),u=this.compileAndRun(l,[t,n],r);return u.shape[1]===i?u:(n=Kn(0,i).tile([o/s]),this.segOpCompute(u,e,n,r,i))},e.prototype.argMinMaxReduce=function(t,e,n){var r=[e];if(Sn("arg"+n.charAt(0).toUpperCase()+n.slice(1),r,t.rank),!c().getBool("WEBGL_PACK_REDUCE")||t.rank<=2){var i=xn(t.shape,r),a=i[0],o=T(i[1]),s=t.as2D(-1,o);return this.argReduce(s,n).reshape(a)}return this.argReducePacked(t,n)},e.prototype.argMin=function(t,e){return this.argMinMaxReduce(t,e,"min")},e.prototype.argMax=function(t,e){return this.argMinMaxReduce(t,e,"max")},e.prototype.cumsum=function(t,e,n,r){if(e!==t.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(t.rank-1)+" but got axis="+e);var i=new Ao(t.shape,n,r);return this.compileAndRun(i,[t])},e.prototype.equal=function(t,e){if(c().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(equal(a, b));\n","bool");var n=new so("return float(a == b);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")},e.prototype.notEqual=function(t,e){if(c().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(notEqual(a, b));\n","bool");var n=new so("return float(a != b);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")},e.prototype.less=function(t,e){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.less(t,e);if(c().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(lessThan(a, b));\n","bool");var n=new so("return float(a < b);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")},e.prototype.lessEqual=function(t,e){if(c().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(lessThanEqual(a, b));\n","bool");var n=new so("return float(a <= b);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")},e.prototype.greater=function(t,e){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.greater(t,e);if(c().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(greaterThan(a, b));\n","bool");var n=new so("return float(a > b);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")},e.prototype.greaterEqual=function(t,e){if(c().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(greaterThanEqual(a, b));\n","bool");var n=new so("return float(a >= b);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")},e.prototype.logicalNot=function(t){var e=new Us(t.shape,"return float(!(x >= 1.0));");return this.compileAndRun(e,[t])},e.prototype.logicalAnd=function(t,e){if(c().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n","bool");var n=new so("return float(a >= 1.0 && b >= 1.0);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")},e.prototype.logicalOr=function(t,e){if(c().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n","bool");var n=new so("return float(a >= 1.0 || b >= 1.0);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")},e.prototype.select=function(t,e,n){var r=new Os(t.rank,e.shape,e.rank);return this.compileAndRun(r,[t,e,n],Nt(e.dtype,n.dtype))},e.prototype.where=function(t){mn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var e=t.dataSync();return Pa(t.shape,e)},e.prototype.topk=function(t,e,n){return Ma(t.dataSync(),t.shape,t.dtype,e)},e.prototype.min=function(t,e){Sn("min",e,t.rank);var n=xn(t.shape,e),r=n[0],i=T(n[1]),a=t.as2D(-1,i);return this.reduce(a,"min",a.dtype).reshape(r)},e.prototype.minimum=function(t,e){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.minimum(t,e);var n=c().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new uo("\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",t.shape,e.shape):new so("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",t.shape,e.shape);return this.compileAndRun(n,[t,e])},e.prototype.mod=function(t,e){var n=c().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new uo("\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",t.shape,e.shape):new so("if (b == 0.0) return NAN;\n  return mod(a, b);",t.shape,e.shape);return this.compileAndRun(n,[t,e])},e.prototype.max=function(t,e){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.max(t,e);Sn("max",e,t.rank);var n=xn(t.shape,e),r=n[0],i=T(n[1]),a=t.as2D(-1,i);return this.reduce(a,"max",a.dtype).reshape(r)},e.prototype.maximum=function(t,e){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.maximum(t,e);var n=c().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new uo("\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",t.shape,e.shape):new so("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",t.shape,e.shape);return this.compileAndRun(n,[t,e])},e.prototype.all=function(t,e){Sn("all",e,t.rank);var n=xn(t.shape,e),r=n[0],i=T(n[1]),a=t.as2D(-1,i);return this.reduce(a,"all",a.dtype).reshape(r)},e.prototype.any=function(t,e){Sn("any",e,t.rank);var n=xn(t.shape,e),r=n[0],i=T(n[1]),a=t.as2D(-1,i);return this.reduce(a,"any",a.dtype).reshape(r)},e.prototype.floorDiv=function(t,e){if(c().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n","int32");var n=new so("\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",t.shape,e.shape);return this.compileAndRun(n,[t,e],"int32")},e.prototype.add=function(t,e){if("complex64"===t.dtype&&"complex64"===e.dtype)return this.complexSeparableBinaryOp(t,e,ro);if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.add(t,e);var n=Nt(t.dtype,e.dtype);if(c().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,ro,n);var r=new so(ro,t.shape,e.shape);return this.compileAndRun(r,[t,e],n)},e.prototype.packedUnaryOp=function(t,e,n){var r=new al(t.shape,e);return this.compileAndRun(r,[t],n)},e.prototype.packedBinaryOp=function(t,e,n,r,i){void 0===i&&(i=!1);var a=new uo(n,t.shape,e.shape,i);return this.compileAndRun(a,[t,e],r)},e.prototype.complexSeparableBinaryOp=function(t,e,n){var r=this,i=this.texData.get(t.dataId),a=this.texData.get(e.dataId),o=[[i.complexTensors.real,a.complexTensors.real],[i.complexTensors.imag,a.complexTensors.imag]].map((function(i){var a=i[0],o=i[1],s=r.makeComplexComponentTensorInfo(t,a),l=r.makeComplexComponentTensorInfo(e,o),u=new so(n,t.shape,e.shape);return r.compileAndRun(u,[s,l],Nt(a.dtype,o.dtype))})),s=o[0],l=o[1],u=this.complex(s,l);return s.dispose(),l.dispose(),u},e.prototype.makeComplexComponentTensorInfo=function(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}},e.prototype.addN=function(t){if(1===t.length)return t[0];if(t.length>c().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var e=Math.floor(t.length/2),n=this.addN(t.slice(0,e)),r=this.addN(t.slice(e));return this.addN([n,r])}var i=t.map((function(t){return t.dtype})).reduce((function(t,e){return Nt(t,e)})),a=t.map((function(t){return t.shape})),o=c().getBool("WEBGL_PACK")?new za(t[0].shape,a):new La(t[0].shape,a);return this.compileAndRun(o,t,i)},e.prototype.subtract=function(t,e){if("complex64"===t.dtype&&"complex64"===e.dtype)return this.complexSeparableBinaryOp(t,e,io);if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.subtract(t,e);var n=Nt(t.dtype,e.dtype);if(c().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,io,t.dtype);var r=new so(io,t.shape,e.shape);return this.compileAndRun(r,[t,e],n)},e.prototype.pow=function(t,e){var n=c().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new uo("\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",t.shape,e.shape):new so("\nif(a < 0.0 && floor(b) < b){\n  return NAN;\n}\nif (b == 0.0) {\n  return 1.0;\n}\nreturn (round(mod(b, 2.0)) != 1) ?\n    pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",t.shape,e.shape),r=Nt(t.dtype,e.dtype);return this.compileAndRun(n,[t,e],r)},e.prototype.ceil=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.ceil(t);if(c().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,Ys,t.dtype);var e=new Us(t.shape,Ys);return this.compileAndRun(e,[t])},e.prototype.floor=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.floor(t);if(c().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,Zs,t.dtype);var e=new Us(t.shape,Zs);return this.compileAndRun(e,[t])},e.prototype.sign=function(t){var e=new Us(t.shape,"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n");return this.compileAndRun(e,[t])},e.prototype.isNaN=function(t){var e=new Us(t.shape,"return float(isnan(x));");return this.compileAndRun(e,[t],"bool")},e.prototype.isInf=function(t){var e=new Us(t.shape,"return float(isinf(x));");return this.compileAndRun(e,[t],"bool")},e.prototype.isFinite=function(t){var e=new Us(t.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(e,[t],"bool")},e.prototype.round=function(t){var e=new Us(t.shape,"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n");return this.compileAndRun(e,[t])},e.prototype.exp=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.exp(t);if(c().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,Qs,t.dtype);var e=new Us(t.shape,Qs);return this.compileAndRun(e,[t])},e.prototype.expm1=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.expm1(t);if(c().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,Js,t.dtype);var e=new Us(t.shape,Js);return this.compileAndRun(e,[t])},e.prototype.softmax=function(t,e){var n=z([e],t.shape),r=this.max(t,n),i=Cn(r.shape,n),a=this.subtract(t,r.reshape(i)),o=this.exp(a),s=this.sum(o,n).reshape(i);return Di(o,s)},e.prototype.log=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.log(t);if(c().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",t.dtype);var e=new Us(t.shape,"if (x < 0.0) return NAN;\n  return log(x);");return this.compileAndRun(e,[t])},e.prototype.log1p=function(t){var e=new Us(t.shape,"return log(1.0 + x);");return this.compileAndRun(e,[t])},e.prototype.sqrt=function(t){var e=new Us(t.shape,"return sqrt(x);");return this.compileAndRun(e,[t])},e.prototype.rsqrt=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.rsqrt(t);var e=new Us(t.shape,"return inversesqrt(x);");return this.compileAndRun(e,[t])},e.prototype.reciprocal=function(t){var e=new Us(t.shape,"return 1.0 / x;");return this.compileAndRun(e,[t])},e.prototype.relu=function(t){var e;return e=c().getBool("WEBGL_PACK")?new al(t.shape,nl):new Us(t.shape,Gs),this.compileAndRun(e,[t])},e.prototype.relu6=function(t){var e;return e=c().getBool("WEBGL_PACK")?new al(t.shape,rl):new Us(t.shape,$s),this.compileAndRun(e,[t])},e.prototype.prelu=function(t,e){var n=c().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new uo(lo,t.shape,e.shape):new so(oo,t.shape,e.shape);return this.compileAndRun(n,[t,e])},e.prototype.elu=function(t){if(c().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,il,t.dtype);var e=new Us(t.shape,Ks);return this.compileAndRun(e,[t])},e.prototype.eluDer=function(t,e){var n=c().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new uo("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",t.shape,e.shape):new so("return (b >= 1.0) ? a : a * (b + 1.0);",t.shape,e.shape);return this.compileAndRun(n,[t,e])},e.prototype.selu=function(t){var e=new Us(t.shape,"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = 1.7580993408473768;\n  float scale = 1.0507009873554805;\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n");return this.compileAndRun(e,[t])},e.prototype.int=function(t){var e=new Us(t.shape,"return float(int(x));");return this.compileAndRun(e,[t],"int32")},e.prototype.clip=function(t,e,n){var r,i=(r=c().getBool("WEBGL_PACK_CLIP")?new ho(t.shape):new co(t.shape)).getCustomSetupFunc(e,n);return this.compileAndRun(r,[t],null,i)},e.prototype.abs=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.abs(t);if(c().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,qs,t.dtype);var e=new Us(t.shape,qs);return this.compileAndRun(e,[t])},e.prototype.complexAbs=function(t){var e=this.texData.get(t.dataId),n=new po(t.shape),r=[this.makeComplexComponentTensorInfo(t,e.complexTensors.real),this.makeComplexComponentTensorInfo(t,e.complexTensors.imag)];return this.compileAndRun(n,r)},e.prototype.sigmoid=function(t){var e=new Us(t.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(e,[t])},e.prototype.softplus=function(t){var e=new Us(t.shape,"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n");return this.compileAndRun(e,[t])},e.prototype.sin=function(t){var e=new Us(t.shape,"if (isnan(x)) return x;\n  return sin(x);\n");return this.compileAndRun(e,[t])},e.prototype.cos=function(t){var e=new Us(t.shape,"if (isnan(x)) return x;\n  return cos(x);\n");return this.compileAndRun(e,[t])},e.prototype.tan=function(t){var e=new Us(t.shape,"return tan(x);");return this.compileAndRun(e,[t])},e.prototype.asin=function(t){var e=new Us(t.shape,"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n");return this.compileAndRun(e,[t])},e.prototype.acos=function(t){var e=new Us(t.shape,"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n");return this.compileAndRun(e,[t])},e.prototype.atan=function(t){var e=new Us(t.shape,"if (isnan(x)) return x;\n  return atan(x);\n");return this.compileAndRun(e,[t])},e.prototype.atan2=function(t,e){var n=c().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new uo("\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",t.shape,e.shape):new so("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",t.shape,e.shape);return this.compileAndRun(n,[t,e])},e.prototype.sinh=function(t){var e=new Us(t.shape,"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n");return this.compileAndRun(e,[t])},e.prototype.cosh=function(t){var e=new Us(t.shape,"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n");return this.compileAndRun(e,[t])},e.prototype.tanh=function(t){var e=new Us(t.shape,"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n");return this.compileAndRun(e,[t])},e.prototype.asinh=function(t){var e=new Us(t.shape,"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));");return this.compileAndRun(e,[t])},e.prototype.acosh=function(t){var e=new Us(t.shape,"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\n  return log(x + sqrt(x * x - 1.0));");return this.compileAndRun(e,[t])},e.prototype.atanh=function(t){var e=new Us(t.shape,"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\n  return (log(1.0 + x) - log(1.0 - x)) / 2.0;");return this.compileAndRun(e,[t])},e.prototype.erf=function(t){var e=new Us(t.shape,'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = 0.3275911;\n  float a1 = 0.254829592;\n  float a2 = -0.284496736;\n  float a3 = 1.421413741;\n  float a4 = -1.453152027;\n  float a5 = 1.061405429;\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n');return this.compileAndRun(e,[t])},e.prototype.step=function(t,e){var n=new Us(t.shape,function(t){return void 0===t&&(t=0),Ws+"\n    return x > 0.0 ? 1.0 : float("+t+");\n  "}(e));return this.compileAndRun(n,[t])},e.prototype.conv2dByMatMul=function(t,e,n,r,i,a){var o=t.shape,s=this.texData.get(t.dataId),l="channelsLast"===n.dataFormat,u=o[2]%2!=0&&!!s.isPacked;if((1==o[0]*o[1]*o[2]||1===n.outChannels)&&n.inChannels>1e3||!c().getBool("WEBGL_LAZILY_UNPACK")||!c().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!u){var h=this.reshape(t,[1,l?o[0]*o[1]*o[2]:o[0]*o[2]*o[3],n.inChannels]),d=this.reshape(e,[1,n.inChannels,n.outChannels]);return this.reshape(this.fusedBatchMatMul({a:h,b:d,transposeA:!1,transposeB:!1,bias:r,activation:i,preluActivationWeights:a}),n.outShape)}var p={dataId:t.dataId,shape:[1,l?o[0]*o[1]*(o[2]+1):o[0]*o[2]*(o[3]+1),n.inChannels],dtype:t.dtype},f=s.shape;s.shape=s.shape.slice(),s.shape[s.shape.length-2]++,E(Me(s.shape,p.shape),(function(){return"packed reshape "+s.shape+" to "+p.shape+" isn't free"}));var m=this.reshape(e,[1,n.inChannels,n.outChannels]),g=this.fusedBatchMatMul({a:p,b:m,transposeA:!1,transposeB:!1,bias:r,activation:i,preluActivationWeights:a}),y=this.texData.get(g.dataId);return E(y.isPacked,(function(){return"batchMatMul result is expected to be packed"})),s.shape=f,y.shape=n.outShape,Bt.makeTensorFromDataId(g.dataId,n.outShape,g.dtype)},e.prototype.conv2dWithIm2Row=function(t,e,n,r,i,a){var o=n.outWidth,s=n.outHeight,l="channelsLast"===n.dataFormat,u=n.filterWidth*n.filterHeight*n.inChannels,c=s*o,h=[u,c],d=t.squeeze([0]),p=e.reshape([1,u,-1]),f=new ls(h,d.shape,n),m=this.compileAndRun(f,[d]).reshape([1,h[0],h[1]]),g=null!=r,y=null!=a,v=i?ll(i,!0):null,b=new fs(m.shape,[1,c,n.outChannels],!0,!1,g,v,y),w=[m,p];return r&&w.push(r),y&&w.push(a),this.compileAndRun(b,w).reshape(l?[1,s,o,n.outChannels]:[1,n.outChannels,s,o])},e.prototype.fusedConv2d=function(t){var e=t.input,n=t.filter,r=t.convInfo,i=t.bias,a=t.activation,o=t.preluActivationWeights;if(1===r.filterHeight&&1===r.filterWidth&&1===r.dilationHeight&&1===r.dilationWidth&&1===r.strideHeight&&1===r.strideWidth&&("SAME"===r.padInfo.type||"VALID"===r.padInfo.type))return this.conv2dByMatMul(e,n,r,i,a,o);if(c().getBool("WEBGL_CONV_IM2COL")&&1===e.shape[0])return this.conv2dWithIm2Row(e,n,r,i,a,o);var s=null!=i,l=null!=o,u=a?ll(a,!1):null,h=new Co(r,s,u,l),d=[e,n];return i&&d.push(i),o&&d.push(o),this.compileAndRun(h,d)},e.prototype.conv2d=function(t,e,n){if(1===n.filterHeight&&1===n.filterWidth&&1===n.dilationHeight&&1===n.dilationWidth&&1===n.strideHeight&&1===n.strideWidth&&("SAME"===n.padInfo.type||"VALID"===n.padInfo.type))return this.conv2dByMatMul(t,e,n);if(c().getBool("WEBGL_CONV_IM2COL")&&1===t.shape[0])return this.conv2dWithIm2Row(t,e,n);var r=new Co(n);return this.compileAndRun(r,[t,e])},e.prototype.conv2dDerInput=function(t,e,n){var r=new vo(n);return this.compileAndRun(r,[t,e])},e.prototype.conv2dDerFilter=function(t,e,n){var r=new yo(n);return this.compileAndRun(r,[t,e])},e.prototype.fusedDepthwiseConv2D=function(t){var e,n=t.input,r=t.filter,i=t.convInfo,a=t.bias,o=t.activation,s=t.preluActivationWeights,l=c().getBool("WEBGL_PACK_DEPTHWISECONV")&&i.strideWidth<=2&&i.outChannels/i.inChannels==1,u=o?ll(o,l):null,h=[n,r],d=null!=a,p=null!=s;return d&&h.push(a),p&&h.push(s),l?(e=new Eo(i,d,u,p),this.compileAndRun(e,h)):(e=new ko(i,d,u,p),this.compileAndRun(e,h))},e.prototype.depthwiseConv2D=function(t,e,n){var r;return c().getBool("WEBGL_PACK_DEPTHWISECONV")&&n.strideWidth<=2&&n.outChannels/n.inChannels==1?(r=new Eo(n),this.compileAndRun(r,[t,e])):(r=new ko(n),this.compileAndRun(r,[t,e]))},e.prototype.depthwiseConv2DDerInput=function(t,e,n){var r=new xo(n);return this.compileAndRun(r,[t,e])},e.prototype.depthwiseConv2DDerFilter=function(t,e,n){var r=new _o(n);return this.compileAndRun(r,[t,e])},e.prototype.conv3d=function(t,e,n){var r=new So(n);return this.compileAndRun(r,[t,e])},e.prototype.conv3dDerInput=function(t,e,n){var r=new wo(n);return this.compileAndRun(r,[t,e])},e.prototype.conv3dDerFilter=function(t,e,n){var r=new bo(n);return this.compileAndRun(r,[t,e])},e.prototype.maxPool=function(t,e){var n=new ws(e,"max",!1);return this.compileAndRun(n,[t])},e.prototype.avgPool=function(t,e){var n=new ws(e,"avg",!1);return this.compileAndRun(n,[t],"float32")},e.prototype.maxPoolBackprop=function(t,e,n,r){var i=new ws(r,"max",!0),a=this.compileAndRun(i,[e]),o=new ds(r),s=this.compileAndRun(o,[t,a],e.dtype);return a.dispose(),s},e.prototype.avgPoolBackprop=function(t,e,n){var r=new Qa(n);return this.compileAndRun(r,[t],e.dtype)},e.prototype.cast=function(t,e){return ya(t,e,this)},e.prototype.unstack=function(t,e){for(var n=t.shape[e],r=new Array(t.rank-1),i=0,a=0;a<t.rank;a++)a!==e&&(r[i++]=t.shape[a]);var o=new Array(t.rank).fill(0),s=t.shape.slice();s[e]=1;var l=new Array(n);for(a=0;a<l.length;a++)o[e]=a,l[a]=this.slice(t,o,s).reshape(r);return l},e.prototype.avgPool3d=function(t,e){var n=new _s(e,"avg",!1);return this.compileAndRun(n,[t],"float32")},e.prototype.avgPool3dBackprop=function(t,e,n){var r=new Ja(n);return this.compileAndRun(r,[t],e.dtype)},e.prototype.maxPool3d=function(t,e){var n=new _s(e,"max",!1);return this.compileAndRun(n,[t],"float32")},e.prototype.maxPool3dBackprop=function(t,e,n,r){var i=new _s(r,"max",!0),a=this.compileAndRun(i,[e]),o=new ps(r),s=this.compileAndRun(o,[t,a],e.dtype);return a.dispose(),s},e.prototype.reshape=function(t,e){var n=this.texData.get(t.dataId);if(n.isPacked&&!Me(t.shape,e)&&(null===n.texture||!Me(n.shape,e))){var r=this.packedReshape(t,e);return Bt.makeTensorFromDataId(r.dataId,r.shape,r.dtype)}return va(t,e)},e.prototype.resizeBilinear=function(t,e,n,r){var i=c().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Es(t.shape,e,n,r):new ks(t.shape,e,n,r);return this.compileAndRun(i,[t],"float32")},e.prototype.resizeBilinearBackprop=function(t,e,n){var r=new Ss(t,e,n);return this.compileAndRun(r,[t])},e.prototype.resizeNearestNeighbor=function(t,e,n,r){var i=new As(t.shape,e,n,r);return this.compileAndRun(i,[t])},e.prototype.resizeNearestNeighborBackprop=function(t,e,n){var r=new Is(t,e,n);return this.compileAndRun(r,[t])},e.prototype.multinomial=function(t,e,n,r){var i=e?t:Ji(t),a=new ms(i.shape[0],i.shape[1],n),o=a.getCustomSetupFunc(r);return this.compileAndRun(a,[i],"int32",o)},e.prototype.oneHot=function(t,e,n,r){var i=new gs(t.size,e,n,r);return this.compileAndRun(i,[t])},e.prototype.diag=function(t){var e=new Oo(t.size);return this.compileAndRun(e,[t])},e.prototype.nonMaxSuppression=function(t,e,n,r,i){return mn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),Ia(t.dataSync(),e.dataSync(),n,r,i)},e.prototype.cropAndResize=function(t,e,n,r,i,a){var o=new Io(t.shape,e.shape,r,i,a);return this.compileAndRun(o,[t,e,n],"float32")},e.prototype.depthToSpace=function(t,e,n){E(e>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+e}));var r=t.shape[0],i=("NHWC"===n?t.shape[1]:t.shape[2])*e,a=("NHWC"===n?t.shape[2]:t.shape[3])*e,o=("NHWC"===n?t.shape[3]:t.shape[1])/(e*e),s=new Ro("NHWC"===n?[r,i,a,o]:[r,o,i,a],e,n);return this.compileAndRun(s,[t])},e.prototype.split=function(t,e,n){return Oa(t,e,n)},e.prototype.scatterND=function(t,e,n){var r=Pi(0,t,n),i=r.sliceRank,a=r.numUpdates,o=r.sliceSize,s=r.strides,l=r.outputSize,u=[l/o,o],c=t.reshape([a,i]),h=e.reshape([a,o]);if(0===l)return va(Fn([]),n);var d=Pn(0),p=new Ns(a,i,c.rank,h.rank,s,u);return this.compileAndRun(p,[h,c,d]).reshape(n)},e.prototype.sparseToDense=function(t,e,n,r){var i=Pi(0,t,n),a=new Ns(i.numUpdates,i.sliceRank,t.rank,e.rank,i.strides,[i.outputSize,1],!1);return this.compileAndRun(a,[e,t,r]).reshape(n)},e.prototype.fft=function(t){return this.fftImpl(t,!1)},e.prototype.ifft=function(t){return this.fftImpl(t,!0)},e.prototype.fftImpl=function(t,e){var n=this.texData.get(t.dataId),r=new zo("return real * expR - imag * expI;",t.shape,e),i=new zo("return real * expI + imag * expR;",t.shape,e),a=[this.makeComplexComponentTensorInfo(t,n.complexTensors.real),this.makeComplexComponentTensorInfo(t,n.complexTensors.imag)],o=this.compileAndRun(r,a),s=this.compileAndRun(i,a),l=this.complex(o,s).as2D(t.shape[0],t.shape[1]);return o.dispose(),s.dispose(),l},e.prototype.gatherND=function(t,e){var n=e.shape,r=n[n.length-1],i=Ti(t,e),a=i[0],o=i[1],s=i[2],l=i[3],u=e.reshape([o,r]),c=t.reshape([t.size/s,s]),h=new jo(r,l,[o,s]);return this.compileAndRun(h,[c,u]).reshape(a)},e.prototype.fill=function(t,e,n){if("string"===(n=n||Z(e))){var r=j(n,T(t));return r.fill(e),Bt.makeTensor(r,t,n,this)}var i=new Vo(t,e),a=i.getCustomSetupFunc(e);return this.compileAndRun(i,[],n,a)},e.prototype.onesLike=function(t){if("string"===t.dtype)throw new Error("onesLike is not supported under string dtype");return this.fill(t.shape,1,t.dtype)},e.prototype.zerosLike=function(t){return this.fill(t.shape,"string"===t.dtype?"":0,t.dtype)},e.prototype.linspace=function(t,e,n){return ba(t,e,n)},e.prototype.makeTensorInfo=function(t,e){var n=this.write(null,t,e);return this.texData.get(n).usage=null,{dataId:n,shape:t,dtype:e}},e.prototype.makeOutput=function(t,e){var n=this.makeTensorInfo(t,e).dataId;return Bt.makeTensorFromDataId(n,t,e,this)},e.prototype.unpackTensor=function(t){var e=new ol(t.shape);return this.runWebGLProgram(e,[t],t.dtype)},e.prototype.packTensor=function(t){var e=new ys(t.shape);return this.runWebGLProgram(e,[t],t.dtype,null,!0)},e.prototype.packedReshape=function(t,e){var n=[Te(t.shape)].concat(Ne(t.shape)),r={dtype:t.dtype,shape:n,dataId:t.dataId},i=[Te(e)].concat(Ne(e)),a=new Cs(i,n),o=this.runWebGLProgram(a,[r],t.dtype,null,!0);return{dataId:o.dataId,shape:e,dtype:o.dtype}},e.prototype.decode=function(t){var e,n=this.texData.get(t),r=n.isPacked,i=n.shape,a=n.dtype,o=Re(i);return e=r?new No(o):new To(o),{dtype:a,shape:i,dataId:this.runWebGLProgram(e,[{shape:o,dtype:a,dataId:t}],a,null,!0).dataId}},e.prototype.runWebGLProgram=function(t,e,n,r,i){var a=this;void 0===i&&(i=!1);var o=this.makeTensorInfo(t.outputShape,n),s=this.texData.get(o.dataId);if(t.packedOutput&&(s.isPacked=!0),t.outPackingScheme===Wt.DENSE){var l=Zt(t.outputShape);s.texShape=l.map((function(t){return 2*t}))}if(null!=t.outTexUsage&&(s.usage=t.outTexUsage),0===T(o.shape))return s.values=B(o.dtype,0),o;var u=[],h=e.map((function(e){if("complex64"===e.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=a.texData.get(e.dataId);if(null==n.texture){if(!t.packedInputs&&T(e.shape)<=c().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:e.shape,texData:null,isUniform:!0,uniformValues:n.values};t.packedInputs&&(n.isPacked=!0,n.shape=e.shape)}else if(!!n.isPacked!=!!t.packedInputs)e=n.isPacked?a.unpackTensor(e):a.packTensor(e),u.push(e),n=a.texData.get(e.dataId);else if(n.isPacked&&!Me(n.shape,e.shape)){var r=e,i=e.shape;e.shape=n.shape,e=a.packedReshape(e,i),u.push(e),n=a.texData.get(e.dataId),r.shape=i}return a.uploadToGPU(e.dataId),{shape:e.shape,texData:n,isUniform:!1}}));this.uploadToGPU(o.dataId);var d,p={shape:o.shape,texData:s,isUniform:!1},f=function(t,e,n){var r="";return e.concat(n).forEach((function(t){r+=t.shape+"_"+(t.isUniform?"uniform":t.texData.texShape)+"_"+(null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0)})),t.constructor.name+"_"+r+"_"+t.userCode}(t,h,p),m=this.getAndSaveBinary(f,(function(){return function(t,e,n,r){var i=e.userCode,a=n.map((function(t,n){var r={logicalShape:t.shape,texShape:t.isUniform?null:t.texData.texShape,isUniform:t.isUniform,isPacked:!t.isUniform&&t.texData.isPacked,flatOffset:null};return null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0&&(r.flatOffset=t.texData.slice.flatOffset),{name:e.variableNames[n],shapeInfo:r}})),o=a.map((function(t){return t.shapeInfo})),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},l=function(t,e,n,r){var i=[];t.forEach((function(t){var e=T(t.shapeInfo.logicalShape);t.shapeInfo.isUniform?i.push("uniform float "+t.name+(e>1?"["+e+"]":"")+";"):(i.push("uniform sampler2D "+t.name+";"),i.push("uniform int offset"+t.name+";"))}));var a,o,s=i.join("\n"),l=t.map((function(t){return function(t,e,n){void 0===n&&(n=!1);var r="";return r+=n?function t(e){var n;switch(e.shapeInfo.logicalShape.length){case 0:return"\n    vec4 get"+(n=e.name).charAt(0).toUpperCase()+n.slice(1)+"() {\n      return "+Ua().texture2D+"("+n+", halfCR);\n    }\n  ";case 1:return function(t){var e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=t.shapeInfo.texShape,i=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],a=Ua();return"\n    vec4 "+n+"(int index) {\n      vec2 uv = packedUVfrom1D(\n        "+i[0]+", "+i[1]+", index);\n      return "+a.texture2D+"("+e+", uv);\n    }\n  "}(e);case 2:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t.shapeInfo.texShape,a=i[0],o=i[1],s=Ua();if(null!=i&&N(e,i))return"\n      vec4 "+r+"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2("+o+".0, "+a+".0);\n\n        return "+s.texture2D+"("+n+", uv);\n      }\n    ";var l=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return"\n    vec4 "+r+"(int row, int col) {\n      vec2 uv = packedUVfrom2D("+Math.ceil(e[1]/2)+", "+l[0]+", "+l[1]+", row, col);\n      return "+s.texture2D+"("+n+", uv);\n    }\n  "}(e);case 3:return function(e){var n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=e.shapeInfo.texShape,o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];if(1===n[0]){var s=Xa(e,n.slice(1));return"\n        "+t(s)+"\n        vec4 "+i+"(int b, int row, int col) {\n          return "+i+"("+Ya(["b","row","col"],[1,2])+");\n        }\n      "}var l=o[0],u=o[1],c=Math.ceil(n[2]/2);return"\n    vec4 "+i+"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        "+l+", "+u+", "+c*Math.ceil(n[1]/2)+", "+c+", b, row, col);\n      return "+Ua().texture2D+"("+r+", uv);\n    }\n  "}(e);default:return function(t){for(var e=t.shapeInfo.logicalShape,n=e.length,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=t.shapeInfo.texShape,o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],s=o[0],l=o[1],u=Math.ceil(e[n-1]/2),c=u*Math.ceil(e[n-2]/2),h="int b, int row, int col",d="b * "+c+" + (row / 2) * "+u+" + (col / 2)",p=2;p<n-1;p++)h="int b"+p+", "+h,d="b"+p+" * "+(c*=e[n-p-1])+" + "+d;return"\n    vec4 "+i+"("+h+") {\n      int index = "+d+";\n      int texR = index / "+l+";\n      int texC = index - texR * "+l+";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+l+", "+s+");\n      return "+Ua().texture2D+"("+r+", uv);\n    }\n  "}(e)}}(t):function t(e){var n=e.shapeInfo.logicalShape;switch(n.length){case 0:return function(t){var e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return"float "+n+"() {return "+e+";}";var r=t.shapeInfo.texShape;if(1===r[0]&&1===r[1])return"\n      float "+n+"() {\n        return sampleTexture("+e+", halfCR);\n      }\n    ";var i=t.shapeInfo.texShape;return"\n    float "+n+"() {\n      vec2 uv = uvFromFlat("+i[0]+", "+i[1]+", "+Ga(e)+");\n      return sampleTexture("+e+", uv);\n    }\n  "}(e);case 1:return function(t){var e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return"\n      float "+n+"(int index) {\n        "+$a(t)+"\n      }\n    ";var r=t.shapeInfo.texShape,i=r[0],a=r[1];if(1===a&&1===i)return"\n      float "+n+"(int index) {\n        return sampleTexture("+e+", halfCR);\n      }\n    ";var o=Ga(e);return 1===a?"\n      float "+n+"(int index) {\n        vec2 uv = vec2(0.5, (float(index + "+o+") + 0.5) / "+i+".0);\n        return sampleTexture("+e+", uv);\n      }\n    ":1===i?"\n      float "+n+"(int index) {\n        vec2 uv = vec2((float(index + "+o+") + 0.5) / "+a+".0, 0.5);\n        return sampleTexture("+e+", uv);\n      }\n    ":"\n    float "+n+"(int index) {\n      vec2 uv = uvFromFlat("+i+", "+a+", index + "+o+");\n      return sampleTexture("+e+", uv);\n    }\n  "}(e);case 2:return function(e){var n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=e.shapeInfo.texShape;if(null!=a&&N(n,a))return"\n    float "+i+"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2("+a[1]+".0, "+a[0]+".0);\n      return sampleTexture("+r+", uv);\n    }\n  ";var o=V(n),s=o.newShape,l=o.keptDims;if(s.length<n.length){var u=Xa(e,s);return"\n      "+t(u)+"\n      float "+i+"(int row, int col) {\n        return "+i+"("+Ya(["row","col"],l)+");\n      }\n    "}if(e.shapeInfo.isUniform)return"\n      float "+i+"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2("+n[1]+", 1)));\n        "+$a(e)+"\n      }\n    ";var c=a[0],h=a[1],d=Ga(r);return 1===h?"\n    float "+i+"(int row, int col) {\n      float index = dot(vec3(row, col, "+d+"), vec3("+n[1]+", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / "+c+".0);\n      return sampleTexture("+r+", uv);\n    }\n  ":1===c?"\n    float "+i+"(int row, int col) {\n      float index = dot(vec3(row, col, "+d+"), vec3("+n[1]+", 1, 1));\n      vec2 uv = vec2((index + 0.5) / "+h+".0, 0.5);\n      return sampleTexture("+r+", uv);\n    }\n  ":"\n  float "+i+"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * "+n[1]+" + col + "+d+";\n    vec2 uv = uvFromFlat("+c+", "+h+", index);\n    return sampleTexture("+r+", uv);\n  }\n"}(e);case 3:return function(e){var n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n[1]*n[2],o=n[2],s=V(n),l=s.newShape,u=s.keptDims;if(l.length<n.length){var c=Xa(e,l);return"\n        "+t(c)+"\n        float "+i+"(int row, int col, int depth) {\n          return "+i+"("+Ya(["row","col","depth"],u)+");\n        }\n      "}if(e.shapeInfo.isUniform)return"\n      float "+i+"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3("+a+", "+o+", 1)));\n        "+$a(e)+"\n      }\n    ";var h=e.shapeInfo.texShape,d=h[0],p=h[1],f=e.shapeInfo.flatOffset;return p===a&&null==f?"\n        float "+i+"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2("+o+", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2("+p+".0, "+d+".0);\n          return sampleTexture("+r+", uv);\n        }\n      ":p===o&&null==f?"\n    float "+i+"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2("+n[1]+", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+p+".0, "+d+".0);\n      return sampleTexture("+r+", uv);\n    }\n  ":"\n      float "+i+"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * "+a+" + col * "+o+" + depth + "+Ga(r)+";\n        vec2 uv = uvFromFlat("+d+", "+p+", index);\n        return sampleTexture("+r+", uv);\n      }\n  "}(e);case 4:return function(e){var n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n[3],o=n[2]*a,s=n[1]*o,l=V(n),u=l.newShape,c=l.keptDims;if(u.length<n.length){var h=Xa(e,u);return"\n      "+t(h)+"\n      float "+i+"(int row, int col, int depth, int depth2) {\n        return "+i+"("+Ya(["row","col","depth","depth2"],c)+");\n      }\n    "}if(e.shapeInfo.isUniform)return"\n      float "+i+"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4("+s+", "+o+", "+a+", 1)));\n        "+$a(e)+"\n      }\n    ";var d=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,f=p[0],m=p[1];return m===s&&null==d?"\n      float "+i+"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3("+o+", "+a+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+m+".0, "+f+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ":m===a&&null==d?"\n      float "+i+"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3("+n[1]*n[2]+", "+n[2]+", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+m+".0, "+f+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ":"\n    float "+i+"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+s+" + col * "+o+" +\n          depth * "+a+" + depth2;\n      vec2 uv = uvFromFlat("+f+", "+m+", index + "+Ga(r)+");\n      return sampleTexture("+r+", uv);\n    }\n  "}(e);case 5:return function(e){var n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n[4],o=n[3]*a,s=n[2]*o,l=n[1]*s,u=V(n),c=u.newShape,h=u.keptDims;if(c.length<n.length){var d=Xa(e,c);return"\n      "+t(d)+"\n      float "+i+"(int row, int col, int depth, int depth2, int depth3) {\n        return "+i+"("+Ya(["row","col","depth","depth2","depth3"],h)+");\n      }\n    "}if(e.shapeInfo.isUniform)return"\n      float "+i+"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+l+", "+s+", "+o+", "+a+")) +\n          depth3;\n        "+$a(e)+"\n      }\n    ";var p=e.shapeInfo.flatOffset,f=e.shapeInfo.texShape,m=f[0],g=f[1];return g===l&&null==p?"\n      float "+i+"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4("+s+", "+o+", "+a+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+g+".0, "+m+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ":g===a&&null==p?"\n      float "+i+"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+n[1]*n[2]*n[3]+",\n               "+n[2]*n[3]+", "+n[3]+", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+g+".0, "+m+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ":"\n    float "+i+"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+l+" + col * "+s+" + depth * "+o+" +\n          depth2 * "+a+" + depth3 + "+Ga(r)+";\n      vec2 uv = uvFromFlat("+m+", "+g+", index);\n      return sampleTexture("+r+", uv);\n    }\n  "}(e);case 6:return function(e){var n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=V(n),o=a.newShape,s=a.keptDims;if(o.length<n.length){var l=Xa(e,o);return"\n      "+t(l)+"\n      float "+i+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return "+i+"("+Ya(["row","col","depth","depth2","depth3","depth4"],s)+");\n      }\n    "}var u=n[5],c=n[4]*u,h=n[3]*c,d=n[2]*h,p=n[1]*d;if(e.shapeInfo.isUniform)return"\n      float "+i+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4("+p+", "+d+", "+h+", "+c+")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2("+u+", 1)));\n        "+$a(e)+"\n      }\n    ";var f=e.shapeInfo.flatOffset,m=e.shapeInfo.texShape,g=m[0],y=m[1];return y===p&&null==f?"\n      float "+i+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4("+d+", "+h+", "+c+", "+u+")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+y+".0, "+g+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ":y===u&&null==f?"\n      float "+i+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4("+n[1]*n[2]*n[3]*n[4]+",\n               "+n[2]*n[3]*n[4]+",\n               "+n[3]*n[4]+",\n               "+n[4]+")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+y+".0, "+g+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ":"\n    float "+i+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+p+" + col * "+d+" + depth * "+h+" +\n          depth2 * "+c+" + depth3 * "+u+" + depth4 + "+Ga(r)+";\n      vec2 uv = uvFromFlat("+g+", "+y+", index);\n      return sampleTexture("+r+", uv);\n    }\n  "}(e);default:throw new Error(n.length+"-D input sampling is not yet supported")}}(t),t.shapeInfo.logicalShape.length<=e.logicalShape.length&&(r+=n?function(t,e){var n,r,i=t.name,a=i.charAt(0).toUpperCase()+i.slice(1),o="get"+a+"AtOutCoords",s=t.shapeInfo.logicalShape.length,l=e.logicalShape.length,u=Dr(t.shapeInfo.logicalShape,e.logicalShape),c=Ka(l),h=l-s,d=["x","y","z","w","u","v"];n=0===s?"":l<2&&u.length>=1?"coords = 0;":u.map((function(t){return"coords."+d[t+h]+" = 0;"})).join("\n"),r=l<2&&s>0?"coords":t.shapeInfo.logicalShape.map((function(t,e){return"coords."+d[e+h]})).join(", ");var p="return outputValue;",f=1===T(t.shapeInfo.logicalShape),m=1===T(e.logicalShape);if(1!==s||f||m){if(f&&!m)p=1===l?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(u.length){var g=s-2,y=s-1;u.indexOf(g)>-1&&u.indexOf(y)>-1?p="return vec4(outputValue.x);":u.indexOf(g)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":u.indexOf(y)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}}else p="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 "+o+"() {\n      "+c+" coords = getOutputCoords();\n      "+n+"\n      vec4 outputValue = get"+a+"("+r+");\n      "+p+"\n    }\n  "}(t,e):function(t,e){var n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",a=t.shapeInfo.logicalShape.length,o=e.logicalShape.length;if(!t.shapeInfo.isUniform&&a===o&&null==t.shapeInfo.flatOffset&&N(t.shapeInfo.texShape,e.texShape))return"\n      float "+i+"() {\n        return sampleTexture("+n+", resultUV);\n      }\n    ";var s=Ka(o),l=Dr(t.shapeInfo.logicalShape,e.logicalShape),u=o-a,c=["x","y","z","w","u","v"];return"\n    float "+i+"() {\n      "+s+" coords = getOutputCoords();\n      "+(0===a?"":o<2&&l.length>=1?"coords = 0;":l.map((function(t){return"coords."+c[t+u]+" = 0;"})).join("\n"))+"\n      return get"+r+"("+(o<2&&a>0?"coords":t.shapeInfo.logicalShape.map((function(t,e){return"coords."+c[e+u]})).join(", "))+");\n    }\n  "}(t,e)),r}(t,e,r)})).join("\n"),u=e.texShape,c=Ua(),h=function(t){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return "+t.texture2D+"(textureSampler, uv).r;\n    }\n  "}(c),d=function(t){return t.version+"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    "+t.varyingFs+" vec2 resultUV;\n    "+t.defineOutput+"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    "+t.defineSpecialNaN+"\n    "+t.defineSpecialInf+"\n    "+t.defineRound+"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    \nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n    \nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n    \nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n  "}(c);return e.isPacked?(a=function(t,e){switch(t.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(t,e){var n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return 1===n[0]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * "+n[1]+".0);\n      }\n    ":1===n[1]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * "+n[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      return 2 * (resTexRC.x * "+n[1]+" + resTexRC.y);\n    }\n  "}(0,e);case 2:return function(t,e){var n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(N(t,e))return"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2("+n[0]+", "+n[1]+"));\n      }\n    ";var r=Math.ceil(t[1]/2);return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec2(r, c);\n    }\n  "}(t,e);case 3:return n=t,r=e,i=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],o=(a=Math.ceil(n[2]/2))*Math.ceil(n[1]/2),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+i[0]+", "+i[1]+"));\n      int index = resTexRC.x * "+i[1]+" + resTexRC.y;\n\n      int b = index / "+o+";\n      index -= b * "+o+";\n\n      int r = 2 * (index / "+a+");\n      int c = imod(index, "+a+") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";default:return function(t,e){for(var n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],r=Math.ceil(t[t.length-1]/2),i=r*Math.ceil(t[t.length-2]/2),a=i,o="",s="b, r, c",l=2;l<t.length-1;l++)o="\n      int b"+l+" = index / "+(a*=t[t.length-l-1])+";\n      index -= b"+l+" * "+a+";\n    "+o,s="b"+l+", "+s;return"\n    ivec"+t.length+" getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n\n      "+o+"\n\n      int b = index / "+i+";\n      index -= b * "+i+";\n\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec"+t.length+"("+s+");\n    }\n  "}(t,e)}var n,r,i,a,o}(e.logicalShape,u),o=function(t){return"\n    void setOutput(vec4 val) {\n      "+t.output+" = val;\n    }\n  "}(c)):(a=function(t,e){switch(t.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(t,e){return 1===e[0]?"\n      int getOutputCoords() {\n        return int(resultUV.x * "+e[1]+".0);\n      }\n    ":1===e[1]?"\n      int getOutputCoords() {\n        return int(resultUV.y * "+e[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+e[0]+", "+e[1]+"));\n      return resTexRC.x * "+e[1]+" + resTexRC.y;\n    }\n  "}(0,e);case 2:return function(t,e){return N(t,e)?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2("+e[0]+", "+e[1]+"));\n      }\n    ":1===t[1]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+e[0]+", "+e[1]+"));\n        int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":1===t[0]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+e[0]+", "+e[1]+"));\n        int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+e[0]+", "+e[1]+"));\n      int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n      int r = index / "+t[1]+";\n      int c = index - r * "+t[1]+";\n      return ivec2(r, c);\n    }\n  "}(t,e);case 3:return n=e,r=Wa(["r","c","d"],t),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      "+r+"\n      return ivec3(r, c, d);\n    }\n  ";case 4:return function(t,e){var n=Wa(["r","c","d","d2"],t);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+e[0]+", "+e[1]+"));\n      int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n      "+n+"\n      return ivec4(r, c, d, d2);\n    }\n  "}(t,e);case 5:return function(t,e){var n=Wa(["r","c","d","d2","d3"],t);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2("+e[0]+",\n                             "+e[1]+"));\n\n      int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  "}(t,e);case 6:return function(t,e){var n=Wa(["r","c","d","d2","d3","d4"],t);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+e[0]+", "+e[1]+"));\n      int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  "}(t,e);default:throw new Error(t.length+"-D output sampling is not yet supported")}var n,r}(e.logicalShape,u),o=function(t){return"\n    void setOutput(float val) {\n      "+t.output+" = vec4(val, 0, 0, 0);\n    }\n  "}(c)),r&&(d+="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n"),[d,h,o,s,a,l,n].join("\n")}(a,s,i,e.packedInputs),u=t.createProgram(l),h=null,d=t.getUniformLocation(u,"NAN",!1);1===c().getNumber("WEBGL_VERSION")&&(h=t.getUniformLocation(u,"INFINITY",!1));for(var p={},f=0;f<e.variableNames.length;f++){var m=e.variableNames[f];p[m]=t.getUniformLocation(u,m,!1),p["offset"+m]=t.getUniformLocation(u,"offset"+m,!1)}return{program:e,source:l,webGLProgram:u,uniformLocations:p,inShapeInfos:o,outShapeInfo:s,infLoc:h,nanLoc:d}}(a.gpgpu,t,h,p)})),g=null!=this.activeTimers;if(g&&(d=this.startTimer()),function(t,e,n,r,i){ss(e.inShapeInfos,n),ss([e.outShapeInfo],[r]);var a=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(a,o[0],o[1]):t.setOutputMatrixTexture(a,o[0],o[1]),t.setProgram(e.webGLProgram),1===c().getNumber("WEBGL_VERSION")&&null!==e.infLoc&&t.gl.uniform1f(e.infLoc,1/0),null!==e.nanLoc&&t.gl.uniform1f(e.nanLoc,NaN),n.forEach((function(n,r){var i=e.program.variableNames[r],a=e.uniformLocations[i],o=e.uniformLocations["offset"+i];if(null!=a)if(n.isUniform)if(T(n.shape)<2)t.gl.uniform1f(a,n.uniformValues[0]);else{var s=n.uniformValues;s instanceof Float32Array||(s=new Float32Array(s)),t.gl.uniform1fv(a,s)}else null!=n.texData.slice&&null!=o&&t.gl.uniform1i(o,n.texData.slice.flatOffset),t.setInputMatrixTexture(n.texData.texture,a,r)})),null!=i&&i(t,e.webGLProgram),t.executeProgram()}(this.gpgpu,m,h,p,r),u.forEach((function(t){return a.disposeData(t.dataId)})),g&&(d=this.endTimer(d),this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime(d)})),!c().getBool("WEBGL_LAZILY_UNPACK")&&s.isPacked&&!1===i){var y=this.unpackTensor(o);return this.disposeData(o.dataId),y}return o},e.prototype.compileAndRun=function(t,e,n,r,i){void 0===i&&(i=!1);var a=this.runWebGLProgram(t,e,n=n||e[0].dtype,r,i);return Bt.makeTensorFromDataId(a.dataId,a.shape,a.dtype)},e.prototype.getAndSaveBinary=function(t,e){return t in this.binaryCache||(this.binaryCache[t]=e()),this.binaryCache[t]},e.prototype.getTextureManager=function(){return this.textureManager},e.prototype.dispose=function(){var t=this;this.disposed||(c().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach((function(e){t.gpgpu.deleteProgram(t.binaryCache[e].webGLProgram),delete t.binaryCache[e]})),this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},e.prototype.floatPrecision=function(){var t=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=en((function(){if(!c().get("WEBGL_RENDER_FLOAT32_ENABLED")){var e=c().getBool("DEBUG");c().set("DEBUG",!1);var n=t.abs(Pn(1e-8)).dataSync()[0];if(c().set("DEBUG",e),n>0)return 32}return 16}))),this.floatPrecisionValue},e.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},e.prototype.uploadToGPU=function(t){var e,n=this.texData.get(t),r=n.shape,i=n.dtype,a=n.values,o=n.usage,s=n.isPacked;if(null==n.texture){var l,u=null!=this.activeTimers;u&&(l=at());var c=n.texShape;if(null==c&&(c=Oe(r,s),n.texShape=c),null!=a){var h=Re(r),d=void 0,p=c[1],f=c[0],m=a instanceof Uint8Array;s?(p=(e=Qt(c[0],c[1]))[0],d=new Lo(h,[f=e[1],p],m)):d=new Po(h,[f,p],m);var g=this.makeTensorInfo([f,p],i);this.texData.get(g.dataId).usage=m?Ht.PIXELS:Ht.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(g.dataId),p,f,a);var y=this.runWebGLProgram(d,[g],i,null,!0),v=this.texData.get(y.dataId);n.texture=v.texture,n.texShape=v.texShape,n.isPacked=v.isPacked,n.usage=v.usage,this.disposeData(g.dataId),this.texData.delete(y.dataId),n.values=null,u&&(this.uploadWaitMs+=at()-l)}else{var b=this.acquireTexture(c,o,i,s);n.texture=b}}},e.prototype.convertAndCacheOnCPU=function(t,e){var n=this.texData.get(t),r=n.dtype;return this.releaseGPUData(t),null!=e&&(n.values=function(t,e){if("float32"===e||"complex64"===e)return t;if("int32"===e||"bool"===e){for(var n="int32"===e?new Int32Array(t.length):new Uint8Array(t.length),r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}throw new Error("Unknown dtype "+e)}(e,r)),n.values},e.prototype.acquireTexture=function(t,e,n,r){if(this.numBytesInGPU+=this.computeBytes(t,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var i=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+i+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(t,e,r)},e.prototype.computeBytes=function(t,e){return t[0]*t[1]*G(e)},e}(ra);function hl(t,e){return t(e={exports:{}},e.exports),e.exports}jt()&&Bt.registerBackend("webgl",(function(){return new cl}),2),"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var dl=hl((function(t){!function(t,e,n){function r(t){var e,n=this,r=(e=4022871197,function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)});n.next=function(){var t=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=t-(n.c=0|t)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(t),n.s0<0&&(n.s0+=1),n.s1-=r(t),n.s1<0&&(n.s1+=1),n.s2-=r(t),n.s2<0&&(n.s2+=1),r=null}function i(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function a(t,e){var n=new r(t),a=e&&e.state,o=n.next;return o.int32=function(){return 4294967296*n.next()|0},o.double=function(){return o()+11102230246251565e-32*(2097152*o()|0)},o.quick=o,a&&("object"==typeof a&&i(a,n),o.state=function(){return i(n,{})}),o}e&&e.exports?e.exports=a:this.alea=a}(0,t)})),pl=hl((function(t){!function(t,e,n){function r(t){var e=this,n="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),e.next()}function i(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function a(t,e){var n=new r(t),a=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,a&&("object"==typeof a&&i(a,n),o.state=function(){return i(n,{})}),o}e&&e.exports?e.exports=a:this.xor128=a}(0,t)})),fl=hl((function(t){!function(t,e,n){function r(t){var e=this,n="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),r==n.length&&(e.d=e.x<<10^e.x>>>4),e.next()}function i(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function a(t,e){var n=new r(t),a=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,a&&("object"==typeof a&&i(a,n),o.state=function(){return i(n,{})}),o}e&&e.exports?e.exports=a:this.xorwow=a}(0,t)})),ml=hl((function(t){!function(t,e,n){function r(t){var e=this;e.next=function(){var t,n,r=e.x,i=e.i;return t=r[i],n=(t^=t>>>7)^t<<24,n^=(t=r[i+1&7])^t>>>10,n^=(t=r[i+3&7])^t>>>3,n^=(t=r[i+4&7])^t<<7,t=r[i+7&7],n^=(t^=t<<13)^t<<9,r[i]=n,e.i=i+1&7,n},function(t,e){var n,r=[];if(e===(0|e))r[0]=e;else for(e=""+e,n=0;n<e.length;++n)r[7&n]=r[7&n]<<15^e.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n&&(r[7]=-1),t.x=r,t.i=0,n=256;n>0;--n)t.next()}(e,t)}function i(t,e){return e.x=t.x.slice(),e.i=t.i,e}function a(t,e){null==t&&(t=+new Date);var n=new r(t),a=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,a&&(a.x&&i(a,n),o.state=function(){return i(n,{})}),o}e&&e.exports?e.exports=a:this.xorshift7=a}(0,t)})),gl=hl((function(t){!function(t,e,n){function r(t){var e=this;e.next=function(){var t,n,r=e.w,i=e.X,a=e.i;return e.w=r=r+1640531527|0,n=i[a+34&127],t=i[a=a+1&127],n^=n<<13,t^=t<<17,n=i[a]=(n^=n>>>15)^(t^=t>>>12),e.i=a,n+(r^r>>>16)|0},function(t,e){var n,r,i,a,o,s=[],l=128;for(e===(0|e)?(r=e,e=null):(e+="\0",r=0,l=Math.max(l,e.length)),i=0,a=-32;a<l;++a)e&&(r^=e.charCodeAt((a+32)%e.length)),0===a&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,a>=0&&(i=0==(n=s[127&a]^=r+(o=o+1640531527|0))?i+1:0);for(i>=128&&(s[127&(e&&e.length||0)]=-1),i=127,a=512;a>0;--a)r=s[i+34&127],n=s[i=i+1&127],r^=r<<13,n^=n<<17,s[i]=(r^=r>>>15)^(n^=n>>>12);t.w=o,t.X=s,t.i=i}(e,t)}function i(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function a(t,e){null==t&&(t=+new Date);var n=new r(t),a=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,a&&(a.X&&i(a,n),o.state=function(){return i(n,{})}),o}e&&e.exports?e.exports=a:this.xor4096=a}(0,t)})),yl=hl((function(t){!function(t,e,n){function r(t){var e=this,n="";e.next=function(){var t=e.b,n=e.c,r=e.d,i=e.a;return t=t<<25^t>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-t|0,e.b=t=t<<20^t>>>12^n,e.c=n=n-r|0,e.d=r<<16^n>>>16^i,e.a=i-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):n+=t;for(var r=0;r<n.length+20;r++)e.b^=0|n.charCodeAt(r),e.next()}function i(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function a(t,e){var n=new r(t),a=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,a&&("object"==typeof a&&i(a,n),o.state=function(){return i(n,{})}),o}e&&e.exports?e.exports=a:this.tychei=a}(0,t)})),vl=hl((function(t){!function(e,r){var i,a=this,o=256,s=6,l="random",u=r.pow(o,s),c=r.pow(2,52),h=2*c,d=o-1;function p(t,n,d){var p=[],v=g(function t(e,n){var r,i=[],a=typeof e;if(n&&"object"==a)for(r in e)try{i.push(t(e[r],n-1))}catch(t){}return i.length?i:"string"==a?e:e+"\0"}((n=1==n?{entropy:!0}:n||{}).entropy?[t,y(e)]:null==t?function(){try{var t;return i&&(t=i.randomBytes)?t=t(o):(t=new Uint8Array(o),(a.crypto||a.msCrypto).getRandomValues(t)),y(t)}catch(t){var n=a.navigator,r=n&&n.plugins;return[+new Date,a,r,a.screen,y(e)]}}():t,3),p),b=new f(p),w=function(){for(var t=b.g(s),e=u,n=0;t<c;)t=(t+n)*o,e*=o,n=b.g(1);for(;t>=h;)t/=2,e/=2,n>>>=1;return(t+n)/e};return w.int32=function(){return 0|b.g(4)},w.quick=function(){return b.g(4)/4294967296},w.double=w,g(y(b.S),e),(n.pass||d||function(t,e,n,i){return i&&(i.S&&m(i,b),t.state=function(){return m(b,{})}),n?(r[l]=t,e):t})(w,v,"global"in n?n.global:this==r,n.state)}function f(t){var e,n=t.length,r=this,i=0,a=r.i=r.j=0,s=r.S=[];for(n||(t=[n++]);i<o;)s[i]=i++;for(i=0;i<o;i++)s[i]=s[a=d&a+t[i%n]+(e=s[i])],s[a]=e;(r.g=function(t){for(var e,n=0,i=r.i,a=r.j,s=r.S;t--;)e=s[i=d&i+1],n=n*o+s[d&(s[i]=s[a=d&a+e])+(s[a]=e)];return r.i=i,r.j=a,n})(o)}function m(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function g(t,e){for(var n,r=t+"",i=0;i<r.length;)e[d&i]=d&(n^=19*e[d&i])+r.charCodeAt(i++);return y(e)}function y(t){return String.fromCharCode.apply(0,t)}if(r["seed"+l]=p,g(r.random(),e),t.exports){t.exports=p;try{i=n(1)}catch(t){}}}([],Math)}));vl.alea=dl,vl.xor128=pl,vl.xorwow=fl,vl.xorshift7=ml,vl.xor4096=gl,vl.tychei=yl;var bl=vl.alea,wl=Tn({addN_:function(t){E(Array.isArray(t),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),E(t.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+t.length}));var e=t.map((function(t,e){return vn(t,"tensors"+e,"addN")})),n=e[0];return e.forEach((function(t){if(t.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),e.forEach((function(t){if(!N(t.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")})),Bt.runKernelFunc((function(t,n){return t.addN(e)}),e,null,"AddN")}});function _l(){Ye("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}function xl(t){return 0===t.rank||1===t.rank?t.as4D(1,1,1,t.size):2===t.rank?t.as4D(1,1,t.shape[0],t.shape[1]):3===t.rank?t.as4D(1,t.shape[0],t.shape[1],t.shape[2]):t}function Cl(t,e,n,r,i,a){null==a&&(a=.001);var o,s,l=vn(t,"x","batchNorm"),u=vn(e,"mean","batchNorm"),c=vn(n,"variance","batchNorm");return null!=i&&(o=vn(i,"scale","batchNorm")),null!=r&&(s=vn(r,"offset","batchNorm")),E(u.rank===c.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),E(null==s||u.rank===s.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),E(null==o||u.rank===o.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),Bt.runKernelFunc((function(t,e){var n=xl(l),r=t.batchNormalization(n,Sl(u),Sl(c),a,Sl(o),Sl(s));return e([l,u,c,o]),r}),{x:l,scale:o,offset:s,mean:u,variance:c},null,"FusedBatchNorm",{varianceEpsilon:a}).reshape(l.shape)}function Sl(t){return null==t?null:0===t.rank?t.as1D():1===t.rank?t:2===t.rank?t.as4D(1,1,t.shape[0],t.shape[1]):3===t.rank?t.as4D(1,t.shape[0],t.shape[1],t.shape[2]):t}var kl=Tn({batchNormalization_:function(t,e,n,r,i,a){return void 0===r&&(r=.001),_l(),Cl(t,e,n,a,i,r)}}),El=Tn({batchNorm_:Cl});function Il(t,e,n,r,i,a){var o,s,l=vn(t,"x","batchNorm"),u=vn(e,"mean","batchNorm"),c=vn(n,"variance","batchNorm");return null!=i&&(o=vn(i,"scale","batchNorm")),null!=r&&(s=vn(r,"offset","batchNorm")),E(2===l.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+l.rank+"."})),E(2===u.rank||1===u.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+u.rank+"."})),E(2===c.rank||1===c.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+c.rank+"."})),null!=o&&E(2===o.rank||1===o.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+o.rank+"."})),null!=s&&E(2===s.rank||1===s.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."})),El(l,u,c,s,o,a)}var Al=Tn({batchNormalization2d_:function(t,e,n,r,i,a){return void 0===r&&(r=.001),_l(),Il(t,e,n,a,i,r)}}),Dl=Tn({batchNorm2d_:Il});function Tl(t,e,n,r,i,a){var o,s,l=vn(t,"x","batchNorm"),u=vn(e,"mean","batchNorm"),c=vn(n,"variance","batchNorm");return null!=i&&(o=vn(i,"scale","batchNorm")),null!=r&&(s=vn(r,"offset","batchNorm")),E(3===l.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+l.rank+"."})),E(3===u.rank||1===u.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+u.rank+"."})),E(3===c.rank||1===c.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+c.rank+"."})),null!=o&&E(3===o.rank||1===o.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+o.rank+"."})),null!=s&&E(3===s.rank||1===s.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."})),El(l,u,c,s,o,a)}var Nl=Tn({batchNormalization3d_:function(t,e,n,r,i,a){return void 0===r&&(r=.001),_l(),Tl(t,e,n,a,i,r)}}),Rl=Tn({batchNorm3d_:Tl});function Ol(t,e,n,r,i,a){var o,s,l=vn(t,"x","batchNorm"),u=vn(e,"mean","batchNorm"),c=vn(n,"variance","batchNorm");return null!=i&&(o=vn(i,"scale","batchNorm")),null!=r&&(s=vn(r,"offset","batchNorm")),E(4===l.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+l.rank+"."})),E(4===u.rank||1===u.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+u.rank+"."})),E(4===c.rank||1===c.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+c.rank+"."})),null!=o&&E(4===o.rank||1===o.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+o.rank+"."})),null!=s&&E(4===s.rank||1===s.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."})),El(l,u,c,s,o,a)}var Fl=Tn({batchNormalization4d_:function(t,e,n,r,i,a){return void 0===r&&(r=.001),_l(),Ol(t,e,n,a,i,r)}}),Ml=Tn({batchNorm4d_:Ol}),Pl=Tn({broadcastTo_:function(t,e){var n=vn(t,"broadcastTo","x"),r=n.shape;if(e.some((function(t){return!(t>0)||t%1!=0})))throw new Error("broadcastTo(): Invalid broadcast shape ["+e+"].");if(e.length<n.rank)throw new Error("broadcastTo(): shape.length="+e.length+" < input.rank="+n.rank+".");if(e.length>n.rank){for(var i=n.shape.slice();i.length<e.length;)i.unshift(1);n=n.reshape(i)}for(var a=n.shape,o=Array.from(e),s=e.length-1;s>=0;s--)if(a[s]===e[s])o[s]=1;else if(1!==n.shape[s])throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+e+"].");var l=o.map((function(t,e){return t>1?e:-1})).filter((function(t){return t>=0}));return 0===l.length?n.clone():Bt.runKernelFunc((function(t){return t.tile(n,o)}),{x:n},(function(t){return{x:function(){return t.sum(l,!0)}}}),Cr,{shape:e,inputShape:a})}}),Ll=Tn({clone_:function(t){var e=vn(t,"x","clone",null);return Bt.runKernelFunc((function(){return Bt.makeTensorFromDataId(e.dataId,e.shape,e.dtype)}),{x:e},null,kr)}}),zl=Tn({logicalAnd_:function(t,e){var n=vn(t,"a","logicalAnd","bool"),r=vn(e,"b","logicalAnd","bool");return Nr(n.shape,r.shape),Bt.runKernelFunc((function(t){return t.logicalAnd(n,r)}),{a:n,b:r},null,"LogicalAnd")}}),Vl=Tn({logicalNot_:function(t){var e=vn(t,"x","logicalNot","bool");return Bt.runKernelFunc((function(t){return t.logicalNot(e)}),{$x:e})}}),Bl=Tn({logicalOr_:function(t,e){var n=vn(t,"a","logicalOr","bool"),r=vn(e,"b","logicalOr","bool");return Nr(n.shape,r.shape),Bt.runKernelFunc((function(t){return t.logicalOr(n,r)}),{$a:n,$b:r})}}),jl=Tn({logicalXor_:function(t,e){var n=vn(t,"a","logicalXor","bool"),r=vn(e,"b","logicalXor","bool");return Nr(n.shape,r.shape),Bl(t,e).logicalAnd(zl(t,e).logicalNot())}}),Ul=Tn({where_:function(t,e,n){var r=vn(e,"a","where"),i=vn(n,"b","where"),a=vn(t,"condition","where","bool");return I(r.shape,i.shape,"Error in where: "),1===a.rank?E(a.shape[0]===r.shape[0],(function(){return"The first dimension of `a` must match the size of `condition`."})):I(a.shape,i.shape,"Error in where: "),Bt.runKernelFunc((function(t,e){var n=t.select(a,r,i);return e([a]),n}),{$condition:a,$a:r,$b:i},(function(t,e){var n=e[0];return{$condition:function(){return Yn(n).toFloat()},$a:function(){return t.mul(n.cast(t.dtype))},$b:function(){return t.mul(n.logicalNot().cast(t.dtype))}}}))}}),Wl=function(t){return o(this,void 0,void 0,(function(){var e,n,r;return s(this,(function(i){switch(i.label){case 0:return[4,(e=vn(t,"condition","whereAsync","bool")).data()];case 1:return n=i.sent(),r=Pa(e.shape,n),t!==e&&e.dispose(),[2,r]}}))}))},Hl=Tn({divNoNan_:function(t,e){var n,r=vn(t,"a","div"),i=vn(e,"b","div");r=(n=Ot(r,i))[0];var a=Di(r,i=n[1]),o=Yn(a),s=i.equal(o);return Ul(s,o,a)}}),ql=Tn({tile_:function(t,e){var n=vn(t,"x","tile",null);return E(n.rank===e.length,(function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+e+"."})),Bt.runKernelFunc((function(t,r){var i=t.tile(n,e);return r([n]),i}),{x:n},null,Er,{reps:e},[n])}}),Gl=Tn({eye_:function(t,e,n,r){void 0===r&&(r="float32"),null==e&&(e=t);for(var i=rr([t,e],r),a=t<=e?t:e,o=0;o<a;++o)i.set(1,o,o);var s=i.toTensor().as2D(t,e);if(null==n)return s;if(1===n.length)return ql(ur(s,0),[n[0],1,1]);if(2===n.length)return ql(ur(ur(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return ql(ur(ur(ur(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),$l=Tn({multinomial_:function(t,e,n,r){void 0===r&&(r=!1);var i=vn(t,"logits","multinomial"),a=i.size,o=i.rank;if(a<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+a+".");if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+o);n=n||Math.random();var s=1===o?i.as2D(1,-1):i,l=Bt.runKernelFunc((function(t){return t.multinomial(s,r,e,n)}),{logits2D:s});return 1===o?l.as1D():l}}),Kl=Tn({oneHot_:function(t,e,n,r){if(void 0===n&&(n=1),void 0===r&&(r=0),e<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+e);var i=vn(t,"indices","oneHot","int32"),a=i.shape.concat([e]),o={indices:i=i.flatten()};return Bt.runKernelFunc((function(t,a){return a([i]),t.oneHot(i,e,n,r)}),o,null,Sr,{depth:e,onValue:n,offValue:r}).reshape(a)}}),Xl=Tn({pad_:function(t,e,n){void 0===n&&(n=0);var r=vn(t,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");return Bt.runKernelFunc((function(t,i){return i([r]),t.pad(r,e,n)}),{x:r},null,Ir,{paddings:e,constantValue:n})}}),Yl=Tn({pad1d_:function(t,e,n){return void 0===n&&(n=0),E(2===e.length,(function(){return"Invalid number of paddings. Must be length of 2."})),Xl(t,[e],n)}}),Zl=Tn({pad2d_:function(t,e,n){return void 0===n&&(n=0),E(2===e.length&&2===e[0].length&&2===e[1].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Xl(t,e,n)}}),Ql=Tn({pad3d_:function(t,e,n){return void 0===n&&(n=0),E(3===e.length&&2===e[0].length&&2===e[1].length&&2===e[2].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Xl(t,e,n)}}),Jl=Tn({pad4d_:function(t,e,n){return void 0===n&&(n=0),E(4===e.length&&2===e[0].length&&2===e[1].length&&2===e[2].length&&2===e[3].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Xl(t,e,n)}}),tu=Tn({rand_:function(t,e,n){var r=T(t),i=null;if(null==n||"float32"===n)i=new Float32Array(r);else if("int32"===n)i=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type "+n);i=new Uint8Array(r)}for(var a=0;a<r;a++)i[a]=e();return Bt.makeTensor(i,t,n)}}),eu=.001,nu=.1;function ru(){return 32===Bt.backend.floatPrecision()?eu:nu}function iu(t,e,n){var r=!0;if((q(t)||q(e))&&(r=!1),q(t)&&q(e)&&(r=!0),r){var i=t.constructor.name,a=e.constructor.name;if(i!==a)throw new Error("Arrays are of different type. Actual: "+i+". Expected: "+a)}if(Array.isArray(t)&&Array.isArray(e)){var o=gn(t),s=gn(e);if(!N(o,s))throw new Error("Arrays have different shapes. Actual: ["+o+"]. Expected: ["+s+"]")}var l=q(t)?t:D(t),u=q(e)?e:D(e);if(l.length!==u.length)throw new Error("Arrays have different lengths actual: "+l.length+" vs expected: "+u.length+".\nActual:   "+l+".\nExpected: "+u+".");for(var c=0;c<u.length;++c){var h=l[c],d=u[c];if(!n(h,d))throw new Error("Arrays differ: actual["+c+"] = "+h+", expected["+c+"] = "+d+".\nActual:   "+l+".\nExpected: "+u+".")}}function au(t,e,n){return!isFinite(t)&&!isFinite(e)||!(isNaN(t)||isNaN(e)||Math.abs(t-e)>n)}var ou=Object.freeze({TEST_EPSILON_FLOAT16:nu,expectArraysClose:function(t,e,n){return null==n&&(n=ru()),iu(t,e,(function(t,e){return au(t,e,n)}))},testEpsilon:ru,expectPromiseToFail:function(t,e){t().then((function(){return e.fail()}),(function(){return e()}))},expectArraysEqual:function(t,e){var n="string"==typeof e||"number"==typeof e||"boolean"==typeof e?[e]:e;return K(t)||K(t[0])||K(e)||K(e[0])?iu(t,n,(function(t,e){return t==e})):iu(t,e,(function(t,e){return au(t,e,0)}))},expectNumbersClose:function(t,e,n){if(null==n&&(n=ru()),!au(t,e,n))throw new Error("Numbers differ: actual === "+t+", expected === "+e)},expectValuesInRange:function(t,e,n){for(var r=0;r<t.length;r++)if(t[r]<e||t[r]>n)throw new Error("Value out of range:"+t[r]+" low: "+e+", high: "+n)},expectArrayBuffersEqual:function(t,e){expect(new Float32Array(t)).toEqual(new Float32Array(e))}}),su=function(){function t(t,e,n,r,i){this.mean=t,this.stdDev=e,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var a=i||Math.random();this.random=bl(a.toString())}return t.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var t=this.nextVal;return this.nextVal=NaN,t}for(var e,n,r=!1;!r;){var i=void 0,a=void 0,o=void 0;do{o=(i=2*this.random()-1)*i+(a=2*this.random()-1)*a}while(o>=1||0===o);var s=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*i*s,n=this.mean+this.stdDev*a*s,this.truncated&&!this.isValidTruncated(e)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(e)},t.prototype.convertValue=function(t){return null==this.dtype||"float32"===this.dtype?t:Math.round(t)},t.prototype.isValidTruncated=function(t){return t<=this.upper&&t>=this.lower},t}(),lu=function(){function t(t,e,n,r){this.alpha=t,this.beta=1/e,this.dtype=n;var i=r||Math.random();this.randu=bl(i.toString()),this.randn=new su(0,1,n,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}return t.prototype.nextValue=function(){for(var t,e,n,r,i,a;;){do{r=this.randn.nextValue(),a=1+this.c*r}while(a<=0);if(e=1-.331*(t=r*r)*t,n=.5*t+this.d*(1-(a*=a*a)+Math.log(a)),(i=this.randu())<e||Math.log(i)<n)break}return a*=1/this.beta*this.d,this.alpha<1&&(a*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(a)},t.prototype.convertValue=function(t){return"float32"===this.dtype?t:Math.round(t)},t}(),uu=function(){function t(t,e,n,r){var i=this;if(void 0===t&&(t=0),void 0===e&&(e=1),this.canReturnFloat=function(){return null==i.dtype||"float32"===i.dtype},this.min=t,this.range=e-t,this.dtype=n,null==r&&(r=Math.random()),"number"==typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+t+" - "+e+" <= 1 and dtype is not float");this.random=bl(r)}return t.prototype.convertValue=function(t){return this.canReturnFloat()?t:Math.round(t)},t.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},t}(),cu=Tn({randomGamma_:function(t,e,n,r,i){if(void 0===n&&(n=1),void 0===r&&(r="float32"),null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type "+r);for(var a=new lu(e,n,r,i),o=rr(t,r),s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}}),hu=Tn({randomNormal_:function(t,e,n,r,i){if(void 0===e&&(e=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var a=new su(e,n,r,!1,i),o=rr(t,r),s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}}),du=Tn({randomUniform_:function(t,e,n,r,i){void 0===e&&(e=0),void 0===n&&(n=1),void 0===r&&(r="float32");for(var a=rr(t,r),o=new uu(e,n,null,i),s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}}),pu=Tn({square_:function(t){var e=vn(t,"x","square");return Bt.runKernelFunc((function(t,n){return n([e]),t.square(e)}),{x:e},null,"Square",{},[e],[])}}),fu=Tn({squaredDifference_:function(t,e){var n,r=vn(t,"a","squaredDifference"),i=vn(e,"b","squaredDifference");return n=Ot(r,i),Nr((r=n[0]).shape,(i=n[1]).shape),Bt.runKernelFunc((function(t,e){var n=t.squaredDifference(r,i);return e([r,i]),n}),{a:r,b:i},(function(t,e){var n=e[0],r=e[1],i=Pn(2);return{a:function(){return t.mul(n.sub(r).mul(i))},b:function(){return t.mul(r.sub(n).mul(i))}}}),xr,{},[r,i],[])}}),mu=Tn({truncatedNormal_:function(t,e,n,r,i){if(void 0===e&&(e=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");for(var a=new su(e,n,r,!0,i),o=rr(t,r),s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}}),gu=Tn({equal_:function(t,e){var n,r=vn(t,"a","equal"),i=vn(e,"b","equal");return n=Ot(r,i),Nr((r=n[0]).shape,(i=n[1]).shape),Bt.runKernelFunc((function(t){return t.equal(r,i)}),{$a:r,$b:i})}}),yu=Tn({equalStrict_:function(t,e){var n=vn(t,"a","equalStrict"),r=vn(e,"b","equalStrict");return I(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),vu=Tn({greater_:function(t,e){var n,r=vn(t,"a","greater"),i=vn(e,"b","greater");return n=Ot(r,i),Nr((r=n[0]).shape,(i=n[1]).shape),Bt.runKernelFunc((function(t){return t.greater(r,i)}),{a:r,b:i},null,"Greater")}}),bu=Tn({greaterEqual_:function(t,e){var n,r=vn(t,"a","greaterEqual"),i=vn(e,"b","greaterEqual");return n=Ot(r,i),Nr((r=n[0]).shape,(i=n[1]).shape),Bt.runKernelFunc((function(t,e){var n=t.greaterEqual(r,i);return e([r,i]),n}),{a:r,b:i},(function(t,e){var n=e[0],r=e[1];return{a:function(){return Yn(n)},b:function(){return Yn(r)}}}),"GreaterEqual")}}),wu=Tn({greaterEqualStrict_:function(t,e){var n=vn(t,"a","greaterEqualStrict"),r=vn(e,"b","greaterEqualStrict");return I(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),_u=Tn({greaterStrict_:function(t,e){var n=vn(t,"a","greaterStrict"),r=vn(e,"b","greaterStrict");return I(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),xu=Tn({less_:function(t,e){var n,r=vn(t,"a","less"),i=vn(e,"b","less");return n=Ot(r,i),Nr((r=n[0]).shape,(i=n[1]).shape),Bt.runKernelFunc((function(t){return t.less(r,i)}),{a:r,b:i},null,"Less")}}),Cu=Tn({lessEqual_:function(t,e){var n,r=vn(t,"a","lessEqual"),i=vn(e,"b","lessEqual");return n=Ot(r,i),Nr((r=n[0]).shape,(i=n[1]).shape),Bt.runKernelFunc((function(t,e){var n=t.lessEqual(r,i);return e([r,i]),n}),{a:r,b:i},null,"LessEqual")}}),Su=Tn({lessEqualStrict_:function(t,e){var n=vn(t,"a","lessEqualStrict"),r=vn(e,"b","lessEqualStrict");return I(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),ku=Tn({lessStrict_:function(t,e){var n=vn(t,"a","lessStrict"),r=vn(e,"b","lessStrict");return I(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),Eu=Tn({notEqual_:function(t,e){var n,r=vn(t,"a","notEqual"),i=vn(e,"b","notEqual");return n=Ot(r,i),Nr((r=n[0]).shape,(i=n[1]).shape),Bt.runKernelFunc((function(t){return t.notEqual(r,i)}),{a:r,b:i},null,"NotEqual")}}),Iu=Tn({notEqualStrict_:function(t,e){var n=vn(t,"a","notEqualStrict"),r=vn(e,"b","notEqualStrict");return I(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}});function Au(t,e){for(var n=[],r=t;r<e;++r)n.push(r);return n}function Du(t){for(var e=[],n=0;n<t.length;++n)for(var r=0;r<t[n].length;++r)e.push(t[n][r]);return e}var Tu=Tn({gather_:function(t,e,n){void 0===n&&(n=0);var r=vn(t,"x","gather"),i=vn(e,"indices","gather","int32");n=z(n,r.shape)[0];var a=function(t,e,n){for(var r=t.shape[n],i=[],a=1,o=1,s=0;s<n;s++)i.push(t.shape[s]),a*=t.shape[s];for(s=0;s<e.rank;s++)i.push(e.shape[s]);for(s=n+1;s<t.rank;s++)i.push(t.shape[s]),o*=t.shape[s];return{batchSize:a,sliceSize:o,dimSize:r,outputShape:i}}(r,i,n);return Bt.runKernelFunc((function(t,e){var a=t.gather(r,i.flatten(),n);return e([i]),a}),{x:r,indices:i},(function(t,e){var i=e[0];return{x:function(){var e=r.shape,a=i.size,o=e.slice(0,n),s=o.length,l=e.slice(n,e.length).slice(1),u=l.length,c=Au(0,s),h=Au(s+1,s+1+u),d=Du([o,[a],l]),p=t.reshape(d),f=i.reshape([a]),m=Du([[s],c,h]),g=p.transpose(m),y=Nu(g,f,r.shape[n]),v=En(m);return y.transpose(v)},indices:function(){return i}}}),"Gather",{axis:n}).reshape(a.outputShape)}}),Nu=Tn({unsortedSegmentSum_:function(t,e,n){var r=vn(t,"x","unsortedSegmentSum"),i=vn(e,"segmentIds","unsortedSegmentSum","int32");return E(R(n),(function(){return"numSegments must be of dtype int"})),Bt.runKernelFunc((function(t,e){var a=t.unsortedSegmentSum(r,i,n);return e([i]),a}),{$x:r},(function(t,e){var n=e[0];return{$x:function(){return function(t,e){for(var n=gi(e,Yn(e)),r=Tu(t,n),i=bu(e,Pn(0,"int32")),a=r.rank-i.rank,o=0;o<a;++o)i=ur(i,o+1);i=zl(i,Hn(r.shape,"bool"));var s=Yn(r);return Ul(i,r,s)}(t,n)}}}))}}),Ru=function(t,e,n){return o(this,void 0,void 0,(function(){var r,i,a,o,l,u,c,h,d,p,f,m,g;return s(this,(function(s){switch(s.label){case 0:for(r=vn(t,"tensor","boolMask"),i=vn(e,"mask","boolMask","bool"),a=null==n?0:n,l=r.shape,E((o=i.rank)>0,(function(){return"mask cannot be scalar"})),I(l.slice(a,a+o),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),u=1,c=a;c<a+o;c++)u*=l[c];return h=l.slice(0,a).concat([u],l.slice(a+o)),d=r.reshape(h),p=i.reshape([-1]),[4,Wl(p)];case 1:return f=s.sent(),m=f.squeeze([1]),g=Tu(d,m,a),t!==r&&r.dispose(),e!==i&&i.dispose(),m.dispose(),d.dispose(),p.dispose(),f.dispose(),[2,g]}}))}))};function Ou(t,e,n,r,i,a,o){void 0===a&&(a="NHWC"),E(t.length===e.rank,(function(){return"Length of inShape ("+t.length+") and rank of dy ("+e.rank+") must match"}));var s=t,l=e,u=!1;3===e.rank&&(u=!0,l=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]),s=[1,t[0],t[1],t[2]]),E(4===s.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+s.length+"."})),E(4===l.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+l.rank})),E(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank}));var c="NHWC"===a?s[3]:s[1],h="NHWC"===a?l.shape[3]:l.shape[1];E(c===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input ("+c+") must match input depth for filter "+n.shape[2]+"."})),E(h===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output ("+h+") must match output depth for filter "+n.shape[3]+"."})),null!=o&&E(R(i),(function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."}));var d=ga(a),p=sa(s,n.shape,r,1,i,o,!1,d),f=Bt.runKernelFunc((function(t,e){var r=t.conv2dDerInput(l,n,p);return e([n,l]),r}),{dy4D:l,filter:n},(function(t,e){var n=e[0],s=e[1];return{dy4D:function(){return Lu(t,n,r,i,a,1,o)},filter:function(){return Vu(t,s,n.shape,r,i,a,o)}}}));return u?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}function Fu(t){var e=function(t){return"number"==typeof t?[t,t,t]:2===t.length?[t[0],t[1],1]:t}(t);return 1===e[0]&&1===e[1]&&1===e[2]}function Mu(t,e,n,r,i){E(t.length===e.rank,(function(){return"Length of inShape ("+t.length+") and rank of dy ("+e.rank+") must match"}));var a=t,o=e,s=!1;4===e.rank&&(s=!0,o=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]),a=[1,t[0],t[1],t[2],t[3]]);var l=a[4],u=o.shape[4];E(5===a.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+a.length+"."})),E(5===o.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+o.rank})),E(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank})),E(l===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input ("+l+") must match input depth for filter "+n.shape[3]+"."})),E(u===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output ("+u+") must match output depth for filter "+n.shape[4]+"."}));var c=la(a,n.shape,r,1,i),h=Bt.runKernelFunc((function(t){return t.conv3dDerInput(o,n,c)}),{dy5D:o});return s?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}var Pu=Tn({conv1d_:function(t,e,n,r,i,a,o){void 0===i&&(i="NWC"),void 0===a&&(a=1);var s=vn(t,"x","conv1d"),l=vn(e,"filter","conv1d"),u=s,c=!1;2===s.rank&&(c=!0,u=s.as3D(1,s.shape[0],s.shape[1])),E(3===u.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank "+u.rank+"."})),E(3===l.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+l.rank+"."})),null!=o&&E(R(r),(function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."})),E(u.shape[2]===l.shape[1],(function(){return"Error in conv1d: depth of input ("+u.shape[2]+") must match input depth for filter "+l.shape[1]+"."})),E(ma(n,a),(function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+a+"'"})),E("NWC"===i,(function(){return"Error in conv1d: got dataFormat of "+i+" but only NWC is currently supported."}));var h=l.as4D(1,l.shape[0],l.shape[1],l.shape[2]),d=u.as4D(u.shape[0],1,u.shape[1],u.shape[2]),p=Lu(d,h,[1,n],r,"NHWC",[1,a],o);return c?p.as2D(p.shape[2],p.shape[3]):p.as3D(p.shape[0],p.shape[2],p.shape[3])}}),Lu=Tn({conv2d_:function(t,e,n,r,i,a,o){void 0===i&&(i="NHWC"),void 0===a&&(a=[1,1]);var s=vn(t,"x","conv2d"),l=vn(e,"filter","conv2d"),u=s,c=!1;3===s.rank&&(c=!0,u=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),E(4===u.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank "+u.rank+"."})),E(4===l.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+l.rank+"."})),null!=o&&E(R(r),(function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."}));var h="NHWC"===i?u.shape[3]:u.shape[1];E(h===l.shape[2],(function(){return"Error in conv2d: depth of input ("+h+") must match input depth for filter "+l.shape[2]+"."})),E(ma(n,a),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"}));var d=ga(i),p=sa(u.shape,l.shape,n,a,r,o,!1,d),f=Bt.runKernelFunc((function(t,e){var n=t.conv2d(u,l,p);return e([l,u]),n}),{x:u,filter:l},(function(t,e){var o=e[0],s=e[1];return E(fa(a),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+a+"'"})),{x:function(){return Bu(s.shape,t,o,n,r,i)},filter:function(){return Vu(s,t,o.shape,n,r,i)}}}),"Conv2D",p,[l,u]);return c?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}}),zu=Tn({conv3d_:function(t,e,n,r,i,a){void 0===i&&(i="NDHWC"),void 0===a&&(a=[1,1,1]);var o=vn(t,"x","conv3d"),s=vn(e,"filter","conv3d"),l=o,u=!1;4===o.rank&&(u=!0,l=o.as5D(1,o.shape[0],o.shape[1],o.shape[2],o.shape[3])),E(5===l.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank "+l.rank+"."})),E(5===s.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."})),E(l.shape[4]===s.shape[3],(function(){return"Error in conv3d: depth of input ("+l.shape[4]+") must match input depth for filter "+s.shape[3]+"."})),E(function(t,e){return Fu(t)||Fu(e)}(n,a),(function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"})),E("NDHWC"===i,(function(){return"Error in conv3d: got dataFormat of "+i+" but only NDHWC is currently supported."}));var c=la(l.shape,s.shape,n,a,r),h=Bt.runKernelFunc((function(t,e){var n=t.conv3d(l,s,c);return e([l,s]),n}),{x:l,$filter:s},(function(t,e){E(Fu(a),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+a+"'"}));var i=e[0],o=e[1];return{x:function(){return Mu(i.shape,t,o,n,r)},$filter:function(){return function(t,e,n,r,i){var a=t;4===t.rank&&(a=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]));var o=e;4===o.rank&&(o=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3])),E(5===a.rank,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+a.shape+"."})),E(5===o.rank,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+o.shape+"."})),E(5===n.length,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+n+"."})),E(a.shape[4]===n[3],(function(){return"Error in conv3dDerFilter: depth of input "+a.shape[4]+") must match input depth in filter ("+n[3]+"."})),E(o.shape[4]===n[4],(function(){return"Error in conv3dDerFilter: depth of dy ("+o.shape[4]+") must match output depth for filter ("+n[4]+")."}));var s=la(a.shape,n,r,1,i);return Bt.runKernelFunc((function(t){return t.conv3dDerFilter(a,o,s)}),{x5D:a,dy5D:o})}(i,t,o.shape,n,r)}}}));return u?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}}),Vu=Tn({conv2dDerFilter_:function(t,e,n,r,i,a,o){void 0===a&&(a="NHWC");var s=t;3===t.rank&&(s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var l=e;3===l.rank&&(l=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),E(4===s.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+s.shape+"."})),E(4===l.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+l.shape+"."})),E(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."}));var u="NHWC"===a?s.shape[3]:s.shape[1],c="NHWC"===a?l.shape[3]:l.shape[1];E(u===n[2],(function(){return"Error in conv2dDerFilter: depth of input "+u+") must match input depth in filter ("+n[2]+"."})),E(c===n[3],(function(){return"Error in conv2dDerFilter: depth of dy ("+c+") must match output depth for filter ("+n[3]+")."})),null!=o&&E(R(i),(function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."}));var h=ga(a),d=sa(s.shape,n,r,1,i,o,!1,h);return Bt.runKernelFunc((function(t){return t.conv2dDerFilter(s,l,d)}),{x4D:s,dy4D:l})}}),Bu=Tn({conv2dDerInput_:Ou}),ju=Tn({depthwiseConv2d_:function(t,e,n,r,i,a,o){void 0===i&&(i="NHWC"),void 0===a&&(a=[1,1]);var s=vn(t,"x","depthwiseConv2d"),l=vn(e,"filter","depthwiseConv2d"),u=s,c=!1;3===s.rank&&(c=!0,u=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),E(4===u.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+u.rank+"."})),E(4===l.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+l.rank+"."})),E(u.shape[3]===l.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels ("+u.shape[3]+") must match the inChannels dimension in filter "+l.shape[2]+"."})),null==a&&(a=[1,1]),E(ma(n,a),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"})),null!=o&&E(R(r),(function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."}));var h=sa(u.shape,l.shape,n,a,r,o,!0),d=Bt.runKernelFunc((function(t,e){var n=t.depthwiseConv2D(u,l,h);return e([u,l]),n}),{x:u,filter:l},(function(t,e){E(fa(a),(function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+a+"'"}));var n=e[0],r=e[1];return{x:function(){return Uu(n.shape,t,r,h)},filter:function(){return Wu(n,t,r.shape,h)}}}),"DepthwiseConv2dNative",h,[u,l]);return c?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}}),Uu=Tn({depthwiseConv2dDerInput_:function(t,e,n,r){var i=e,a=!1;3===e.rank&&(a=!0,i=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var o=Bt.runKernelFunc((function(t){return t.depthwiseConv2DDerInput(i,n,r)}),{dy4D:i});return a?o.as3D(o.shape[1],o.shape[2],o.shape[3]):o}}),Wu=Tn({depthwiseConv2dDerFilter_:function(t,e,n,r){var i=t;3===t.rank&&(i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var a=e;return 3===a.rank&&(a=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),Bt.runKernelFunc((function(t){return t.depthwiseConv2DDerFilter(i,a,r)}),{x4D:i,dy4D:a})}}),Hu=Tn({separableConv2d_:function(t,e,n,r,i,a,o){void 0===a&&(a=[1,1]),void 0===o&&(o="NHWC");var s=vn(t,"x","separableConv2d"),l=vn(e,"depthwiseFilter","separableConv2d"),u=vn(n,"pointwiseFilter","separableConv2d"),c=s,h=!1;if(3===s.rank&&(h=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),"NCHW"===o)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");E(4===c.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got rank "+c.rank+"."})),E(4===l.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+l.rank+"."})),E(4===u.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+l.rank+"."})),E(1===u.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+u.shape[0]+"."})),E(1===u.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+u.shape[1]+"."}));var d=l.shape[2],p=l.shape[3];E(u.shape[2]===d*p,(function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+d*p+", but got "+u.shape[2]+"."}));var f=ju(c,l,r,i,o,a),m=Lu(f,u,1,"valid",o);return h?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),qu=Tn({conv2dTranspose_:function(t,e,n,r,i,a){return Ou(n,vn(t,"x","conv2dTranspose"),vn(e,"filter","conv2dTranspose"),r,i,"NHWC",a)}}),Gu=Tn({conv3dTranspose_:function(t,e,n,r,i){return Mu(n,vn(t,"x","conv3dTranspose"),vn(e,"filter","conv3dTranspose"),r,i)}}),$u=Tn({matMul_:function(t,e,n,r){var i;void 0===n&&(n=!1),void 0===r&&(r=!1);var a=vn(t,"a","matMul"),o=vn(e,"b","matMul");i=Ot(a,o),a=i[0],o=i[1];var s=n?a.shape[a.rank-2]:a.shape[a.rank-1],l=r?o.shape[o.rank-1]:o.shape[o.rank-2],u=n?a.shape[a.rank-1]:a.shape[a.rank-2],c=r?o.shape[o.rank-2]:o.shape[o.rank-1],h=a.shape.slice(0,-2),d=o.shape.slice(0,-2),p=T(h),f=T(d);E(a.rank>=2&&o.rank>=2&&a.rank===o.rank,(function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+a.rank+" and "+o.rank+"."})),E(N(h,d),(function(){return"Error in matMul: outer dimensions ("+h+") and ("+d+") of Tensors with shapes "+a.shape+" and "+o.shape+" must match."})),E(s===l,(function(){return"Error in matMul: inner shapes ("+s+") and ("+l+") of Tensors with shapes "+a.shape+" and "+o.shape+" and transposeA="+n+" and transposeB="+r+" must match."}));var m=a.shape.slice(0,-2).concat([u,c]),g=n?a.as3D(p,s,u):a.as3D(p,u,s),y=r?o.as3D(f,c,l):o.as3D(f,l,c);return Bt.runKernelFunc((function(t,e){var i=t.batchMatMul(g,y,n,r);return e([g,y]),i}),{a:g,b:y},(function(t,e){var i=e[0],a=e[1];return n||r?!n&&r?{a:function(){return t.matMul(a,!1,!1)},b:function(){return t.matMul(i,!0,!1)}}:n&&!r?{a:function(){return a.matMul(t,!1,!0)},b:function(){return i.matMul(t,!1,!1)}}:{a:function(){return a.matMul(t,!0,!0)},b:function(){return t.matMul(i,!0,!0)}}:{a:function(){return t.matMul(a,!1,!0)},b:function(){return i.matMul(t,!0,!1)}}}),"BatchMatMul",{transposeA:n,transposeB:r}).reshape(m)}}),Ku=Tn({dot_:function(t,e){var n=vn(t,"t1","dot"),r=vn(e,"t2","dot");E(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."}));var i=1===n.rank?n.size:n.shape[1],a=1===r.rank?r.size:r.shape[0];return E(i===a,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+i+" and "+a+"."})),1===n.rank&&1===r.rank?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():1===n.rank&&2===r.rank?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():2===n.rank&&1===r.rank?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),Xu=Tn({outerProduct_:function(t,e){var n=vn(t,"v1","outerProduct"),r=vn(e,"v2","outerProduct");return E(1===n.rank&&1===r.rank,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."})),n.as2D(-1,1).matMul(r.as2D(1,-1))}}),Yu=Tn({reverse_:function(t,e){var n=vn(t,"x","reverse");if(0===n.rank)return n.clone();var r=z(e,n.shape);return Bt.runKernelFunc((function(t){return t.reverse(n,r)}),{$x:n},(function(t){return{$x:function(){return t.reverse(r)}}})).reshapeAs(n)}}),Zu=Tn({reverse1d_:function(t){var e=vn(t,"x","reverse");return E(1===e.rank,(function(){return"Error in reverse1D: x must be rank 1 but got rank "+e.rank+"."})),Yu(e,0)}}),Qu=Tn({reverse2d_:function(t,e){var n=vn(t,"x","reverse");return E(2===n.rank,(function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."})),Yu(n,e)}}),Ju=Tn({reverse3d_:function(t,e){var n=vn(t,"x","reverse");return E(3===n.rank,(function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."})),Yu(n,e)}}),tc=Tn({reverse4d_:function(t,e){var n=vn(t,"x","reverse");return E(4===n.rank,(function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."})),Yu(n,e)}});function ec(t,e,n,r,i,a){var o=vn(t,"x","maxPool"),s=o,l=!1;3===o.rank&&(l=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),null==r&&(r=[1,1]),E(4===s.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."})),E(ma(n,r),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"})),null!=a&&E(R(i),(function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+i+"."}));var u=aa(s.shape,e,n,r,i,a);if(1===u.filterWidth&&1===u.filterHeight&&N(u.inShape,u.outShape))return o.clone();var c=Bt.runKernelFunc((function(t,e){var n=t.maxPool(s,u);return e([s,n]),n}),{x:s},(function(t,a){var o=a[0],s=a[1];return{x:function(){return function(t,e,n,r,i,a,o,s){var l=vn(t,"dy","maxPoolBackprop"),u=vn(e,"input","maxPoolBackprop"),c=vn(n,"output","maxPoolBackprop");E(u.rank===l.rank,(function(){return"Rank of input ("+u.rank+") does not match rank of dy ("+l.rank+")"})),null==a&&(a=[1,1]),E(ma(i,a),(function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+a+"'"})),E(4===l.rank,(function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+l.rank+"."})),E(4===u.rank,(function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+u.rank+"."}));var h=aa(u.shape,r,i,a,o,void 0);return Bt.runKernelFunc((function(t){return t.maxPoolBackprop(l,u,c,h)}),{$dy:l,$input:u})}(t,o,s,e,n,r,i)}}}),"MaxPool",u,[s]);return l?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}function nc(t,e,n,r,i,a){var o=vn(t,"x","avgPool","float32");null==r&&(r=[1,1]),E(ma(n,r),(function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}));var s=o,l=!1;3===o.rank&&(l=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),E(4===s.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."})),null!=a&&E(R(i),(function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+i+"."}));var u=aa(s.shape,e,n,r,i,a);if(1===u.filterWidth&&1===u.filterHeight&&N(u.inShape,u.outShape))return o.clone();var c=Bt.runKernelFunc((function(t){return t.avgPool(s,u)}),{x:s},(function(t){return{x:function(){return function(t,e,n,r,i,a){var o=vn(t,"dy","avgPoolBackprop"),s=vn(e,"input","avgPoolBackprop");E(s.rank===o.rank,(function(){return"Rank of input ("+s.rank+") does not match rank of dy ("+o.rank+")"})),null==i&&(i=[1,1]),E(ma(r,i),(function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+i+"'"}));var l=s,u=o,c=!1;3===s.rank&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2]),u=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),E(4===u.rank,(function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+u.rank+"."})),E(4===l.rank,(function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+l.rank+"."}));var h=aa(l.shape,n,r,i,a),d=Bt.runKernelFunc((function(t){return t.avgPoolBackprop(u,l,h)}),{dy4D:u,input4D:l});return c?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}(t,s,e,n,r,i)}}}),"AvgPool",u);return c=c.cast(o.dtype),l?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}var rc=Tn({maxPool_:function(t,e,n,r,i){return ec(t,e,n,1,r,i)}}),ic=Tn({avgPool_:function(t,e,n,r,i){return nc(t,e,n,1,r,i)}}),ac=Tn({pool_:function(t,e,n,r,i,a){null==i&&(i=[1,1]),null==a&&(a=1),0===r&&(r="valid");var o=vn(t,"x","maxPool"),s=o,l=!1;3===o.rank&&(l=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),E(ma(a,i),(function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+a+" and dilations '"+i+"'"}));var u,c=aa(s.shape,e,a,i,r),h=[c.dilationHeight,c.dilationWidth];u="same"===r?function(t,e){var n=t.map((function(t,n){return t+(t-1)*(e[n]-1)})).map((function(t){return t-1})),r=n.map((function(t){return Math.floor(t/2)})),i=n.map((function(t,e){return t-r[e]}));return n.map((function(t,e){return[r[e],i[e]]}))}([c.filterHeight,c.filterWidth],h):[[0,0],[0,0]];var d=1===h[0]&&1===h[1],p=function(t,e,n){var r=n.map((function(t){return t[0]})),i=n.map((function(t){return t[1]})),a=t.concat(r,i),o=e.map((function(t,e){return(t-a[e]%t)%t})),s=i.map((function(t,e){return t+o[e]}));return[e.map((function(t,e){return[r[e],s[e]]})),e.map((function(t,e){return[0,o[e]]}))]}([c.inHeight,c.inWidth],h,u),f=p[1],m=d?r:"valid",g=d?s:hr(s,h,p[0]),y=("avg"===n?function(){return nc(g,e,a,1,m)}:function(){return ec(g,e,a,1,m)})(),v=d?y:ar(y,h,f);return l?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}}),oc=Tn({maxPool3d_:function(t,e,n,r,i,a,o){void 0===a&&(a="NDHWC");var s=vn(t,"x","maxPool3d"),l=s,u=!1;4===s.rank&&(u=!0,l=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),null==o&&(o=[1,1,1]),E(5===l.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank "+l.rank+"."})),E("NDHWC"===a,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+a})),E(ma(n,o),(function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"})),null!=i&&E(R(r),(function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."}));var c=oa(l.shape,e,n,o,r,i,a),h=Bt.runKernelFunc((function(t,e){var n=t.maxPool3d(l,c);return e([l,n]),n}),{x:l},(function(t,a){var s=a[0],l=a[1];return{x:function(){return function(t,e,n,r,i,a,o,s){var l=vn(t,"dy","maxPool3dBackprop"),u=vn(e,"input","maxPool3dBackprop"),c=vn(n,"output","maxPool3dBackprop"),h=l,d=u,p=c,f=!1;4===u.rank&&(f=!0,h=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]),d=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]),p=c.as5D(1,c.shape[0],c.shape[1],c.shape[2],c.shape[3])),E(5===h.rank,(function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+h.rank+"."})),E(5===d.rank,(function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+d.rank+"."})),E(5===p.rank,(function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+p.rank+"."})),null==a&&(a=[1,1,1]),E(ma(i,a),(function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+a+"'"})),null!=s&&E(R(o),(function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+o+"."}));var m=oa(d.shape,r,i,a,o,s),g=Bt.runKernelFunc((function(t){return t.maxPool3dBackprop(h,d,p,m)}),{dy5D:h,input5D:d});return f?g.as4D(g.shape[1],g.shape[2],g.shape[3],g.shape[4]):g}(t,s,l,e,n,o,r,i)}}}));return u?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}}),sc=Tn({avgPool3d_:function(t,e,n,r,i,a,o){void 0===a&&(a="NDHWC");var s=vn(t,"x","avgPool3d","float32"),l=s,u=!1;4===s.rank&&(u=!0,l=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),null==o&&(o=[1,1,1]),E(5===l.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank "+l.rank+"."})),E("NDHWC"===a,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+a})),E(ma(n,o),(function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"})),null!=i&&E(R(r),(function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."}));var c=oa(l.shape,e,n,o,r,i,a),h=Bt.runKernelFunc((function(t){return t.avgPool3d(l,c)}),{x:l},(function(t){return{x:function(){return function(t,e,n,r,i,a,o){var s=vn(t,"dy","avgPool3dBackprop"),l=vn(e,"input","avgPool3dBackprop"),u=s,c=l,h=!1;4===l.rank&&(h=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]),c=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3])),E(5===u.rank,(function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+u.rank+"."})),E(5===c.rank,(function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+c.rank+"."})),null==i&&(i=[1,1,1]),E(ma(r,i),(function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+i+"'"})),null!=o&&E(R(a),(function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."}));var d=oa(c.shape,n,r,i,a,o),p=Bt.runKernelFunc((function(t){return t.avgPool3dBackprop(u,c,d)}),{dy5D:u,input5D:c});return h?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}(t,l,e,n,o,r,i)}}}));return h=h.cast(l.dtype),u?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}}),lc=Tn({maxPoolWithArgmax_:function(t,e,n,r,i){void 0===i&&(i=!1);var a=vn(t,"x","maxPoolWithArgmax"),o=Bt.runKernel("MaxPoolWithArgmax",{x:a},{filterSize:e,strides:n,pad:r,includeBatchInIndex:i});return{result:o[0],indexes:o[1]}}}),uc=Tn({slice_:function(t,e,n){var r,i,a=vn(t,"x","slice");if(0===a.rank)throw new Error("Slicing scalar is not possible");(r="number"==typeof e?[e].concat(new Array(a.rank-1).fill(0)):e.length<a.rank?e.concat(new Array(a.rank-e.length).fill(0)):e.slice()).forEach((function(t){E(-1!==t,(function(){return"slice() does not support negative begin indexing."}))})),i=(i=null==n?new Array(a.rank).fill(-1):"number"==typeof n?[n].concat(new Array(a.rank-1).fill(-1)):n.length<a.rank?n.concat(new Array(a.rank-n.length).fill(-1)):n).map((function(t,e){return t>=0?t:(E(-1===t,(function(){return"Negative size values should be exactly -1 but got "+t+" for the slice() size at index "+e+"."})),a.shape[e]-r[e])})),zi(a,r,i);var o=a.shape;return Bt.runKernelFunc((function(t){return t.slice(a,r,i)}),{x:a},(function(t){for(var e=[],n=0;n<t.rank;n++)e.push([r[n],o[n]-r[n]-i[n]]);return{x:function(){return Xl(t,e)}}}),"Slice",{begin:r,size:i})}}),cc=Tn({slice1d_:function(t,e,n){var r=vn(t,"x","slice1d");return E(1===r.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"})),uc(r,[e],[n])}}),hc=Tn({slice2d_:function(t,e,n){var r=vn(t,"x","slice2d");return E(2===r.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"})),uc(r,e,n)}}),dc=Tn({slice3d_:function(t,e,n){var r=vn(t,"x","slice3d");return E(3===r.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"})),uc(r,e,n)}}),pc=Tn({slice4d_:function(t,e,n){var r=vn(t,"x","slice4d");return E(4===r.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"})),uc(r,e,n)}});function fc(t,e,n,r,i){return e.rank<n.rank&&(e=e.reshape(Cn(e.shape,r))),t.rank<n.rank&&(t=t.reshape(Cn(t.shape,r))),{x:function(){var r=t.mul(n.equal(e).cast(t.dtype));return null==i?r:r.transpose(i)}}}var mc=Tn({all_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=vn(t,"x","all","bool"),i=z(e,r.shape),a=i,o=kn(a,r.rank);null!=o&&(r=r.transpose(o),a=In(a.length,r.rank));var s=Bt.runKernelFunc((function(t){return t.all(r,a)}),{$x:r});if(n){var l=Cn(s.shape,i);return s.reshape(l)}return s}}),gc=Tn({any_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=vn(t,"x","any","bool"),i=z(e,r.shape),a=i,o=kn(a,r.rank);null!=o&&(r=r.transpose(o),a=In(a.length,r.rank));var s=Bt.runKernelFunc((function(t){return t.any(r,a)}),{$x:r});if(n){var l=Cn(s.shape,i);return s.reshape(l)}return s}}),yc=Tn({argMax_:function(t,e){void 0===e&&(e=0);var n=vn(t,"x","argMax");null==e&&(e=0);var r=z(e,n.shape),i=kn(r,n.rank);return null!=i&&(n=n.transpose(i),r=In(r.length,n.rank)),Bt.runKernelFunc((function(t,e){var i=t.argMax(n,r[0]);return e([n]),i}),{x:n},(function(t,e){var n=e[0];return{x:function(){return Yn(n)}}}),"ArgMax",{axis:r[0]},[n])}}),vc=Tn({argMin_:function(t,e){void 0===e&&(e=0);var n=vn(t,"x","argMin");null==e&&(e=0);var r=z(e,n.shape),i=kn(r,n.rank);return null!=i&&(n=n.transpose(i),r=In(r.length,n.rank)),Bt.runKernelFunc((function(t,e){var i=t.argMin(n,r[0]);return e([n]),i}),{$x:n},(function(t,e){var n=e[0];return{$x:function(){return Yn(n)}}}))}}),bc=Tn({logSumExp_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=vn(t,"x","logSumExp"),i=z(e,r.shape),a=r.max(i,!0),o=r.sub(a).exp().sum(i).log(),s=a.reshape(o.shape).add(o);if(n){var l=Cn(s.shape,i);return s.reshape(l)}return s}}),wc=Tn({max_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=vn(t,"x","max"),i=r,a=z(e,r.shape),o=a,s=kn(o,r.rank);null!=s&&(r=r.transpose(s),o=In(o.length,r.rank));var l=Bt.runKernelFunc((function(t,e){var n=t.max(r,o);return e([i,n]),n}),{x:r},(function(t,e){return fc(t,e[1],e[0],a,s)}),"Max",{axes:o},[r],[!0]);if(n){var u=Cn(l.shape,a);l=l.reshape(u)}return l}}),_c=Tn({mean_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=vn(t,"x","mean"),i=z(e,r.shape),a=T(xn(r.shape,i)[1]);return Zi((function(t){var r=Pn(a);return{value:(r.dtype===t.dtype?t:t.cast(r.dtype)).div(r).sum(e,n),gradFunc:function(e){var n=t.shape.slice();return i.forEach((function(t){n[t]=1})),e.reshape(n).mul(Hn(t.shape,"float32")).div(a)}}}))(r)}}),xc=Tn({min_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=vn(t,"x","min"),i=r,a=z(e,r.shape),o=a,s=kn(o,r.rank);null!=s&&(r=r.transpose(s),o=In(o.length,r.rank));var l=Bt.runKernelFunc((function(t,e){var n=t.min(r,o);return e([i,n]),n}),{x:r},(function(t,e){return fc(t,e[1],e[0],a,s)}),"Min",{axes:o},[r],[!0]);if(n){var u=Cn(l.shape,a);l=l.reshape(u)}return l}}),Cc=Tn({moments_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=z(e,(t=vn(t,"x","moments")).shape),i=t.mean(r,n),a=i.shape;n||(a=Cn(i.shape,r));var o=t.toFloat().sub(i.reshape(a)).square();return{mean:i,variance:o.mean(r,n)}}}),Sc=Tn({sum_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=vn(t,"x","sum");"bool"===r.dtype&&(r=r.toInt());var i=z(e,r.shape);return Zi((function(t){var e=kn(i,t.rank),r=i,a=t;null!=e&&(a=t.transpose(e),r=In(r.length,t.rank));var o=function(e){var n=t.shape.slice();return i.forEach((function(t){n[t]=1})),e.reshape(n).mul(Hn(t.shape,"float32"))},s=Bt.runKernelFunc((function(t){return t.sum(a,r)}),{x:a},(function(t){return{x:function(){return o(t)}}}),"Sum",{axes:r});if(n){var l=Cn(s.shape,i);s=s.reshape(l)}return{value:s,gradFunc:o}}))(r)}}),kc=Tn({prod_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=vn(t,"x","prod");"bool"===r.dtype&&(r=r.toInt());var i=z(e,r.shape),a=kn(i,r.rank),o=i,s=r;null!=a&&(s=r.transpose(a),o=In(o.length,r.rank));var l=Bt.runKernelFunc((function(t){return t.prod(s,o)}),{permutedX:s});if(n){var u=Cn(l.shape,i);l=l.reshape(u)}return l}}),Ec=Tn({elu_:function(t){var e=vn(t,"x","elu");return Bt.runKernelFunc((function(t,n){var r=t.elu(e);return n([r]),r}),{$x:e},(function(t,e){var n=e[0];return{$x:function(){return Bt.runKernelFunc((function(e){return e.eluDer(t,n)}),{dy:t,y:n})}}}))}}),Ic=Tn({leakyRelu_:function(t,e){void 0===e&&(e=.2);var n=vn(t,"x","leakyRelu");return gi(Pn(e).mul(n),n)}}),Ac=Tn({prelu_:function(t,e){var n=vn(t,"x","prelu"),r=vn(e,"alpha","prelu");return Bt.runKernelFunc((function(t,e){var i=t.prelu(n,r);return e([n,r]),i}),{x:n,alpha:r},(function(t,e){var n=e[0],r=e[1],i=n.greater(0);return{x:function(){return Ul(i,t,t.mul(r))},alpha:function(){var e=Ul(i,Yn(t),t.mul(n)),a=Tr(r.shape,t.shape);return a.length>0&&(e=e.sum(a)),e.reshape(r.shape)}}}),"Prelu")}}),Dc=Tn({relu_:function(t){var e=vn(t,"x","relu");return"bool"===e.dtype?e.toInt():Bt.runKernelFunc((function(t,n){var r=t.relu(e);return n([e]),r}),{x:e},(function(t,e){var n=e[0];return{x:function(){return t.mulStrict(n.step().toFloat())}}}),"Relu")}}),Tc=Tn({relu6_:function(t){var e=vn(t,"x","relu6");return"bool"===e.dtype?e.toInt():Bt.runKernelFunc((function(t,n){var r=t.relu6(e);return n([e]),r}),{x:e},(function(t,e){var n=e[0],r=n.lessEqual(6).mul(n.step());return{x:function(){return t.mulStrict(r.toFloat())}}}),"Relu6")}}),Nc=Tn({selu_:function(t){var e=vn(t,"x","selu");return Bt.runKernelFunc((function(t,n){var r=t.selu(e);return n([e]),r}),{$x:e},(function(t,e){var n=e[0];return{$x:function(){var e=n.greater(Pn(0)),r=Pn(1.7580993408473768),i=Pn(1.0507009873554805),a=t.mul(i),o=t.mul(r).mul(n.toFloat().exp());return Ul(e,a,o)}}}))}}),Rc=Tn({localResponseNormalization_:function(t,e,n,r,i){void 0===e&&(e=5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===i&&(i=.5);var a=vn(t,"x","localResponseNormalization");E(4===a.rank||3===a.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank "+a.rank+"."})),E(R(e),(function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+e+"."}));var o=a,s=!1;3===a.rank&&(s=!0,o=a.as4D(1,a.shape[0],a.shape[1],a.shape[2]));var l=Bt.runKernelFunc((function(t,a){var s=t.localResponseNormalization4D(o,e,n,r,i);return a([o,s]),s}),{x4D:o},(function(t,a){var o=a[0],s=a[1];return{x4D:function(){return Bt.runKernelFunc((function(a){return a.LRNGrad(t,o,s,e,n,r,i)}),{})}}}));return s?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}}),Oc=Tn({norm_:function(t,e,n,r){void 0===e&&(e="euclidean"),void 0===n&&(n=null),void 0===r&&(r=!1);var i=function t(e,n,r){if(void 0===r&&(r=null),0===e.rank)return e.abs();if(1!==e.rank&&null===r)return t(e.reshape([-1]),n,r);if(1===e.rank||"number"==typeof r||Array.isArray(r)&&1===r.length){if(1===n)return e.abs().sum(r);if(n===1/0)return e.abs().max(r);if(n===-1/0)return e.abs().min(r);if("euclidean"===n||2===n)return e.abs().pow(Pn(2,"int32")).sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}if(Array.isArray(r)&&2===r.length){if(1===n)return e.abs().sum(r[0]).max(r[1]-1);if(n===1/0)return e.abs().sum(r[1]).max(r[0]);if(n===-1/0)return e.abs().sum(r[1]).min(r[0]);if("fro"===n||"euclidean"===n)return e.square().sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}throw new Error("Error in norm: invalid axis: "+r)}(t=vn(t,"x","norm"),e,n),a=i.shape;if(r){var o=z(n,t.shape);a=Cn(i.shape,o)}return i.reshape(a)}}),Fc=Tn({basicLSTMCell_:function(t,e,n,r,i,a){var o=vn(t,"forgetBias","basicLSTMCell"),s=vn(e,"lstmKernel","basicLSTMCell"),l=vn(n,"lstmBias","basicLSTMCell"),u=vn(r,"data","basicLSTMCell"),c=vn(i,"c","basicLSTMCell"),h=vn(a,"h","basicLSTMCell"),d=u.concat(h,1).matMul(s).add(l),p=d.shape[1]/4,f=[d.shape[0],p],m=d.slice([0,0],f),g=d.slice([0,p],f),y=d.slice([0,2*p],f),v=d.slice([0,3*p],f),b=m.sigmoid().mulStrict(g.tanh()).addStrict(c.mulStrict(o.add(y).sigmoid())),w=b.tanh().mulStrict(v.sigmoid());return[b,w]}}),Mc=Tn({multiRNNCell_:function(t,e,n,r){for(var i=vn(e,"data","multiRNNCell"),a=bn(n,"c","multiRNNCell"),o=bn(r,"h","multiRNNCell"),s=i,l=[],u=0;u<t.length;u++){var c=t[u](s,a[u],o[u]);l.push(c[0]),l.push(c[1]),s=c[1]}var h=[],d=[];for(u=0;u<l.length;u+=2)h.push(l[u]),d.push(l[u+1]);return[h,d]}}),Pc=Tn({movingAverage_:function(t,e,n,r,i){void 0===i&&(i=!0);var a=vn(t,"v","movingAverage"),o=vn(e,"x","movingAverage"),s=vn(n,"decay","movingAverage");Ft(a,o),E(N(a.shape,o.shape),(function(){return"Shape mismatch in v and x"}));var l=Pn(1),u=l.sub(s),c=o.sub(a).mul(u);if(i){E(null!=r,(function(){return"When using zeroDebias: true, step is required."}));var h=vn(r,"step","movingAverage");c=c.div(l.sub(Si(s,h)))}return a.add(c)}}),Lc=Tn({stridedSlice_:function(t,e,n,r,i,a,o,s,l){if(void 0===i&&(i=0),void 0===a&&(a=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===l&&(l=0),null==r&&(r=new Array(e.length)),0!==o)throw new Error("ellipsis mask is not yet supported");var u=vn(t,"x","stridedSlice"),c=Vi(s),h=u.shape.slice();c.forEach((function(t){e[t]=0,n[t]=1,h.splice(t,0,1)})),u=u.reshape(h);for(var d=0;d<u.rank;d++)e[d]=ji(i,e,r,u.shape,d),n[d]=Ui(a,n,r,u.shape,d),r[d]=r[d]||1;var p=Vi(l);p.forEach((function(t){n[t]=e[t]+1,r[t]=1}));var f=Bi(e,n,r),m=f.filter((function(t,e){return-1===p.indexOf(e)}));return r.every((function(t){return 1===t}))?uc(u,e,f).reshape(m):Bt.runKernelFunc((function(t){return t.stridedSlice(u,e,n,r)}),{$x:u}).reshape(m)}}),zc=Tn({topk_:function(t,e,n){void 0===e&&(e=1),void 0===n&&(n=!0);var r=vn(t,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var i=r.shape[r.shape.length-1];if(e>i)throw new Error("'k' passed to topk() must be <= the last dimension ("+i+") but got "+e);var a=Bt.runKernelFunc((function(t){return t.topk(r,e,n)}),{$x:r});return{values:a[0],indices:a[1]}}}),Vc=Tn({scatterND_:function(t,e,n){var r=vn(t,"indices","scatterND","int32"),i=vn(e,"updates","scatterND");return Mi(i,r,n),Bt.runKernelFunc((function(t){return t.scatterND(r,i,n)}),{indices:r,updates:i},null,"ScatterNd",{shape:n})}}),Bc=Tn({fft_:function(t){E("complex64"===t.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+t.dtype+"."}));var e=t.shape[t.shape.length-1],n=t.as2D(t.size/e,e);return Bt.runKernelFunc((function(t){return t.fft(n)}),{input:t}).reshape(t.shape)}}),jc=Tn({ifft_:function(t){E("complex64"===t.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+t.dtype+"."}));var e=t.shape[t.shape.length-1],n=t.as2D(t.size/e,e);return Bt.runKernelFunc((function(t){return t.ifft(n)}),{input:t}).reshape(t.shape)}}),Uc=Tn({rfft_:function(t,e){E("float32"===t.dtype,(function(){return"The dtype for rfft() must be real value but got "+t.dtype}));var n,r=t.shape[t.shape.length-1],i=t.size/r;if(null!=e&&e<r){var a=t.shape.map((function(t){return 0})),o=t.shape.map((function(t){return t}));o[t.shape.length-1]=e,n=t.slice(a,o),r=e}else if(null!=e&&e>r){var s=t.shape.map((function(t){return t}));s[t.shape.length-1]=e-r,n=t.concat(qn(s),t.shape.length-1),r=e}else n=t;var l=n.zerosLike(),u=Nn(n,l).as2D(i,r),c=Bc(u),h=Math.floor(r/2)+1,d=Rn(c),p=On(c),f=d.split([h,r-h],d.shape.length-1),m=p.split([h,r-h],p.shape.length-1),g=n.shape.slice();return g[n.shape.length-1]=h,Nn(f[0],m[0]).reshape(g)}}),Wc=Tn({irfft_:function(t){var e=t.shape[t.shape.length-1],n=t.size/e;if(e<=2){var r=t.as2D(n,e),i=jc(r);return Rn(i)}var a=[n,2*(e-1)],o=Rn(t).as2D(n,e),s=On(t).as2D(n,e),l=o.slice([0,1],[n,e-2]).reverse(1),u=s.slice([0,1],[n,e-2]).reverse(1).mul(Pn(-1)),c=o.concat(l,1),h=s.concat(u,1);return r=Nn(c,h).as2D(a[0],a[1]),i=jc(r),Rn(i)}}),Hc=Object.freeze({fft:Bc,ifft:jc,rfft:Uc,irfft:Wc}),qc=Tn({sparseToDense_:function(t,e,n,r){void 0===r&&(r=0);var i=vn(t,"sparseIndices","sparseToDense","int32"),a=vn(e,"sparseValues","sparseToDense"),o=vn(r,"defaultValue","sparseToDense",a.dtype);return function(t,e,n,r){if("int32"!==t.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+t.dtype+".");if(t.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+t.shape+".");var i=t.rank>0?t.shape[0]:1,a=t.rank>1?t.shape[1]:1;if(n.length!==a)throw new Error("outputShape has incorrect number of elements:, "+n.length+", should be: "+a+".");if(0!==e.rank&&(1!==e.rank||e.size!==i))throw new Error("sparseValues has incorrect shape "+e.shape+", should be [] or ["+i+"]");if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(i,a,n,o),Bt.runKernelFunc((function(t){return t.sparseToDense(i,a,n,o)}),{$sparseIndices:i,$sparseValues:a,$defaultValue:o})}}),Gc=Tn({gatherND_:function(t,e){var n=vn(e,"indices","gatherND","int32"),r=vn(t,"x","gatherND");return Bt.runKernelFunc((function(t){return t.gatherND(r,n)}),{x:r,indices:n},null,"GatherNd")}}),$c=Tn({diag_:function(t){var e=vn(t,"x","diag").flatten(),n=t.shape.concat(t.shape);return Bt.runKernelFunc((function(t){return t.diag(e)}),{$x:e}).reshape(n)}}),Kc=Tn({dropout_:function(t,e,n,r){var i=vn(t,"x","dropout");if(E("float32"===i.dtype,(function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+i.dtype+" tensor instead."})),E(e>=0&&e<1,(function(){return"rate must be a float in the range [0, 1), but got "+e+"."})),0===e)return t instanceof xt?i.clone():i;var a=function(t,e){if(null==e)return t.shape.slice();if(N(t.shape,e))return e;if(t.shape.length===e.length){for(var n=[],r=0;r<t.shape.length;r++)n.push(null==e[r]&&null!=t.shape[r]?t.shape[r]:e[r]);return n}return e}(i,n),o=1-e,s=du(a,0,1,"float32",r).add(o).floor().div(o);return i.mul(s)}});function Xc(t,e,n){for(var r=1-t%2,i=new Float32Array(t),a=0;a<t;++a){var o=2*Math.PI*a/(t+r-1);i[a]=e-n*Math.cos(o)}return Ln(i,"float32")}var Yc,Zc=Tn({hannWindow_:function(t){return Xc(t,.5,.5)}}),Qc=Tn({hammingWindow_:function(t){return Xc(t,.54,.46)}}),Jc=Tn({frame_:function(t,e,n,r,i){void 0===r&&(r=!1),void 0===i&&(i=0);for(var a=0,o=[];a+e<=t.size;)o.push(uc(t,a,e)),a+=n;if(r)for(;a<t.size;){var s=a+e-t.size,l=Zn([uc(t,a,e-s),Gn([s],i)]);o.push(l),a+=n}return 0===o.length?zn([],[0,e]):Zn(o).as2D(o.length,e)}}),th=Tn({stft_:function(t,e,n,r,i){void 0===i&&(i=Zc),null==r&&(r=Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2)))));for(var a=Jc(t,e,n),o=xi(a,i(e)),s=[],l=0;l<a.shape[0];l++)s.push(Uc(o.slice([l,0],[1,e]),r));return Zn(s)}}),eh=Object.freeze({hannWindow:Zc,hammingWindow:Qc,frame:Jc,stft:th}),nh=function(t,e,n){return void 0===n&&(n=1),o(this,void 0,void 0,(function(){var r,i,a,o,l,u,c,h,d,p,f,m,g,y;return s(this,(function(s){switch(s.label){case 0:return r=vn(t,"predictions","inTopK"),i=vn(e,"targets","inTopK"),E(r.rank>1,(function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank})),E(r.rank-1===i.rank,(function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+i.rank})),I(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),a=r.shape[r.shape.length-1],E(n>0&&n<=a,(function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+a+"), but got "+n})),[4,r.data()];case 1:return o=s.sent(),[4,i.data()];case 2:for(l=s.sent(),h=(u=[o.length/a,a])[1],d=B("bool",c=u[0]),p=0;p<c;p++){for(m=o.subarray(f=p*h,f+h),g=[],y=0;y<m.length;y++)g.push({value:m[y],index:y});for(g.sort((function(t,e){return e.value-t.value})),d[p]=0,y=0;y<n;y++)if(g[y].index===l[p]){d[p]=1;break}}return t!==r&&r.dispose(),e!==i&&i.dispose(),[2,Fn(d,i.shape,"bool")]}}))}))};!function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(Yc||(Yc={}));var rh=Tn({absoluteDifference_:function(t,e,n,r){void 0===r&&(r=Yc.SUM_BY_NONZERO_WEIGHTS);var i=vn(t,"labels","absoluteDifference"),a=vn(e,"predictions","absoluteDifference"),o=null;null!=n&&(o=vn(n,"weights","absoluteDifference")),I(i.shape,a.shape,"Error in absoluteDifference: ");var s=i.sub(a).abs();return ih(s,o,r)}}),ih=Tn({computeWeightedLoss_:function(t,e,n){void 0===n&&(n=Yc.SUM_BY_NONZERO_WEIGHTS);var r=vn(t,"losses","computeWeightedLoss"),i=null;null!=e&&(i=vn(e,"weights","computeWeightedLoss"));var a=null==i?r:r.mul(i);if(n===Yc.NONE)return a;if(n===Yc.SUM)return a.sum();if(n===Yc.MEAN){if(null==i)return a.mean();var o=r.size/i.size,s=a.sum().div(i.sum());return o>1?s.div(Pn(o)):s}if(n===Yc.SUM_BY_NONZERO_WEIGHTS){if(null==i)return a.sum().div(Pn(r.size));var l=i.mul(Hn(r.shape)).notEqual(Pn(0)).sum().toFloat();return a.sum().div(l)}throw Error("Unknown reduction: "+n)}}),ah=Tn({cosineDistance_:function(t,e,n,r,i){void 0===i&&(i=Yc.SUM_BY_NONZERO_WEIGHTS);var a=vn(t,"labels","cosineDistance"),o=vn(e,"predictions","cosineDistance"),s=null;null!=r&&(s=vn(r,"weights","cosineDistance")),I(a.shape,o.shape,"Error in cosineDistance: ");var l=Pn(1).sub(a.mul(o).sum(n,!0));return ih(l,s,i)}}),oh=Tn({hingeLoss_:function(t,e,n,r){void 0===r&&(r=Yc.SUM_BY_NONZERO_WEIGHTS);var i=vn(t,"labels","hingeLoss"),a=vn(e,"predictions","hingeLoss"),o=null;null!=n&&(o=vn(n,"weights","hingeLoss")),I(i.shape,a.shape,"Error in hingeLoss: ");var s=Pn(1);i=Pn(2).mul(i).sub(s);var l=s.sub(i.mul(a)).relu();return ih(l,o,r)}}),sh=Tn({huberLoss_:function(t,e,n,r,i){void 0===r&&(r=1),void 0===i&&(i=Yc.SUM_BY_NONZERO_WEIGHTS);var a=vn(t,"labels","huberLoss"),o=vn(e,"predictions","huberLoss"),s=null;null!=n&&(s=vn(n,"weights","huberLoss")),I(a.shape,o.shape,"Error in huberLoss: ");var l=Pn(r),u=o.sub(a).abs(),c=vi(u,l),h=u.sub(c),d=Pn(.5).mul(c.square()).add(l.mul(h));return ih(d,s,i)}}),lh=Tn({logLoss_:function(t,e,n,r,i){void 0===r&&(r=1e-7),void 0===i&&(i=Yc.SUM_BY_NONZERO_WEIGHTS);var a=vn(t,"labels","logLoss"),o=vn(e,"predictions","logLoss"),s=null;null!=n&&(s=vn(n,"weights","logLoss")),I(a.shape,o.shape,"Error in logLoss: ");var l=Pn(1),u=Pn(r),c=a.mul(o.add(u).log()).neg().sub(l.sub(a).mul(l.sub(o).add(u).log()));return ih(c,s,i)}}),uh=Tn({meanSquaredError_:function(t,e,n,r){void 0===r&&(r=Yc.SUM_BY_NONZERO_WEIGHTS);var i=vn(t,"labels","meanSquaredError"),a=vn(e,"predictions","meanSquaredError"),o=null;null!=n&&(o=vn(n,"weights","meanSquaredError")),I(i.shape,a.shape,"Error in meanSquaredError: ");var s=i.squaredDifference(a);return ih(s,o,r)}}),ch=Tn({sigmoidCrossEntropy_:function(t,e,n,r,i){void 0===r&&(r=0),void 0===i&&(i=Yc.SUM_BY_NONZERO_WEIGHTS);var a=vn(t,"multiClassLabels","sigmoidCrossEntropy"),o=vn(e,"logits","sigmoidCrossEntropy"),s=null;if(null!=n&&(s=vn(n,"weights","sigmoidCrossEntropy")),I(a.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var l=Pn(r),u=Pn(1),c=Pn(.5);a=a.mul(u.sub(l)).add(c.mul(l))}var h=function(t,e){var n=vn(t,"labels","sigmoidCrossEntropyWithLogits"),r=vn(e,"logits","sigmoidCrossEntropyWithLogits");I(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var i=r.relu(),a=r.mul(n),o=r.abs().neg().exp().log1p();return i.sub(a).add(o)}(a,o);return ih(h,s,i)}}),hh=Tn({softmaxCrossEntropy_:function(t,e,n,r,i){void 0===r&&(r=0),void 0===i&&(i=Yc.SUM_BY_NONZERO_WEIGHTS);var a=vn(t,"onehotLabels","softmaxCrossEntropy"),o=vn(e,"logits","softmaxCrossEntropy"),s=null;if(null!=n&&(s=vn(n,"weights","softmaxCrossEntropy")),I(a.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var l=Pn(r),u=Pn(1),c=Pn(a.shape[1]);a=a.mul(u.sub(l)).add(l.div(c))}var h=function(t,e,n){if(void 0===n&&(n=-1),-1===n&&(n=e.rank-1),n!==e.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+e.rank+" and dim was "+n);return Zi((function(t,e,r){var i=e.logSumExp([n],!0),a=e.toFloat().sub(i);return r([t,a]),{value:a.mul(t).neg().sum([n]),gradFunc:function(t,e){var r=e[0],i=e[1],a=Cn(t.shape,[n]);return[t.reshape(a).mul(r.toFloat().sub(i.exp())),t.reshape(a).mul(i.exp().sub(r.toFloat()))]}}}))(t,e)}(a,o);return ih(h,s,i)}}),dh=Object.freeze({get Reduction(){return Yc},absoluteDifference:rh,computeWeightedLoss:ih,cosineDistance:ah,hingeLoss:oh,huberLoss:sh,logLoss:lh,meanSquaredError:uh,sigmoidCrossEntropy:ch,softmaxCrossEntropy:hh});function ph(t,e){return void 0===e&&(e=!1),Bt.tidy((function(){if(2!==t.shape.length)throw new Error("qr2d() requires a 2D Tensor, but got a "+t.shape.length+"D Tensor.");for(var n=t.shape[0],r=t.shape[1],i=Gl(n),a=t.clone(),o=zn([[1]],[1,1]),s=o.clone(),l=n>=r?r:n,u=function(t){var e,l=a,u=s,c=i;e=Bt.tidy((function(){var e=a.slice([t,t],[n-t,1]),l=e.norm(),u=a.slice([t,t],[1,1]),c=zn([[-1]]).where(u.greater(0),zn([[1]])),h=u.sub(c.mul(l)),d=e.div(h);s=1===d.shape[0]?o.clone():o.concat(d.slice([1,0],[d.shape[0]-1,d.shape[1]]),0);var p=c.matMul(h).div(l).neg(),f=a.slice([t,0],[n-t,r]),m=p.mul(s),g=s.transpose();if(0===t)a=f.sub(m.matMul(g.matMul(f)));else{var y=f.sub(m.matMul(g.matMul(f)));a=a.slice([0,0],[t,r]).concat(y,0)}var v=m.transpose(),b=i.slice([0,t],[n,i.shape[1]-t]);if(0===t)i=b.sub(b.matMul(s).matMul(v));else{var w=b.sub(b.matMul(s).matMul(v));i=i.slice([0,0],[n,t]).concat(w,1)}return[s,a,i]})),s=e[0],a=e[1],i=e[2],nn([l,u,c])},c=0;c<l;++c)u(c);return!e&&n>r&&(i=i.slice([0,0],[n,r]),a=a.slice([0,0],[r,r])),[i,a]}))}var fh=Tn({bandPart_:function(t,e,n){if(e%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+e+".");if(n%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+n+".");var r=vn(t,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var i=r.shape,a=r.shape.slice(-2),o=a[0],s=a[1];if(!(e<=o))throw new Error("bandPart(): numLower ("+e+") must not be greater than the number of rows ("+o+").");if(!(n<=s))throw new Error("bandPart(): numUpper ("+n+") must not be greater than the number of columns ("+s+").");e<0&&(e=o),n<0&&(n=s);var l=Kn(0,o,1,"int32").reshape([-1,1]),u=Kn(0,s,1,"int32"),c=Ii(l,u),h=zl(c.lessEqual(Pn(+e,"int32")),c.greaterEqual(Pn(-n,"int32"))),d=qn([o,s],r.dtype);return pr(fr(r.reshape([-1,o,s])).map((function(t){return Ul(h,t,d)}))).reshape(i)}}),mh=Tn({gramSchmidt_:function(t){var e;if(Array.isArray(t)){e=!1,E(null!=t&&t.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=t[0].shape[0],r=function(e){E(t[e].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+t[e].shape[0]+" vs. "+n+")"}))},i=1;i<t.length;++i)r(i)}else e=!0,t=nr(t,t.shape[0],0).map((function(t){return dr(t,[0])}));E(t.length<=t[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors ("+t.length+") exceeds number of dimensions ("+t[0].shape[0]+")."}));var a=[],o=t,s=function(t){a.push(Bt.tidy((function(){var e=o[t];if(t>0)for(var n=0;n<t;++n){var r=Sc(a[n].mulStrict(e)).mul(a[n]);e=e.sub(r)}return e.div(Oc(e,"euclidean"))})))};for(i=0;i<t.length;++i)s(i);return e?pr(a,0):a}}),gh=Tn({qr_:function(t,e){if(void 0===e&&(e=!1),t.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+t.rank);if(2===t.rank)return ph(t,e);var n=t.shape.slice(0,t.shape.length-2).reduce((function(t,e){return t*e})),r=fr(t.reshape([n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),i=[],a=[];return r.forEach((function(t){var n=ph(t,e),r=n[1];i.push(n[0]),a.push(r)})),[pr(i,0).reshape(t.shape),pr(a,0).reshape(t.shape)]}}),yh=Object.freeze({bandPart:fh,gramSchmidt:mh,qr:gh});function vh(t,e,n,r,i,a){null==r&&(r=.5),null==i&&(i=Number.NEGATIVE_INFINITY),null==a&&(a=0);var o=t.shape[0];return n=Math.min(n,o),E(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"})),E(2===t.rank,(function(){return"boxes must be a 2D tensor, but was of rank '"+t.rank+"'"})),E(4===t.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was "+t.shape[1]})),E(1===e.rank,(function(){return"scores must be a 1D tensor"})),E(e.shape[0]===o,(function(){return"scores has incompatible shape with boxes. Expected "+o+", but was "+e.shape[0]})),E(0<=a&&a<=1,(function(){return"softNmsSigma must be in [0, 1], but was '"+a+"'"})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:a}}var bh=Tn({resizeBilinear_:function(t,e,n){void 0===n&&(n=!1);var r=vn(t,"images","resizeBilinear");E(3===r.rank||4===r.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."})),E(2===e.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+e+"."}));var i=r,a=!1;3===r.rank&&(a=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=e[0],s=e[1],l=Bt.runKernelFunc((function(t,e){return e([i]),t.resizeBilinear(i,o,s,n)}),{x:i},(function(t,e){return{x:function(){return Bt.runKernelFunc((function(r){return r.resizeBilinearBackprop(t,e[0],n)}),{})}}}),"ResizeBilinear",{alignCorners:n,newHeight:o,newWidth:s});return a?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}}),wh=Tn({resizeNearestNeighbor_:function(t,e,n){void 0===n&&(n=!1);var r=vn(t,"images","resizeNearestNeighbor");E(3===r.rank||4===r.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."})),E(2===e.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+e+"."})),E("float32"===r.dtype||"int32"===r.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"}));var i=r,a=!1;3===r.rank&&(a=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=e[0],s=e[1],l=Bt.runKernelFunc((function(t,e){return e([i]),t.resizeNearestNeighbor(i,o,s,n)}),{batchImages:i},(function(t,e){return{batchImages:function(){return Bt.runKernelFunc((function(r){return r.resizeNearestNeighborBackprop(t,e[0],n)}),{})}}}));return a?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}}),_h=Tn({nonMaxSuppression_:function(t,e,n,r,i){void 0===r&&(r=.5),void 0===i&&(i=Number.NEGATIVE_INFINITY);var a=vn(t,"boxes","nonMaxSuppression"),o=vn(e,"scores","nonMaxSuppression"),s=vh(a,o,n,r,i);return Bt.runKernelFunc((function(t){return t.nonMaxSuppression(a,o,n,r,i)}),{boxes:a,scores:o},null,"NonMaxSuppressionV3",{maxOutputSize:n=s.maxOutputSize,iouThreshold:r=s.iouThreshold,scoreThreshold:i=s.scoreThreshold})}}),xh=Tn({nonMaxSuppressionWithScore_:function(t,e,n,r,i,a){void 0===r&&(r=.5),void 0===i&&(i=Number.NEGATIVE_INFINITY),void 0===a&&(a=0);var o=vn(t,"boxes","nonMaxSuppression"),s=vn(e,"scores","nonMaxSuppression"),l=vh(o,s,n,r,i,a),u={maxOutputSize:n=l.maxOutputSize,iouThreshold:r=l.iouThreshold,scoreThreshold:i=l.scoreThreshold,softNmsSigma:a=l.softNmsSigma},c=Bt.runKernel("NonMaxSuppressionV5",{boxes:o,scores:s},u);return{selectedIndices:c[0],selectedScores:c[1]}}}),Ch=Tn({cropAndResize_:function(t,e,n,r,i,a){var o=vn(t,"image","cropAndResize"),s=vn(e,"boxes","cropAndResize","float32"),l=vn(n,"boxInd","cropAndResize","int32");i=i||"bilinear",a=a||0;var u=s.shape[0];return E(4===o.rank,(function(){return"Error in cropAndResize: image must be rank 4,but got rank "+o.rank+"."})),E(2===s.rank&&4===s.shape[1],(function(){return"Error in cropAndResize: boxes must be have size ["+u+",4] but had shape "+s.shape+"."})),E(1===l.rank&&l.shape[0]===u,(function(){return"Error in cropAndResize: boxInd must be have size ["+u+"] but had shape "+s.shape+"."})),E(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."})),E(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was "+r})),E("bilinear"===i||"nearest"===i,(function(){return"method must be bilinear or nearest, but was "+i})),Bt.runKernelFunc((function(t,e){return t.cropAndResize(o,s,l,r,i,a)}),{images:o,boxes:s,boxInd:l},null,"CropAndResize",{method:i,extrapolationValue:a,cropSize:r})}}),Sh=Object.freeze({resizeBilinear:bh,resizeNearestNeighbor:wh,nonMaxSuppression:_h,nonMaxSuppressionAsync:function(t,e,n,r,i){return void 0===r&&(r=.5),void 0===i&&(i=Number.NEGATIVE_INFINITY),o(this,void 0,void 0,(function(){var a,o,l,u,c;return s(this,(function(s){switch(s.label){case 0:return a=vn(t,"boxes","nonMaxSuppressionAsync"),o=vn(e,"scores","nonMaxSuppressionAsync"),l=vh(a,o,n,r,i),n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,[4,Promise.all([a.data(),o.data()])];case 1:return u=s.sent(),c=Ia(u[0],u[1],n,r,i),a!==t&&a.dispose(),o!==e&&o.dispose(),[2,c]}}))}))},nonMaxSuppressionWithScore:xh,nonMaxSuppressionWithScoreAsync:function(t,e,n,r,i,a){return void 0===r&&(r=.5),void 0===i&&(i=Number.NEGATIVE_INFINITY),void 0===a&&(a=0),o(this,void 0,void 0,(function(){var o,l,u,c,h;return s(this,(function(s){switch(s.label){case 0:return o=vn(t,"boxes","nonMaxSuppressionAsync"),l=vn(e,"scores","nonMaxSuppressionAsync"),u=vh(o,l,n,r,i,a),n=u.maxOutputSize,r=u.iouThreshold,i=u.scoreThreshold,a=u.softNmsSigma,[4,Promise.all([o.data(),l.data()])];case 1:return c=s.sent(),h=Aa(c[0],c[1],n,r,i,a),o!==t&&o.dispose(),l!==e&&l.dispose(),[2,h]}}))}))},cropAndResize:Ch}),kh=function(t,e){return!(t>0)||"linear"===e},Eh=function(t,e,n){if(null==n||"linear"===n)return t;if("relu"===n)return t.mul(e.step());throw new Error("Gradient for activation "+n+" has not been implemented yet.")},Ih=function(t,e){var n=e,r=Tr(t.shape,e.shape);return r.length>0&&(n=n.sum(r)),n.reshape(t.shape)},Ah=function(t,e,n){if("linear"===e)return t;if("relu"===e)return Dc(t);if("elu"===e)return Ec(t);if("relu6"===e)return Tc(t);if("prelu"===e)return Ac(t,n);throw new Error("Unknown fused activation "+e+".")},Dh=Tn({fusedMatMul_:function(t){var e,n=t.a,r=t.b,i=t.transposeA,a=void 0!==i&&i,o=t.transposeB,s=void 0!==o&&o,l=t.bias,u=t.activation,c=void 0===u?"linear":u,h=t.preluActivationWeights;if(!1===kh(Bt.state.gradientDepth,c)){var d=$u(n,r,a,s);return null!=l&&(d=Ar(d,l)),Ah(d,c,h)}var p=vn(n,"a","fused matMul"),f=vn(r,"b","fused matMul");e=Ot(p,f),p=e[0],f=e[1];var m=a?p.shape[p.rank-2]:p.shape[p.rank-1],g=s?f.shape[f.rank-1]:f.shape[f.rank-2],y=a?p.shape[p.rank-1]:p.shape[p.rank-2],v=s?f.shape[f.rank-2]:f.shape[f.rank-1],b=p.shape.slice(0,-2),w=f.shape.slice(0,-2),_=T(b),x=T(w);E(p.rank>=2&&f.rank>=2&&p.rank===f.rank,(function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+p.rank+" and "+f.rank+"."})),E(N(b,w),(function(){return"Error in fused matMul: outer dimensions ("+b+") and ("+w+") of Tensors with shapes "+p.shape+" and "+f.shape+" must match."})),E(m===g,(function(){return"Error in fused matMul: inner shapes ("+m+") and ("+g+") of Tensors with shapes "+p.shape+" and "+f.shape+" and transposeA="+a+" and transposeB="+s+" must match."}));var C,S,k=p.shape.slice(0,-2).concat([y,v]),I=a?p.as3D(_,m,y):p.as3D(_,y,m),A=s?f.as3D(x,v,g):f.as3D(x,g,v);null!=l&&Nr(k,(C=Ot(C=vn(l,"bias","fused matMul"),p)[0]).shape),null!=h&&(S=vn(h,"prelu weights","fused matMul"));var D={a:I,b:A};return null!=l&&(D.bias=C),null!=h&&(D.preluActivationWeights=S),Bt.runKernelFunc((function(t,e){var n=t.fusedBatchMatMul({a:I,b:A,transposeA:a,transposeB:s,bias:C,activation:c,preluActivationWeights:S});return e([I,A,n]),n}),D,(function(t,e){var n=e[0],r=e[1],i=Eh(t,e[2],c),o={};return null!=l&&(o={bias:function(){return Ih(C,i)}}),a||s?!a&&s?Object.assign({a:function(){return i.matMul(r,!1,!1)},b:function(){return i.matMul(n,!0,!1)}},o):a&&!s?Object.assign({a:function(){return r.matMul(i,!1,!0)},b:function(){return n.matMul(i,!1,!1)}},o):Object.assign({a:function(){return r.matMul(i,!0,!0)},b:function(){return i.matMul(n,!0,!0)}},o):Object.assign({a:function(){return i.matMul(r,!1,!0)},b:function(){return n.matMul(i,!0,!1)}},o)}),"_FusedMatMul",{transposeA:a,transposeB:s,activation:c},[I,A],[!0]).reshape(k)}}),Th=Tn({fusedConv2d_:function(t){var e=t.x,n=t.filter,r=t.strides,i=t.pad,a=t.dataFormat,o=void 0===a?"NHWC":a,s=t.dilations,l=void 0===s?[1,1]:s,u=t.dimRoundingMode,c=t.bias,h=t.activation,d=void 0===h?"linear":h,p=t.preluActivationWeights;if(!1===kh(Bt.state.gradientDepth,d=d||"linear")){var f=Lu(e,n,r,i,o,l,u);return null!=c&&(f=Ar(f,c)),Ah(f,d,p)}var m=vn(e,"x","conv2d"),g=vn(n,"filter","conv2d"),y=m,v=!1;3===m.rank&&(v=!0,y=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),E(4===y.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+y.rank+"."})),E(4===g.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+g.rank+"."})),null!=u&&E(R(i),(function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+i+"."})),E(y.shape[3]===g.shape[2],(function(){return"Error in conv2d: depth of input ("+y.shape[3]+") must match input depth for filter "+g.shape[2]+"."})),E(ma(r,l),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+l+"'"})),E("NHWC"===o,(function(){return"Error in conv2d: got dataFormat of "+o+" but only NHWC is currently supported."}));var b,w,_=sa(y.shape,g.shape,r,l,i,u);null!=c&&(b=Ot(b=vn(c,"bias","fused conv2d"),m)[0],Nr(_.outShape,b.shape)),null!=p&&(w=vn(p,"prelu weights","fused conv2d"));var x={x:y,filter:g};null!=c&&(x.bias=b),null!=p&&(x.preluActivationWeights=w);var C=Bt.runKernelFunc((function(t,e){var n=t.fusedConv2d({input:y,filter:g,convInfo:_,bias:b,activation:d,preluActivationWeights:w});return e([g,y,n]),n}),x,(function(t,e){var n=e[0],a=e[1],o=Eh(t,e[2],d);E(fa(l),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+l+"'"}));var s={};return null!=c&&(s={bias:function(){return Ih(b,o)}}),Object.assign({x:function(){return Bu(a.shape,o,n,r,i)},filter:function(){return Vu(a,o,n.shape,r,i)}},s)}),"FusedConv2D",{convInfo:_,activation:d},[g,y],[!0]);return v?C.as3D(C.shape[1],C.shape[2],C.shape[3]):C}}),Nh=Tn({fusedDepthwiseConv2d_:function(t){var e=t.x,n=t.filter,r=t.strides,i=t.pad,a=t.dataFormat,o=void 0===a?"NHWC":a,s=t.dilations,l=void 0===s?[1,1]:s,u=t.dimRoundingMode,c=t.bias,h=t.activation,d=void 0===h?"linear":h,p=t.preluActivationWeights;if(!1===kh(Bt.state.gradientDepth,d)){var f=ju(e,n,r,i,o,l,u);return null!=c&&(f=Ar(f,c)),Ah(f,d,p)}var m=vn(e,"x","depthwiseConv2d"),g=vn(n,"filter","depthwiseConv2d"),y=m,v=!1;3===m.rank&&(v=!0,y=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),E(4===y.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+y.rank+"."})),E(4===g.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+g.rank+"."})),E(y.shape[3]===g.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels ("+y.shape[3]+") must match the inChannels dimension in filter "+g.shape[2]+"."})),null==l&&(l=[1,1]),E(ma(r,l),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+l+"'"})),null!=u&&E(R(i),(function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+u+" but got pad "+i+"."}));var b,w,_=sa(y.shape,g.shape,r,l,i,u,!0);null!=c&&(b=Ot(b=vn(c,"bias","fused conv2d"),m)[0],Nr(_.outShape,b.shape)),null!=p&&(w=vn(p,"prelu weights","fused depthwiseConv2d"));var x={x:y,filter:g};null!=c&&(x.bias=b),null!=p&&(x.preluActivationWeights=w);var C=Bt.runKernelFunc((function(t,e){var n=t.fusedDepthwiseConv2D({input:y,filter:g,convInfo:_,bias:b,activation:d,preluActivationWeights:w});return e([g,y,n]),n}),x,(function(t,e){E(fa(l),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+l+"'"}));var n=e[0],r=e[1],i=Eh(t,e[2],d),a={};return null!=c&&(a={bias:function(){return Ih(b,i)}}),Object.assign({x:function(){return Uu(r.shape,i,n,_)},filter:function(){return Wu(r,i,n.shape,_)}},a)}),"FusedDepthwiseConv2D",{convInfo:_,activation:d},[g,y],[!0]);return v?C.as3D(C.shape[1],C.shape[2],C.shape[3]):C}}),Rh=Object.freeze({matMul:Dh,conv2d:Th,depthwiseConv2d:Nh}),Oh=Object.freeze({image:Sh,linalg:yh,losses:dh,spectral:Hc,fused:Rh,signal:eh,add:Ar,addN:wl,batchNorm:El,batchNormalization:kl,batchNorm2d:Dl,batchNormalization2d:Al,batchNorm3d:Rl,batchNormalization3d:Nl,batchNorm4d:Ml,batchNormalization4d:Fl,broadcastTo:Pl,clone:Ll,div:Di,divNoNan:Hl,eye:Gl,multinomial:$l,oneHot:Kl,pad:Xl,pad1d:Yl,pad2d:Zl,pad3d:Ql,pad4d:Jl,rand:tu,randomGamma:cu,randomNormal:hu,randomUniform:du,square:pu,squaredDifference:fu,tile:ql,truncatedNormal:mu,conv1d:Pu,conv2d:Lu,conv3d:zu,depthwiseConv2d:ju,separableConv2d:Hu,conv2dTranspose:qu,conv3dTranspose:Gu,op:Tn,booleanMaskAsync:Ru,complex:Nn,real:Rn,imag:On,concat:Zn,concat1d:Qn,concat2d:Jn,concat3d:tr,concat4d:er,split:nr,matMul:$u,dot:Ku,outerProduct:Xu,reverse:Yu,reverse1d:Zu,reverse2d:Qu,reverse3d:Ju,reverse4d:tc,maxPool:rc,avgPool:ic,pool:ac,maxPool3d:oc,avgPool3d:sc,maxPoolWithArgmax:lc,slice:uc,slice1d:cc,slice2d:hc,slice3d:dc,slice4d:pc,abs:Rr,acos:Or,acosh:Fr,asin:Mr,asinh:Pr,atan:Lr,atanh:zr,ceil:Vr,clipByValue:Br,cos:jr,cosh:Ur,erf:Wr,exp:Hr,expm1:qr,floor:Gr,log:$r,log1p:Kr,logSigmoid:Xr,neg:Yr,reciprocal:Zr,round:Qr,rsqrt:Jr,sigmoid:ti,sign:ei,isNaN:ni,isInf:ri,isFinite:ii,sin:ai,sinh:oi,softplus:si,sqrt:li,step:ui,tan:ci,tanh:hi,all:mc,any:gc,argMax:yc,argMin:vc,logSumExp:bc,max:wc,mean:_c,min:xc,moments:Cc,sum:Sc,prod:kc,equal:gu,equalStrict:yu,greater:vu,greaterEqual:bu,greaterEqualStrict:wu,greaterStrict:_u,less:xu,lessEqual:Cu,lessEqualStrict:Su,lessStrict:ku,notEqual:Eu,notEqualStrict:Iu,addStrict:di,atan2:pi,divStrict:fi,floorDiv:mi,maximum:gi,maximumStrict:yi,minimum:vi,minimumStrict:bi,mod:wi,modStrict:_i,mul:xi,mulStrict:Ci,pow:Si,powStrict:ki,squaredDifferenceStrict:Ei,sub:Ii,subStrict:Ai,elu:Ec,leakyRelu:Ic,prelu:Ac,relu:Dc,relu6:Tc,selu:Nc,logicalAnd:zl,logicalNot:Vl,logicalOr:Bl,logicalXor:jl,where:Ul,whereAsync:Wl,buffer:rr,print:ir,batchToSpaceND:ar,cast:or,cumsum:sr,depthToSpace:lr,expandDims:ur,reshape:cr,spaceToBatchND:hr,squeeze:dr,stack:pr,unstack:fr,setdiff1dAsync:mr,fill:Gn,linspace:$n,ones:Hn,range:Kn,scalar:Pn,tensor:Fn,tensor1d:Ln,tensor2d:zn,tensor3d:Vn,tensor4d:Bn,tensor5d:jn,tensor6d:Un,variable:Wn,zeros:qn,onesLike:Xn,zerosLike:Yn,transpose:ea,softmax:Ji,logSoftmax:ta,localResponseNormalization:Rc,norm:Oc,gather:Tu,unsortedSegmentSum:Nu,basicLSTMCell:Fc,multiRNNCell:Mc,movingAverage:Pc,stridedSlice:Lc,topk:zc,scatterND:Vc,fft:Bc,ifft:jc,rfft:Uc,irfft:Wc,sparseToDense:qc,gatherND:Gc,diag:$c,dropout:Kc,hannWindow:Zc,hammingWindow:Qc,frame:Jc,stft:th,inTopKAsync:nh});function Fh(t,e){Array.isArray(t)||(t=[t]),t.forEach((function(t){null!=t&&E("complex64"!==t.dtype,(function(){return e+" does not support complex64 tensors."}))}))}function Mh(t,e,n,r,i,a){for(var o=i.strideHeight,s=i.strideWidth,l=i.dilationHeight,u=i.dilationWidth,c=i.effectiveFilterHeight,h=i.effectiveFilterWidth,d=i.padInfo.top,p=i.padInfo.left,f="max"===a?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=rr(i.outShape,n),g=m.values,y=i.outShape[1]*i.outShape[2]*i.outShape[3],v=i.outShape[2]*i.outShape[3],b=i.outShape[3],w=0;w<i.batchSize;++w)for(var _=w*y,x=w*r[0],C=0;C<i.inChannels;++C)for(var S=0;S<i.outHeight;++S)for(var k=S*o-d,E=Math.max(0,k),I=Math.min(i.inHeight,c+k),A=_+S*v,D=0;D<i.outWidth;++D){for(var T=D*s-p,N=Math.max(0,T),R=Math.min(i.inWidth,h+T),O=f,F=0,M=0,P=E;P<I;P+=l){for(var L=x+P*r[1],z=N;z<R;z+=u){var V=t[L+z*r[2]+C];"max"===a&&V>O?O=V:"avg"===a&&(F+=V,M++)}if(isNaN(O))break}g[A+D*b+C]="avg"===a?F/M:O}return m}function Ph(t,e,n,r,i,a){void 0===i&&(i=!1),void 0===a&&(a=!1);for(var o=rr(r.outShape,"int32"),s=r.strideHeight,l=r.strideWidth,u=r.dilationHeight,c=r.dilationWidth,h=r.effectiveFilterHeight,d=r.effectiveFilterWidth,p=r.padInfo.top,f=r.padInfo.left,m=rr(e,n,t),g=0;g<r.batchSize;++g)for(var y=0;y<r.inChannels;++y)for(var v=0;v<r.outHeight;++v){for(var b=v*s-p,w=b;w<0;)w+=u;for(var _=Math.min(r.inHeight,h+b),x=0;x<r.outWidth;++x){for(var C=x*l-f,S=C;S<0;)S+=c;for(var k=Math.min(r.inWidth,d+C),E=Number.NEGATIVE_INFINITY,I=-1,A=w;A<_;A+=u)for(var D=A-b,T=S;T<k;T+=c){var N=T-C,R=m.get(g,A,T,y);R>E&&(E=R,I=i?a?((g*r.inHeight+A)*r.inWidth+T)*r.inChannels+y:(A*r.inWidth+T)*r.inChannels+y:D*d+N)}o.set(I,g,v,x,y)}}return o}function Lh(t,e,n,r){if("linear"===n)return t.linear(e);if("relu"===n)return t.relu(e);if("elu"===n)return t.elu(e);if("relu6"===n)return t.relu6(e);if("prelu"===n)return t.prelu(e,r);throw new Error("Activation "+n+" has not been implemented for the CPU backend.")}var zh=function(t){function e(){var e=t.call(this)||this;return e.blockSize=48,e.firstUse=!0,e.data=new na(e,Bt),e}return a(e,t),e.prototype.write=function(t,e,n){this.firstUse&&(this.firstUse=!1,c().get("IS_NODE")&&mn("\n============================\nHi there \u{1f44b}. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));var r={};return this.data.set(r,{values:t,dtype:n}),r},e.prototype.move=function(t,e,n,r){this.data.set(t,{values:e,dtype:r})},e.prototype.numDataIds=function(){return this.data.numDataIds()},e.prototype.read=function(t){return o(this,void 0,void 0,(function(){return s(this,(function(e){return[2,this.readSync(t)]}))}))},e.prototype.readSync=function(t){var e=this.data.get(t),n=e.complexTensors;return"complex64"===e.dtype?_a(this.readSync(n.real.dataId),this.readSync(n.imag.dataId)):this.data.get(t).values},e.prototype.bufferSync=function(t){var e=this.readSync(t.dataId),n=e;if("string"===t.dtype)try{n=e.map((function(t){return lt(t)}))}catch(t){throw new Error("Failed to decode encoded string bytes into utf-8")}return rr(t.shape,t.dtype,n)},e.prototype.makeOutput=function(t,e,n){var r=this.write(t,e,n);return Bt.makeTensorFromDataId(r,e,n,this)},e.prototype.disposeData=function(t){if(this.data.has(t)){var e=this.data.get(t).complexTensors;null!=e&&(e.real.dispose(),e.imag.dispose()),this.data.delete(t)}},e.prototype.time=function(t){return o(this,void 0,void 0,(function(){var e;return s(this,(function(n){return e=at(),t(),[2,{kernelMs:at()-e}]}))}))},e.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},e.prototype.complex=function(t,e){var n=this.makeOutput(null,t.shape,"complex64");return this.data.get(n.dataId).complexTensors={real:Bt.keep(t.clone()),imag:Bt.keep(e.clone())},n},e.prototype.real=function(t){return this.data.get(t.dataId).complexTensors.real.clone()},e.prototype.imag=function(t){return this.data.get(t.dataId).complexTensors.imag.clone()},e.prototype.slice=function(t,e,n){if(Fh(t,"slice"),Wi(t.shape,e,n)){var r=Hi(e,t.strides),i=T(n);return Fn(this.readSync(t.dataId).subarray(r,r+i),n,t.dtype)}for(var a=rr(n,t.dtype),o=this.bufferSync(t),s=0;s<a.size;++s){var l=a.indexToLoc(s).map((function(t,n){return t+e[n]}));a.values[s]=o.get.apply(o,l)}return a.toTensor()},e.prototype.stridedSlice=function(t,e,n,r){Fh(t,"stridedSlice");var i=Bi(e,n,r);if(i.some((function(t){return 0===t})))return Fn([],i);for(var a=rr(i,t.dtype),o=this.bufferSync(t),s=0;s<a.size;s++){for(var l=a.indexToLoc(s),u=new Array(l.length),c=0;c<u.length;c++)u[c]=l[c]*r[c]+e[c];a.set.apply(a,[o.get.apply(o,u)].concat(l))}return a.toTensor()},e.prototype.diag=function(t){for(var e=this.readSync(t.dataId),n=rr([t.size,t.size],t.dtype),r=n.values,i=0;i<e.length;i++)r[i*t.size+i]=e[i];return n.toTensor()},e.prototype.unstack=function(t,e){for(var n=t.shape[e],r=new Array(t.rank-1),i=0,a=0;a<t.rank;a++)a!==e&&(r[i++]=t.shape[a]);var o=new Array(t.rank).fill(0),s=t.shape.slice();s[e]=1;var l=new Array(n);for(a=0;a<l.length;a++)o[e]=a,l[a]=this.slice(t,o,s).reshape(r);return l},e.prototype.reverse=function(t,e){Fh(t,"reverse");for(var n=rr(t.shape,t.dtype),r=this.bufferSync(t),i=function(i){var a=n.indexToLoc(i),o=a.slice();e.forEach((function(e){return o[e]=t.shape[e]-1-o[e]})),n.set.apply(n,[r.get.apply(r,o)].concat(a))},a=0;a<n.size;a++)i(a);return n.toTensor()},e.prototype.concat=function(t,e){var n=this;if("complex64"===t[0].dtype){var r=t.map((function(t){return Rn(t)})),i=t.map((function(t){return On(t)}));return Nn(this.concat(r,e),this.concat(i,e))}var a=t.map((function(t){var n=T(t.shape.slice(e));return t.as2D(-1,n)})),o=Dn(a.map((function(t){return t.shape})),1),s=rr(o,t[0].dtype).values;if(1===a[0].shape[0]){var l=0;a.forEach((function(t){s.set(n.readSync(t.dataId),l),l+=t.size}))}else{var u=0;a.forEach((function(t){for(var e=n.readSync(t.dataId),r=0,i=0;i<t.shape[0];++i)for(var a=i*o[1]+u,l=0;l<t.shape[1];++l)s[a+l]=e[r++];u+=t.shape[1]}))}var c=Dn(t.map((function(t){return t.shape})),e);return Fn(s,c,t[0].dtype)},e.prototype.neg=function(t){return Fh(t,"neg"),this.multiply(Pn(-1),t)},e.prototype.add=function(t,e){return"complex64"===t.dtype||"complex64"===e.dtype?this.broadcastedBinaryComplexOp(t.cast("complex64"),e.cast("complex64"),(function(t,e,n,r){return{real:t+n,imag:e+r}})):this.broadcastedBinaryOp(t,e,Nt(t.dtype,e.dtype),(function(t,e){return t+e}))},e.prototype.addN=function(t){var e=this;Fh(t,"addN");for(var n=t.map((function(t){return e.readSync(t.dataId)})),r=rr(t[0].shape,t[0].dtype),i=r.values,a=0;a<t.length;a++)for(var o=n[a],s=0;s<i.length;s++)i[s]+=o[s];return r.toTensor()},e.prototype.softmax=function(t,e){var n=z([e],t.shape),r=this.max(t,n),i=Cn(r.shape,n),a=this.subtract(t,r.reshape(i)),o=this.exp(a),s=this.sum(o,n).reshape(i);return Di(o,s)},e.prototype.subtract=function(t,e){return"complex64"===t.dtype||"complex64"===e.dtype?this.broadcastedBinaryComplexOp(t.cast("complex64"),e.cast("complex64"),(function(t,e,n,r){return{real:t-n,imag:e-r}})):this.broadcastedBinaryOp(t,e,Nt(t.dtype,e.dtype),(function(t,e){return t-e}))},e.prototype.pow=function(t,e){return Fh([t,e],"pow"),this.broadcastedBinaryOp(t,e,t.dtype,(function(t,e){return Math.pow(t,e)}))},e.prototype.batchMatMul=function(t,e,n,r){Fh([t,e],"matMul");for(var i=n?t.shape[1]:t.shape[2],a=n?t.shape[2]:t.shape[1],o=r?e.shape[1]:e.shape[2],s=t.shape[0],l=this.readSync(t.dataId),u=this.readSync(e.dataId),c=n?[t.strides[0],1,t.strides[1]]:[t.strides[0],t.strides[1],1],h=c[0],d=c[1],p=c[2],f=r?[1,e.strides[1],e.strides[0]]:[e.strides[1],1,e.strides[0]],m=f[0],g=f[1],y=f[2],v=a*o,b=rr([s,a,o],t.dtype),w=b.values,_=this.blockSize,x=0;x<s;x++)for(var C=0;C<a;C+=_)for(var S=0;S<o;S+=_)for(var k=0;k<i;k+=_)for(var E=Math.min(C+_,a),I=Math.min(S+_,o),A=Math.min(k+_,i),D=C;D<E;D++)for(var T=S;T<I;T++){for(var N=0,R=k;R<A;R++)N+=l[x*h+D*d+R*p]*u[R*m+T*g+x*y];w[x*v+(D*o+T)]+=N}return b.toTensor()},e.prototype.fusedBatchMatMul=function(t){var e=t.bias,n=t.activation,r=t.preluActivationWeights,i=this.batchMatMul(t.a,t.b,t.transposeA,t.transposeB);return e&&(i=this.add(i,e)),n&&(i=Lh(this,i,n,r)),i},e.prototype.multiply=function(t,e){return"complex64"===t.dtype||"complex64"===e.dtype?this.broadcastedBinaryComplexOp(t.cast("complex64"),e.cast("complex64"),(function(t,e,n,r){return{real:t*n-e*r,imag:t*r+e*n}})):this.broadcastedBinaryOp(t,e,Nt(t.dtype,e.dtype),(function(t,e){return t*e}))},e.prototype.floorDiv=function(t,e){return Fh([t,e],"floorDiv"),this.broadcastedBinaryOp(t,e,"int32",(function(t,e){return Math.floor(t/e)}))},e.prototype.sum=function(t,e){Fh(t,"sum"),Sn("sum",e,t.rank);for(var n=xn(t.shape,e),r=n[1],i=qn(n[0],Nt(t.dtype,"int32")),a=T(r),o=this.readSync(i.dataId),s=this.readSync(t.dataId),l=0;l<o.length;++l){for(var u=l*a,c=0,h=0;h<a;++h)c+=s[u+h];o[l]=c}return i},e.prototype.prod=function(t,e){Fh(t,"sum");for(var n=xn(t.shape,e),r=n[1],i=qn(n[0],Nt(t.dtype,"int32")),a=T(r),o=this.readSync(i.dataId),s=this.readSync(t.dataId),l=0;l<o.length;++l){for(var u=l*a,c=1,h=0;h<a;++h)c*=s[u+h];o[l]=c}return i},e.prototype.unsortedSegmentSum=function(t,e,n){Fh(t,"unsortedSegmentSum");for(var r=[],i=t.rank-e.rank,a=0;a<i;++a)e=e.expandDims(a+1);for(a=0;a<n;++a){var o=Pn(a,"int32"),s=gu(o,e).asType("float32").mul(t).sum(0);r.push(s)}return pr(r)},e.prototype.argMin=function(t,e){Fh(t,"argMin");var n=[e];Sn("argMin",n,t.rank);for(var r=xn(t.shape,n),i=r[1],a=qn(r[0],"int32"),o=T(i),s=this.readSync(a.dataId),l=this.readSync(t.dataId),u=0;u<s.length;++u){for(var c=u*o,h=l[c],d=0,p=0;p<o;++p){var f=l[c+p];f<h&&(h=f,d=p)}s[u]=d}return a},e.prototype.argMax=function(t,e){Fh(t,"argMax");var n=[e];Sn("argMax",n,t.rank);for(var r=xn(t.shape,n),i=r[1],a=qn(r[0],"int32"),o=T(i),s=this.readSync(a.dataId),l=this.readSync(t.dataId),u=0;u<s.length;++u){for(var c=u*o,h=l[c],d=0,p=0;p<o;++p){var f=l[c+p];f>h&&(h=f,d=p)}s[u]=d}return a},e.prototype.cumsum=function(t,e,n,r){if(Fh(t,"cumsum"),e!==t.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(t.rank-1)+" but got axis="+e);for(var i=Nt(t.dtype,"int32"),a=qn(t.shape,i),o=this.readSync(a.dataId),s=this.readSync(t.dataId),l=t.shape[t.rank-1],u=r?function(t,e){return t+l-e-1}:function(t,e){return t+e},c=0;c<s.length;c+=l)for(var h=0;h<l;h++){var d=u(c,h);if(0===h)o[d]=n?0:s[d];else{var p=u(c,h-1);o[d]=n?s[p]+o[p]:s[d]+o[p]}}return a},e.prototype.equal=function(t,e){return Fh([t,e],"equal"),this.broadcastedBinaryOp(t,e,"bool",(function(t,e){return t===e?1:0}))},e.prototype.notEqual=function(t,e){return Fh([t,e],"notEqual"),this.broadcastedBinaryOp(t,e,"bool",(function(t,e){return t!==e?1:0}))},e.prototype.less=function(t,e){return Fh([t,e],"less"),this.broadcastedBinaryOp(t,e,"bool",(function(t,e){return t<e?1:0}))},e.prototype.lessEqual=function(t,e){return Fh([t,e],"lessEqual"),this.broadcastedBinaryOp(t,e,"bool",(function(t,e){return t<=e?1:0}))},e.prototype.greater=function(t,e){return Fh([t,e],"greater"),this.broadcastedBinaryOp(t,e,"bool",(function(t,e){return t>e?1:0}))},e.prototype.greaterEqual=function(t,e){return Fh([t,e],"greaterEqual"),this.broadcastedBinaryOp(t,e,"bool",(function(t,e){return t>=e?1:0}))},e.prototype.logicalNot=function(t){Fh(t,"logicalNot");for(var e=this.readSync(t.dataId),n=new Uint8Array(e.length),r=0;r<e.length;++r)n[r]=e[r]?0:1;return this.makeOutput(n,t.shape,"bool")},e.prototype.logicalAnd=function(t,e){return Fh([t,e],"logicalAnd"),this.broadcastedBinaryOp(t,e,"bool",(function(t,e){return t&&e}))},e.prototype.logicalOr=function(t,e){return Fh([t,e],"logicalOr"),this.broadcastedBinaryOp(t,e,"bool",(function(t,e){return t||e}))},e.prototype.select=function(t,e,n){Fh([t,e,n],"select");for(var r=this.readSync(t.dataId),i=this.readSync(e.dataId),a=this.readSync(n.dataId),o=qn(e.shape,Nt(e.dtype,n.dtype)),s=this.readSync(o.dataId),l=0,u=0===t.rank||t.rank>1||1===e.rank?1:T(e.shape.slice(1)),c=0;c<r.length;c++)for(var h=0;h<u;h++)s[l++]=1===r[c]?i[c]:a[c];return o},e.prototype.where=function(t){Fh([t],"where");var e=this.readSync(t.dataId);return Pa(t.shape,e)},e.prototype.topk=function(t,e,n){return Fh(t,"topk"),Ma(this.readSync(t.dataId),t.shape,t.dtype,e)},e.prototype.min=function(t,e){Fh(t,"min"),Sn("min",e,t.rank);for(var n=xn(t.shape,e),r=n[1],i=qn(n[0],t.dtype),a=T(r),o=this.readSync(i.dataId),s=this.readSync(t.dataId),l=0;l<o.length;++l){for(var u=l*a,c=s[u],h=0;h<a;++h){var d=s[u+h];d<c&&(c=d)}o[l]=c}return i},e.prototype.minimum=function(t,e){return Fh([t,e],"minimum"),this.broadcastedBinaryOp(t,e,t.dtype,(function(t,e){return Math.min(t,e)}))},e.prototype.mod=function(t,e){return Fh([t,e],"mod"),this.broadcastedBinaryOp(t,e,t.dtype,(function(t,e){var n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}))},e.prototype.max=function(t,e){Fh(t,"max"),Sn("max",e,t.rank);for(var n=xn(t.shape,e),r=n[1],i=qn(n[0],t.dtype),a=T(r),o=this.readSync(i.dataId),s=this.readSync(t.dataId),l=0;l<o.length;++l){for(var u=l*a,c=s[u],h=0;h<a;++h){var d=s[u+h];d>c&&(c=d)}o[l]=c}return i},e.prototype.maximum=function(t,e){return Fh([t,e],"maximum"),this.broadcastedBinaryOp(t,e,t.dtype,(function(t,e){return Math.max(t,e)}))},e.prototype.all=function(t,e){Fh(t,"all"),Sn("all",e,t.rank);for(var n=xn(t.shape,e),r=n[1],i=qn(n[0],t.dtype),a=T(r),o=this.readSync(i.dataId),s=this.readSync(t.dataId),l=0;l<o.length;++l){for(var u=l*a,c=s[u],h=0;h<a;++h)c=c&&s[u+h];o[l]=c}return i},e.prototype.any=function(t,e){Fh(t,"any"),Sn("any",e,t.rank);for(var n=xn(t.shape,e),r=n[1],i=qn(n[0],t.dtype),a=T(r),o=this.readSync(i.dataId),s=this.readSync(t.dataId),l=0;l<o.length;++l){for(var u=l*a,c=s[u],h=0;h<a;++h)c=c||s[u+h];o[l]=c}return i},e.prototype.squaredDifference=function(t,e){return Fh([t,e],"squaredDifference"),this.broadcastedBinaryOp(t,e,t.dtype,(function(t,e){var n=t-e;return n*n}))},e.prototype.ceil=function(t){Fh(t,"ceil");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.ceil(e[r]);return this.makeOutput(n,t.shape,"float32")},e.prototype.floor=function(t){Fh(t,"floor");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.floor(e[r]);return this.makeOutput(n,t.shape,"float32")},e.prototype.sign=function(t){Fh(t,"x");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=e[r]<0?-1:e[r]>0?1:0;return this.makeOutput(n,t.shape,"float32")},e.prototype.isNaN=function(t){Fh(t,"x");for(var e=this.readSync(t.dataId),n=new Uint8Array(e.length),r=0;r<e.length;++r)Number.isNaN(e[r])&&(n[r]=1);return this.makeOutput(n,t.shape,"bool")},e.prototype.isInf=function(t){Fh(t,"x");for(var e=this.readSync(t.dataId),n=new Uint8Array(e.length),r=0;r<e.length;++r)Math.abs(e[r])===1/0&&(n[r]=1);return this.makeOutput(n,t.shape,"bool")},e.prototype.isFinite=function(t){Fh(t,"x");for(var e=this.readSync(t.dataId),n=new Uint8Array(e.length),r=0;r<e.length;++r)Number.isFinite(e[r])&&(n[r]=1);return this.makeOutput(n,t.shape,"bool")},e.prototype.round=function(t){Fh(t,"round");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r){var i=Math.floor(e[r]);n[r]=e[r]-i<.5?Math.floor(e[r]):e[r]-i>.5?Math.ceil(e[r]):i%2==0?i:i+1}return this.makeOutput(n,t.shape,"float32")},e.prototype.exp=function(t){Fh(t,"exp");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.exp(e[r]);return this.makeOutput(n,t.shape,"float32")},e.prototype.expm1=function(t){Fh(t,"expm1");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.expm1(e[r]);return this.makeOutput(n,t.shape,"float32")},e.prototype.log=function(t){Fh(t,"log");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.log(e[r]);return this.makeOutput(n,t.shape,"float32")},e.prototype.log1p=function(t){Fh(t,"log1p");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.log1p(e[r]);return this.makeOutput(n,t.shape,"float32")},e.prototype.sqrt=function(t){Fh(t,"sqrt");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.sqrt(e[r]);return this.makeOutput(n,t.shape,"float32")},e.prototype.rsqrt=function(t){Fh(t,"rsqrt");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=1/Math.sqrt(e[r]);return this.makeOutput(n,t.shape,"float32")},e.prototype.reciprocal=function(t){Fh(t,"reciprocal");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=1/e[r];return this.makeOutput(n,t.shape,"float32")},e.prototype.linear=function(t){return t},e.prototype.relu=function(t){Fh(t,"relu");for(var e=qn(t.shape,t.dtype),n=this.readSync(e.dataId),r=this.readSync(t.dataId),i=0;i<r.length;++i)n[i]=Math.max(0,r[i]);return e},e.prototype.relu6=function(t){Fh(t,"relu");for(var e=qn(t.shape,t.dtype),n=this.readSync(e.dataId),r=this.readSync(t.dataId),i=0;i<r.length;++i)n[i]=Math.min(Math.max(0,r[i]),6);return e},e.prototype.prelu=function(t,e){return Fh([t,e],"prelu"),this.broadcastedBinaryOp(t,e,t.dtype,(function(t,e){return t<0?e*t:t}))},e.prototype.elu=function(t){Fh(t,"elu");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r){var i=n[r];e[r]=i>=0?i:Math.exp(i)-1}return this.makeOutput(e,t.shape,"float32")},e.prototype.eluDer=function(t,e){Fh([t,e],"eluDer");for(var n=new Float32Array(e.size),r=this.readSync(e.dataId),i=this.readSync(t.dataId),a=0;a<r.length;++a){var o=r[a];n[a]=o>=1?i[a]:i[a]*(o+1)}return this.makeOutput(n,e.shape,"float32")},e.prototype.selu=function(t){Fh(t,"selu");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r){var i=n[r];e[r]=i>=0?1.0507009873554805*i:1.7580993408473768*(Math.exp(i)-1)}return this.makeOutput(e,t.shape,"float32")},e.prototype.clip=function(t,e,n){Fh(t,"clip");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),a=0;a<i.length;++a){var o=i[a];r[a]=o>n?n:o<e?e:o}return this.makeOutput(r,t.shape,"float32")},e.prototype.abs=function(t){for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.abs(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.complexAbs=function(t){for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<t.size;++r)e[r]=Math.hypot(n[2*r],n[2*r+1]);return this.makeOutput(e,t.shape,"float32")},e.prototype.int=function(t){Fh(t,"int");for(var e=new Int32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=n[r];return this.makeOutput(e,t.shape,"int32")},e.prototype.sigmoid=function(t){Fh(t,"sigmoid");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=1/(1+Math.exp(-n[r]));return this.makeOutput(e,t.shape,"float32")},e.prototype.softplus=function(t){Fh(t,"softplus");for(var e=Math.log(1.1920928955078125e-7)+2,n=new Float32Array(t.size),r=this.readSync(t.dataId),i=0;i<r.length;++i){var a,o=r[i]>-e,s=r[i]<e,l=Math.exp(r[i]);a=s?l:o?r[i]:Math.log(1+l),n[i]=a}return this.makeOutput(n,t.shape,"float32")},e.prototype.sin=function(t){Fh(t,"sin");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.sin(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.cos=function(t){Fh(t,"cos");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.cos(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.tan=function(t){Fh(t,"tan");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.tan(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.asin=function(t){Fh(t,"asin");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.asin(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.acos=function(t){Fh(t,"acos");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.acos(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.atan=function(t){Fh(t,"atan");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.atan(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.atan2=function(t,e){return Fh([t,e],"atan2"),this.broadcastedBinaryOp(t,e,t.dtype,(function(t,e){return Math.atan2(t,e)}))},e.prototype.sinh=function(t){Fh(t,"sinh");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.sinh(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.cosh=function(t){Fh(t,"cosh");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.cosh(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.tanh=function(t){Fh(t,"tanh");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=O(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.asinh=function(t){Fh(t,"asinh");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.asinh(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.acosh=function(t){Fh(t,"acosh");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.acosh(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.atanh=function(t){Fh(t,"atanh");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.atanh(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.erf=function(t){Fh(t,"erf");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r){var i=Math.sign(n[r]),a=Math.abs(n[r]),o=1/(1+.3275911*a);e[r]=i*(1-((((1.061405429*o-1.453152027)*o+1.421413741)*o-.284496736)*o+.254829592)*o*Math.exp(-a*a))}return this.makeOutput(e,t.shape,"float32")},e.prototype.step=function(t,e){void 0===e&&(e=0),Fh(t,"step");for(var n=new Float32Array(t.size),r=this.readSync(t.dataId),i=0;i<r.length;++i){var a=r[i];n[i]=isNaN(a)?NaN:a>0?1:e}return this.makeOutput(n,t.shape,"float32")},e.prototype.fusedConv2d=function(t){var e=t.bias,n=t.activation,r=t.preluActivationWeights,i=this.conv2d(t.input,t.filter,t.convInfo);return e&&(i=this.add(i,e)),n&&(i=Lh(this,i,n,r)),i},e.prototype.conv2d=function(t,e,n){Fh([t,e],"conv2d");for(var r=n.filterHeight,i=n.filterWidth,a=n.dilationHeight,o=n.dilationWidth,s=n.padInfo.left,l=n.padInfo.top,u="channelsLast"===n.dataFormat,c=rr(n.outShape,t.dtype),h=t.strides[0],d=u?t.strides[1]:t.strides[2],p=u?t.strides[2]:1,f=u?1:t.strides[1],m=c.strides[0],g=u?c.strides[1]:c.strides[2],y=u?c.strides[2]:1,v=u?1:c.strides[1],b=this.readSync(t.dataId),w=this.readSync(e.dataId),_=c.values,x=0;x<n.batchSize;++x)for(var C=x*h,S=x*m,k=0;k<n.outHeight;++k)for(var E=S+k*g,I=k*n.strideHeight-l,A=0;A<r;A++){var D=I+A*a;if(!(D<0||D>=n.inHeight))for(var T=A*e.strides[0],N=C+D*d,R=0;R<n.outWidth;++R)for(var O=E+R*y,F=R*n.strideWidth-s,M=0;M<i;M++){var P=F+M*o;if(!(P<0||P>=n.inWidth))for(var L=N+P*p,z=T+M*e.strides[1],V=0;V<n.inChannels;++V){for(var B=b[L+V*f],j=0;j<n.outChannels;++j)_[O+j*v]+=B*w[z+j];z+=n.outChannels}}}return c.toTensor()},e.prototype.conv3d=function(t,e,n){for(var r=n.filterDepth,i=n.filterHeight,a=n.filterWidth,o=n.dilationDepth,s=n.dilationHeight,l=n.dilationWidth,u=n.padInfo.front,c=n.padInfo.left,h=n.padInfo.top,d=rr(n.outShape,t.dtype),p=this.readSync(t.dataId),f=this.readSync(e.dataId),m=d.values,g=0;g<n.batchSize;++g)for(var y=g*t.strides[0],v=g*d.strides[0],b=0;b<n.outDepth;++b)for(var w=v+b*d.strides[1],_=b*n.strideDepth-u,x=0;x<r;x++){var C=_+x*o;if(!(C<0||C>=n.inDepth))for(var S=x*e.strides[0],k=y+C*t.strides[1],E=0;E<n.outHeight;++E)for(var I=w+E*d.strides[2],A=E*n.strideHeight-h,D=0;D<i;D++){var T=A+D*s;if(!(T<0||T>=n.inHeight))for(var N=S+D*e.strides[1],R=k+T*t.strides[2],O=0;O<n.outWidth;++O)for(var F=I+O*n.outChannels,M=O*n.strideWidth-c,P=0;P<a;P++){var L=M+P*l;if(!(L<0||L>=n.inWidth))for(var z=R+L*n.inChannels,V=N+P*e.strides[2],B=0;B<n.inChannels;++B){for(var j=p[z+B],U=0;U<n.outChannels;++U)m[F+U]+=j*f[V+U];V+=n.outChannels}}}}return d.toTensor()},e.prototype.conv2dDerInput=function(t,e,n){Fh([t,e],"conv2dDerInput");for(var r=rr(n.inShape,"float32"),i=r.values,a=this.readSync(t.dataId),o=this.readSync(e.dataId),s=e.strides,l=s[0],u=s[1],c=s[2],h=n.batchSize,d=n.filterHeight,p=n.filterWidth,f=n.inChannels,m=n.inHeight,g=n.inWidth,y=n.outChannels,v=n.outHeight,b=n.outWidth,w=n.strideHeight,_=n.strideWidth,x=d-1-n.padInfo.top,C=p-1-n.padInfo.left,S="channelsLast"===n.dataFormat,k=r.strides[0],E=S?r.strides[1]:r.strides[2],I=S?r.strides[2]:1,A=S?1:r.strides[1],D=t.strides[0],T=S?t.strides[1]:t.strides[2],N=S?t.strides[2]:1,R=S?1:t.strides[1],O=0;O<h;++O)for(var F=0;F<f;++F)for(var M=0;M<m;++M)for(var P=M-x,L=Math.max(0,Math.ceil(P/w)),z=Math.min(v,(d+P)/w),V=0;V<g;++V){for(var B=V-C,j=Math.max(0,Math.ceil(B/_)),U=Math.min(b,(p+B)/_),W=0,H=L;H<z;++H)for(var q=H*w-P,G=j;G<U;++G)for(var $=D*O+T*H+N*G,K=l*(d-1-q)+u*(p-1-(G*_-B))+c*F,X=0;X<y;++X)W+=a[$+R*X]*o[K+X];i[k*O+E*M+I*V+A*F]=W}return r.toTensor()},e.prototype.conv3dDerInput=function(t,e,n){for(var r=rr(n.inShape,"float32"),i=r.values,a=r.strides,o=a[0],s=a[1],l=a[2],u=a[3],c=this.readSync(t.dataId),h=t.strides,d=h[0],p=h[1],f=h[2],m=h[3],g=this.readSync(e.dataId),y=e.strides,v=y[0],b=y[1],w=y[2],_=y[3],x=n.batchSize,C=n.filterDepth,S=n.filterHeight,k=n.filterWidth,E=n.inChannels,I=n.inDepth,A=n.inHeight,D=n.inWidth,T=n.outChannels,N=n.outDepth,R=n.outHeight,O=n.outWidth,F=n.strideDepth,M=n.strideHeight,P=n.strideWidth,L=C-1-n.padInfo.front,z=S-1-n.padInfo.top,V=k-1-n.padInfo.left,B=0;B<x;++B)for(var j=0;j<E;++j)for(var U=0;U<I;++U)for(var W=U-L,H=Math.max(0,Math.ceil(W/F)),q=Math.min(N,(C+W)/F),G=0;G<A;++G)for(var $=G-z,K=Math.max(0,Math.ceil($/M)),X=Math.min(R,(S+$)/M),Y=0;Y<D;++Y){for(var Z=Y-V,Q=Math.max(0,Math.ceil(Z/P)),J=Math.min(O,(k+Z)/P),tt=0,et=H;et<q;++et)for(var nt=et*F-W,rt=K;rt<X;++rt)for(var it=rt*M-$,at=Q;at<J;++at)for(var ot=d*B+p*et+f*rt+m*at,st=v*(C-1-nt)+b*(S-1-it)+w*(k-1-(at*P-Z))+_*j,lt=0;lt<T;++lt)tt+=c[ot+lt]*g[st+lt];i[o*B+s*U+l*G+u*Y+j]=tt}return r.toTensor()},e.prototype.conv2dDerFilter=function(t,e,n){Fh([t,e],"conv2dDerFilter");for(var r=n.strideHeight,i=n.strideWidth,a=n.filterHeight,o=n.filterWidth,s="channelsLast"===n.dataFormat,l=rr(n.filterShape,"float32"),u=n.padInfo.left,c=n.padInfo.top,h=this.bufferSync(t),d=this.bufferSync(e),p=0;p<a;++p)for(var f=Math.max(0,Math.ceil((c-p)/r)),m=Math.min(n.outHeight,(n.inHeight+c-p)/r),g=0;g<o;++g)for(var y=Math.max(0,Math.ceil((u-g)/i)),v=Math.min(n.outWidth,(n.inWidth+u-g)/i),b=0;b<n.inChannels;++b)for(var w=0;w<n.outChannels;++w){for(var _=0,x=0;x<n.batchSize;++x)for(var C=f;C<m;++C)for(var S=p+C*r-c,k=y;k<v;++k){var E=g+k*i-u;_+=s?h.get(x,S,E,b)*d.get(x,C,k,w):h.get(x,b,S,E)*d.get(x,w,C,k)}l.set(_,p,g,b,w)}return l.toTensor()},e.prototype.conv3dDerFilter=function(t,e,n){for(var r=n.strideDepth,i=n.strideHeight,a=n.strideWidth,o=n.filterDepth,s=n.filterHeight,l=n.filterWidth,u=rr(n.filterShape,"float32"),c=u.values,h=u.strides,d=h[0],p=h[1],f=h[2],m=h[3],g=this.readSync(e.dataId),y=e.strides,v=y[0],b=y[1],w=y[2],_=y[3],x=this.readSync(t.dataId),C=t.strides,S=C[0],k=C[1],E=C[2],I=C[3],A=n.padInfo.front,D=n.padInfo.left,T=n.padInfo.top,N=0;N<o;++N)for(var R=Math.max(0,Math.ceil((A-N)/r)),O=Math.min(n.outDepth,(n.inDepth+A-N)/r),F=N*d,M=0;M<s;++M)for(var P=Math.max(0,Math.ceil((T-M)/i)),L=Math.min(n.outHeight,(n.inHeight+T-M)/i),z=M*p+F,V=0;V<l;++V)for(var B=Math.max(0,Math.ceil((D-V)/a)),j=Math.min(n.outWidth,(n.inWidth+D-V)/a),U=V*f+z,W=0;W<n.inChannels;++W)for(var H=W*m+U,q=0;q<n.outChannels;++q){for(var G=0,$=0;$<n.batchSize;++$)for(var K=$*S,X=$*v,Y=R;Y<O;++Y)for(var Z=(N+Y*r-A)*k+K,Q=Y*b+X,J=P;J<L;++J)for(var tt=(M+J*i-T)*E+Z,et=J*w+Q,nt=B;nt<j;++nt)G+=x[(V+nt*a-D)*I+tt+W]*g[nt*_+et+q];c[H+q]=G}return u.toTensor()},e.prototype.fusedDepthwiseConv2D=function(t){var e=t.bias,n=t.activation,r=t.preluActivationWeights,i=this.depthwiseConv2D(t.input,t.filter,t.convInfo);return e&&(i=this.add(i,e)),n&&(i=Lh(this,i,n,r)),i},e.prototype.depthwiseConv2D=function(t,e,n){Fh([t,e],"depthwiseConv2D");for(var r=n.filterHeight,i=n.filterWidth,a=n.dilationHeight,o=n.dilationWidth,s=n.padInfo.left,l=n.padInfo.top,u=n.outChannels/n.inChannels,c=rr(n.outShape,t.dtype),h=this.readSync(t.dataId),d=this.readSync(e.dataId),p=c.values,f=0;f<n.batchSize;++f)for(var m=f*t.strides[0],g=f*c.strides[0],y=0;y<n.outHeight;++y)for(var v=g+y*c.strides[1],b=y*n.strideHeight-s,w=0;w<r;++w){var _=b+w*a;if(!(_<0||_>=n.inHeight))for(var x=w*e.strides[0],C=m+_*t.strides[1],S=0;S<n.outWidth;++S)for(var k=v+S*c.strides[2],E=S*n.strideWidth-l,I=0;I<i;++I){var A=E+I*o;if(!(A<0||A>=n.inWidth))for(var D=C+A*n.inChannels,T=k,N=x+I*e.strides[1],R=0;R<n.inChannels;++R){for(var O=h[D+R],F=0;F<u;++F)p[T+F]+=O*d[N+F];T+=u,N+=u}}}return c.toTensor()},e.prototype.depthwiseConv2DDerInput=function(t,e,n){Fh([t,e],"depthwiseConv2DDerInput");for(var r=rr(n.inShape,"float32"),i=r.values,a=r.strides,o=a[0],s=a[1],l=a[2],u=this.readSync(t.dataId),c=t.strides,h=c[0],d=c[1],p=c[2],f=this.readSync(e.dataId),m=e.strides,g=m[0],y=m[1],v=m[2],b=n.batchSize,w=n.filterHeight,_=n.filterWidth,x=n.inChannels,C=n.inHeight,S=n.inWidth,k=n.outHeight,E=n.outWidth,I=n.strideHeight,A=n.strideWidth,D=w-1-n.padInfo.top,T=_-1-n.padInfo.left,N=n.outChannels/x,R=0;R<b;++R)for(var O=0;O<x;++O)for(var F=0;F<C;++F)for(var M=F-D,P=Math.max(0,Math.ceil(M/I)),L=Math.min(k,(w+M)/I),z=0;z<S;++z){for(var V=z-T,B=Math.max(0,Math.ceil(V/A)),j=Math.min(E,(_+V)/A),U=0,W=P;W<L;++W)for(var H=W*I-M,q=B;q<j;++q)for(var G=h*R+d*W+p*q,$=g*(w-1-H)+y*(_-1-(q*A-V))+v*O,K=0;K<N;++K)U+=u[G+(O*N+K)]*f[$+K];i[o*R+s*F+l*z+O]=U}return r.toTensor()},e.prototype.depthwiseConv2DDerFilter=function(t,e,n){Fh([t,e],"depthwiseConv2DDerFilter");for(var r=n.strideHeight,i=n.strideWidth,a=n.filterHeight,o=n.filterWidth,s=rr(n.filterShape,"float32"),l=n.padInfo.left,u=n.padInfo.top,c=n.outChannels/n.inChannels,h=this.bufferSync(t),d=this.bufferSync(e),p=0;p<a;++p)for(var f=Math.max(0,Math.ceil((u-p)/r)),m=Math.min(n.outHeight,(n.inHeight+u-p)/r),g=0;g<o;++g)for(var y=Math.max(0,Math.ceil((l-g)/i)),v=Math.min(n.outWidth,(n.inWidth+l-g)/i),b=0;b<n.outChannels;++b){for(var w=Math.trunc(b/c),_=b%c,x=0,C=0;C<n.batchSize;++C)for(var S=f;S<m;++S)for(var k=p+S*r-u,E=y;E<v;++E)x+=h.get(C,k,g+E*i-l,w)*d.get(C,S,E,b);s.set(x,p,g,w,_)}return s.toTensor()},e.prototype.tile=function(t,e){return Fh(t,"tile"),Fa(this.bufferSync(t),e)},e.prototype.pad=function(t,e,n){Fh(t,"pad");var r=e.map((function(e,n){return e[0]+t.shape[n]+e[1]})),i=e.map((function(t){return t[0]})),a=this.bufferSync(t),o=rr(r,t.dtype);0!==n&&o.values.fill(n);for(var s=0;s<t.size;s++){var l=a.indexToLoc(s),u=l.map((function(t,e){return t+i[e]}));o.set.apply(o,[a.get.apply(a,l)].concat(u))}return o.toTensor()},e.prototype.gather=function(t,e,n){Fh([t,e],"gather");var r=t.shape.slice(),i=this.readSync(e.dataId);r[n]=i.length;for(var a=rr(r,t.dtype),o=this.bufferSync(t),s=0;s<a.size;++s){var l=a.indexToLoc(s),u=l.slice();u[n]=i[l[n]];var c=o.locToIndex(u);a.values[s]=o.values[c]}return a.toTensor()},e.prototype.batchToSpaceND=function(t,e,n){Fh([t],"batchToSpaceND");var r=e.reduce((function(t,e){return t*e})),i=gr(t.shape,e,r),a=yr(i.length,e.length),o=vr(t.shape,e,r),s=br(n,e.length),l=wr(o,n,e.length);return ea(t.reshape(i),a).reshape(o).slice(s,l)},e.prototype.spaceToBatchND=function(t,e,n){Fh([t],"spaceToBatchND");var r=e.reduce((function(t,e){return t*e})),i=[[0,0]];i.push.apply(i,n);for(var a=1+e.length;a<t.shape.length;++a)i.push([0,0]);var o=t.pad(i),s=gr(o.shape,e,r,!1),l=yr(s.length,e.length,!1),u=vr(o.shape,e,r,!1);return ea(o.reshape(s),l).reshape(u)},e.prototype.maxPool=function(t,e){return Fh(t,"maxPool"),Mh(this.readSync(t.dataId),0,t.dtype,t.strides,e,"max").toTensor()},e.prototype.maxPoolBackprop=function(t,e,n,r){Fh([e,n],"maxPoolBackprop");for(var i=this.readSync(e.dataId),a=rr(r.outShape,e.dtype,Ph(i,e.shape,e.dtype,r).values),o=r.strideHeight,s=r.strideWidth,l=r.dilationHeight,u=r.dilationWidth,c=r.effectiveFilterHeight,h=r.effectiveFilterWidth,d=h-1-r.padInfo.left,p=c-1-r.padInfo.top,f=rr(e.shape,"float32"),m=this.bufferSync(t),g=0;g<r.batchSize;++g)for(var y=0;y<r.inChannels;++y)for(var v=0;v<r.inHeight;++v)for(var b=0;b<r.inWidth;++b){for(var w=v-p,_=b-d,x=0,C=0;C<c;C+=l){var S=(w+C)/o;if(!(S<0||S>=r.outHeight||Math.floor(S)!==S))for(var k=0;k<h;k+=u){var E=(_+k)/s;if(!(E<0||E>=r.outWidth||Math.floor(E)!==E)){var I=c*h-1-a.get(g,S,E,y)===C*h+k?1:0;0!==I&&(x+=m.get(g,S,E,y)*I)}}}f.set(x,g,v,b,y)}return f.toTensor()},e.prototype.avgPoolBackprop=function(t,e,n){Fh([t,e],"avgPoolBackprop");for(var r=n.strideHeight,i=n.strideWidth,a=n.filterHeight,o=n.filterWidth,s=n.dilationHeight,l=n.dilationWidth,u=n.effectiveFilterHeight,c=n.effectiveFilterWidth,h=c-1-n.padInfo.left,d=u-1-n.padInfo.top,p=rr(e.shape,"float32"),f=1/(a*o),m=this.bufferSync(t),g=0;g<n.batchSize;++g)for(var y=0;y<n.inChannels;++y)for(var v=0;v<n.inHeight;++v)for(var b=0;b<n.inWidth;++b){for(var w=v-d,_=b-h,x=0,C=0;C<u;C+=s){var S=(w+C)/r;if(!(S<0||S>=n.outHeight||Math.floor(S)!==S))for(var k=0;k<c;k+=l){var E=(_+k)/i;E<0||E>=n.outWidth||Math.floor(E)!==E||(x+=m.get(g,S,E,y))}}p.set(x*f,g,v,b,y)}return p.toTensor()},e.prototype.pool3d=function(t,e,n){Fh(t,"pool3d");for(var r=e.strideDepth,i=e.strideHeight,a=e.strideWidth,o=e.dilationDepth,s=e.dilationHeight,l=e.dilationWidth,u=e.effectiveFilterDepth,c=e.effectiveFilterHeight,h=e.effectiveFilterWidth,d=e.padInfo.front,p=e.padInfo.top,f=e.padInfo.left,m="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,g=this.readSync(t.dataId),y=rr(e.outShape,t.dtype),v=y.values,b=e.outShape[1]*e.outShape[2]*e.outShape[3]*e.outShape[4],w=e.outShape[2]*e.outShape[3]*e.outShape[4],_=e.outShape[3]*e.outShape[4],x=e.outShape[4],C=0;C<e.batchSize;++C)for(var S=C*b,k=C*t.strides[0],E=0;E<e.inChannels;++E)for(var I=0;I<e.outDepth;++I){for(var A=I*r-d,D=A;D<0;)D+=o;for(var T=Math.min(e.inDepth,u+A),N=S+I*w,R=0;R<e.outHeight;++R){for(var O=R*i-p,F=O;F<0;)F+=s;for(var M=Math.min(e.inHeight,c+O),P=N+R*_,L=0;L<e.outWidth;++L){for(var z=L*a-f,V=z;V<0;)V+=l;for(var B=Math.min(e.inWidth,h+z),j=P+L*x,U=m,W=0,H=0,q=D;q<T;q+=o){for(var G=k+q*t.strides[1],$=F;$<M;$+=s){for(var K=G+$*t.strides[2],X=V;X<B;X+=l){var Y=g[K+X*t.strides[3]+E];if("max"===n&&Y>U?U=Y:"avg"===n&&(W+=Y,H++),isNaN(U))break}if(isNaN(U))break}if(isNaN(U))break}v[j+E]="avg"===n?W/H:U}}}return y.toTensor()},e.prototype.avgPool3d=function(t,e){return Fh(t,"avgPool3d"),this.pool3d(t,e,"avg").toFloat()},e.prototype.avgPool3dBackprop=function(t,e,n){Fh([t,e],"avgPool3dBackprop");for(var r=n.strideDepth,i=n.strideHeight,a=n.strideWidth,o=n.filterDepth,s=n.filterHeight,l=n.filterWidth,u=n.dilationDepth,c=n.dilationHeight,h=n.dilationWidth,d=n.effectiveFilterDepth,p=n.effectiveFilterHeight,f=n.effectiveFilterWidth,m=d-1-n.padInfo.front,g=f-1-n.padInfo.left,y=p-1-n.padInfo.top,v=rr(e.shape,"float32"),b=1/(o*s*l),w=this.bufferSync(t),_=0;_<n.batchSize;++_)for(var x=0;x<n.inChannels;++x)for(var C=0;C<n.inDepth;++C)for(var S=0;S<n.inHeight;++S)for(var k=0;k<n.inWidth;++k){for(var E=C-m,I=S-y,A=k-g,D=0,T=0;T<d;T+=u){var N=(E+T)/r;if(!(N<0||N>=n.outDepth||Math.floor(N)!==N))for(var R=0;R<p;R+=c){var O=(I+R)/i;if(!(O<0||O>=n.outHeight||Math.floor(O)!==O))for(var F=0;F<f;F+=h){var M=(A+F)/a;M<0||M>=n.outWidth||Math.floor(M)!==M||(D+=w.get(_,N,O,M,x))}}}v.set(D*b,_,C,S,k,x)}return v.toTensor()},e.prototype.maxPool3d=function(t,e){return Fh(t,"maxPool3d"),this.pool3d(t,e,"max").toFloat()},e.prototype.maxPool3dPositions=function(t,e){for(var n=rr(e.outShape,"int32"),r=e.strideDepth,i=e.strideHeight,a=e.strideWidth,o=e.dilationDepth,s=e.dilationHeight,l=e.dilationWidth,u=e.effectiveFilterDepth,c=e.effectiveFilterHeight,h=e.effectiveFilterWidth,d=e.padInfo.front,p=e.padInfo.top,f=e.padInfo.left,m=this.bufferSync(t),g=0;g<e.batchSize;++g)for(var y=0;y<e.inChannels;++y)for(var v=0;v<e.outDepth;++v){for(var b=v*r-d,w=b;w<0;)w+=o;for(var _=Math.min(e.inDepth,u+b),x=0;x<e.outHeight;++x){for(var C=x*i-p,S=C;S<0;)S+=s;for(var k=Math.min(e.inHeight,c+C),E=0;E<e.outWidth;++E){for(var I=E*a-f,A=I;A<0;)A+=l;for(var D=Math.min(e.inWidth,h+I),T=Number.NEGATIVE_INFINITY,N=-1,R=w;R<_;R+=o)for(var O=R-b,F=S;F<k;F+=s)for(var M=F-C,P=A;P<D;P+=l){var L=P-I,z=m.get(g,R,F,P,y);z>=T&&(T=z,N=O*c*h+M*c+L)}n.set(N,g,v,x,E,y)}}}return n.toTensor()},e.prototype.maxPool3dBackprop=function(t,e,n,r){Fh([e,n],"maxPool3dBackprop");for(var i=this.maxPool3dPositions(e,r),a=r.strideDepth,o=r.strideHeight,s=r.strideWidth,l=r.dilationDepth,u=r.dilationHeight,c=r.dilationWidth,h=r.effectiveFilterDepth,d=r.effectiveFilterHeight,p=r.effectiveFilterWidth,f=h-1-r.padInfo.front,m=p-1-r.padInfo.left,g=d-1-r.padInfo.top,y=rr(e.shape,"float32"),v=this.bufferSync(i),b=this.bufferSync(t),w=0;w<r.batchSize;++w)for(var _=0;_<r.inChannels;++_)for(var x=0;x<r.inDepth;++x)for(var C=0;C<r.inHeight;++C)for(var S=0;S<r.inWidth;++S){for(var k=x-f,E=C-g,I=S-m,A=0,D=0;D<h;D+=l){var T=(k+D)/a;if(!(T<0||T>=r.outDepth||Math.floor(T)!==T))for(var N=0;N<d;N+=u){var R=(E+N)/o;if(!(R<0||R>=r.outHeight||Math.floor(R)!==R))for(var O=0;O<p;O+=c){var F=(I+O)/s;if(!(F<0||F>=r.outWidth||Math.floor(F)!==F)){var M=h*d*p-1-v.get(w,T,R,F,_)===D*d*p+N*p+O?1:0;0!==M&&(A+=b.get(w,T,R,F,_)*M)}}}}y.set(A,w,x,C,S,_)}return y.toTensor()},e.prototype.cast=function(t,e){return ya(t,e,this)},e.prototype.reshape=function(t,e){return va(t,e)},e.prototype.avgPool=function(t,e){return Fh(t,"avgPool"),Fh(t,"maxPool"),Mh(this.readSync(t.dataId),0,t.dtype,t.strides,e,"avg").toTensor().toFloat()},e.prototype.resizeBilinear=function(t,e,n,r){Fh(t,"resizeBilinear");for(var i=t.shape,a=i[0],o=i[1],s=i[2],l=i[3],u=this.readSync(t.dataId),c=new Float32Array(T([a,e,n,l])),h=[r&&e>1?o-1:o,r&&n>1?s-1:s],d=[r&&e>1?e-1:e,r&&n>1?n-1:n],p=0,f=h[0]/d[0],m=h[1]/d[1],g=0;g<a;g++)for(var y=0;y<e;y++)for(var v=f*y,b=Math.floor(v),w=v-b,_=Math.min(o-1,Math.ceil(v)),x=g*t.strides[0]+b*t.strides[1],C=g*t.strides[0]+_*t.strides[1],S=0;S<n;S++)for(var k=m*S,E=Math.floor(k),I=k-E,A=Math.min(s-1,Math.ceil(k)),D=x+E*t.strides[2],N=C+E*t.strides[2],R=x+A*t.strides[2],O=C+A*t.strides[2],F=0;F<l;F++){var M=u[D+F],P=u[N+F],L=M+(u[R+F]-M)*I;c[p++]=L+(P+(u[O+F]-P)*I-L)*w}return Fn(c,[a,e,n,l])},e.prototype.resizeBilinearBackprop=function(t,e,n){Fh([t,e],"resizeBilinearBackprop");for(var r=e.shape,i=r[0],a=r[1],o=r[2],s=r[3],l=t.shape,u=l[1],c=l[2],h=new Float32Array(i*a*o*s),d=[n&&u>1?a-1:a,n&&c>1?o-1:o],p=[n&&u>1?u-1:u,n&&c>1?c-1:c],f=d[0]/p[0],m=d[1]/p[1],g=this.readSync(t.dataId),y=0,v=0;v<i;v++)for(var b=v*e.strides[0],w=0;w<u;w++)for(var _=w*f,x=Math.floor(_),C=Math.min(Math.ceil(_),a-1),S=b+x*e.strides[1],k=b+C*e.strides[1],E=_-x,I=1-E,A=0;A<c;A++)for(var D=A*m,T=Math.floor(D),N=Math.min(Math.ceil(D),o-1),R=D-T,O=1-R,F=S+T*e.strides[2],M=S+N*e.strides[2],P=k+T*e.strides[2],L=k+N*e.strides[2],z=I*O,V=I*R,B=E*O,j=E*R,U=0;U<s;U++){var W=g[y++];h[F+U]+=W*z,h[M+U]+=W*V,h[P+U]+=W*B,h[L+U]+=W*j}return Bn(h,[i,o,a,s],e.dtype)},e.prototype.resizeNearestNeighbor=function(t,e,n,r){Fh(t,"resizeNearestNeighbor");for(var i=t.shape,a=i[0],o=i[1],s=i[2],l=i[3],u=this.readSync(t.dataId),c=new Float32Array(a*e*n*l),h=[r&&e>1?o-1:o,r&&n>1?s-1:s],d=[r&&e>1?e-1:e,r&&n>1?n-1:n],p=h[0]/d[0],f=h[1]/d[1],m=0,g=0;g<a;g++)for(var y=g*t.strides[0],v=0;v<e;v++)for(var b=p*v,w=y+Math.min(o-1,r?Math.round(b):Math.floor(b))*t.strides[1],_=0;_<n;_++)for(var x=f*_,C=w+Math.min(s-1,r?Math.round(x):Math.floor(x))*t.strides[2],S=0;S<l;S++)c[m++]=u[C+S];return Fn(c,[a,e,n,l],t.dtype)},e.prototype.resizeNearestNeighborBackprop=function(t,e,n){Fh([t,e],"resizeNearestNeighborBackprop");for(var r=e.shape,i=r[0],a=r[1],o=r[2],s=r[3],l=t.shape,u=l[1],c=l[2],h=new Float32Array(i*a*o*s),d=this.readSync(t.dataId),p=[n&&u>1?a-1:a,n&&c>1?o-1:o],f=[n&&u>1?u-1:u,n&&c>1?c-1:c],m=p[0]/f[0],g=p[1]/f[1],y=1/m,v=1/g,b=2*Math.ceil(y)+2,w=2*Math.ceil(v)+2,_=0;_<i;_++)for(var x=_*e.strides[0],C=0;C<a;C++)for(var S=x+C*e.strides[1],k=Math.floor(C*y),E=Math.floor(k-b/2),I=0;I<o;I++)for(var A=S+I*e.strides[2],D=Math.floor(I*v),T=Math.floor(D-w/2),N=0;N<s;N++){for(var R=0,O=0;O<b;O++){var F=O+E;if(!(F<0||F>=u)){var M=x+F*t.strides[1],P=F*m;if(C===Math.min(a-1,n?Math.round(P):Math.floor(P)))for(var L=0;L<w;L++){var z=L+T;if(!(z<0||z>=c)){var V=M+z*t.strides[2],B=z*g;I===Math.min(o-1,n?Math.round(B):Math.floor(B))&&(R+=d[V+N])}}}}h[A+N]=R}return Bn(h,e.shape,e.dtype)},e.prototype.batchNormalization=function(t,e,n,r,i,a){Fh([t,e,n,i,a],"batchNorm");for(var o=this.readSync(t.dataId),s=this.readSync(e.dataId),l=this.readSync(n.dataId),u=i?this.readSync(i.dataId):new Float32Array([1]),c=a?this.readSync(a.dataId):new Float32Array([0]),h=new Float32Array(o.length),d=c.length,p=u.length,f=l.length,m=s.length,g=0,y=0,v=0,b=0,w=0;w<o.length;++w)h[w]=c[g++]+(o[w]-s[y++])*u[v++]/Math.sqrt(l[b++]+r),g>=d&&(g=0),y>=m&&(y=0),v>=p&&(v=0),b>=f&&(b=0);return Bn(h,t.shape)},e.prototype.localResponseNormalization4D=function(t,e,n,r,i){Fh(t,"localResponseNormalization4D");var a=t.shape[3],o=a-1,s=this.readSync(t.dataId),l=t.size,u=new Float32Array(l);function c(t){for(var n=t%a,r=t-n+Math.max(0,n-e),i=t-n+Math.min(n+e,o),l=0;r<=i;r++){var u=s[r];l+=u*u}return l}for(var h=0;h<l;h++){var d=c(h),p=s[h]*Math.pow(n+r*d,-i);u[h]=p}return Bn(u,t.shape)},e.prototype.LRNGrad=function(t,e,n,r,i,a,o){Fh(t,"LRNGrad");for(var s=t.shape[3],l=this.readSync(t.dataId),u=this.readSync(e.dataId),c=this.readSync(n.dataId),h=new Float32Array(t.size),d=t.size,p=0;p<d;p++){for(var f=p%s,m=p-f+Math.max(0,f-r),g=p-f+Math.min(s,f+r+1),y=0,v=m;v<g;v++)y+=Math.pow(u[v],2);for(y=a*y+i,v=m;v<g;v++){var b=-2*a*o*u[v]*c[p]/y;p===v&&(b+=Math.pow(y,-o)),h[v]+=b*=l[p]}}return Bn(h,t.shape)},e.prototype.multinomial=function(t,e,n,r){Fh(t,"multinomial");for(var i=e?t:Ji(t),a=i.shape[0],o=i.shape[1],s=qn([a,n],"int32"),l=this.readSync(s.dataId),u=this.readSync(i.dataId),c=0;c<a;++c){var h=c*o,d=new Float32Array(o-1);d[0]=u[h];for(var p=1;p<d.length;++p)d[p]=d[p-1]+u[h+p];for(var f=bl(r.toString()),m=c*n,g=0;g<n;++g){var y=f();l[m+g]=d.length;for(var v=0;v<d.length;v++)if(y<d[v]){l[m+g]=v;break}}}return s},e.prototype.oneHot=function(t,e,n,r){Fh(t,"oneHot");var i=new Float32Array(t.size*e);i.fill(r);for(var a=this.readSync(t.dataId),o=0;o<t.size;++o)a[o]>=0&&a[o]<e&&(i[o*e+a[o]]=n);return zn(i,[t.size,e],"int32")},e.prototype.nonMaxSuppression=function(t,e,n,r,i){return Fh(t,"nonMaxSuppression"),Ia(this.readSync(t.dataId),this.readSync(e.dataId),n,r,i)},e.prototype.fft=function(t){return this.fftBatch(t,!1)},e.prototype.ifft=function(t){return this.fftBatch(t,!0)},e.prototype.fftBatch=function(t,e){for(var n=t.shape[0],r=t.shape[1],i=rr(t.shape,"float32"),a=rr(t.shape,"float32"),o=Rn(t).as2D(n,r),s=On(t).as2D(n,r),l=0;l<n;l++)for(var u=o.slice([l,0],[1,r]),c=s.slice([l,0],[1,r]),h=Nn(u,c),d=this.readSync(this.fftImpl(h,e).dataId),p=0;p<r;p++){var f=xa(d,p);i.values[l*r+p]=f.real,a.values[l*r+p]=f.imag}return Nn(i.toTensor(),a.toTensor()).as2D(n,r)},e.prototype.fftImpl=function(t,e){var n=t.as1D(),r=n.size;if(this.isExponentOf2(r)){var i=this.fftRadix2(n,r,e).as2D(t.shape[0],t.shape[1]);return e&&(i=Nn(Rn(i).div(Pn(r)),On(i).div(Pn(r)))),i}var a=this.readSync(t.dataId),o=function(t){for(var e=new Float32Array(t.length/2),n=new Float32Array(t.length/2),r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}(this.fourierTransformByMatmul(a,r,e));return Nn(o.real,o.imag).as2D(t.shape[0],t.shape[1])},e.prototype.isExponentOf2=function(t){return 0==(t&t-1)},e.prototype.fftRadix2=function(t,e,n){if(1===e)return t;var r=this.readSync(t.dataId),i=e/2,a=function(t){for(var e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e),i=0;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}(r),o=Nn(a.real,a.imag).as1D(),s=function(t){for(var e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e),i=2;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}(r),l=Nn(s.real,s.imag).as1D();o=this.fftRadix2(o,i,n),l=this.fftRadix2(l,i,n);var u=function(t,e){for(var n=new Float32Array(t/2),r=new Float32Array(t/2),i=0;i<Math.ceil(t/2);i++){var a=(e?2:-2)*Math.PI*(i/t);n[i]=Math.cos(a),r[i]=Math.sin(a)}return{real:n,imag:r}}(e,n),c=Nn(u.real,u.imag).mul(l),h=o.add(c),d=o.sub(c),p=Rn(h).concat(Rn(d)),f=On(h).concat(On(d));return Nn(p,f).as1D()},e.prototype.fourierTransformByMatmul=function(t,e,n){for(var r=new Float32Array(2*e),i=0;i<e;i++){for(var a=0,o=0,s=0;s<e;s++){var l=Sa(i*s,e,n),u=xa(t,s);a+=u.real*l.real-u.imag*l.imag,o+=u.real*l.imag+u.imag*l.real}n&&(a/=e,o/=e),Ca(r,a,o,i)}return r},e.prototype.depthToSpace=function(t,e,n){E("NHWC"===n,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+n})),E(e>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+e}));for(var r=t.shape[0],i=t.shape[1],a=t.shape[2],o=t.shape[3],s=i*e,l=a*e,u=o/(e*e),c=this.readSync(t.dataId),h=new Float32Array(r*s*l*u),d=0,p=0;p<r;++p)for(var f=0;f<s;++f)for(var m=Math.floor(f/e),g=f%e,y=0;y<l;++y)for(var v=Math.floor(y/e),b=(g*e+y%e)*u,w=0;w<u;++w)h[d++]=c[w+b+o*(v+a*(m+i*p))];return Bn(h,[r,s,l,u])},e.prototype.broadcastedBinaryOp=function(t,e,n,r){var i=Nr(t.shape,e.shape),a=rr(i,n),o=this.readSync(t.dataId),s=this.readSync(e.dataId),l=Dr(t.shape,i),u=Dr(e.shape,i),c=a.values;if(l.length+u.length===0)for(var h=0;h<c.length;++h)c[h]=r(o[h%o.length],s[h%s.length]);else{var d=this.bufferSync(t),p=this.bufferSync(e),f=function(n){var i=a.indexToLoc(n),h=i.slice(-t.rank);l.forEach((function(t){return h[t]=0}));var f=d.locToIndex(h),m=i.slice(-e.rank);u.forEach((function(t){return m[t]=0}));var g=p.locToIndex(m);c[n]=r(o[f],s[g])};for(h=0;h<c.length;++h)f(h)}return a.toTensor()},e.prototype.broadcastedBinaryComplexOp=function(t,e,n){var r=Nr(t.shape,e.shape),i=rr(r,"float32"),a=rr(r,"float32"),o=this.readSync(t.dataId),s=this.readSync(e.dataId),l=Dr(t.shape,r),u=Dr(e.shape,r),c=i.values,h=a.values;if(l.length+u.length===0)for(var d=0;d<c.length;d++){var p=d%o.length,f=d%s.length,m=n(o[2*p],o[2*p+1],s[2*f],s[2*f+1]);c[d]=m.real,h[d]=m.imag}else{var g=this.bufferSync(this.data.get(t.dataId).complexTensors.real),y=this.bufferSync(this.data.get(e.dataId).complexTensors.real),v=function(r){var a=i.indexToLoc(r),d=a.slice(-t.rank);l.forEach((function(t){return d[t]=0}));var p=g.locToIndex(d),f=a.slice(-e.rank);u.forEach((function(t){return f[t]=0}));var m=y.locToIndex(f),v=n(o[2*p],o[2*p+1],s[2*m],s[2*m+1]);c[r]=v.real,h[r]=v.imag};for(d=0;d<c.length;d++)v(d)}return this.complex(i.toTensor(),a.toTensor())},e.prototype.split=function(t,e,n){return Oa(t,e,n)},e.prototype.dispose=function(){},e.prototype.floatPrecision=function(){return 32},e.prototype.epsilon=function(){return 1e-7},e.prototype.cropAndResize=function(t,e,n,r,i,a){for(var o=t.shape,s=o[0],l=o[1],u=o[2],c=o[3],h=e.shape[0],d=r[0],p=r[1],f=rr([h,d,p,c],"float32"),m=this.readSync(e.dataId),g=this.readSync(n.dataId),y=this.readSync(t.dataId),v=t.strides,b=f.strides,w=0;w<h;w++){var _=4*w,x=m[_],C=m[_+1],S=m[_+2],k=m[_+3],E=g[w];if(!(E>=s))for(var I=d>1?(S-x)*(l-1)/(d-1):0,A=p>1?(k-C)*(u-1)/(p-1):0,D=0;D<d;D++){var T=d>1?x*(l-1)+D*I:.5*(x+S)*(l-1);if(T<0||T>l-1)for(var N=0;N<p;N++)for(var R=0;R<c;R++){var O=R+N*b[2]+D*b[1]+w*b[0];f.values[O]=a}else if("bilinear"===i){var F=Math.floor(T),M=Math.ceil(T),P=T-F;for(N=0;N<p;N++)if((q=p>1?C*(u-1)+N*A:.5*(C+k)*(u-1))<0||q>u-1)for(R=0;R<c;R++)f.values[O=R+N*b[2]+D*b[1]+w*b[0]]=a;else{var L=Math.floor(q),z=Math.ceil(q),V=q-L;for(R=0;R<c;R++){var B=y[O=R+L*v[2]+F*v[1]+E*v[0]],j=y[O=R+z*v[2]+F*v[1]+E*v[0]],U=y[O=R+L*v[2]+M*v[1]+E*v[0]],W=B+(j-B)*V,H=U+(y[O=R+z*v[2]+M*v[1]+E*v[0]]-U)*V;f.values[O=R+N*b[2]+D*b[1]+w*b[0]]=W+(H-W)*P}}}else for(N=0;N<p;++N){var q;if((q=p>1?C*(u-1)+N*A:.5*(C+k)*(u-1))<0||q>u-1)for(R=0;R<c;R++)f.values[O=R+N*b[2]+D*b[1]+w*b[0]]=a;else{var G=Math.round(q),$=Math.round(T);for(R=0;R<c;R++)f.values[R+N*b[2]+D*b[1]+w*b[0]]=y[R+G*v[2]+$*v[1]+E*v[0]]}}}}return f.toTensor()},e.prototype.sparseToDense=function(t,e,n,r){var i=Pi(0,t,n);return this.scatter(t,e,n,i.outputSize,i.sliceSize,i.numUpdates,i.sliceRank,i.strides,r,!1)},e.prototype.gatherND=function(t,e){var n=e.shape,r=n[n.length-1],i=Ti(t,e),a=i[0],o=i[1],s=i[2],l=i[3];if(0===o)return Fn([],a,t.dtype);for(var u=new vt([o,s],t.dtype),c=this.readSync(e.dataId),h=this.readSync(t.dataId),d=0;d<o;d++){for(var p=[],f=0,m=0;m<r;m++){var g=c[d*r+m];f+=g*l[m],p.push(g)}if(f<0||f>=t.size/s)throw new Error("Invalid indices: "+p+" does not index into "+t.shape);for(var y=0;y<s;y++)u.values[d*s+y]=h[f*s+y]}return u.toTensor().reshape(a)},e.prototype.scatterND=function(t,e,n){var r=Pi(0,t,n),i=r.sliceRank,a=r.numUpdates,o=r.sliceSize,s=r.strides,l=r.outputSize,u=Pn(0);return this.scatter(t,e,n,l,o,a,i,s,u,!0)},e.prototype.fill=function(t,e,n){var r=j(n=n||Z(e),T(t));return r.fill(e),Bt.makeTensor(r,t,n,this)},e.prototype.onesLike=function(t){if("string"===t.dtype)throw new Error("onesLike is not supported for string tensors");return this.fill(t.shape,1,t.dtype)},e.prototype.zerosLike=function(t){var e=j(t.dtype,T(t.shape));return this.makeOutput(e,t.shape,t.dtype)},e.prototype.linspace=function(t,e,n){return ba(t,e,n)},e.prototype.scatter=function(t,e,n,r,i,a,o,s,l,u){var c=[r/i,i],h=this.readSync(t.dataId),d=this.readSync(e.dataId);if(0===r)return Fn([],n,e.dtype);var p=new vt(c,e.dtype);p.values.fill(this.readSync(l.dataId)[0]);for(var f=0;f<a;f++){for(var m=[],g=0,y=0;y<o;y++){var v=h[f*o+y];m.push(v),g+=v*s[y]}if(g<0||g>=r/i)throw new Error("Invalid indices: "+m+" does not index into "+n);for(var b=0;b<i;b++)u?p.values[g*i+b]+=d[f*i+b]:p.values[g*i+b]=0===e.rank?d[0]:d[f*i+b]}return p.toTensor().reshape(n)},e}(ra);function Vh(t,e){return{kernelName:t,backendName:"cpu",kernelFunc:function(n){var r=n.inputs,i=r.a,a=r.b,o=n.backend;Fh([i,a],t);var s=o.data.get(i.dataId).values,l=o.data.get(a.dataId).values,u=e(i.shape,a.shape,s,l,i.dtype),c=u[1];return{dataId:o.write(u[0],c,i.dtype),shape:c,dtype:i.dtype}}}}function Bh(t){return function(e,n,r,i,a){var o=Nr(e,n),s=o.length,l=tt(o),u=B(a,T(o)),c=e.length,h=n.length,d=tt(e),p=tt(n),f=Dr(e,o),m=Dr(n,o);if(f.length+m.length===0)for(var g=0;g<u.length;++g)u[g]=t(r[g%r.length],i[g%i.length]);else{var y=function(e){var n=ct(e,s,l),a=n.slice(-c);f.forEach((function(t){return a[t]=0}));var o=ut(a,c,d),g=n.slice(-h);m.forEach((function(t){return g[t]=0}));var y=ut(g,h,p);u[e]=t(r[o],i[y])};for(g=0;g<u.length;++g)y(g)}return[u,o]}}Bt.registerBackend("cpu",(function(){return new zh}),1);var jh=Bh((function(t,e){return t/e})),Uh=Vh(_r,jh),Wh={kernelName:"MaxPoolWithArgmax",backendName:"cpu",kernelFunc:function(t){var e=t.attrs,n=t.inputs.x,r=e.filterSize,i=e.strides,a=e.pad,o=e.includeBatchInIndex,s=t.backend;Fh(n,"MaxPoolWithArgmax");var l=s.data.get(n.dataId).values,u=aa(n.shape,r,i,[1,1],a),c=function(t,e,n,r,i){var a=Mh(t,0,n,tt(e),i,"max"),o=Ph(t,e,n,i,!0,r);return[a.values,o.values]}(l,n.shape,n.dtype,o,u),h=c[1],d=s.write(c[0],u.outShape,n.dtype),p=s.write(h,u.outShape,n.dtype);return[{dataId:d,shape:u.outShape,dtype:n.dtype},{dataId:p,shape:u.outShape,dtype:"int32"}]}},Hh={kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.attrs,r=e.boxes,i=e.scores,a=n.maxOutputSize,o=n.iouThreshold,s=n.scoreThreshold,l=n.softNmsSigma,u=t.backend;Fh(r,"NonMaxSuppressionWithScore");var c=Aa(u.data.get(r.dataId).values,u.data.get(i.dataId).values,a,o,s,l);return[c.selectedIndices,c.selectedScores]}},qh={kernelName:"Square",backendName:"cpu",kernelFunc:function(t){var e=t.inputs.x,n=t.backend;Fh(e,"square");for(var r=n.data.get(e.dataId).values,i=new Float32Array(r.length),a=0;a<r.length;++a){var o=r[a];i[a]=o*o}return{dataId:n.write(i,e.shape,e.dtype),shape:e.shape,dtype:e.dtype}}},Gh=Bh((function(t,e){var n=t-e;return n*n}));function $h(t,e,n,r,i){for(var a=T(e),o=e.length,s=tt(e),l=tt(i),u=B(n,T(i)),c=0;c<a;++c){for(var h=ct(c,o,s),d=new Array(h.length),p=0;p<d.length;p++)d[p]=h[r[p]];u[ut(d,o,l)]=t[c]}return u}for(var Kh=0,Xh=[Hh,qh,Vh(xr,Gh),Uh,{kernelName:"Transpose",backendName:"cpu",kernelFunc:function(t){var e=t.inputs.x,n=t.attrs.perm,r=t.backend;Fh(e,"transpose");for(var i=new Array(e.shape.length),a=0;a<i.length;a++)i[a]=e.shape[n[a]];var o=$h(r.data.get(e.dataId).values,e.shape,e.dtype,n,i);return{dataId:r.write(o,i,e.dtype),shape:i,dtype:e.dtype}}},Wh];Kh<Xh.length;Kh++)y(Xh[Kh]);for(var Yh,Zh=function(t){this.variableNames=["A"];var e=Ua(),n=t[0],r=t[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+r+".0, "+n+".0);\n\n        vec4 values = "+e.texture2D+"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    "},Qh=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var e=Ua(),n=t[0],r=t[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2("+r+".0, "+n+".0);\n            vec4 values = "+e.texture2D+"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        "+e.output+" = result;\n      }\n    "},Jh=function(t,e){this.variableNames=["A"];for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[e[r]];this.outputShape=n,this.rank=n.length;var i=Ka(this.rank),a=function(t){var e=t.length;if(e>6)throw Error("Transpose for rank "+e+" is not yet supported");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e),i=0;i<t.length;i++)r[t[i]]=n[i];return r.join()}(e);this.userCode="\n    void main() {\n      "+i+" resRC = getOutputCoords();\n      setOutput(getA("+a+"));\n    }\n    "},td=function(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[e[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var i=Ka(this.rank),a=Ba("rc",this.rank),o=new Array(this.rank);for(r=0;r<e.length;r++)o[e[r]]=a[r];var s="vec2("+o.slice(-2).join()+")",l="++"+a[this.rank-1]+" < "+n[this.rank-1],u="getChannel(getA("+o.join()+"), "+s+")";this.userCode="\n    void main() {\n      "+i+" rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = "+u+";\n      if("+l+") {\n        result[1] = "+u+";\n      }\n      --"+a[this.rank-1]+";\n      if(++"+a[this.rank-2]+" < "+n[this.rank-2]+") {\n        result[2] = "+u+";\n        if("+l+") {\n          result[3] = "+u+";\n        }\n      }\n      setOutput(result);\n    }\n    "},ed=0,nd=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(t){var e=t.backend,n=t.inputs.pixels,r="undefined"!=typeof HTMLVideoElement&&n instanceof HTMLVideoElement,i="undefined"!=typeof HTMLImageElement&&n instanceof HTMLImageElement,a=r?[n.videoWidth,n.videoHeight]:[n.width,n.height],o=a[0],s=a[1],l=[s,o],u=[s,o,t.attrs.numChannels];(i||r)&&(null==Yh&&(Yh=document.createElement("canvas").getContext("2d")),Yh.canvas.width=o,Yh.canvas.height=s,Yh.drawImage(n,0,0,o,s),n=Yh.canvas);var h=e.makeTensorInfo(l,"int32");e.texData.get(h.dataId).usage=Ht.PIXELS,e.gpgpu.uploadPixelDataToTexture(e.getTexture(h.dataId),n);var d=c().getBool("WEBGL_PACK")?new Qh(u):new Zh(u),p=e.runWebGLProgram(d,[h],"int32");return e.disposeData(h.dataId),p}},{kernelName:_r,backendName:"webgl",kernelFunc:function(t){var e=t.inputs;return function(t,e,n){var r=new so("\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",t.shape,e.shape);return c().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&(r=new uo("\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",t.shape,e.shape,!0)),n.runWebGLProgram(r,[t,e],"float32")}(e.a,e.b,t.backend)}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs;mn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var i=e.scores,a=r.maxOutputSize,o=r.iouThreshold,s=r.scoreThreshold,l=r.softNmsSigma,u=n,c=Aa(u.readSync(e.boxes.dataId),u.readSync(i.dataId),a,o,s,l);return[c.selectedIndices,c.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(t){var e=t.inputs.x,n=t.backend,r=new Us(e.shape,"return x * x;");return n.runWebGLProgram(r,[e],e.dtype)}},{kernelName:xr,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=e.a,r=e.b,i=t.backend,a=c().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new uo("return (a - b) * (a - b);",n.shape,r.shape):new so("return (a - b) * (a - b);",n.shape,r.shape);return i.compileAndRun(a,[n,r])}},{kernelName:"Transpose",backendName:"webgl",kernelFunc:function(t){for(var e,n=t.inputs.x,r=t.attrs.perm,i=t.backend,a=new Array(n.shape.length),o=0;o<a.length;o++)a[o]=n.shape[r[o]];if(i.shouldExecuteOnCPU([n])){var s=$h(i.texData.get(n.dataId).values,n.shape,n.dtype,r,a);e=i.makeTensorInfo(a,n.dtype),i.texData.get(e.dataId).values=s}else e=function(t,e,n){var r=c().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new td(t.shape,e):new Jh(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}(n,r,i);return e}},{kernelName:"MaxPoolWithArgmax",backendName:"webgl",kernelFunc:function(t){var e=t.attrs,n=t.inputs.x,r=e.filterSize,i=e.strides,a=e.pad,o=e.includeBatchInIndex,s=t.backend;E(4===n.shape.length,(function(){return"Error in maxPool: input must be rank 4 but got rank "+n.shape.length+"."}));var l=[1,1];E(ma(i,l),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+l+"'"}));var u=aa(n.shape,r,i,l,a),c=function(t,e,n,r){var i=new ws(n,"max",!1),a=r.runWebGLProgram(i,[t],"float32");return i=new ws(n,"max",!0,!0,e),[a,r.runWebGLProgram(i,[t],"float32")]}(n,o,u,s);return[c[0],c[1]]}}];ed<nd.length;ed++)y(nd[ed]);for(var rd=0,id=[{kernelName:"Add",inputsToSave:["a","b"],gradFunc:function(t,e){var n=e[0],r=e[1],i=Nr(n.shape,r.shape);return{a:function(){var e=t,r=Tr(n.shape,i);return r.length>0&&(e=e.sum(r)),e.reshape(n.shape)},b:function(){var e=t,n=Tr(r.shape,i);return n.length>0&&(e=e.sum(n)),e.reshape(r.shape)}}}},{kernelName:"AddN",saveAllInputs:!0,gradFunc:function(t,e){var n={};return e.forEach((function(e,r){n[r]=function(){return t.clone()}})),n}},{kernelName:Cr,gradFunc:function(t,e,n){for(var r=n.inputShape,i=n.shape,a=Array.from(i),o=r.length-1;o>=0;o--)if(r[o]===i[o])a[o]=1;else if(1!==r[o])throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+i+"].");var s=[];for(o=0;o<a.length;o++)a[o]>1&&s.push(o);return{x:function(){return t.sum(s,!0)}}}},{kernelName:_r,inputsToSave:["a","b"],gradFunc:function(t,e){var n=e[0],r=e[1],i=Nr(n.shape,r.shape);return{a:function(){var e=Di(t,r.toFloat()),a=Tr(n.shape,i);return a.length>0?Sc(e,a).reshape(n.shape):e},b:function(){var e=t.mul(n.toFloat()),a=Tr(r.shape,i);a.length>0&&(e=Sc(e,a).reshape(r.shape));var o=pu(r);return Yr(Di(e,o.toFloat()))}}}},{kernelName:"FusedBatchNorm",inputsToSave:["x","mean","variance","scale"],gradFunc:function(t,e,n){var r=n.varianceEpsilon,i=e[0],a=e[1],o=e[2],s=e[3],l=xl(i),u=null==s?Pn(1):s,c=Tr(a.shape,l.shape),h=[];if(1===a.rank){for(var d=0;d<l.shape.length-1;++d)h.push(l.shape[d]);h.push(1)}var p=Ii(i,a),f=xi(t,u),m=Jr(Ar(o,Pn(r))),g=xi(xi(xi(m,m),m),Pn(-.5));return{x:function(){return cr(xi(xi(t,1===a.rank?ql(m.as4D(1,1,1,a.shape[0]),h):m),u),i.shape)},mean:function(){var t=xi(xi(m,Pn(-1)),f);return 1===a.rank&&(t=Sc(t,c)),cr(t,a.shape)},variance:function(){var t=xi(xi(g,p),f);return 1===a.rank&&(t=Sc(t,c)),cr(t,a.shape)},scale:function(){var e=xi(p,m),n=xi(t,e);return 1===a.rank&&(n=Sc(n,c)),cr(n,a.shape)},offset:function(){var e=t;return 1===a.rank&&(e=Sc(e,c)),cr(e,a.shape)}}}},{kernelName:kr,gradFunc:function(t){return{x:function(){return t.toFloat()}}}},{kernelName:Sr,inputsToSave:["indices"],gradFunc:function(t,e){var n=e[0];return{indices:function(){return qn(n.shape,"float32")}}}},{kernelName:Ir,inputsToSave:["x"],gradFunc:function(t,e,n){var r=e[0],i=n.paddings.map((function(t){return t[0]}));return{x:function(){return t.slice(i,r.shape)}}}},{kernelName:"Square",inputsToSave:["x"],gradFunc:function(t,e){var n=e[0];return{x:function(){return t.mul(n.toFloat().mul(2))}}}},{kernelName:xr,inputsToSave:["a","b"],gradFunc:function(t,e){var n=e[0],r=e[1],i=Pn(2);return{a:function(){return xi(t,xi(i,Ii(n,r)))},b:function(){return xi(t,xi(i,Ii(r,n)))}}}},{kernelName:Er,inputsToSave:["x"],gradFunc:function(t,e,n){var r=e[0],i=n.reps;return{x:function(){var e=Yn(r);if(1===r.rank)for(var n=0;n<i[0];++n)e=e.add(t.slice([n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(n=0;n<i[0];++n)for(var a=0;a<i[1];++a)e=e.add(t.slice([n*r.shape[0],a*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(n=0;n<i[0];++n)for(a=0;a<i[1];++a)for(var o=0;o<i[2];++o)e=e.add(t.slice([n*r.shape[0],a*r.shape[1],o*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+r.rank+" tensors yet.");for(n=0;n<i[0];++n)for(a=0;a<i[1];++a)for(o=0;o<i[2];++o)for(var s=0;s<i[3];++s)e=e.add(t.slice([n*r.shape[0],a*r.shape[1],o*r.shape[2],s*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return e}}}},{kernelName:"Transpose",gradFunc:function(t,e,n){var r=En(n.perm);return{x:function(){return ea(t,r)}}}}];rd<id.length;rd++)v(id[rd]);var ad=function(){function t(){}return t.prototype.fetch=function(t,e){return fetch(t,e)},t.prototype.now=function(){return performance.now()},t.prototype.encode=function(t,e){if("utf-8"!==e&&"utf8"!==e)throw new Error("Browser's encoder only supports utf-8, but got "+e);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)},t.prototype.decode=function(t,e){return new TextDecoder(e).decode(t)},t}();c().get("IS_BROWSER")&&c().setPlatform("browser",new ad);var od,sd=function(){function t(){this.util=n(3),this.textEncoder=new this.util.TextEncoder}return t.prototype.fetch=function(t,e){return null!=c().global.fetch?c().global.fetch(t,e):(null==od&&(od=n(2)),od(t,e))},t.prototype.now=function(){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6},t.prototype.encode=function(t,e){if("utf-8"!==e&&"utf8"!==e)throw new Error("Node built-in encoder only supports utf-8, but got "+e);return this.textEncoder.encode(t)},t.prototype.decode=function(t,e){return 0===t.length?"":new this.util.TextDecoder(e).decode(t)},t}();c().get("IS_NODE")&&c().setPlatform("node",new sd);var ld={float32:4,int32:4,uint16:2,uint8:1,bool:1},ud=4;function cd(t,e){for(var n={},r=0,i=function(e){var i=e.name,a=e.dtype,o=e.shape,s=T(o),l=void 0;if("quantization"in e){var u=e.quantization;if("uint8"!==u.dtype&&"uint16"!==u.dtype)throw new Error("Weight "+e.name+" has unknown quantization dtype "+u.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var c=ld[u.dtype],h=t.slice(r,r+s*c),d="uint8"===u.dtype?new Uint8Array(h):new Uint16Array(h);if("float32"===a)l=Float32Array.from(d,(function(t){return t*u.scale+u.min}));else{if("int32"!==a)throw new Error("Unsupported dtype in weight '"+i+"': "+a);l=Int32Array.from(d,(function(t){return Math.round(t*u.scale+u.min)}))}r+=s*c}else if("string"===a){var p=T(e.shape);l=[];for(var f=0;f<p;f++){var m=new Uint32Array(t.slice(r,r+ud))[0];r+=ud;var g=new Uint8Array(t.slice(r,r+m));l.push(g),r+=m}}else{var y=ld[a];if(h=t.slice(r,r+s*y),"float32"===a)l=new Float32Array(h);else if("int32"===a)l=new Int32Array(h);else{if("bool"!==a)throw new Error("Unsupported dtype in weight '"+i+"': "+a);l=new Uint8Array(h)}r+=s*y}n[i]=Fn(l,o,a)},a=0,o=e;a<o.length;a++)i(o[a]);return n}function hd(t){if(null===t)throw new Error("Invalid input value: "+JSON.stringify(t));var e=0,n=[];t.forEach((function(t){if(e+=t.byteLength,n.push(t.byteLength===t.buffer.byteLength?t:new t.constructor(t)),!(t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+t.constructor.name)}));var r=new Uint8Array(e),i=0;return n.forEach((function(t){r.set(new Uint8Array(t.buffer),i),i+=t.byteLength})),r.buffer}var dd="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function pd(t){return dd?Buffer.byteLength(t):new Blob([t]).size}function fd(t){var e=0;t.forEach((function(t){e+=t.byteLength}));var n=new Uint8Array(e),r=0;return t.forEach((function(t){n.set(new Uint8Array(t),r),r+=t.byteLength})),n.buffer}function md(t){for(t=t.trim();t.endsWith("/");)t=t.slice(0,t.length-1);var e=t.split("/");return e[e.length-1]}function gd(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==t.modelTopology?0:pd(JSON.stringify(t.modelTopology)),weightSpecsBytes:null==t.weightSpecs?0:pd(JSON.stringify(t.weightSpecs)),weightDataBytes:null==t.weightData?0:t.weightData.byteLength}}var yd=function(){function t(){this.saveRouters=[],this.loadRouters=[]}return t.getInstance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.registerSaveRouter=function(e){t.getInstance().saveRouters.push(e)},t.registerLoadRouter=function(e){t.getInstance().loadRouters.push(e)},t.getSaveHandlers=function(e){return t.getHandlers(e,"save")},t.getLoadHandlers=function(e,n){return t.getHandlers(e,"load",n)},t.getHandlers=function(e,n,r){var i=[];return("load"===n?t.getInstance().loadRouters:t.getInstance().saveRouters).forEach((function(t){var n=t(e,r);null!==n&&i.push(n)})),i},t}(),vd="://",bd=function(){function t(){this.managers={}}return t.getInstance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.registerManager=function(e,n){E(null!=e,(function(){return"scheme must not be undefined or null."})),e.endsWith(vd)&&(e=e.slice(0,e.indexOf(vd))),E(e.length>0,(function(){return"scheme must not be an empty string."}));var r=t.getInstance();E(null==r.managers[e],(function(){return"A model store manager is already registered for scheme '"+e+"'."})),r.managers[e]=n},t.getManager=function(t){var e=this.getInstance().managers[t];if(null==e)throw new Error("Cannot find model manager for scheme '"+t+"'");return e},t.getSchemes=function(){return Object.keys(this.getInstance().managers)},t}();function wd(t){if(-1===t.indexOf(vd))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+bd.getSchemes().join(","));return{scheme:t.split(vd)[0],path:t.split(vd)[1]}}function _d(t,e,n){return void 0===n&&(n=!1),o(this,void 0,void 0,(function(){var r,i,a,o,l,u,c,h,d;return s(this,(function(s){switch(s.label){case 0:return E(t!==e,(function(){return"Old path and new path are the same: '"+t+"'"})),E((r=yd.getLoadHandlers(t)).length>0,(function(){return"Copying failed because no load handler is found for source URL "+t+"."})),E(r.length<2,(function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+t+"."})),i=r[0],E((a=yd.getSaveHandlers(e)).length>0,(function(){return"Copying failed because no save handler is found for destination URL "+e+"."})),E(a.length<2,(function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+e+"."})),o=a[0],l=wd(t).scheme,u=wd(t).path,c=l===wd(t).scheme,[4,i.load()];case 1:return h=s.sent(),n&&c?[4,bd.getManager(l).removeModel(u)]:[3,3];case 2:s.sent(),s.label=3;case 3:return[4,o.save(h)];case 4:return d=s.sent(),!n||c?[3,6]:[4,bd.getManager(l).removeModel(u)];case 5:s.sent(),s.label=6;case 6:return[2,d.modelArtifactsInfo]}}))}))}var xd="models_store",Cd="model_info_store";function Sd(){if(!c().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var t=window||self,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(null==e)throw new Error("The current browser does not appear to support IndexedDB.");return e}function kd(t){var e=t.result;e.createObjectStore(xd,{keyPath:"modelPath"}),e.createObjectStore(Cd,{keyPath:"modelPath"})}var Ed=function(){function t(t){if(this.indexedDB=Sd(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return t.prototype.save=function(t){return o(this,void 0,void 0,(function(){return s(this,(function(e){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,t)]}))}))},t.prototype.load=function(){return o(this,void 0,void 0,(function(){return s(this,(function(t){return[2,this.databaseAction(this.modelPath)]}))}))},t.prototype.databaseAction=function(t,e){var n=this;return new Promise((function(t,r){var i=n.indexedDB.open("tensorflowjs",1);i.onupgradeneeded=function(){return kd(i)},i.onsuccess=function(){var a=i.result;if(null==e){var o=a.transaction(xd,"readonly"),s=o.objectStore(xd).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return a.close(),r(new Error("Cannot find model with path '"+n.modelPath+"' in IndexedDB."));t(s.result.modelArtifacts)},s.onerror=function(t){return a.close(),r(s.error)},o.oncomplete=function(){return a.close()}}else{var l,u=gd(e),c=a.transaction(Cd,"readwrite"),h=c.objectStore(Cd),d=h.put({modelPath:n.modelPath,modelArtifactsInfo:u});d.onsuccess=function(){var i=(l=a.transaction(xd,"readwrite")).objectStore(xd).put({modelPath:n.modelPath,modelArtifacts:e,modelArtifactsInfo:u});i.onsuccess=function(){return t({modelArtifactsInfo:u})},i.onerror=function(t){var e=(h=c.objectStore(Cd)).delete(n.modelPath);e.onsuccess=function(){return a.close(),r(i.error)},e.onerror=function(t){return a.close(),r(i.error)}}},d.onerror=function(t){return a.close(),r(d.error)},c.oncomplete=function(){null==l?a.close():l.oncomplete=function(){return a.close()}}}},i.onerror=function(t){return r(i.error)}}))},t.URL_SCHEME="indexeddb://",t}(),Id=function(t){return c().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Ed.URL_SCHEME)?(e=t.slice(Ed.URL_SCHEME.length),new Ed(e)):null;var e};yd.registerSaveRouter(Id),yd.registerLoadRouter(Id);var Ad=function(){function t(){this.indexedDB=Sd()}return t.prototype.listModels=function(){return o(this,void 0,void 0,(function(){var t=this;return s(this,(function(e){return[2,new Promise((function(e,n){var r=t.indexedDB.open("tensorflowjs",1);r.onupgradeneeded=function(){return kd(r)},r.onsuccess=function(){var t=r.result,i=t.transaction(Cd,"readonly"),a=i.objectStore(Cd).getAll();a.onsuccess=function(){for(var t={},n=0,r=a.result;n<r.length;n++){var i=r[n];t[i.modelPath]=i.modelArtifactsInfo}e(t)},a.onerror=function(e){return t.close(),n(a.error)},i.oncomplete=function(){return t.close()}},r.onerror=function(t){return n(r.error)}}))]}))}))},t.prototype.removeModel=function(t){return o(this,void 0,void 0,(function(){var e=this;return s(this,(function(n){var r;return t=(r=t).startsWith(Ed.URL_SCHEME)?r.slice(Ed.URL_SCHEME.length):r,[2,new Promise((function(n,r){var i=e.indexedDB.open("tensorflowjs",1);i.onupgradeneeded=function(){return kd(i)},i.onsuccess=function(){var e,a=i.result,o=a.transaction(Cd,"readwrite"),s=o.objectStore(Cd),l=s.get(t);l.onsuccess=function(){if(null==l.result)return a.close(),r(new Error("Cannot find model with path '"+t+"' in IndexedDB."));var i=s.delete(t),o=function(){var i=(e=a.transaction(xd,"readwrite")).objectStore(xd).delete(t);i.onsuccess=function(){return n(l.result.modelArtifactsInfo)},i.onerror=function(t){return r(l.error)}};i.onsuccess=o,i.onerror=function(t){return o(),a.close(),r(l.error)}},l.onerror=function(t){return a.close(),r(l.error)},o.oncomplete=function(){null==e?a.close():e.oncomplete=function(){return a.close()}}},i.onerror=function(t){return r(i.error)}}))]}))}))},t}();if(c().getBool("IS_BROWSER"))try{bd.registerManager(Ed.URL_SCHEME,new Ad)}catch(At){}var Dd="/",Td="tensorflowjs_models",Nd="info",Rd="model_topology",Od="weight_specs",Fd="weight_data",Md="model_metadata";function Pd(t){return{info:[Td,t,Nd].join(Dd),topology:[Td,t,Rd].join(Dd),weightSpecs:[Td,t,Od].join(Dd),weightData:[Td,t,Fd].join(Dd),modelMetadata:[Td,t,Md].join(Dd)}}function Ld(t){var e=t.split(Dd);if(e.length<3)throw new Error("Invalid key format: "+t);return e.slice(1,e.length-1).join(Dd)}var zd=function(){function t(t){if(!c().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=Pd(this.modelPath)}return t.prototype.save=function(t){return o(this,void 0,void 0,(function(){var e,n,r;return s(this,(function(i){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");e=JSON.stringify(t.modelTopology),n=JSON.stringify(t.weightSpecs),r=gd(t);try{return this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,e),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,function(t){if(dd)return Buffer.from(t).toString("base64");for(var e=new Uint8Array(t),n="",r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);return btoa(n)}(t.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata})),[2,{modelArtifactsInfo:r}]}catch(t){throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+r.modelTopologyBytes+", weightSpecsBytes="+r.weightSpecsBytes+", weightDataBytes="+r.weightDataBytes+".")}return[2]}))}))},t.prototype.load=function(){return o(this,void 0,void 0,(function(){var t,e,n,r,i,a,o;return s(this,(function(s){if(null==(t=JSON.parse(this.LS.getItem(this.keys.info))))throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if("JSON"!==t.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(e={},null==(n=JSON.parse(this.LS.getItem(this.keys.topology))))throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(e.modelTopology=n,null==(r=JSON.parse(this.LS.getItem(this.keys.weightSpecs))))throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(e.weightSpecs=r,null!=(i=this.LS.getItem(this.keys.modelMetadata))&&(a=JSON.parse(i),e.format=a.format,e.generatedBy=a.generatedBy,e.convertedBy=a.convertedBy,e.userDefinedMetadata=a.userDefinedMetadata),null==(o=this.LS.getItem(this.keys.weightData)))throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return e.weightData=function(t){if(dd){var e=Buffer.from(t,"base64");return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}for(var n=atob(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r.set([n.charCodeAt(i)],i);return r.buffer}(o),[2,e]}))}))},t.URL_SCHEME="localstorage://",t}(),Vd=function(t){return c().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(zd.URL_SCHEME)?(e=t.slice(zd.URL_SCHEME.length),new zd(e)):null;var e};yd.registerSaveRouter(Vd),yd.registerLoadRouter(Vd);var Bd=function(){function t(){E(c().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),E("undefined"==typeof window||void 0!==window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return t.prototype.listModels=function(){return o(this,void 0,void 0,(function(){var t,e,n,r,i,a;return s(this,(function(o){for(t={},e=Td+Dd,n=Dd+Nd,r=0;r<this.LS.length;++r)(i=this.LS.key(r)).startsWith(e)&&i.endsWith(n)&&(a=Ld(i),t[a]=JSON.parse(this.LS.getItem(i)));return[2,t]}))}))},t.prototype.removeModel=function(t){return o(this,void 0,void 0,(function(){var e,n;return s(this,(function(r){var i;if(t=(i=t).startsWith(zd.URL_SCHEME)?i.slice(zd.URL_SCHEME.length):i,e=Pd(t),null==this.LS.getItem(e.info))throw new Error("Cannot find model at path '"+t+"'");return n=JSON.parse(this.LS.getItem(e.info)),this.LS.removeItem(e.info),this.LS.removeItem(e.topology),this.LS.removeItem(e.weightSpecs),this.LS.removeItem(e.weightData),[2,n]}))}))},t}();if(c().getBool("IS_BROWSER"))try{bd.registerManager(zd.URL_SCHEME,new Bd)}catch(At){}var jd="model",Ud=".json",Wd=".weights.bin";function Hd(t){return new Promise((function(t){return setTimeout(t)})).then(t)}var qd=function(){function t(e){if(!c().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(t.URL_SCHEME)&&(e=e.slice(t.URL_SCHEME.length)),null!=e&&0!==e.length||(e=jd),this.modelTopologyFileName=e+Ud,this.weightDataFileName=e+Wd}return t.prototype.save=function(t){return o(this,void 0,void 0,(function(){var e,n,r,i;return s(this,(function(a){switch(a.label){case 0:if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(e=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return n=window.URL.createObjectURL(new Blob([JSON.stringify({modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}]})],{type:"application/json"})),(r=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,r.href=n,[4,Hd((function(){return r.dispatchEvent(new MouseEvent("click"))}))];case 2:return a.sent(),null==t.weightData?[3,4]:((i=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,i.href=e,[4,Hd((function(){return i.dispatchEvent(new MouseEvent("click"))}))]);case 3:a.sent(),a.label=4;case 4:return[2,{modelArtifactsInfo:gd(t)}]}}))}))},t.URL_SCHEME="downloads://",t}(),Gd=function(){function t(t){if(null==t||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+t);this.files=t}return t.prototype.load=function(){return o(this,void 0,void 0,(function(){var t,e,n=this;return s(this,(function(r){return t=this.files[0],e=this.files.slice(1),[2,new Promise((function(r,i){var a=new FileReader;a.onload=function(a){var o=JSON.parse(a.target.result),s=o.modelTopology;if(null!=s){0===e.length&&r({modelTopology:s});var l=o.weightsManifest;if(null!=l){var u;try{u=n.checkManifestAndWeightFiles(l,e)}catch(t){return void i(t)}var c=[],h=[],d=[];l.forEach((function(t){t.paths.forEach((function(t){h.push(t),d.push(null)})),c.push.apply(c,t.weights)})),l.forEach((function(t){t.paths.forEach((function(t){var e=new FileReader;e.onload=function(e){var n=e.target.result,i=h.indexOf(t);d[i]=n,-1===d.indexOf(null)&&r({modelTopology:s,weightSpecs:c,weightData:fd(d),format:o.format,generatedBy:o.generatedBy,convertedBy:o.convertedBy,userDefinedMetadata:o.userDefinedMetadata})},e.onerror=function(e){return i("Failed to weights data from file of path '"+t+"'.")},e.readAsArrayBuffer(u[t])}))}))}else i(new Error("weightManifest field is missing from file "+t.name))}else i(new Error("modelTopology field is missing from file "+t.name))},a.onerror=function(e){return i("Failed to read model topology and weights manifest JSON from file '"+t.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},a.readAsText(t)}))]}))}))},t.prototype.checkManifestAndWeightFiles=function(t,e){for(var n=[],r=e.map((function(t){return md(t.name)})),i={},a=0,o=t;a<o.length;a++)o[a].paths.forEach((function(t){var a=md(t);if(-1!==n.indexOf(a))throw new Error("Duplicate file basename found in weights manifest: '"+a+"'");if(n.push(a),-1===r.indexOf(a))throw new Error("Weight file with basename '"+a+"' is not provided.");i[t]=e[r.indexOf(a)]}));if(n.length!==e.length)throw new Error("Mismatch in the number of files in weights manifest ("+n.length+") and the number of weight files provided ("+e.length+").");return i},t}();function $d(t,e,n,r){!function(t){E(null!=t&&Array.isArray(t)&&t.length>0,(function(){return"promises must be a none empty array"}))}(t),function(t,e){E(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but got startFraction "+t})),E(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but got endFraction "+e})),E(e>=t,(function(){return"startFraction must be no more than endFraction, but got startFraction "+t+" and endFraction "+e}))}(n=null==n?0:n,r=null==r?1:r);var i=0;return Promise.all(t.map((function(a){return a.then((function(a){var o=n+ ++i/t.length*(r-n);return e(o),a})),a})))}function Kd(t,e){return o(this,void 0,void 0,(function(){var n,r,i,a,o,l,u,h,d;return s(this,(function(s){switch(s.label){case 0:return null==e&&(e={}),n=null==e.fetchFunc?c().platform.fetch:e.fetchFunc,r=t.map((function(t){return n(t,e.requestInit,{isBinary:!0})})),i=0,a=.5,null!=e.onProgress?[3,2]:[4,Promise.all(r)];case 1:return o=s.sent(),[3,4];case 2:return[4,$d(r,e.onProgress,i,a)];case 3:o=s.sent(),s.label=4;case 4:return l=o.map((function(t){return t.arrayBuffer()})),u=.5,h=1,null!=e.onProgress?[3,6]:[4,Promise.all(l)];case 5:return d=s.sent(),[3,8];case 6:return[4,$d(l,e.onProgress,u,h)];case 7:d=s.sent(),s.label=8;case 8:return[2,d]}}))}))}function Xd(t){var e=this;return function(n,r,i){return void 0===r&&(r=""),o(e,void 0,void 0,(function(){var e,a,o,l,u,c,h,d,p,f;return s(this,(function(s){switch(s.label){case 0:if(e=n.map((function(){return!1})),a={},o=null!=i?i.map((function(){return!1})):[],l=[],n.forEach((function(t,n){var r=0;t.weights.forEach((function(t){var s=ld["quantization"in t?t.quantization.dtype:t.dtype]*T(t.shape),u=function(){e[n]=!0,null==a[n]&&(a[n]=[]),a[n].push({manifestEntry:t,groupOffset:r,sizeBytes:s})};null!=i?i.forEach((function(e,n){e===t.name&&(u(),o[n]=!0)})):u(),l.push(t.name),r+=s}))})),!o.every((function(t){return t})))throw u=i.filter((function(t,e){return!o[e]})),new Error("Could not find weights in manifest with names: "+u.join(", ")+". \nManifest JSON has weights with names: "+l.join(", ")+".");return c=e.reduce((function(t,e,n){return e&&t.push(n),t}),[]),h=[],c.forEach((function(t){n[t].paths.forEach((function(t){var e=r+(r.endsWith("/")?"":"/")+t;h.push(e)}))})),[4,t(h)];case 1:return d=s.sent(),p={},f=0,c.forEach((function(t){for(var e=n[t].paths.length,r=0,i=0;i<e;i++)r+=d[f+i].byteLength;for(var o=new ArrayBuffer(r),s=new Uint8Array(o),l=0,u=0;u<e;u++){var c=new Uint8Array(d[f+u]);s.set(c,l),l+=c.byteLength}a[t].forEach((function(t){var e=cd(o.slice(t.groupOffset,t.groupOffset+t.sizeBytes),[t.manifestEntry]);for(var n in e)p[n]=e[n]})),f+=e})),[2,p]}}))}))}}yd.registerSaveRouter((function(t){return c().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(qd.URL_SCHEME)?function(t){return void 0===t&&(t="model"),new qd(t)}(t.slice(qd.URL_SCHEME.length)):null}));var Yd=function(){function t(t,e){if(this.DEFAULT_METHOD="POST",null==e&&(e={}),this.weightPathPrefix=e.weightPathPrefix,this.onProgress=e.onProgress,null!=e.fetchFunc?(E("function"==typeof e.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=e.fetchFunc):this.fetch=c().platform.fetch,E(null!=t&&t.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(t)&&E(2===t.length,(function(){return"URL paths for http must have a length of 2, (actual length is "+t.length+")."})),this.path=t,null!=e.requestInit&&null!=e.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=e.requestInit||{}}return t.prototype.save=function(t){return o(this,void 0,void 0,(function(){var e,n;return s(this,(function(r){switch(r.label){case 0:if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(e=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,e.body.append("model.json",new Blob([JSON.stringify({modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata,weightsManifest:[{paths:["./model.weights.bin"],weights:t.weightSpecs}]})],{type:"application/json"}),"model.json"),null!=t.weightData&&e.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,e)];case 1:if((n=r.sent()).ok)return[2,{modelArtifactsInfo:gd(t),responses:[n]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+n.status+".")}}))}))},t.prototype.load=function(){return o(this,void 0,void 0,(function(){var t,e,n,r,i,a,o,l,u,c,h,d;return s(this,(function(s){switch(s.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(t=s.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+t.status+". Please verify this URL points to the model JSON of the model to load.");s.label=2;case 2:return s.trys.push([2,4,,5]),[4,t.json()];case 3:return e=s.sent(),[3,5];case 4:throw s.sent(),n="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?n+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":n+=" Please make sure the server is serving valid JSON for this request.",new Error(n);case 5:if(i=e.weightsManifest,a=e.generatedBy,o=e.convertedBy,l=e.format,u=e.userDefinedMetadata,null==(r=e.modelTopology)&&null==i)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return null==i?[3,7]:[4,this.loadWeights(i)];case 6:d=s.sent(),c=d[0],h=d[1],s.label=7;case 7:return[2,{modelTopology:r,weightSpecs:c,weightData:h,userDefinedMetadata:u,generatedBy:a,convertedBy:o,format:l}]}}))}))},t.prototype.loadWeights=function(t){return o(this,void 0,void 0,(function(){var e,n,r,i,a,o,l,u,c,h;return s(this,(function(s){switch(s.label){case 0:for(e=Array.isArray(this.path)?this.path[1]:this.path,n=function(t){var e=t.lastIndexOf("/"),n=t.lastIndexOf("?");return[t.substring(0,e)+"/",n>e?t.substring(n):""]}(e),r=n[0],i=n[1],a=this.weightPathPrefix||r,o=[],l=0,u=t;l<u.length;l++)o.push.apply(o,u[l].weights);return c=[],t.forEach((function(t){t.paths.forEach((function(t){c.push(a+t+i)}))})),[4,Kd(c,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return h=s.sent(),[2,[o,fd(h)]]}}))}))},t.URL_SCHEME_REGEX=/^https?:\/\//,t}();function Zd(t){return null!=t.match(Yd.URL_SCHEME_REGEX)}var Qd=function(t,e){return"undefined"==typeof fetch?null:(Array.isArray(t)?t.every((function(t){return Zd(t)})):Zd(t))?Jd(t,{onProgress:e}):null};function Jd(t,e){return new Yd(t,e)}yd.registerSaveRouter(Qd),yd.registerLoadRouter(Qd);var tp,ep=function(){function t(t){this.modelArtifacts=t}return t.prototype.load=function(){return o(this,void 0,void 0,(function(){return s(this,(function(t){return[2,this.modelArtifacts]}))}))},t}(),np=function(){function t(t){this.saveHandler=t}return t.prototype.save=function(t){return o(this,void 0,void 0,(function(){return s(this,(function(e){return[2,this.saveHandler(t)]}))}))},t}(),rp=Object.freeze({browserFiles:function(t){return new Gd(t)},browserHTTPRequest:function(t,e){return Jd(t,e)},concatenateArrayBuffers:fd,decodeWeights:cd,encodeWeights:function(t,e){return o(this,void 0,void 0,(function(){var n,r,i,a,l,u=this;return s(this,(function(c){switch(c.label){case 0:for(n=[],r=[],i=Array.isArray(t)?t.map((function(t){return t.name})):Object.keys(t),a=function(a){var l=i[a],c=Array.isArray(t)?t[a].tensor:t[l];if("float32"!==c.dtype&&"int32"!==c.dtype&&"bool"!==c.dtype&&"string"!==c.dtype)throw new Error("Unsupported dtype in weight '"+l+"': "+c.dtype);var h={name:l,shape:c.shape,dtype:c.dtype};if("string"===c.dtype){var d=new Promise((function(t){return o(u,void 0,void 0,(function(){var e,n,r,i,a,o,l;return s(this,(function(s){switch(s.label){case 0:return[4,c.bytes()];case 1:for(e=s.sent(),n=e.reduce((function(t,e){return t+e.length}),0)+ud*e.length,r=new Uint8Array(n),i=0,a=0;a<e.length;a++)o=e[a],l=new Uint8Array(new Uint32Array([o.length]).buffer),r.set(l,i),r.set(o,i+=ud),i+=o.length;return t(r),[2]}}))}))}));r.push(d)}else r.push(c.data());null!=e&&(h.group=e),n.push(h)},l=0;l<i.length;++l)a(l);return[4,Promise.all(r)];case 1:return[2,{data:hd(c.sent()),specs:n}]}}))}))},fromMemory:function(t,e,n,r){return 1===arguments.length?null!=t.modelTopology||null!=t.weightSpecs?new ep(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new ep({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new ep({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))},getLoadHandlers:function(t,e){return yd.getLoadHandlers(t,e)},getModelArtifactsInfoForJSON:gd,getSaveHandlers:function(t){return yd.getSaveHandlers(t)},http:Jd,isHTTPScheme:Zd,loadWeights:function(t,e,n,r){return void 0===e&&(e=""),o(this,void 0,void 0,(function(){return s(this,(function(i){return[2,Xd((function(t){return Kd(t,{requestInit:r})}))(t,e,n)]}))}))},registerLoadRouter:function(t){return yd.registerLoadRouter(t)},registerSaveRouter:function(t){return yd.registerSaveRouter(t)},weightsLoaderFactory:Xd,withSaveHandler:function(t){return new np(t)},copyModel:function(t,e){return o(this,void 0,void 0,(function(){return s(this,(function(n){return[2,_d(t,e,!1)]}))}))},listModels:function(){return o(this,void 0,void 0,(function(){var t,e,n,r,i,a,o;return s(this,(function(s){switch(s.label){case 0:t=bd.getSchemes(),e={},n=0,r=t,s.label=1;case 1:return n<r.length?[4,bd.getManager(i=r[n]).listModels()]:[3,4];case 2:for(o in a=s.sent())e[i+vd+o]=a[o];s.label=3;case 3:return n++,[3,1];case 4:return[2,e]}}))}))},moveModel:function(t,e){return o(this,void 0,void 0,(function(){return s(this,(function(n){return[2,_d(t,e,!0)]}))}))},removeModel:function(t){return o(this,void 0,void 0,(function(){var e;return s(this,(function(n){return e=wd(t),[2,bd.getManager(e.scheme).removeModel(e.path)]}))}))}}),ip=Tn({confusionMatrix_:function(t,e,n){var r=vn(t,"labels","confusionMatrix"),i=vn(e,"predictions","confusionMatrix");E(null==n||n>0&&Number.isInteger(n),(function(){return"If provided, numClasses must be a positive integer, but got "+n})),E(1===r.rank,(function(){return"Expected the rank of labels to be 1, but got "+r.rank})),E(1===i.rank,(function(){return"Expected the rank of predictions to be 1, but got "+i.rank})),E(r.shape[0]===i.shape[0],(function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+i.shape[0]+". Labels and predictions should have the same number of elements."})),E(n>0&&Number.isInteger(n),(function(){return"numClasses is required to be a positive integer, but got "+n}));var a=Kl(r.asType("int32"),n),o=Kl(i.asType("int32"),n);return a.transpose().matMul(o).asType("int32")}}),ap=Object.freeze({confusionMatrix:ip}),op=Tn({fromPixels_:function(t,e){if(void 0===e&&(e=3),e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==t)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,i=!1,a=!1,o=!1;if(t.data instanceof Uint8Array)n=!0;else if("undefined"!=typeof ImageData&&t instanceof ImageData)r=!0;else if("undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement)i=!0;else if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement)a=!0;else{if(null==t.getContext)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+t.constructor.name);o=!0}if(i&&i&&t.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(null!=f("FromPixels",Bt.backendName))return Bt.runKernel("FromPixels",{pixels:t},{numChannels:e});var s,l,u=i?[t.videoWidth,t.videoHeight]:[t.width,t.height],c=u[0],h=u[1];if(o?s=t.getContext("2d").getImageData(0,0,c,h).data:r||n?s=t.data:(a||i)&&(null==tp&&(tp=document.createElement("canvas").getContext("2d")),tp.canvas.width=c,tp.canvas.height=h,tp.drawImage(t,0,0,c,h),s=tp.getImageData(0,0,c,h).data),4===e)l=new Int32Array(s);else{var d=c*h;l=new Int32Array(d*e);for(var p=0;p<d;p++)for(var m=0;m<e;++m)l[p*e+m]=s[4*p+m]}return Vn(l,[h,c,e],"int32")}}),sp=Object.freeze({toPixels:function(t,e){return o(this,void 0,void 0,(function(){var n,r,i,a,o,l,u,c,h,d,p,f,m,g,y,v,b,w,_,x,C;return s(this,(function(s){switch(s.label){case 0:if(n=vn(t,"img","toPixels"),t instanceof xt||(n=n.toInt()),2!==n.rank&&3!==n.rank)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),i=r[0],a=r[1],(o=2===n.rank?1:n.shape[2])>4||2===o)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+o);return[4,n.data()];case 1:return l=s.sent(),u=n.min(),c=n.max(),[4,Promise.all([u.data(),c.data()])];case 2:if(h=s.sent(),d=h[0][0],p=h[1][0],u.dispose(),c.dispose(),"float32"===n.dtype){if(d<0||p>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+d+" - "+p+"].")}else{if("int32"!==n.dtype)throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(d<0||p>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+d+" - "+p+"].")}for(f="float32"===n.dtype?255:1,m=new Uint8ClampedArray(a*i*4),g=0;g<i*a;++g)y=void 0,v=void 0,b=void 0,w=void 0,1===o?(y=l[g]*f,v=l[g]*f,b=l[g]*f,w=255):3===o?(y=l[3*g]*f,v=l[3*g+1]*f,b=l[3*g+2]*f,w=255):4===o&&(y=l[4*g]*f,v=l[4*g+1]*f,b=l[4*g+2]*f,w=l[4*g+3]*f),m[0+(_=4*g)]=Math.round(y),m[_+1]=Math.round(v),m[_+2]=Math.round(b),m[_+3]=Math.round(w);return null!=e&&(e.width=a,e.height=i,x=e.getContext("2d"),C=new ImageData(m,a,i),x.putImageData(C,0,0)),n!==t&&n.dispose(),[2,m]}}))}))},fromPixels:op}),lp=function(){function t(){}return t.prototype.getClassName=function(){return this.constructor.className},t.fromConfig=function(t,e){return new t(e)},t}(),up=function(){function t(){this.classNameMap={}}return t.getMap=function(){return null==t.instance&&(t.instance=new t),t.instance},t.register=function(e){t.getMap().classNameMap[e.className]=[e,e.fromConfig]},t}();function cp(t){E(null!=t.className,(function(){return"Class being registered does not have the static className property defined."})),E("string"==typeof t.className,(function(){return"className is required to be a string, but got type "+typeof t.className})),E(t.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),up.register(t)}var hp=Object.freeze({Serializable:lp,SerializationMap:up,registerClass:cp}),dp=Object.freeze({gpgpu_util:as,webgl_util:qe,forceHalfFloat:function(){c().set("WEBGL_FORCE_F16_TEXTURES",!0)},MathBackendWebGL:cl,setWebGLContext:Kt,GPGPUContext:os}),pp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.minimize=function(t,e,n){void 0===e&&(e=!1);var r=this.computeGradients(t,n),i=r.value,a=r.grads;if(null!=n){var o=n.map((function(t){return{name:t.name,tensor:a[t.name]}}));this.applyGradients(o)}else this.applyGradients(a);return nn(a),e?i:(i.dispose(),null)},Object.defineProperty(e.prototype,"iterations",{get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),e.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},e.prototype.computeGradients=function(t,e){return Yi(t,e)},e.prototype.dispose=function(){null!=this.iterations_&&nn(this.iterations_)},e.prototype.saveIterations=function(){return o(this,void 0,void 0,(function(){return s(this,(function(t){return null==this.iterations_&&(this.iterations_=0),[2,{name:"iter",tensor:Pn(this.iterations_,"int32")}]}))}))},e.prototype.getWeights=function(){return o(this,void 0,void 0,(function(){return s(this,(function(t){throw new Error("getWeights() is not implemented for this optimizer yet.")}))}))},e.prototype.setWeights=function(t){return o(this,void 0,void 0,(function(){return s(this,(function(t){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())}))}))},e.prototype.extractIterations=function(t){return o(this,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return e=this,[4,t[0].tensor.data()];case 1:return e.iterations_=n.sent()[0],[2,t.slice(1)]}}))}))},e}(lp);Object.defineProperty(pp,Symbol.hasInstance,{value:function(t){return null!=t.minimize&&null!=t.computeGradients&&null!=t.applyGradients}});var fp=function(t){function e(e,n,r){void 0===r&&(r=null);var i=t.call(this)||this;return i.learningRate=e,i.rho=n,i.epsilon=r,i.accumulatedGrads=[],i.accumulatedUpdates=[],null==r&&(i.epsilon=Bt.backend.epsilon()),i}return a(e,t),e.prototype.applyGradients=function(t){var e=this;(Array.isArray(t)?t.map((function(t){return t.name})):Object.keys(t)).forEach((function(n,r){var i=Bt.registeredVariables[n];null==e.accumulatedGrads[r]&&(e.accumulatedGrads[r]={originalName:n+"/accum_grad",variable:en((function(){return Yn(i).variable(!1)}))}),null==e.accumulatedUpdates[r]&&(e.accumulatedUpdates[r]={originalName:n+"/accum_var",variable:en((function(){return Yn(i).variable(!1)}))});var a=Array.isArray(t)?t[r].tensor:t[n];if(null!=a){var o=e.accumulatedGrads[r].variable,s=e.accumulatedUpdates[r].variable;en((function(){var t=o.mul(e.rho).add(a.square().mul(1-e.rho)),n=s.add(e.epsilon).sqrt().div(o.add(e.epsilon).sqrt()).mul(a),r=s.mul(e.rho).add(n.square().mul(1-e.rho));o.assign(t),s.assign(r);var l=n.mul(-e.learningRate).add(i);i.assign(l)}))}})),this.incrementIterations()},e.prototype.dispose=function(){null!=this.accumulatedUpdates&&(nn(this.accumulatedGrads.map((function(t){return t.variable}))),nn(this.accumulatedUpdates.map((function(t){return t.variable}))))},e.prototype.getWeights=function(){return o(this,void 0,void 0,(function(){var t;return s(this,(function(e){switch(e.label){case 0:return t=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(t.map((function(t){return{name:t.originalName,tensor:t.variable}})))]}}))}))},e.prototype.setWeights=function(t){return o(this,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return[4,this.extractIterations(t)];case 1:return t=n.sent(),this.accumulatedGrads=t.slice(0,e=t.length/2).map((function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}})),this.accumulatedUpdates=t.slice(e,2*e).map((function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}})),[2]}}))}))},e.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},e.fromConfig=function(t,e){return new t(e.learningRate,e.rho,e.epsilon)},e.className="Adadelta",e}(pp);cp(fp);var mp=function(t){function e(e,n){void 0===n&&(n=.1);var r=t.call(this)||this;return r.learningRate=e,r.initialAccumulatorValue=n,r.accumulatedGrads=[],r}return a(e,t),e.prototype.applyGradients=function(t){var e=this;(Array.isArray(t)?t.map((function(t){return t.name})):Object.keys(t)).forEach((function(n,r){var i=Bt.registeredVariables[n];null==e.accumulatedGrads[r]&&(e.accumulatedGrads[r]={originalName:n+"/accumulator",variable:en((function(){return Gn(i.shape,e.initialAccumulatorValue).variable(!1)}))});var a=Array.isArray(t)?t[r].tensor:t[n];if(null!=a){var o=e.accumulatedGrads[r].variable;en((function(){var t=o.add(a.square());o.assign(t);var n=a.div(t.add(Bt.backend.epsilon()).sqrt()).mul(-e.learningRate).add(i);i.assign(n)}))}})),this.incrementIterations()},e.prototype.dispose=function(){null!=this.accumulatedGrads&&nn(this.accumulatedGrads.map((function(t){return t.variable})))},e.prototype.getWeights=function(){return o(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(this.accumulatedGrads.map((function(t){return{name:t.originalName,tensor:t.variable}})))]}}))}))},e.prototype.setWeights=function(t){return o(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.extractIterations(t)];case 1:return t=e.sent(),this.accumulatedGrads=t.map((function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}})),[2]}}))}))},e.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},e.fromConfig=function(t,e){return new t(e.learningRate,e.initialAccumulatorValue)},e.className="Adagrad",e}(pp);cp(mp);var gp=function(t){function e(e,n,r,i){void 0===i&&(i=null);var a=t.call(this)||this;return a.learningRate=e,a.beta1=n,a.beta2=r,a.epsilon=i,a.accumulatedFirstMoment=[],a.accumulatedSecondMoment=[],en((function(){a.accBeta1=Pn(n).variable(),a.accBeta2=Pn(r).variable()})),null==i&&(a.epsilon=Bt.backend.epsilon()),a}return a(e,t),e.prototype.applyGradients=function(t){var e=this,n=Array.isArray(t)?t.map((function(t){return t.name})):Object.keys(t);en((function(){var r=Ii(1,e.accBeta1),i=Ii(1,e.accBeta2);n.forEach((function(n,a){var o=Bt.registeredVariables[n];null==e.accumulatedFirstMoment[a]&&(e.accumulatedFirstMoment[a]={originalName:n+"/m",variable:en((function(){return Yn(o).variable(!1)}))}),null==e.accumulatedSecondMoment[a]&&(e.accumulatedSecondMoment[a]={originalName:n+"/v",variable:en((function(){return Yn(o).variable(!1)}))});var s=Array.isArray(t)?t[a].tensor:t[n];if(null!=s){var l=e.accumulatedFirstMoment[a].variable,u=e.accumulatedSecondMoment[a].variable,c=l.mul(e.beta1).add(s.mul(1-e.beta1)),h=u.mul(e.beta2).add(s.square().mul(1-e.beta2)),d=c.div(r),p=h.div(i);l.assign(c),u.assign(h);var f=d.div(p.sqrt().add(e.epsilon)).mul(-e.learningRate).add(o);o.assign(f)}})),e.accBeta1.assign(e.accBeta1.mul(e.beta1)),e.accBeta2.assign(e.accBeta2.mul(e.beta2))})),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&nn(this.accumulatedFirstMoment.map((function(t){return t.variable}))),null!=this.accumulatedSecondMoment&&nn(this.accumulatedSecondMoment.map((function(t){return t.variable})))},e.prototype.getWeights=function(){return o(this,void 0,void 0,(function(){var t;return s(this,(function(e){switch(e.label){case 0:return t=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(t.map((function(t){return{name:t.originalName,tensor:t.variable}})))]}}))}))},e.prototype.setWeights=function(t){return o(this,void 0,void 0,(function(){var e,n=this;return s(this,(function(r){switch(r.label){case 0:return[4,this.extractIterations(t)];case 1:return t=r.sent(),en((function(){n.accBeta1.assign(Si(n.beta1,n.iterations_+1)),n.accBeta2.assign(Si(n.beta2,n.iterations_+1))})),this.accumulatedFirstMoment=t.slice(0,e=t.length/2).map((function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}})),this.accumulatedSecondMoment=t.slice(e,2*e).map((function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}})),[2]}}))}))},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},e.fromConfig=function(t,e){return new t(e.learningRate,e.beta1,e.beta2,e.epsilon)},e.className="Adam",e}(pp);cp(gp);var yp=function(t){function e(e,n,r,i,a){void 0===i&&(i=null),void 0===a&&(a=0);var o=t.call(this)||this;return o.learningRate=e,o.beta1=n,o.beta2=r,o.epsilon=i,o.decay=a,o.accumulatedFirstMoment=[],o.accumulatedWeightedInfNorm=[],en((function(){o.iteration=Pn(0).variable(),o.accBeta1=Pn(n).variable()})),null==i&&(o.epsilon=Bt.backend.epsilon()),o}return a(e,t),e.prototype.applyGradients=function(t){var e=this,n=Array.isArray(t)?t.map((function(t){return t.name})):Object.keys(t);en((function(){var r=Ii(1,e.accBeta1),i=Di(-e.learningRate,e.iteration.mul(e.decay).add(1));n.forEach((function(n,a){var o=Bt.registeredVariables[n];null==e.accumulatedFirstMoment[a]&&(e.accumulatedFirstMoment[a]={originalName:n+"/m",variable:Yn(o).variable(!1)}),null==e.accumulatedWeightedInfNorm[a]&&(e.accumulatedWeightedInfNorm[a]={originalName:n+"/v",variable:Yn(o).variable(!1)});var s=Array.isArray(t)?t[a].tensor:t[n];if(null!=s){var l=e.accumulatedFirstMoment[a].variable,u=e.accumulatedWeightedInfNorm[a].variable,c=l.mul(e.beta1).add(s.mul(1-e.beta1)),h=u.mul(e.beta2),d=s.abs(),p=h.maximum(d);l.assign(c),u.assign(p);var f=i.div(r).mul(c.div(p.add(e.epsilon))).add(o);o.assign(f)}})),e.iteration.assign(e.iteration.add(1)),e.accBeta1.assign(e.accBeta1.mul(e.beta1))})),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&nn(this.accumulatedFirstMoment.map((function(t){return t.variable}))),null!=this.accumulatedWeightedInfNorm&&nn(this.accumulatedWeightedInfNorm.map((function(t){return t.variable})))},e.prototype.getWeights=function(){return o(this,void 0,void 0,(function(){return s(this,(function(t){throw new Error("getWeights() is not implemented for Adamax yet.")}))}))},e.prototype.setWeights=function(t){return o(this,void 0,void 0,(function(){return s(this,(function(t){throw new Error("setWeights() is not implemented for Adamax yet.")}))}))},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},e.fromConfig=function(t,e){return new t(e.learningRate,e.beta1,e.beta2,e.epsilon,e.decay)},e.className="Adamax",e}(pp);cp(yp);var vp=function(t){function e(e){var n=t.call(this)||this;return n.learningRate=e,n.setLearningRate(e),n}return a(e,t),e.prototype.applyGradients=function(t){var e=this;(Array.isArray(t)?t.map((function(t){return t.name})):Object.keys(t)).forEach((function(n,r){var i=Array.isArray(t)?t[r].tensor:t[n];if(null!=i){var a=Bt.registeredVariables[n];en((function(){var t=e.c.mul(i).add(a);a.assign(t)}))}})),this.incrementIterations()},e.prototype.setLearningRate=function(t){this.learningRate=t,null!=this.c&&this.c.dispose(),this.c=rn(Pn(-t))},e.prototype.dispose=function(){this.c.dispose()},e.prototype.getWeights=function(){return o(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()]]}}))}))},e.prototype.setWeights=function(t){return o(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.extractIterations(t)];case 1:if(0!==(t=e.sent()).length)throw new Error("SGD optimizer does not have settable weights.");return[2]}}))}))},e.prototype.getConfig=function(){return{learningRate:this.learningRate}},e.fromConfig=function(t,e){return new t(e.learningRate)},e.className="SGD",e}(pp);cp(vp);var bp=function(t){function e(e,n,r){void 0===r&&(r=!1);var i=t.call(this,e)||this;return i.learningRate=e,i.momentum=n,i.useNesterov=r,i.accumulations=[],i.m=Pn(i.momentum),i}return a(e,t),e.prototype.applyGradients=function(t){var e=this;(Array.isArray(t)?t.map((function(t){return t.name})):Object.keys(t)).forEach((function(n,r){var i=Bt.registeredVariables[n];null==e.accumulations[r]&&(e.accumulations[r]={originalName:n+"/momentum",variable:en((function(){return Yn(i).variable(!1)}))});var a=e.accumulations[r].variable,o=Array.isArray(t)?t[r].tensor:t[n];null!=o&&en((function(){var t,n=e.m.mul(a).add(o);t=e.useNesterov?e.c.mul(o.add(n.mul(e.m))).add(i):e.c.mul(n).add(i),a.assign(n),i.assign(t)}))})),this.incrementIterations()},e.prototype.dispose=function(){this.m.dispose(),null!=this.accumulations&&nn(this.accumulations.map((function(t){return t.variable})))},e.prototype.setMomentum=function(t){this.momentum=t},e.prototype.getWeights=function(){return o(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(this.accumulations.map((function(t){return{name:t.originalName,tensor:t.variable}})))]}}))}))},e.prototype.setWeights=function(t){return o(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.extractIterations(t)];case 1:return t=e.sent(),this.accumulations=t.map((function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}})),[2]}}))}))},e.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},e.fromConfig=function(t,e){return new t(e.learningRate,e.momentum,e.useNesterov)},e.className="Momentum",e}(vp);cp(bp);var wp=function(t){function e(e,n,r,i,a){void 0===n&&(n=.9),void 0===r&&(r=0),void 0===i&&(i=null),void 0===a&&(a=!1);var o=t.call(this)||this;if(o.learningRate=e,o.decay=n,o.momentum=r,o.epsilon=i,o.accumulatedMeanSquares=[],o.accumulatedMoments=[],o.accumulatedMeanGrads=[],o.centered=a,null==i&&(o.epsilon=Bt.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.");return o}return a(e,t),e.prototype.applyGradients=function(t){var e=this;(Array.isArray(t)?t.map((function(t){return t.name})):Object.keys(t)).forEach((function(n,r){var i=Bt.registeredVariables[n];null==e.accumulatedMeanSquares[r]&&(e.accumulatedMeanSquares[r]={originalName:n+"/rms",variable:en((function(){return Yn(i).variable(!1)}))}),null==e.accumulatedMoments[r]&&(e.accumulatedMoments[r]={originalName:n+"/momentum",variable:en((function(){return Yn(i).variable(!1)}))}),null==e.accumulatedMeanGrads[r]&&e.centered&&(e.accumulatedMeanGrads[r]={originalName:n+"/mg",variable:en((function(){return Yn(i).variable(!1)}))});var a=Array.isArray(t)?t[r].tensor:t[n];if(null!=a){var o=e.accumulatedMeanSquares[r].variable,s=e.accumulatedMoments[r].variable;en((function(){var t=o.mul(e.decay).add(a.square().mul(1-e.decay));if(e.centered){var n=e.accumulatedMeanGrads[r].variable,l=n.mul(e.decay).add(a.mul(1-e.decay)),u=s.mul(e.momentum).add(a.mul(e.learningRate).div(t.sub(l.square().add(e.epsilon)).sqrt()));o.assign(t),n.assign(l),s.assign(u);var c=i.sub(u);i.assign(c)}else{var h=o.mul(e.decay).add(a.square().mul(1-e.decay));u=s.mul(e.momentum).add(a.mul(e.learningRate).div(h.add(e.epsilon).sqrt())),o.assign(h),s.assign(u),c=i.sub(u),i.assign(c)}}))}})),this.incrementIterations()},e.prototype.dispose=function(){null!=this.accumulatedMeanSquares&&nn(this.accumulatedMeanSquares.map((function(t){return t.variable}))),null!=this.accumulatedMeanGrads&&this.centered&&nn(this.accumulatedMeanGrads.map((function(t){return t.variable}))),null!=this.accumulatedMoments&&nn(this.accumulatedMoments.map((function(t){return t.variable})))},e.prototype.getWeights=function(){return o(this,void 0,void 0,(function(){var t;return s(this,(function(e){switch(e.label){case 0:return t=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&t.push.apply(t,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(t.map((function(t){return{name:t.originalName,tensor:t.variable}})))]}}))}))},e.prototype.setWeights=function(t){return o(this,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return[4,this.extractIterations(t)];case 1:return t=n.sent(),this.accumulatedMeanSquares=t.slice(0,e=this.centered?t.length/3:t.length/2).map((function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}})),this.accumulatedMoments=t.slice(e,2*e).map((function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}})),this.centered&&(this.accumulatedMeanGrads=t.slice(2*e,3*e).map((function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}}))),[2]}}))}))},e.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},e.fromConfig=function(t,e){return new t(e.learningRate,e.decay,e.momentum,e.epsilon,e.centered)},e.className="RMSProp",e}(pp);cp(wp);var _p=function(){function t(){}return t.sgd=function(t){return new vp(t)},t.momentum=function(t,e,n){return void 0===n&&(n=!1),new bp(t,e,n)},t.rmsprop=function(t,e,n,r,i){return void 0===e&&(e=.9),void 0===n&&(n=0),void 0===r&&(r=null),void 0===i&&(i=!1),new wp(t,e,n,r,i)},t.adam=function(t,e,n,r){return void 0===t&&(t=.001),void 0===e&&(e=.9),void 0===n&&(n=.999),void 0===r&&(r=null),new gp(t,e,n,r)},t.adadelta=function(t,e,n){return void 0===t&&(t=.001),void 0===e&&(e=.95),void 0===n&&(n=null),new fp(t,e,n)},t.adamax=function(t,e,n,r,i){return void 0===t&&(t=.002),void 0===e&&(e=.9),void 0===n&&(n=.999),void 0===r&&(r=null),void 0===i&&(i=0),new yp(t,e,n,r,i)},t.adagrad=function(t,e){return void 0===e&&(e=.1),new mp(t,e)},t}(),xp={sgd:_p.sgd,momentum:_p.momentum,adadelta:_p.adadelta,adagrad:_p.adagrad,rmsprop:_p.rmsprop,adamax:_p.adamax,adam:_p.adam},Cp="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate?setImmediate:function(t){return t()};function Sp(){return new Promise((function(t){return Cp((function(){return t()}))}))}xt.prototype.add=function(t){return Ar(this,t)},xt.prototype.broadcastTo=function(t){return Pl(this,t)},xt.prototype.div=function(t){return Di(this,t)},xt.prototype.divNoNan=function(t){return Hl(this,t)},xt.prototype.squaredDifference=function(t){return fu(this,t)},xt.prototype.tile=function(t){return ql(this,t)},xt.prototype.oneHot=function(t,e,n){return void 0===e&&(e=1),void 0===n&&(n=0),Kl(this,t,e,n)},xt.prototype.transpose=function(t){return ea(this,t)},xt.prototype.pad=function(t,e){return Xl(this,t,e)},xt.prototype.batchNorm=function(t,e,n,r,i){return El(this,t,e,n,r,i)},wt=Oh;var kp=function(t,e){return(kp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Ep(t,e){function n(){this.constructor=t}kp(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Ip,Ap=function(){return(Ap=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Dp(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{l(r.next(t))}catch(t){a(t)}}function s(t){try{l(r.throw(t))}catch(t){a(t)}}function l(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(o,s)}l((r=r.apply(t,e||[])).next())}))}function Tp(t,e){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(t){a=[6,t],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function Np(){return null==Ip&&(Ip=pn().epsilon()),Ip}var Rp=function(t){function e(n){var r=t.call(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r}return Ep(e,t),e}(Error),Op=function(t){function e(n){var r=t.call(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r}return Ep(e,t),e}(Error),Fp=function(t){function e(n){var r=t.call(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r}return Ep(e,t),e}(Error),Mp=function(t){function e(n){var r=t.call(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r}return Ep(e,t),e}(Error),Pp=function(t){function e(n){var r=t.call(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r}return Ep(e,t),e}(Error);function Lp(t,e){if(Array.isArray(t)){for(var n=[],r=0;r<e;r++)n=n.concat(t);return n}return(n=new Array(e)).fill(t),n}function zp(t,e){if(!t)throw new Pp(e)}function Vp(t,e){for(var n=0,r=0,i=t;r<i.length;r++)i[r]===e&&n++;return n}function Bp(t){return 1===t.length?t[0]:t}function jp(t){return Array.isArray(t)?t:[t]}function Up(t){var e=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==e[0]?e:"private"+e}function Wp(t){return t.length<=1?t:-1===t.indexOf("_")?t:t.replace(/[_]+(\w|$)/g,(function(t,e){return e.toUpperCase()}))}!function(t){Ep((function e(n){var r=t.call(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r}),t)}(Error);var Hp={};function qp(t){if(null==t)return null;var e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function Gp(t,e,n,r,i){var a,o,s;if(void 0===e&&(e={}),void 0===n&&(n={}),void 0===r&&(r="object"),void 0===i&&(i=!1),"string"==typeof t){var l=void 0;if(t in n)l=n[t];else if(t in Hp)l=Hp[t];else if(null==(l=e[t]))throw new Fp("Unknown "+r+": "+t+". This may be due to one of the following reasons:\n1. The "+r+" is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom "+r+" is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().");return l}var u=t;if(null==u.className||null==u.config)throw new Fp(r+": Improper config format: "+JSON.stringify(u)+".\n'className' and 'config' must set.");var c=u.className,h=void 0,d=void 0;if(c in n?(h=(a=n[c])[0],d=a[1]):c in Hp?(h=(o=Hp.className)[0],d=o[1]):c in e&&(h=(s=e[c])[0],d=s[1]),null==h)throw new Fp("Unknown "+r+": "+c+". This may be due to one of the following reasons:\n1. The "+r+" is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom "+r+" is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().");if(null!=d){for(var p={},f=0,m=Object.keys(Hp);f<m.length;f++)p[_=m[f]]=Hp[_];for(var g=0,y=Object.keys(n);g<y.length;g++)p[_=y[g]]=n[_];u.config.customObjects=p;for(var v=Ap({},Hp),b=0,w=Object.keys(n);b<w.length;b++){var _=w[b];Hp[_]=n[_]}!function t(e){if(null!=e&&"object"==typeof e)if(Array.isArray(e))e.forEach((function(e){return t(e)}));else for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n],a=e[i];null!=a&&"object"==typeof a&&(Array.isArray(a)||"ndarray"!==a.type||"number"!=typeof a.value?t(a):e[i]=a.value)}}(u.config);var x=d(h,u.config,n,i);return Hp=Ap({},v),x}v=Ap({},Hp);for(var C=0,S=Object.keys(n);C<S.length;C++)Hp[_=S[C]]=n[_];return x=new h(u.config),Hp=Ap({},v),x}function $p(t,e){return-1*function(t,e){return t<e?-1:t>e?1:0}(t,e)}function Kp(t){if(null==t)return t;for(var e=[],n=0,r=t;n<r.length;n++){var i=r[n];-1===e.indexOf(i)&&e.push(i)}return e}function Xp(t){if(null==t)throw new Fp("Invalid value in obj: "+JSON.stringify(t));for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function Yp(t,e,n){if(null!=n&&t.indexOf(n)<0)throw new Fp(n+" is not a valid "+e+".  Valid values are "+t+" or null/undefined.")}function Zp(t,e,n,r){return void 0===n&&(n=0),void 0===r&&(r=1/0),zp(n>=0),zp(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every((function(t){return typeof t===e}))}function Qp(t,e){Array.isArray(t)?(ht.assert(t.length>0,(function(){return e+" is unexpectedly an empty array."})),t.forEach((function(t,n){return Qp(t,"element "+(n+1)+" of "+e)}))):ht.assert(Number.isInteger(t)&&t>0,(function(){return"Expected "+e+" to be a positive integer, but got "+function t(e){return null===e?"null":Array.isArray(e)?"["+e.map((function(e){return t(e)})).join(",")+"]":"string"==typeof e?'"'+e+'"':""+e}(t)+"."}))}function Jp(t){return"relu"===t?"relu":"linear"===t?"linear":"elu"===t?"elu":null}function tf(t,e){return en((function(){return li(Sc(Ci(t,t),e,!0))}))}var ef=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ep(e,t),e.prototype.getConfig=function(){return{}},e}(hp.Serializable),nf=function(t){function e(e){var n=t.call(this)||this;return n.defaultMaxValue=2,n.defaultAxis=0,n.maxValue=null!=e.maxValue?e.maxValue:n.defaultMaxValue,n.axis=null!=e.axis?e.axis:n.defaultAxis,n}return Ep(e,t),e.prototype.apply=function(t){var e=this;return en((function(){var n=tf(t,e.axis),r=Br(n,0,e.maxValue);return xi(t,Di(r,Ar(Np(),n)))}))},e.prototype.getConfig=function(){return{maxValue:this.maxValue,axis:this.axis}},e.className="MaxNorm",e}(ef);hp.registerClass(nf);var rf=function(t){function e(e){var n=t.call(this)||this;return n.defaultAxis=0,n.axis=null!=e.axis?e.axis:n.defaultAxis,n}return Ep(e,t),e.prototype.apply=function(t){var e=this;return en((function(){return Di(t,Ar(Np(),tf(t,e.axis)))}))},e.prototype.getConfig=function(){return{axis:this.axis}},e.className="UnitNorm",e}(ef);hp.registerClass(rf);var af=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ep(e,t),e.prototype.apply=function(t){return Dc(t)},e.className="NonNeg",e}(ef);hp.registerClass(af);var of=function(t){function e(e){var n=t.call(this)||this;return n.defaultMinValue=0,n.defaultMaxValue=1,n.defaultRate=1,n.defaultAxis=0,n.minValue=null!=e.minValue?e.minValue:n.defaultMinValue,n.maxValue=null!=e.maxValue?e.maxValue:n.defaultMaxValue,n.rate=null!=e.rate?e.rate:n.defaultRate,n.axis=null!=e.axis?e.axis:n.defaultAxis,n}return Ep(e,t),e.prototype.apply=function(t){var e=this;return en((function(){var n=tf(t,e.axis),r=Ar(xi(e.rate,Br(n,e.minValue,e.maxValue)),xi(1-e.rate,n));return xi(t,Di(r,Ar(Np(),n)))}))},e.prototype.getConfig=function(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}},e.className="MinMaxNorm",e}(ef);hp.registerClass(of);var sf={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function lf(t){return qp(t)}function uf(t,e){return void 0===e&&(e={}),Gp(t,hp.SerializationMap.getMap().classNameMap,e,"constraint")}function cf(t){return null==t?null:"string"==typeof t?uf({className:t in sf?sf[t]:t,config:{}}):t instanceof ef?t:uf(t)}var hf=Object.freeze({maxNorm:function(t){return new nf(t)},unitNorm:function(t){return new rf(t)},nonNeg:function(){return new af},minMaxNorm:function(t){return new of(t)}}),df=["channelsFirst","channelsLast"],pf=["valid","same","causal"],ff=["max","avg"],mf=["sum","mul","concat","ave"],gf=new Map;function yf(t){Yp(df,"DataFormat",t)}function vf(t){Yp(pf,"PaddingMode",t)}function bf(t){Yp(ff,"PoolMode",t)}var wf=[],_f="/";function xf(t,e){wf.push(t);try{var n=e();return wf.pop(),n}catch(t){throw wf.pop(),t}}function Cf(t){if(!Ef(t))throw new Error("Not a valid tensor name: '"+t+"'");return(0===wf.length?"":wf.join(_f)+_f)+t}function Sf(t){if(!Ef(t))throw new Error("Not a valid tensor name: '"+t+"'");gf.has(t)||gf.set(t,0);var e=gf.get(t);if(gf.set(t,gf.get(t)+1),e>0){var n=t+"_"+e;return gf.set(n,1),n}return t}var kf=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function Ef(t){return!!t.match(kf)}function If(t){return t===parseInt(t.toString(),10)}function Af(t,e,n){null==e&&(e=0),null==n&&(n=t.length);for(var r=1,i=e;i<n;++i)r*=t[i];return r}function Df(t){return Ln(t=Array.isArray(t)?new Float32Array(t):t)}function Tf(t){return xc(Df(t)).dataSync()[0]}function Nf(t){return wc(Df(t)).dataSync()[0]}function Rf(t,e){if(e<t)throw new Fp("end ("+e+") < begin ("+t+") is forbidden.");for(var n=[],r=t;r<e;++r)n.push(r);return n}function Of(t,e){return t.asType(e)}function Ff(t,e){void 0===e&&(e=-1);var n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),t.reshape(n)}function Mf(t,e,n){return en((function(){switch(t.rank){case 1:return cc(t,e,n);case 2:return hc(t,[e,0],[n,t.shape[1]]);case 3:return dc(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return pc(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return uc(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return uc(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new Fp("sliceAlongFirstAxis() received an unsupported tensor rank: "+t.rank)}}))}function Pf(t,e,n){return en((function(){switch(t.rank){case 1:return cc(t,e,n);case 2:return hc(t,[0,e],[t.shape[0],n]);case 3:return dc(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return pc(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new Fp("sliceAlongLastAxis() received an unsupported tensor rank: "+t.rank)}}))}function Lf(t,e,n,r){return en((function(){switch(t.rank){case 1:return cc(t,e,n);case 2:switch(r){case 1:return Mf(t,e,n);case 2:return Pf(t,e,n);default:throw new Fp("The axis is not within the rank of the tensor "+r)}case 3:switch(r){case 1:return Mf(t,e,n);case 2:return dc(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return Pf(t,e,n);default:throw new Fp("The axis is not within the rank of the tensor "+r)}case 4:switch(r){case 1:return Mf(t,e,n);case 2:return pc(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return pc(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return Pf(t,e,n);default:throw new Fp("The axis is not within the rank of the tensor "+r)}default:throw new Fp("sliceAlongLastAxis() received an unsupported tensor rank: "+t.rank)}}))}function zf(t,e){var n;return void 0===e&&(e=-1),e<0&&(e=0!==(n=t[0].rank)?n:0),e===t[0].rank&&(e=-1),Zn(t,e)}function Vf(t,e){switch(t.rank){case 1:return Qn([t,e]);case 2:return Jn([t,e],0);case 3:return tr([t,e],0);case 4:return er([t,e],0);default:throw new Fp("concatAlongFirstAxis() received an unsupported tensor rank: "+t.rank)}}function Bf(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new Fp("The length of input n ("+e.length+") does not match the number of dimensions in input x ("+t.rank+")");return ql(t,e)}function jf(t,e,n,r,i){return void 0===e&&(e=0),void 0===n&&(n=1),hu(t,e,n,r,i)}function Uf(t,e,n,r){if(t.rank<2||e.rank<2)throw new Mp("dot requires both inputs to be rank >= 2 but got x shape = "+t.shape+" and y shape = "+e.shape);if(e.rank>=3&&t.shape.slice(-1)[0]!==(c=e.shape.slice(-2)[0]))throw new Mp("If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = "+t.shape+" and  y shape = "+e.shape);if(2===t.rank&&2===e.rank){var i=!1,a=!1;return Rh.matMul({a:t,b:e,transposeA:i,transposeB:a,bias:r?qf(t.rank,r,"channelsLast"):null,activation:n})}var o=t.shape.slice(),s=o.pop();t=t.reshape([-1,s]);var l=e.shape.slice(),u=l.pop(),c=l.pop(),h=l.concat([u]),d=Array.from({length:e.rank},(function(t,n){return 0===n?e.rank-2:n<=e.rank-2?n-1:n}));e=e.transpose(d).reshape([c,-1]);var p=o.concat(h);return Rh.matMul({a:t,b:e,transposeA:i=!1,transposeB:a=!1,bias:r?qf(t.rank,r,"channelsLast"):null,activation:n}).reshape(p)}function Wf(t,e,n){return en((function(){return e=Array.isArray(e)?Ln(e,"int32"):e.toInt(),Tu(t,e,n)}))}function Hf(t){return Ci(t,t)}function qf(t,e,n){var r=e.shape;if(1!==e.rank&&e.rank!==t)throw new Fp("Unexpected bias dimensions: "+e.rank+"; expected it to be 1 or "+t);if(5===t){if("channelsFirst"===n)return e.reshape(1===r.length?[1,r[0],1,1,1]:[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return e.reshape(1===r.length?[1,1,1,1,r[0]]:[1].concat(r))}else if(4===t){if("channelsFirst"===n)return e.reshape(1===r.length?[1,r[0],1,1]:[1,r[2],r[0],r[1]]);if("channelsLast"===n)return e.reshape(1===r.length?[1,1,1,r[0]]:[1].concat(r))}else if(3===t){if("channelsFirst"===n)return e.reshape(1===r.length?[1,r[0],1]:[1,r[1],r[0]]);if("channelsLast"===n)return e.reshape(1===r.length?[1,1,r[0]]:[1].concat(r))}else if(t<3)return e;throw new Fp("Unsupported input rank by biasAdd: "+e.rank)}function Gf(t,e,n){return en((function(){return null==n&&(n="channelsLast"),yf(n),t.add(qf(t.rank,e,n))}))}function $f(t,e,n,r){return en((function(){return Kc(t,e,n,r)}))}function Kf(t,e,n){return void 0===n&&(n=!1),n?t():e()}var Xf=["fanIn","fanOut","fanAvg"],Yf=["normal","uniform","truncatedNormal"],Zf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ep(e,t),e.prototype.fromConfigUsesCustomObjects=function(){return!1},e.prototype.getConfig=function(){return{}},e}(hp.Serializable),Qf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ep(e,t),e.prototype.apply=function(t,e){return qn(t,e)},e.className="Zeros",e}(Zf);hp.registerClass(Qf);var Jf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ep(e,t),e.prototype.apply=function(t,e){return Hn(t,e)},e.className="Ones",e}(Zf);hp.registerClass(Jf);var tm=function(t){function e(e){var n=t.call(this)||this;if("object"!=typeof e)throw new Fp("Expected argument of type ConstantConfig but got "+e);if(void 0===e.value)throw new Fp("config must have value set but got "+e);return n.value=e.value,n}return Ep(e,t),e.prototype.apply=function(t,e){var n=this;return en((function(){return xi(Pn(n.value),Hn(t,e))}))},e.prototype.getConfig=function(){return{value:this.value}},e.className="Constant",e}(Zf);hp.registerClass(tm);var em=function(t){function e(e){var n=t.call(this)||this;return n.DEFAULT_MINVAL=-.05,n.DEFAULT_MAXVAL=.05,n.minval=e.minval||n.DEFAULT_MINVAL,n.maxval=e.maxval||n.DEFAULT_MAXVAL,n.seed=e.seed,n}return Ep(e,t),e.prototype.apply=function(t,e){return du(t,this.minval,this.maxval,e)},e.prototype.getConfig=function(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}},e.className="RandomUniform",e}(Zf);hp.registerClass(em);var nm=function(t){function e(e){var n=t.call(this)||this;return n.DEFAULT_MEAN=0,n.DEFAULT_STDDEV=.05,n.mean=e.mean||n.DEFAULT_MEAN,n.stddev=e.stddev||n.DEFAULT_STDDEV,n.seed=e.seed,n}return Ep(e,t),e.prototype.apply=function(t,e){if("float32"!==(e=e||"float32")&&"int32"!==e)throw new Mp("randomNormal does not support dType "+e+".");return jf(t,this.mean,this.stddev,e,this.seed)},e.prototype.getConfig=function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}},e.className="RandomNormal",e}(Zf);hp.registerClass(nm);var rm=function(t){function e(e){var n=t.call(this)||this;return n.DEFAULT_MEAN=0,n.DEFAULT_STDDEV=.05,n.mean=e.mean||n.DEFAULT_MEAN,n.stddev=e.stddev||n.DEFAULT_STDDEV,n.seed=e.seed,n}return Ep(e,t),e.prototype.apply=function(t,e){if("float32"!==(e=e||"float32")&&"int32"!==e)throw new Mp("truncatedNormal does not support dType "+e+".");return mu(t,this.mean,this.stddev,e,this.seed)},e.prototype.getConfig=function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}},e.className="TruncatedNormal",e}(Zf);hp.registerClass(rm);var im=function(t){function e(e){var n=t.call(this)||this;return n.gain=null!=e.gain?e.gain:1,n}return Ep(e,t),e.prototype.apply=function(t,e){var n=this;return en((function(){if(2!==t.length||t[0]!==t[1])throw new Fp("Identity matrix initializer can only be used for 2D square matrices.");return xi(n.gain,Gl(t[0]))}))},e.prototype.getConfig=function(){return{gain:this.gain}},e.className="Identity",e}(Zf);hp.registerClass(im);var am=function(t){function e(e){var n=t.call(this)||this;if(e.scale<0)throw new Fp("scale must be a positive float. Got: "+e.scale);return n.scale=null==e.scale?1:e.scale,n.mode=null==e.mode?"fanIn":e.mode,function(t){Yp(Xf,"FanMode",t)}(n.mode),n.distribution=null==e.distribution?"normal":e.distribution,function(t){Yp(Yf,"Distribution",t)}(n.distribution),n.seed=e.seed,n}return Ep(e,t),e.prototype.apply=function(t,e){var n=function(t,e){var n,r;if(void 0===e&&(e="channelsLast"),yf(e),2===t.length)n=t[0],r=t[1];else if(-1!==[3,4,5].indexOf(t.length))if("channelsFirst"===e){var i=Af(t,2);n=t[1]*i,r=t[0]*i}else"channelsLast"===e&&(i=Af(t,0,t.length-2),n=t[t.length-2]*i,r=t[t.length-1]*i);else{var a=Af(t);n=Math.sqrt(a),r=Math.sqrt(a)}return[n,r]}(t),r=n[0],i=n[1],a=this.scale;if(a/="fanIn"===this.mode?Math.max(1,r):"fanOut"===this.mode?Math.max(1,i):Math.max(1,(r+i)/2),"normal"===this.distribution){var o=Math.sqrt(a);if("float32"!==(e=e||"float32")&&"int32"!==e)throw new Mp(this.getClassName()+" does not support dType "+e+".");return mu(t,0,o,e,this.seed)}var s=Math.sqrt(3*a);return du(t,-s,s,e)},e.prototype.getConfig=function(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}},e.className="VarianceScaling",e}(Zf);hp.registerClass(am);var om=function(t){function e(e){return t.call(this,{scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})||this}return Ep(e,t),e.prototype.getClassName=function(){return am.className},e.className="GlorotUniform",e}(am);hp.registerClass(om);var sm=function(t){function e(e){return t.call(this,{scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})||this}return Ep(e,t),e.prototype.getClassName=function(){return am.className},e.className="GlorotNormal",e}(am);hp.registerClass(sm);var lm=function(t){function e(e){return t.call(this,{scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})||this}return Ep(e,t),e.prototype.getClassName=function(){return am.className},e.className="HeNormal",e}(am);hp.registerClass(lm);var um=function(t){function e(e){return t.call(this,{scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})||this}return Ep(e,t),e.prototype.getClassName=function(){return am.className},e.className="HeUniform",e}(am);hp.registerClass(um);var cm=function(t){function e(e){return t.call(this,{scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})||this}return Ep(e,t),e.prototype.getClassName=function(){return am.className},e.className="LeCunNormal",e}(am);hp.registerClass(cm);var hm=function(t){function e(e){return t.call(this,{scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})||this}return Ep(e,t),e.prototype.getClassName=function(){return am.className},e.className="LeCunNormal",e}(am);hp.registerClass(hm);var dm=function(t){function e(e){var n=t.call(this)||this;if(n.DEFAULT_GAIN=1,n.gain=null==e.gain?n.DEFAULT_GAIN:e.gain,n.seed=e.seed,null!=n.seed)throw new Mp("Random seed is not implemented for Orthogonal Initializer yet.");return n}return Ep(e,t),e.prototype.apply=function(t,e){var n=this;return en((function(){if(2!==t.length)throw new Mp("The Orthogonal Initializer does not support non-2D shapes yet.");t[0]*t[1]>2e3&&console.warn("Orthogonal initializer is being called on a matrix with more than 2000 ("+t[0]*t[1]+") elements: Slowness may result.");var e=jf(t[0]>t[1]?[t[1],t[0]]:t,0,1,"float32"),r=yh.gramSchmidt(e);return t[0]>t[1]&&(r=r.transpose()),xi(n.gain,r)}))},e.prototype.getConfig=function(){return{gain:this.gain,seed:this.seed}},e.className="Orthogonal",e}(Zf);hp.registerClass(dm);var pm={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function fm(t,e){return void 0===e&&(e={}),Gp(t,hp.SerializationMap.getMap().classNameMap,e,"initializer")}function mm(t){return qp(t)}function gm(t){if("string"==typeof t){var e=t in pm?pm[t]:t;if("GlorotNormal"===e)return new sm;if("GlorotUniform"===e)return new om;if("HeNormal"===e)return new lm;if("HeUniform"===e)return new um;if("LeCunNormal"===e)return new cm;if("LeCunUniform"===e)return new hm;var n={};return n.className=e,n.config={},fm(n)}return t instanceof Zf?t:fm(t)}var ym=Object.freeze({zeros:function(){return new Qf},ones:function(){return new Jf},constant:function(t){return new tm(t)},randomUniform:function(t){return new em(t)},randomNormal:function(t){return new nm(t)},truncatedNormal:function(t){return new rm(t)},identity:function(t){return new im(t)},varianceScaling:function(t){return new am(t)},glorotUniform:function(t){return new om(t)},glorotNormal:function(t){return new sm(t)},heNormal:function(t){return new lm(t)},heUniform:function(t){return new um(t)},leCunNormal:function(t){return new cm(t)},leCunUniform:function(t){return new hm(t)},orthogonal:function(t){return new dm(t)}}),vm=0;function bm(){return vm++}var wm={};function _m(t){return void 0===t&&(t=""),t in wm||(wm[t]=0),wm[t]+=1,t+wm[t].toString()}function xm(t){return Array.isArray(t)&&Array.isArray(t[0])}function Cm(t){return 0===t.length?[]:Array.isArray(t[0])?t:[t]}function Sm(t){var e;if(Array.isArray(t)){if(1!==t.length)throw new Fp("Expected Tensor length to be 1; got "+t.length);e=t[0]}else e=t;return e}function km(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(1===t.length)return(t=t)[0];throw new Fp("Expected exactly 1 Shape; got "+t.length)}return t}function Em(t){for(var e=0,n=0,r=t;n<r.length;n++){var i=r[n];e+=0===i.shape.length?1:i.shape.reduce((function(t,e){return t*e}))}return e}var Im="Variable",Am=function(){function t(t,e,n,r,i){void 0===e&&(e="float32"),void 0===n&&(n=Im),void 0===r&&(r=!0),void 0===i&&(i=null),this.dtype=null==e?"float32":e,this.shape=t.shape,this.id=bm(),this.originalName=Cf(n=null==n?Im:n),this.name=Sf(this.originalName),this.trainable_=r,this.constraint=i,this.val=Wn(t,this.trainable_,this.name,this.dtype)}return t.prototype.read=function(){return this.assertNotDisposed(),this.val},t.prototype.write=function(t){return this.assertNotDisposed(),function(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}(this.val,t),this.val.id!==t.id&&(this.val.assign(t),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this},t.prototype.dispose=function(){this.assertNotDisposed(),this.val.dispose()},t.prototype.assertNotDisposed=function(){if(this.val.isDisposed)throw new Error("LayersVariable "+this.name+" is already disposed.")},Object.defineProperty(t.prototype,"trainable",{get:function(){return this.trainable_},set:function(t){this.trainable_=t,this.val.trainable=t},enumerable:!0,configurable:!0}),t}();function Dm(t){return t.map((function(t){return t.read()}))}function Tm(t){t.forEach((function(t){t[0].write(t[1])}))}var Nm,Rm,Om=function(t){this.dtype=t.dtype,this.shape=t.shape,this.ndim=null!=t.shape?t.shape.length:t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}},Fm=function(t,e,n,r,i,a,o){this.dtype=t,this.shape=e,this.sourceLayer=n,this.inputs=r,this.callArgs=i,this.outputTensorIndex=o,this.id=bm(),null!=a&&(this.originalName=Cf(a),this.name=Sf(this.originalName)),this.rank=e.length},Mm=0,Pm=function(){function t(t,e){this.callArgs=e,this.id=Mm++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;for(var n=0,r=t.inboundLayers;n<r.length;n++){var i=r[n];null!=i&&i.outboundNodes.push(this)}t.outboundLayer.inboundNodes.push(this)}return t.prototype.getConfig=function(){for(var t=[],e=0,n=this.inboundLayers;e<n.length;e++){var r=n[e];t.push(null!=r?r.name:null)}return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}},t}(),Lm=0,zm=function(t){function e(e){var n=t.call(this)||this;n._callHook=null,n._addedWeightNames=[],n._stateful=!1,n.id=Lm++,n.activityRegularizer=null,n.inputSpec=null,n.supportsMasking=!1,n._trainableWeights=[],n._nonTrainableWeights=[],n._losses=[],n._updates=[],n._built=!1,n.inboundNodes=[],n.outboundNodes=[];var r=e.name;if(!r){var i=n.getClassName();r=Up(i)+"_"+_m(i)}if(n.name=r,n.trainable_=null==e.trainable||e.trainable,null!=e.inputShape||null!=e.batchInputShape){var a=void 0;if(null!=e.batchInputShape)a=e.batchInputShape;else if(null!=e.inputShape){var o=null;null!=e.batchSize&&(o=e.batchSize),a=[o].concat(e.inputShape)}n.batchInputShape=a;var s=e.dtype;null==s&&(s=e.inputDType),null==s&&(s="float32"),n.dtype=s}return n.initialWeights=null!=e.weights?e.weights:null,n._refCount=null,n.fastWeightInitDuringBuild=!1,n}return Ep(e,t),e.nodeKey=function(t,e){return t.name+"_ib-"+e.toString()},e.prototype.getNodeAtIndex=function(t,e){if(0===this.inboundNodes.length)throw new Op("The layer has never been called and thus has no defined "+e+".");if(this.inboundNodes.length<=t)throw new Fp("Asked to get "+e+" at node "+t+", but the layer has only "+this.inboundNodes.length+" inbound nodes.");return this.inboundNodes[t]},e.prototype.getInputAt=function(t){return Bp(this.getNodeAtIndex(t,"input").inputTensors)},e.prototype.getOutputAt=function(t){return Bp(this.getNodeAtIndex(t,"output").outputTensors)},Object.defineProperty(e.prototype,"input",{get:function(){if(this.inboundNodes.length>1)throw new Rp("Layer "+this.name+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new Rp("Layer "+this.name+" is not connected, no input to return.");return Bp(this.getNodeAtIndex(0,"input").inputTensors)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"output",{get:function(){if(0===this.inboundNodes.length)throw new Rp("Layer "+this.name+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new Rp("Layer "+this.name+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return Bp(this.getNodeAtIndex(0,"output").outputTensors)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"losses",{get:function(){return this._losses},enumerable:!0,configurable:!0}),e.prototype.calculateLosses=function(){return this.losses.map((function(t){return t()}))},Object.defineProperty(e.prototype,"updates",{get:function(){return this._updates},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"built",{get:function(){return this._built},set:function(t){this._built=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trainable",{get:function(){return this.trainable_},set:function(t){this._trainableWeights.forEach((function(e){return e.trainable=t})),this.trainable_=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trainableWeights",{get:function(){return this.trainable_?this._trainableWeights.filter((function(t){return t.trainable})):[]},set:function(t){this._trainableWeights=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonTrainableWeights",{get:function(){return this.trainable?this._trainableWeights.filter((function(t){return!t.trainable})).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)},set:function(t){this._nonTrainableWeights=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"weights",{get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stateful",{get:function(){return this._stateful},enumerable:!0,configurable:!0}),e.prototype.resetStates=function(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")},e.prototype.assertInputCompatibility=function(t){if(t=jp(t),null!=this.inputSpec&&0!==this.inputSpec.length){var e=jp(this.inputSpec);if(t.length!==e.length)throw new Fp("Layer "+this.name+" expects "+e.length+" inputs, but it received "+t.length+" input tensors. Input received: "+t);for(var n=0;n<t.length;n++){var r=t[n],i=e[n];if(null!=i){var a=r.rank;if(null!=i.ndim&&a!==i.ndim)throw new Fp("Input "+n+" is incompatible with layer "+this.name+": expected ndim="+i.ndim+", found ndim="+a);if(null!=i.maxNDim&&a>i.maxNDim)throw new Fp("Input "+n+" is incompatible with layer "+this.name+": expected max_ndim="+i.maxNDim+", found ndim="+a);if(null!=i.minNDim&&a<i.minNDim)throw new Fp("Input "+n+" is incompatible with layer "+this.name+": expected min_ndim="+i.minNDim+", found ndim="+a+".");if(null!=i.dtype&&r.dtype!==i.dtype)throw new Fp("Input "+n+" is incompatible with layer "+this.name+" : expected dtype="+i.dtype+", found dtype="+r.dtype+".");if(i.axes){var o=r.shape;for(var s in i.axes){var l=Number(s),u=i.axes[s];if(null!=u&&-1===[u,null].indexOf(l>=0?o[l]:o[o.length+l]))throw new Fp("Input "+n+" is incompatible with layer "+this.name+": expected axis "+l+" of input shape to have value "+u+" but got shape "+o+".")}}if(null!=i.shape)for(var c=0;c<i.shape.length;++c){var h=i.shape[c],d=r.shape[c];if(null!=h&&null!=d&&h!==d)throw new Fp("Input "+n+" is incompatible with layer "+this.name+": expected shape="+i.shape+", found shape="+r.shape+".")}}}}},e.prototype.call=function(t,e){return t},e.prototype.invokeCallHook=function(t,e){null!=this._callHook&&this._callHook(t,e)},e.prototype.setCallHook=function(t){this._callHook=t},e.prototype.clearCallHook=function(){this._callHook=null},e.prototype.apply=function(t,e){var n=this;e=e||{},this.assertNotDisposed();for(var r=jp(t),i=!0,a=0,o=r;a<o.length;a++)if(!(o[a]instanceof Fm)){i=!1;break}for(var s=!0,l=0,u=r;l<u.length;l++)if(u[l]instanceof Fm){s=!1;break}if(i===s)throw new Fp("Arguments to apply() must be all SymbolicTensors or all Tensors");return xf(this.name,(function(){if(!n.built){n.assertInputCompatibility(t);for(var i=[],a=0,o=jp(t);a<o.length;a++)i.push(o[a].shape);n.build(Bp(i)),n.built=!0,n.initialWeights&&n.setWeights(n.initialWeights),null===n._refCount&&s&&(n._refCount=1)}if(n.assertInputCompatibility(t),s){for(var l=[],u=0,c=jp(f=n.call(t,e));u<c.length;u++){var h=c[u];-1!==r.indexOf(h)&&(h=h.clone()),l.push(h)}if(f=Bp(l),null!=n.activityRegularizer)throw new Mp("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return f}var d=function(t){for(var e=[],n=0,r=t=jp(t);n<r.length;n++)e.push(r[n].shape);return Bp(e)}(t),p=n.computeOutputShape(d),f=void 0,m="float32";if(n.warnOnIncompatibleInputShape(Array.isArray(t)?d[0]:d),f=null!=p&&p.length>0&&Array.isArray(p[0])?p.map((function(r,i){return new Fm(m,r,n,jp(t),e,n.name,i)})):new Fm(m,p,n,jp(t),e,n.name),n.addInboundNode(t,f,null,null,d,p,e),n._refCount++,null!=n.activityRegularizer)throw new Mp("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return f}))},e.prototype.warnOnIncompatibleInputShape=function(t){if(null!=this.batchInputShape)if(t.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+JSON.stringify(t)+") does not match that of the batchInputShape ("+JSON.stringify(this.batchInputShape)+") of the layer "+this.name);else{var e=!1;this.batchInputShape.forEach((function(n,r){null!=n&&null!=t[r]&&t[r]!==n&&(e=!0)})),e&&console.warn("The shape of the input tensor ("+JSON.stringify(t)+") does not match the expectation of layer "+this.name+": "+JSON.stringify(this.batchInputShape))}},Object.defineProperty(e.prototype,"outputShape",{get:function(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new Rp("The layer "+this.name+" has never been called and thus has no defined output shape.");for(var t=[],e=0,n=this.inboundNodes;e<n.length;e++){var r=JSON.stringify(n[e].outputShapes);-1===t.indexOf(r)&&t.push(r)}if(1===t.length){var i=this.inboundNodes[0].outputShapes;return Array.isArray(i)&&Array.isArray(i[0])&&1===i.length?i[0]:i}throw new Rp("The layer "+this.name+' has multiple inbound nodes with different output shapes. Hence the notion of "outut shape" is ill-defined for the layer.')},enumerable:!0,configurable:!0}),e.prototype.countParams=function(){if(!this.built)throw new Op("You tried to call countParams() on "+this.name+", but the layer is not built yet. Build it first by calling build(batchInputShape).");return Em(this.weights)},e.prototype.build=function(t){this.built=!0},e.prototype.getWeights=function(t){return void 0===t&&(t=!1),Dm(t?this.trainableWeights:this.weights)},e.prototype.setWeights=function(t){var e=this;en((function(){var n=e.weights;if(n.length!==t.length)throw new Fp('You called setWeights(weights) on layer "'+e.name+'" with a weight list of length '+t.length+", but the layer was expecting "+n.length+" weights. Provided weights: "+t+"...");if(0!==n.length){for(var r=[],i=Dm(n),a=0;a<i.length;++a){var o=i[a],s=n[a],l=t[a];if(!ht.arraysEqual(o.shape,l.shape))throw new Fp("Layer weight shape "+o.shape+" not compatible with provided weight shape "+l.shape);r.push([s,l])}Tm(r)}}))},e.prototype.addWeight=function(t,e,n,r,i,a,o){if(-1!==this._addedWeightNames.indexOf(t))throw new Fp("Duplicate weight name "+t+" for layer "+this.name);this._addedWeightNames.push(t),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=gm("zeros"));var s=r.apply(e,n),l=new Am(s,n,t,a,o);return s.dispose(),null!=i&&this.addLoss((function(){return i.apply(l.read())})),null==a&&(a=!0),a?this._trainableWeights.push(l):this._nonTrainableWeights.push(l),l},e.prototype.setFastWeightInitDuringBuild=function(t){this.fastWeightInitDuringBuild=t},e.prototype.addLoss=function(t){var e;null==t||Array.isArray(t)&&0===t.length||(t=jp(t),null!=this._losses&&(e=this.losses).push.apply(e,t))},e.prototype.computeOutputShape=function(t){return t},e.prototype.computeMask=function(t,e){var n=this;if(!this.supportsMasking){if(null!=e){if(!Array.isArray(e))throw new TypeError("Layer "+this.name+" does not support masking, but was passed an inputMask.");e.forEach((function(t){if(null!=t)throw new TypeError("Layer "+n.name+" does not support masking, but was passed an inputMask.")}))}return null}return e},e.prototype.addInboundNode=function(t,e,n,r,i,a,o){void 0===o&&(o=null);var s=jp(t);e=jp(e),n=jp(n),r=jp(r),i=Cm(i),a=Cm(a);for(var l=[],u=[],c=[],h=0,d=s;h<d.length;h++){var p=d[h];l.push(p.sourceLayer),u.push(p.nodeIndex),c.push(p.tensorIndex)}new Pm({outboundLayer:this,inboundLayers:l,nodeIndices:u,tensorIndices:c,inputTensors:s,outputTensors:e,inputMasks:n,outputMasks:r,inputShapes:i,outputShapes:a},o);for(var f=0;f<e.length;f++)e[f].sourceLayer=this,e[f].nodeIndex=this.inboundNodes.length-1,e[f].tensorIndex=f},e.prototype.getConfig=function(){var t={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(t.batchInputShape=this.batchInputShape),null!=this.dtype&&(t.dtype=this.dtype),t},e.prototype.disposeWeights=function(){return this.weights.forEach((function(t){return t.dispose()})),this.weights.length},e.prototype.assertNotDisposed=function(){if(0===this._refCount)throw new Error("Layer '"+this.name+"' is already disposed.")},e.prototype.dispose=function(){if(!this.built)throw new Error("Cannot dispose Layer "+this.name+" because it has not been built yet.");if(null===this._refCount)throw new Error("Cannot dispose Layer "+this.name+" because it has not been used yet.");this.assertNotDisposed();var t=0;return 0==--this._refCount&&(t=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:t}},e}(hp.Serializable),Vm=function(t){function e(e){var n=t.call(this,{dtype:e.dtype,name:null!=e.name?e.name:_m("input").toString()})||this;if(null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),n.trainable=!1,n.built=!0,n.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new Fp("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");var r=e.batchInputShape;if(null==r){if(null==e.inputShape)throw new Fp("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");r=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new Fp("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");var i=e.dtype||"float32";n.batchInputShape=r,n.dtype=i,n.inputSpec=[{shape:r}];var a=new Fm(n.dtype,n.batchInputShape,n,[],{},n.name);return a.nodeIndex=0,a.tensorIndex=0,new Pm({outboundLayer:n,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[a],outputTensors:[a],inputMasks:[null],outputMasks:[null],inputShapes:[r],outputShapes:[r]}),n}return Ep(e,t),e.prototype.apply=function(t,e){throw new Fp("Cannot pass any input to an InputLayer's apply() method. InputLayer name: "+this.name)},e.prototype.dispose=function(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}},e.prototype.getConfig=function(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}},e.className="InputLayer",e}(zm);function Bm(t){if(null==t.batchShape&&null==t.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=t.batchShape&&null!=t.shape)throw new Fp("Please provide either a `shape` or `batchShape` argument to Input, but not both.");var e=t.batchShape;null!=t.shape&&null==e&&(e=[null].concat(t.shape));var n=t.dtype;return null==n&&(n="float32"),new Vm({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}function jm(t){return Dp(this,void 0,void 0,(function(){var e,n,r,i,a,o,s,l;return Tp(this,(function(u){switch(u.label){case 0:if(null==t)return[2];for(i in e=[],n=[],r=[],t)"number"!=typeof(a=t[i])&&(e.push((o=a).data()),n.push(i),r.push(o));return e.length>0?[4,Promise.all(e)]:[3,2];case 1:for(s=u.sent(),l=0;l<s.length;++l)t[n[l]]=s[l][0];nn(r),u.label=2;case 2:return[2]}}))}))}function Um(t){if(null!=t)for(var e in t){var n=t[e];"number"!=typeof n&&n.dispose()}}hp.registerClass(Vm),(Rm=Nm||(Nm={}))[Rm.SILENT=0]="SILENT",Rm[Rm.VERBOSE=1]="VERBOSE";var Wm=125,Hm=function(){function t(){this.validationData=null}return t.prototype.setParams=function(t){this.params=t},t.prototype.onEpochBegin=function(t,e){return Dp(this,void 0,void 0,(function(){return Tp(this,(function(t){return[2]}))}))},t.prototype.onEpochEnd=function(t,e){return Dp(this,void 0,void 0,(function(){return Tp(this,(function(t){return[2]}))}))},t.prototype.onBatchBegin=function(t,e){return Dp(this,void 0,void 0,(function(){return Tp(this,(function(t){return[2]}))}))},t.prototype.onBatchEnd=function(t,e){return Dp(this,void 0,void 0,(function(){return Tp(this,(function(t){return[2]}))}))},t.prototype.onTrainBegin=function(t){return Dp(this,void 0,void 0,(function(){return Tp(this,(function(t){return[2]}))}))},t.prototype.onTrainEnd=function(t){return Dp(this,void 0,void 0,(function(){return Tp(this,(function(t){return[2]}))}))},t.prototype.setModel=function(t){},t}(),qm=function(){function t(t,e){void 0===e&&(e=10),null==t&&(t=[]),this.callbacks=t,this.queueLength=e}return t.prototype.append=function(t){this.callbacks.push(t)},t.prototype.setParams=function(t){for(var e=0,n=this.callbacks;e<n.length;e++)n[e].setParams(t)},t.prototype.setModel=function(t){for(var e=0,n=this.callbacks;e<n.length;e++)n[e].setModel(t)},t.prototype.onEpochBegin=function(t,e){return Dp(this,void 0,void 0,(function(){var n,r;return Tp(this,(function(i){switch(i.label){case 0:null==e&&(e={}),n=0,r=this.callbacks,i.label=1;case 1:return n<r.length?[4,r[n].onEpochBegin(t,e)]:[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},t.prototype.onEpochEnd=function(t,e){return Dp(this,void 0,void 0,(function(){var n,r;return Tp(this,(function(i){switch(i.label){case 0:null==e&&(e={}),n=0,r=this.callbacks,i.label=1;case 1:return n<r.length?[4,r[n].onEpochEnd(t,e)]:[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},t.prototype.onBatchBegin=function(t,e){return Dp(this,void 0,void 0,(function(){var n,r;return Tp(this,(function(i){switch(i.label){case 0:null==e&&(e={}),n=0,r=this.callbacks,i.label=1;case 1:return n<r.length?[4,r[n].onBatchBegin(t,e)]:[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},t.prototype.onBatchEnd=function(t,e){return Dp(this,void 0,void 0,(function(){var n,r;return Tp(this,(function(i){switch(i.label){case 0:null==e&&(e={}),n=0,r=this.callbacks,i.label=1;case 1:return n<r.length?[4,r[n].onBatchEnd(t,e)]:[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},t.prototype.onTrainBegin=function(t){return Dp(this,void 0,void 0,(function(){var e,n;return Tp(this,(function(r){switch(r.label){case 0:null==t&&(t={}),e=0,n=this.callbacks,r.label=1;case 1:return e<n.length?[4,n[e].onTrainBegin(t)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))},t.prototype.onTrainEnd=function(t){return Dp(this,void 0,void 0,(function(){var e,n;return Tp(this,(function(r){switch(r.label){case 0:null==t&&(t={}),e=0,n=this.callbacks,r.label=1;case 1:return e<n.length?[4,n[e].onTrainEnd(t)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))},t}(),Gm=function(t){function e(){return t.call(this)||this}return Ep(e,t),e.prototype.onEpochBegin=function(t){return Dp(this,void 0,void 0,(function(){return Tp(this,(function(t){return this.seen=0,this.totals={},[2]}))}))},e.prototype.onBatchEnd=function(t,e){return Dp(this,void 0,void 0,(function(){var t,n,r,i,a=this;return Tp(this,(function(o){for(i in null==e&&(e={}),this.seen+=t=null==e.size?0:e.size,n=function(n){var i=e[n];if("number"==typeof i)r.totals.hasOwnProperty(n)||(r.totals[n]=0),r.totals[n]=r.totals[n]+i*t;else{var o=void 0;n in r.totals?o=r.totals[n]:r.totals[n]=0;var s=en((function(){return Ar(a.totals[n],xi(i,t))}));r.totals[n]=s,null!=o&&o.dispose()}},r=this,e)n(i);return[2]}))}))},e.prototype.onEpochEnd=function(t,e){return Dp(this,void 0,void 0,(function(){var t,n,r,i,a=this;return Tp(this,(function(o){if(null!=e)for(t=function(t){if(null==n.totals[t])return"continue";"number"==typeof n.totals[t]?e[t]=n.totals[t]/n.seen:en((function(){var n=xi(Di(1,a.seen),a.totals[t]);e[t]=n,a.totals[t].dispose(),rn(e[t])}))},n=this,r=0,i=this.params.metrics;r<i.length;r++)t(i[r]);return[2]}))}))},e}(Hm),$m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ep(e,t),e.prototype.onTrainBegin=function(t){return Dp(this,void 0,void 0,(function(){return Tp(this,(function(t){return this.epoch=[],this.history={},[2]}))}))},e.prototype.onEpochEnd=function(t,e){return Dp(this,void 0,void 0,(function(){var n;return Tp(this,(function(r){for(n in null==e&&(e={}),this.epoch.push(t),e)null==this.history[n]&&(this.history[n]=[]),this.history[n].push(e[n]);return[2]}))}))},e.prototype.syncData=function(){return Dp(this,void 0,void 0,(function(){var t,e,n,r,i,a,o,s;return Tp(this,(function(l){switch(l.label){case 0:for(r in t=[],e=[],n=[],this.history)for(i=this.history[r],a=0;a<i.length;++a)"number"!=typeof i[a]&&(t.push(i[a].data()),e.push(r),n.push(a));return[4,Promise.all(t)];case 1:for(o=l.sent(),s=0;s<o.length;++s)this.history[e[s]][n[s]].dispose(),this.history[e[s]][n[s]]=o[s][0];return[2]}}))}))},e}(Hm),Km=function(t){function e(e,n){var r=t.call(this)||this;if(r.currentEpoch=0,r.yieldEvery=n||"auto","auto"===r.yieldEvery&&(r.yieldEvery=Wm),"never"===r.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");return ht.isNumber(r.yieldEvery)&&(r.maybeWait=function(t,e){var n,r=ht.now();return function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var o=ht.now();return o-r<e?n:(r=o,n=t.apply(void 0,i))}}(r.maybeWait.bind(r),r.yieldEvery)),r.trainBegin=e.onTrainBegin,r.trainEnd=e.onTrainEnd,r.epochBegin=e.onEpochBegin,r.epochEnd=e.onEpochEnd,r.batchBegin=e.onBatchBegin,r.batchEnd=e.onBatchEnd,r.yield=e.onYield,r}return Ep(e,t),e.prototype.maybeWait=function(t,e,n){return Dp(this,void 0,void 0,(function(){var r;return Tp(this,(function(i){switch(i.label){case 0:return r=[],null==this.yield?[3,2]:[4,jm(n)];case 1:i.sent(),r.push(this.yield(t,e,n)),i.label=2;case 2:return r.push(Sp()),[4,Promise.all(r)];case 3:return i.sent(),[2]}}))}))},e.prototype.onEpochBegin=function(t,e){return Dp(this,void 0,void 0,(function(){return Tp(this,(function(n){switch(n.label){case 0:return this.currentEpoch=t,null==this.epochBegin?[3,3]:[4,jm(e)];case 1:return n.sent(),[4,this.epochBegin(t,e)];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))},e.prototype.onEpochEnd=function(t,e){return Dp(this,void 0,void 0,(function(){var n;return Tp(this,(function(r){switch(r.label){case 0:return n=[],null==this.epochEnd?[3,2]:[4,jm(e)];case 1:r.sent(),n.push(this.epochEnd(t,e)),r.label=2;case 2:return"epoch"===this.yieldEvery&&n.push(Sp()),[4,Promise.all(n)];case 3:return r.sent(),[2]}}))}))},e.prototype.onBatchBegin=function(t,e){return Dp(this,void 0,void 0,(function(){return Tp(this,(function(n){switch(n.label){case 0:return null==this.batchBegin?[3,3]:[4,jm(e)];case 1:return n.sent(),[4,this.batchBegin(t,e)];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))},e.prototype.onBatchEnd=function(t,e){return Dp(this,void 0,void 0,(function(){var n;return Tp(this,(function(r){switch(r.label){case 0:return n=[],null==this.batchEnd?[3,2]:[4,jm(e)];case 1:r.sent(),n.push(this.batchEnd(t,e)),r.label=2;case 2:return"batch"===this.yieldEvery?n.push(Sp()):ht.isNumber(this.yieldEvery)&&n.push(this.maybeWait(this.currentEpoch,t,e)),[4,Promise.all(n)];case 3:return r.sent(),[2]}}))}))},e.prototype.onTrainBegin=function(t){return Dp(this,void 0,void 0,(function(){return Tp(this,(function(e){switch(e.label){case 0:return null==this.trainBegin?[3,3]:[4,jm(t)];case 1:return e.sent(),[4,this.trainBegin(t)];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))},e.prototype.onTrainEnd=function(t){return Dp(this,void 0,void 0,(function(){return Tp(this,(function(e){switch(e.label){case 0:return null==this.trainEnd?[3,3]:[4,jm(t)];case 1:return e.sent(),[4,this.trainEnd(t)];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))},e}(Hm);function Xm(t,e){return null==t&&(t={}),t instanceof Hm?[t]:Array.isArray(t)&&t[0]instanceof Hm?t:jp(t).map((function(t){return new Km(t,e)}))}var Ym=function(){function t(){}return t.registerCallbackConstructor=function(e,n){ht.assert(e>=0&&Number.isInteger(e),(function(){return"Verbosity level is expected to be an integer >= 0, but got "+e})),t.checkForDuplicate(n),null==t.constructors[e]&&(t.constructors[e]=[]),t.constructors[e].push(n)},t.checkForDuplicate=function(e){for(var n in t.constructors)t.constructors[+n].forEach((function(t){if(t===e)throw new Fp("Duplicate callback constructor.")}))},t.clear=function(){t.constructors={}},t.createCallbacks=function(e){var n=[];for(var r in t.constructors){var i=+r;e>=i&&n.push.apply(n,t.constructors[i])}return n.map((function(t){return new t}))},t.constructors={},t}();function Zm(t,e,n,r,i,a,o,s,l){var u=new $m,c=[new Gm].concat(Ym.createCallbacks(e));null!=t&&c.push.apply(c,t),c.push(u);var h=new qm(c);return h.setParams({epochs:n,initialEpoch:r,samples:i,steps:a,batchSize:o,verbose:e,doValidation:s,metrics:l}),{callbackList:h,history:u}}function Qm(t,e,n){return void 0===e&&(e={}),void 0===n&&(n=!1),Gp(t,hp.SerializationMap.getMap().classNameMap,e,"layer",n)}function Jm(t,e){return en((function(){"float32"!==t.dtype&&(t=t.asType("float32"));var n=Sc(Hf(t),e,!0),r=Gn(n.shape,Np()),i=li(gi(n,r));return Di(t,i)}))}function tg(t,e){return en((function(){return _c(Hf(Ii(e,t)),-1)}))}function eg(t,e){return en((function(){return _c(Rr(Ii(e,t)),-1)}))}function ng(t,e){return en((function(){var n=Ii(t,e),r=Br(Rr(t),Np(),Number.MAX_VALUE),i=Rr(Di(n,r));return xi(100,_c(i,-1))}))}function rg(t,e,n){return void 0===n&&(n=!1),en((function(){if(n)e=Ji(e);else{var r=Sc(e,e.shape.length-1,!0);e=Di(e,r)}return e=Br(e,Np(),1-Np()),Yr(Sc(xi(t.toFloat(),$r(e)),e.shape.length-1))}))}function ig(t,e){return en((function(){var n=Gr(function(t){var e=[Af(t.shape)];return t.reshape(e)}(t)).toInt(),r=(e=Br(e,Np(),1-Np())).shape;return rg(Kl(n,r[r.length-1]).reshape(r),e,!1)}))}function ag(t,e){return en((function(){var n;return n=Br(e,Np(),1-Np()),n=$r(Di(n,Ii(1,n))),_c(function(t,e){if(!ht.arraysEqual(t.shape,e.shape))throw new Fp("logits and labels must have the same shape, but got shapes "+JSON.stringify(t.shape)+" and "+JSON.stringify(e.shape));return en((function(){var n=e.relu(),r=e.abs().neg();return n.sub(e.mul(t)).add(r.exp().log1p())}))}(t,n),-1)}))}function og(t,e){return en((function(){var n=Jm(t,-1),r=Jm(e,-1),i=xi(n,r);return Yr(Sc(i,-1))}))}var sg={meanSquaredError:tg,meanAbsoluteError:eg,meanAbsolutePercentageError:ng,meanSquaredLogarithmicError:function(t,e){return en((function(){var n=Br(e,Np(),Number.MAX_VALUE),r=$r(Ar(1,n)),i=Br(t,Np(),Number.MAX_VALUE),a=$r(Ar(1,i));return _c(Hf(Ii(r,a)),-1)}))},squaredHinge:function(t,e){return en((function(){var n=gi(0,Ii(1,xi(t,e)));return _c(Hf(n),-1)}))},hinge:function(t,e){return en((function(){var n=gi(0,Ii(1,xi(t,e)));return _c(n,-1)}))},categoricalHinge:function(t,e){return en((function(){var n=Sc(xi(t,e),-1),r=wc(xi(Ii(1,t),e),-1);return gi(0,Ar(1,Ii(r,n)))}))},logcosh:function(t,e){return en((function(){var n=Math.log(2),r=Ii(e,t),i=Ii(Ar(r,si(xi(-2,r))),n);return _c(i,-1)}))},categoricalCrossentropy:rg,sparseCategoricalCrossentropy:ig,binaryCrossentropy:ag,kullbackLeiblerDivergence:function(t,e){return en((function(){var n=Br(t,Np(),1),r=Br(e,Np(),1);return Sc(xi(t,$r(Di(n,r))),-1)}))},poisson:function(t,e){return en((function(){var n=$r(Ar(Np(),e));return _c(Ii(e,xi(t,n)),-1)}))},cosineProximity:og};function lg(t){if("string"==typeof t){if(t in sg)return sg[t];var e="Unknown loss "+t;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e="Unknown loss "+t+'. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new Fp(e)}return t}function ug(t,e){return en((function(){var n=xi(.5,Xn(e)),r=Of(vu(e,n),t.dtype);return _c(gu(t,r),-1)}))}function cg(t,e){return en((function(){return Of(gu(yc(t,-1),yc(e,-1)),"float32")}))}function hg(t,e){return en((function(){return zl(t.equal(1),e.equal(1)).sum().cast("float32")}))}function dg(t,e){return en((function(){var n=hg(t,e),r=function(t,e){return en((function(){return zl(t.equal(0),e.equal(1)).sum().cast("float32")}))}(t,e),i=n.add(r);return Ul(vu(i,0),n.div(i),0).cast("float32")}))}function pg(t,e){return ag(t,e)}function fg(t,e){return t.rank===e.rank&&(t=t.squeeze([t.rank-1])),(e=e.argMax(-1)).dtype!==t.dtype&&(e=e.asType(t.dtype)),gu(t,e).asType("float32")}var mg=rg,gg=ig,yg={binaryAccuracy:ug,categoricalAccuracy:cg,precision:dg,categoricalCrossentropy:mg,sparseCategoricalCrossentropy:gg,mse:tg,MSE:tg,mae:eg,MAE:eg,mape:ng,MAPE:ng,cosine:og};function vg(t){if(zp(null!==t,"Unknown LossOrMetricFn "+t),"string"==typeof t)return t;for(var e=void 0,n=0,r=Object.keys(sg);n<r.length;n++){var i=r[n];if(sg[i]===t){e=i;break}}if(void 0!==e)return e;for(var a=0,o=Object.keys(yg);a<o.length;a++)if(yg[i=o[a]]===t){e=i;break}return void 0!==e?e:t.name}var bg=1048576;function wg(t,e,n){if(void 0===n&&(n=!1),null==t||"object"!=typeof t||Object.getPrototypeOf(t)!==Object.prototype||!function t(e){if(null===e)return!0;if("object"==typeof e){if(Object.getPrototypeOf(e)===Object.prototype){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];if("string"!=typeof i)return!1;if(!t(e[i]))return!1}return!0}if(Array.isArray(e)){for(var a=0,o=e;a<o.length;a++)if(!t(o[a]))return!1;return!0}return!1}var s=typeof e;return"string"===s||"number"===s||"boolean"===s}(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){var r=JSON.stringify(t);r.length>bg&&console.warn('User-defined metadata of model "'+e+'" is too large in size (length='+r.length+" when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= "+bg+".")}}function _g(t,e,n){void 0===n&&(n=console.log);for(var r="",i=0;i<t.length;++i)i>0&&(r=r.slice(0,r.length-1)+" "),r=(r+=t[i]).slice(0,e[i]),r+=" ".repeat(e[i]-r.length);n(r)}function xg(t,e,n){var r;try{r=JSON.stringify(t.outputShape)}catch(t){r="multiple"}_g([t.name+" ("+t.getClassName()+")",r,t.countParams().toString()],e,n)}function Cg(t,e,n,r){var i;try{i=JSON.stringify(t.outputShape)}catch(t){i="multiple"}for(var a=[],o=0,s=t.inboundNodes;o<s.length;o++){var l=s[o];if(!(null!=n&&n.length>0&&-1===n.indexOf(l)))for(var u=0;u<l.inboundLayers.length;++u)a.push(l.inboundLayers[u].name+"["+l.nodeIndices[u]+"]["+l.tensorIndices[u]+"]")}var c=t.name,h=t.getClassName(),d=0===a.length?"":a[0];for(_g([c+" ("+h+")",i,t.countParams().toString(),d],e,r),u=1;u<a.length;++u)_g(["","","",a[u]],e,r)}function Sg(t,e,n){return("inboundNodes"===t||"outputLayers"===t||"inputLayers"===t)&&0===e&&"string"==typeof n}function kg(t,e){if(null===t)return null;if("string"==typeof t)return Wp(t);if("number"==typeof t||"boolean"==typeof t)return t;if(t instanceof Array){for(var n=[],r=t.length,i=0;i<r;++i){var a=t[i];Sg(e,i,a)?n.push(a):n.push(kg(a,e))}return n}for(var o={},s=0,l=Object.keys(t);s<l.length;s++){var u=l[s],c=t[u];if("name"===u&&"string"==typeof c)o[u]=c;else{var h=Wp(u);o[h]=kg(c,h)}}return o}var Eg=function(){function t(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof t)for(var n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(null==e)return;for(var r=0,i=e;r<i.length;r++){var a=i[r];this.add(a.key,a.value)}}}return t.prototype.add=function(t,e,n){if(null!=this.id2Value[t.id])throw new Fp("Duplicate key: name="+t.name+", id="+t.id);return this.id2Value[t.id]=function(t,e){if(null==t.dtype||t.dtype===e.dtype)return e;try{return or(e,t.dtype)}catch(n){throw new Fp("The dtype of the feed ("+e.dtype+") can not be cast to the dtype of the key '"+t.name+"' ("+t.dtype+").")}}(t,e),this.name2Id[t.name]=t.id,null!=n&&(this.id2Mask[t.id]=n),this},t.prototype.addFeed=function(t){this.add(t.key,t.value)},t.prototype.hasKey=function(t){return null!=this.id2Value[t.id]},t.prototype.names=function(){return Object.keys(this.name2Id)},t.prototype.getValue=function(t){if(t instanceof Fm){if(null==this.id2Value[t.id])throw new Fp("Nonexistent key: "+t.name);return this.id2Value[t.id]}var e=this.name2Id[t];if(null==e)throw new Fp("Feed dict has no SymbolicTensor name: "+t);return this.id2Value[e]},t.prototype.getMask=function(t){if(t instanceof Fm){if(null==this.id2Value[t.id])throw new Fp("Nonexistent key: "+t.name);return this.id2Mask[t.id]}var e=this.name2Id[t];if(null==e)throw new Fp("Feed dict has no SymbolicTensor name: "+t);return this.id2Mask[e]},t.prototype.disposeMasks=function(){null!=this.id2Mask&&nn(this.id2Mask)},t}(),Ig={},Ag={};function Dg(t,e,n,r){for(var i=null!=n&&n.training,a=Array.isArray(t),o=a?t:[t],s=o.map((function(t){return t.name})),l=[],u=e.names(),c=0,h=s;c<h.length;c++){var d=h[c];-1!==u.indexOf(d)?l.push(e.getValue(d)):l.push(null)}null!=r&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);var p,f,m=s.join(",")+"|"+e.names().join(",");if(null==Ig[m]){var g=function(t,e){ht.assert(null!=t&&t.length>0,(function(){return"Expected at least one fetch, got none"}));var n=[],r={};if(1===t.length){var i=Ng(t[0],e);n=i.sorted,r=i.recipientMap}else for(var a=new Set,o=0,s=t;o<s.length;o++){for(var l=Ng(s[o],e),u=l.recipientMap,c=0,h=l.sorted;c<h.length;c++){var d=h[c];a.has(d.name)||(n.push(d),a.add(d.name))}var p=function(t){null==r[t]&&(r[t]=new Set),u[t].forEach((function(e){return r[t].add(e)}))};for(var f in u)p(f)}return{sorted:n,recipientCounts:Tg(r)}}(o,e);f=g.recipientCounts,Ig[m]=p=g.sorted,Ag[m]=f}p=Ig[m],f={},i||Object.assign(f,Ag[m]);for(var y=new Eg(e),v=0;v<p.length;++v){if(null!=r){var b=Je().numTensors;b>r.maxNumTensors&&(r.maxNumTensors=b),b<r.minNumTensors&&(r.minNumTensors=b)}var w=p[v],_=w.sourceLayer;if(!(_ instanceof Vm)){for(var x=[],C=[],S=[],k=!1,E=0,I=w.inputs;E<I.length;E++){var A=I[E],D=y.getValue(A),T=y.getMask(A);x.push(D),C.push(T),null!=T&&(k=!0),i||(f[A.name]--,0!==f[A.name]||e.hasKey(A)||-1!==s.indexOf(A.name)||D.isDisposed||!0===A.sourceLayer.stateful||S.push(D))}k&&((n=n||{}).mask=C[0]);var N=jp(_.apply(x,n)),R=null;_.supportsMasking&&(R=_.computeMask(x,C));for(var O=Rg(w),F=Array.isArray(O)?O:[O],M=0;M<F.length;++M){y.hasKey(F[M])||y.add(F[M],N[M],Array.isArray(R)?R[0]:R);var P=s.indexOf(F[M].name);-1!==P&&(l[P]=N[M])}i||nn(S)}}return y.disposeMasks(),a?l:l[0]}function Tg(t){var e={};for(var n in t)e[n]=t[n].size;return e}function Ng(t,e){for(var n=new Set,r=[],i={},a=0,o=e.names();a<o.length;a++)n.add(o[a]);var s=[],l=[];for(s.push(t);s.length>0;){var u=s[s.length-1];if(n.has(u.name))s.pop();else{var c=l[l.length-1]===s.length-1;if(0===u.inputs.length||c)s.pop(),r.push(u),n.add(u.name),c&&l.pop();else{l.push(s.length-1);for(var h=0,d=u.inputs;h<d.length;h++){var p=d[h];null==i[p.name]&&(i[p.name]=new Set),i[p.name].add(u.name),n.has(p.name)||s.push(p)}}}}return{sorted:r,recipientMap:i}}function Rg(t){var e;if(1===t.sourceLayer.inboundNodes.length)e=t.sourceLayer.output;else{for(var n=null,r=0;r<t.sourceLayer.inboundNodes.length;++r)for(var i=0,a=t.sourceLayer.inboundNodes[r].outputTensors;i<a.length;i++)if(a[i].id===t.id){n=r;break}e=t.sourceLayer.getOutputAt(n)}return e}var Og=function(t){function e(n){var r=t.call(this,{})||this;if(r.containerNodes=new Set,r.name=n.name,null==r.name){var i=r.getClassName().toLowerCase();r.name=_m(i)}if(r.supportsMasking=!1,r.trainable_=!0,r.inputs=Array.isArray(n.inputs)?n.inputs.slice():[n.inputs],r.outputs=Array.isArray(n.outputs)?n.outputs.slice():[n.outputs],Kp(r.inputs).length!==r.inputs.length)throw new Fp("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+r.inputs.map((function(t){return t.name})));Kp(r.outputs).length!==r.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+r.outputs.map((function(t){return t.name}))),r.inputLayers=[],r.inputLayersNodeIndices=[],r.inputLayersTensorIndices=[],r.outputLayers=[],r.outputLayersNodeIndices=[],r.outputLayersTensorIndices=[],r.layers=[],r.internalContainerRefs=[];for(var a=0,o=r.outputs;a<o.length;a++){var s=(E=o[a]).sourceLayer,l=E.nodeIndex,u=E.tensorIndex;r.outputLayers.push(s),r.outputLayersNodeIndices.push(l),r.outputLayersTensorIndices.push(u)}for(var c=0,h=r.inputs;c<h.length;c++)s=(E=h[c]).sourceLayer,u=E.tensorIndex,zp(0===(l=E.nodeIndex),"input layer has >1 nodes"),zp(0===u,"input layer has >1 tensors"),r.inputLayers.push(s),r.inputLayersNodeIndices.push(l),r.inputLayersTensorIndices.push(u);r.inputNames=[],r.outputNames=[],r.feedInputShapes=[],r.feedInputNames=[],r.feedOutputNames=[];for(var d=0;d<r.inputLayers.length;d++){if(!((s=r.inputLayers[d])instanceof Vm))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. Received inputs: "+n.inputs+". Input "+d+" (0-based) originates from layer type "+s.getClassName()+".");r.inputNames.push(s.name),r.feedInputShapes.push(s.batchInputShape),r.feedInputNames.push(s.name)}for(var p=0,f=r.outputLayers;p<f.length;p++)r.outputNames.push((s=f[p]).name);r.internalInputShapes=r.inputs.map((function(t){return t.shape})),r.internalOutputShapes=r.outputs.map((function(t){return t.shape}));for(var m={},g={},y={},v={},b={},w=[],_=function(t,n,i,a,o,s){null!=a&&null!=o&&null!=s||(a=t.sourceLayer,o=t.nodeIndex,s=t.tensorIndex);var l=a.inboundNodes[o];if(-1!==i.indexOf(l))throw new Op("The tensor "+t.name+' at layer "'+a.name+'" is part of a cycle.');if(-1===n.indexOf(l)){r.containerNodes.add(e.nodeKey(a,o)),a.id in b||(b[a.id]=Object.keys(b).length),-1===i.indexOf(l)&&i.push(l);for(var u=l.inboundLayers.length,c=0;c<u;c++)_(l.inputTensors[c],n,i,l.inboundLayers[c],l.nodeIndices[c],l.tensorIndices[c]);for(n.push(l);i.indexOf(l)>=0;)i.splice(i.indexOf(l),1);w.push(l)}},x=[],C=[],S=0,k=r.outputs;S<k.length;S++){var E=k[S];_(E,x,C)}for(var I=0,A=w.slice().reverse();I<A.length;I++){g[($=A[I]).id]=$,$.id in m||(m[$.id]=0);var D=m[$.id];for(D=Math.max(D,null==y[$.outboundLayer.id]?0:y[$.outboundLayer.id]),y[$.outboundLayer.id]=D,v[$.outboundLayer.id]=$.outboundLayer,m[$.id]=D,d=0;d<$.inboundLayers.length;d++){var T=$.inboundLayers[d].inboundNodes[l=$.nodeIndices[d]];m[T.id]=Math.max(D+1,null==m[T.id]?0:m[T.id]),g[T.id]=T}}var N={};for(var R in m)(D=m[R])in N||(N[D]=[]),N[D].push(g[R]);var O={};for(var F in y)(D=y[F])in O||(O[D]=[]),O[D].push(v[F]);var M=Object.keys(O).map((function(t){return parseInt(t,10)})).sort($p);r.layers=[];for(var P=0,L=M;P<L.length;P++){var z=O[D=L[P]];z.sort((function(t,e){var n=b[t.id],r=b[e.id];return n<r?-1:n>r?1:0}));for(var V=0,B=z;V<B.length;V++)(s=B[V])instanceof e&&r.internalContainerRefs.push(s),r.layers.push(s)}r.layersByDepth=O,M=Object.keys(N).map((function(t){return parseInt(t,10)})).sort($p);for(var j=r.inputs.slice(),U=[],W=0,H=M;W<H.length;W++)for(var q=0,G=N[D=H[W]];q<G.length;q++){var $;if(null!=(s=($=G[q]).outboundLayer)){for(var K=0,X=$.inputTensors;K<X.length;K++)if(-1===j.indexOf(E=X[K]))throw new Op("Graph disconnected: cannot obtain value for tensor "+E+' at layer "'+s.name+'". The following previous layers were accessed without issue: '+U);for(var Y=0,Z=$.outputTensors;Y<Z.length;Y++)j.push(E=Z[Y]);U.push(s.name)}}r.nodesByDepth=N;for(var Q=r.layers.map((function(t){return t.name})),J=function(t){var e=Q.filter((function(e){return e===t})).length;if(1!==e)throw new Op('The name "'+t+'" is used '+e+" times in the model. All layer names should be unique. Layer names: "+JSON.stringify(Q))},tt=0,et=Q;tt<et.length;tt++)J(et[tt]);return r.outboundNodes=[],r.inboundNodes=[],new Pm({outboundLayer:r,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:r.inputs,outputTensors:r.outputs,inputMasks:r.inputs.map((function(t){return null})),outputMasks:r.outputs.map((function(t){return null})),inputShapes:r.inputs.map((function(t){return t.shape})),outputShapes:r.outputs.map((function(t){return t.shape}))}),r.built=!0,r._refCount=1,r}return Ep(e,t),e.prototype.assertNotDisposed=function(){if(0===this._refCount)throw new Error("Container '"+this.name+"' is already disposed.")},e.prototype.dispose=function(){this.assertNotDisposed();var t={refCountAfterDispose:null,numDisposedVariables:0};if(0==--this._refCount){for(var e=0,n=this.layers;e<n.length;e++)t.numDisposedVariables+=n[e].dispose().numDisposedVariables;for(var r=0,i=this.internalContainerRefs;r<i.length;r++)t.numDisposedVariables+=i[r].dispose().numDisposedVariables}return t.refCountAfterDispose=this._refCount,t},Object.defineProperty(e.prototype,"trainable",{get:function(){return this.trainable_},set:function(t){this.layers.forEach((function(e){e._trainableWeights.forEach((function(e){return e.trainable=t}))})),this.trainable_=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trainableWeights",{get:function(){if(this._trainableWeights.length>0)throw new Fp("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];for(var t=[],e=0,n=this.layers;e<n.length;e++)t=t.concat(n[e].trainableWeights);return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonTrainableWeights",{get:function(){for(var t=[],e=0,n=this.layers;e<n.length;e++){var r=n[e];t.push.apply(t,r.nonTrainableWeights)}if(!this.trainable){for(var i=[],a=0,o=this.layers;a<o.length;a++)i.push.apply(i,(r=o[a]).trainableWeights);return i.concat(t)}return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"weights",{get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)},enumerable:!0,configurable:!0}),e.prototype.loadWeights=function(t,e){void 0===e&&(e=!0);for(var n={},r=0,i=0,a=this.layers;i<a.length;i++)for(var o=0,s=a[i].weights;o<s.length;o++){var l=s[o];if(null!=n[l.originalName])throw new Fp("Duplicate weight name: "+l.originalName);n[l.originalName]=l,r++}var u=[];for(var c in t){if(null!=n[c])u.push([n[c],t[c]]);else if(e)throw new Fp("Provided weight data has no target variable: "+c);delete n[c]}if(e){var h=[];for(var d in n)h.push(d);if(h.length>0)throw new Fp(h.length+" of "+r+" weights are not set: "+h)}Tm(u)},e.prototype.updatedConfig=function(){var t=this.getConfig(),e={};return e.className=this.getClassName(),e.config=t,e.kerasVersion="tfjs-layers 1.7.4",e.backend="TensorFlow.js",e},e.prototype.toJSON=function(t,e){void 0===e&&(e=!0);var n=function t(e,n){if(null==e)return null;if("string"==typeof e)return Up(e);if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Array){for(var r=[],i=e.length,a=0;a<i;++a){var o=e[a];Sg(n,a,o)?r.push(o):r.push(t(o,n))}return r}for(var s={},l=0,u=Object.keys(e);l<u.length;l++){var c=u[l],h=e[c];s[Up(c)]="name"!==c&&"className"!==c||"string"!=typeof h?t(h,c):h}return s}(this.updatedConfig());return e?JSON.stringify(n):n},e.prototype.call=function(t,e){var n=this;return en((function(){t=jp(t);for(var r=new Eg,i=0;i<n.inputs.length;++i)r.add(n.inputs[i],t[i]);return Dg(n.outputs,r,e)}))},e.prototype.computeMask=function(t,e){var n=this;return en((function(){var r;return t=jp(t),r=null==e?Lp(null,t.length):jp(e),n.runInternalGraph(t,r)[1]}))},e.prototype.computeOutputShape=function(t){var e=Cm(t);if(e.length!==this.inputLayers.length)throw new Fp("Invalid inputShape argument "+t+": model has "+this.inputLayers.length+" tensor inputs.");for(var n={},r=0;r<e.length;r++){var i=this.inputLayers[r];n[b=i.name+"_0_0"]=e[r]}var a=Object.keys(this.nodesByDepth).map((function(t){return parseInt(t,10)})).sort($p);if(a.length>1)for(var o=0,s=a;o<s.length;o++)for(var l=0,u=this.nodesByDepth[s[o]];l<u.length;l++){var c=u[l];if(i=c.outboundLayer,-1===this.inputLayers.map((function(t){return t.id})).indexOf(i.id)){for(var h=[],d=0;d<c.inboundLayers.length;d++){var p=c.tensorIndices[d],f=n[b=c.inboundLayers[d].name+"_"+c.nodeIndices[d]+"_"+p];h.push(f)}var m=Cm(i.computeOutputShape(Bp(h))),g=i.inboundNodes.indexOf(c);for(d=0;d<m.length;d++)n[b=i.name+"_"+g+"_"+d]=m[d]}}var y=[],v=[];for(r=0;r<this.outputLayers.length;r++){var b=(i=this.outputLayers[r]).name+"_"+(g=this.outputLayersNodeIndices[r])+"_"+(p=this.outputLayersTensorIndices[r]);v.push(b)}for(r=0;r<v.length;r++){var w=v[r];zp(w in n),y.push(n[w])}return Bp(y)},e.prototype.runInternalGraph=function(t,e){null==e&&(e=Lp(null,t.length));for(var n={},r=0;r<this.inputs.length;++r){var i=this.inputs[r],a=t[r],o=e[r];n[i.id]=[a,o]}for(var s=0,l=Object.keys(this.nodesByDepth).map((function(t){return parseInt(t,10)})).sort($p);s<l.length;s++)for(var u=0,c=this.nodesByDepth[l[s]];u<c.length;u++){for(var h=c[u],d=h.outboundLayer,p=h.inputTensors,f=h.outputTensors,m=new Array,g=0,y=p;g<y.length;g++)(i=y[g]).id in n&&m.push(n[i.id]);if(m.length===p.length){var v={},b=void 0,w=void 0,_=void 0,x=void 0;if(null!=h.callArgs&&(v=h.callArgs),1===m.length){var C=m[0],S=C[0],k=C[1];null==v.mask&&(v.mask=k),_=jp(d.call(S,v)),x=jp(d.computeMask(S,k)),b=[S],w=[k]}else b=m.map((function(t){return t[0]})),w=m.map((function(t){return t[1]})),null==v.mask&&(v.mask=w),_=jp(d.call(b,v)),x=jp(d.computeMask(b,w));if(d.activityRegularizer)throw new Mp("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(r=0;r<f.length;++r)n[(i=f[r]).id]=[a=_[r],o=x[r]]}}for(var E=[],I=[],A=[],D=0,T=this.outputs;D<T.length;D++){zp((i=T[D]).id in n,"Could not compute output "+i.name+" : "+i.id);var N=n[i.id],R=N[0];o=N[1],A.push(R.shape),E.push(R),I.push(o)}return[E,I,A]},e.prototype.buildNodeConversionMap=function(t){for(var n,r={},i=0,a=this.layers;i<a.length;i++){var o=a[i];n=o instanceof e?1:0;for(var s=0;s<o.inboundNodes.length;s++){var l=e.nodeKey(o,s);this.containerNodes.has(l)&&(r[l]=n,n+=1)}}return r},e.prototype.getLayer=function(t,e){if(null!=e){if(this.layers.length<=e)throw new Fp("Was asked to retrieve layer at index "+e+", but model only has "+this.layers.length+" layer(s).");return this.layers[e]}if(null==t)throw new Fp("Provide either a layer name or layer index");for(var n=0,r=this.layers;n<r.length;n++){var i=r[n];if(i.name===t)return i}throw new Fp("No such layer: "+t)},e.prototype.calculateLosses=function(){var t=this;return en((function(){for(var n=[],r=0,i=t.layers;r<i.length;r++)for(var a=i[r],o=0;o<a.inboundNodes.length;++o){var s=e.nodeKey(a,o);t.containerNodes.has(s)&&n.push.apply(n,a.calculateLosses())}return n}))},e.prototype.getConfig=function(){for(var t={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[],i=0,a=this.layers;i<a.length;i++){for(var o=(w=a[i]).getClassName(),s=w.getConfig(),l=[],u=0;u<w.inboundNodes.length;u++){var c=w.inboundNodes[u],h=e.nodeKey(w,u),d={};if(this.containerNodes.has(h)){if(c.callArgs)try{JSON.stringify(c.callArgs),d=c.callArgs}catch(t){console.warn("Layer "+w.name+" was passed non-serializable keyword arguments: "+c.callArgs+". They will not be included in the serialized model (and thus will be missing at deserialization time)."),d={}}if(c.inboundLayers.length>0){for(var p=[],f=0;f<c.inboundLayers.length;f++){var m=c.inboundLayers[f],g=c.nodeIndices[f],y=c.tensorIndices[f];null==(x=n[e.nodeKey(m,g)])&&(x=0),p.push([m.name,x,y,d])}l.push(p)}}}var v={};v.name=w.name,v.className=o,v.config=s,v.inboundNodes=l,r.push(v)}t.layers=r;var b=[];for(f=0;f<this.inputLayers.length;f++){var w=this.inputLayers[f];h=e.nodeKey(w,g=this.inputLayersNodeIndices[f]),this.containerNodes.has(h)&&(null!==(x=n[h])&&void 0!==x||(x=0),b.push([w.name,x,y=this.inputLayersTensorIndices[f]]))}t.inputLayers=b;var _=[];for(f=0;f<this.outputLayers.length;f++){var x;h=e.nodeKey(w=this.outputLayers[f],g=this.outputLayersNodeIndices[f]),this.containerNodes.has(h)&&(null!==(x=n[h])&&void 0!==x||(x=0),_.push([w.name,x,y=this.outputLayersTensorIndices[f]]))}return t.outputLayers=_,t},e.fromConfig=function(t,e,n,r){void 0===n&&(n={}),void 0===r&&(r=!1);var i={},a={};function o(t,e){t.name in a?a[t.name].push(e):a[t.name]=[e]}function s(t,e){for(var n,r=[],a=0,s=e;a<s.length;a++){var l=s[a],u=l[0],c=l[1],h=l[2];if(n=null==l[3]?{}:l[3],!(u in i))return void o(t,e);var d=i[u];if(d.inboundNodes.length<=c)return void o(t,e);r.push(d.inboundNodes[c].outputTensors[h])}r.length>0&&t.apply(Bp(r),n)}function l(t){var n=t.name,a=Qm(t,null!=e.customObjects?e.customObjects:{});a.setFastWeightInitDuringBuild(r),i[n]=a,t.inboundNodes.forEach((function(t){if(!(t instanceof Array))throw new Fp("Corrupted configuration, expected array for nodeData: "+t);o(a,t)}))}for(var u=e.name,c=e.layers,h=0,d=c;h<d.length;h++)l(m=d[h]);for(;!Xp(a);)for(var p=0,f=c;p<f.length;p++){var m=f[p];if((D=i[m.name]).name in a){var g=a[D.name];delete a[D.name];for(var y=0,v=g;y<v.length;y++)s(D,v[y])}}for(var b=[],w=[],_=0,x=e.inputLayers;_<x.length;_++){var C=(m=x[_])[0],S=m[1],k=m[2];zp(C in i);var E=(D=i[C]).inboundNodes[S].outputTensors;b.push(E[k])}for(var I=0,A=e.outputLayers;I<A.length;I++){var D;C=(m=A[I])[0],S=m[1],k=m[2],zp(C in i),E=(D=i[C]).inboundNodes[S].outputTensors,w.push(E[k])}return new t({inputs:b,outputs:w,name:u})},Object.defineProperty(e.prototype,"stateful",{get:function(){if(this._stateful)throw new Fp("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(var t=0,e=this.layers;t<e.length;t++)if(e[t].stateful)return!0;return!1},enumerable:!0,configurable:!0}),e.prototype.resetStates=function(){var t=this;en((function(){t.layers.forEach((function(t){t.stateful&&t.resetStates()}))}))},e}(zm);function Fg(t,e){return function(t,e,n){var r=e.length;if(null==t||Array.isArray(t)&&0===t.length)return e.map((function(t){return null}));if(1===r)return Array.isArray(t)&&1===t.length?t:"object"==typeof t&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error("Provided "+n+" is an array of "+t.length+" element(s), but the model has "+r+" outputs. Make sure a set of weights is provided for each model output.");return t}if("object"==typeof t&&Object.keys(t).length>0&&"object"==typeof t[Object.keys(t)[0]]){var i=[];return e.forEach((function(e){i.push(e in t?t[e]:null)})),i}throw new Error("The model has multiple ("+r+") outputs, so "+n+" must be either an array with "+r+" elements or an object with "+e+" keys. Provided "+n+" not understood: "+JSON.stringify(t))}(t,e,"classWeight")}function Mg(t,e,n,r){return Dp(this,void 0,void 0,(function(){var i,a,o,s,l;return Tp(this,(function(u){switch(u.label){case 0:if(null!=e||null!=r)throw new Error("Support sampleWeight is not implemented yet");return null==n?[3,2]:(i=en((function(){if(1===t.shape.length)return t.clone();if(2===t.shape.length){if(t.shape[1]>1)return t.argMax(1);if(1===t.shape[1])return t.reshape([t.shape[0]]);throw new Error("Encountered unexpected last-dimension size ("+t.shape[1]+") during handling of class weights. The size is expected to be >= 1.")}throw new Error("Unexpected rank of target (y) tensor ("+t.rank+") during handling of class weights. The rank is expected to be 1 or 2.")})),s=(o=Array).from,[4,i.data()]);case 1:return a=s.apply(o,[u.sent()]),nn(i),l=[],a.forEach((function(t){if(null==n[t])throw new Error("classWeight must contain all classes in the training data. The class "+t+" exists in the data but not in classWeight");l.push(n[t])})),[2,Ln(l,"float32")];case 2:return[2,null]}}))}))}function Pg(t,e){return xi(t,e)}var Lg=32;function zg(t,e){var n,r;r=e.ys,ht.assert(null!=(n=e.xs)&&null!=r,(function(){return"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+e}));var i=Vg("input",t.inputNames,n),a=Vg("output",t.outputNames,r),o=i[0].shape[0];ht.assert(i.length===t.inputs.length,(function(){return"LayersModel has "+t.inputs.length+" inputs, but the dataset provides "+i.length+" inputs.  (Expected input keys: "+JSON.stringify(t.inputNames)+")"})),ht.assert(a.length===t.outputs.length,(function(){return"LayersModel has "+t.outputs.length+" outputs, but the dataset provides "+a.length+" outputs.  (Expected output keys: "+JSON.stringify(t.outputNames)+")"}));for(var s=function(e){ht.assert(i[e].shape[0]===o,(function(){return"Batch size mismatch: input "+t.inputNames[e]+" has "+i[e].shape[0]+"; expected  "+o+" based on input "+t.inputNames[0]+"."}))},l=0;l<i.length;l++)s(l);for(var u=function(e){ht.assert(a[e].shape[0]===o,(function(){return"Batch size mismatch: output "+t.outputNames[e]+" has "+a[e].shape[0]+"; expected  "+o+" based on input "+t.inputNames[0]+"."}))},c=0;c<a.length;c++)u(c);return{xs:i,ys:a}}function Vg(t,e,n){if(n instanceof xt)return[n];if(Array.isArray(n))return ht.assert(n.length===e.length,(function(){return"Received an array of "+n.length+" Tensors, but expected "+e.length+" to match the "+t+" keys "+e+"."})),n;for(var r=[],i=0,a=e;i<a.length;i++){var o=a[i];if(null==n[o])throw new Fp("The feature data generated by the dataset lacks the required "+t+" key '"+o+"'.");r.push(n[o])}return r}function Bg(t,e,n){return Dp(this,void 0,void 0,(function(){var r,i,a,o,s,l,u,c,h,d,p,f,m,g,y,v,b,w,_,x,C,S,k,E,I,A,D,T,N,R,O,F;return Tp(this,(function(M){switch(M.label){case 0:if(r=null!=n.batchesPerEpoch,ht.assert(null!=t.optimizer,(function(){return"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."})),ht.assert(null!=n,(function(){return"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."})),ht.assert(null!=n.epochs&&n.epochs>0&&Number.isInteger(n.epochs),(function(){return"For fitDataset(), config.epochs is expected to be a positive integer, but got "+n.epochs})),ht.assert(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),(function(){return"For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got "+n.batchesPerEpoch})),ht.assert(null==n.validationSplit,(function(){return"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."})),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0,M.label=1;case 1:return M.trys.push([1,,26,27]),a=void 0,o=void 0,(i=null!=n.validationData)&&(jg(n.validationData)?ht.assert(null==n.validationBatches||n.validationBatches>0&&Number.isInteger(n.validationBatches),(function(){return"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got "+n.validationBatches})):(s=function(t){if(3===t.length)throw new Mp("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}(n.validationData),a=s.xs,o=s.ys)),l=t.makeTrainFunction(),u=t.getDedupedMetricsNames(),c=i?u.slice().concat(u.map((function(t){return"val_"+t}))):u.slice(),h=Xm(n.callbacks,n.yieldEvery),d=Zm(h,null==n.verbose?1:n.verbose,n.epochs,null,null,function(t,e){var n=null;return null!=e.batchesPerEpoch?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}(e,n),null,i,c),f=d.history,(p=d.callbackList).setModel(t),t.history=f,[4,p.onTrainBegin()];case 2:return M.sent(),t.stopTraining_=!1,m=null==n.initialEpoch?0:n.initialEpoch,[4,e.iterator()];case 3:g=M.sent(),M.label=4;case 4:return m<n.epochs?(y={},[4,p.onEpochBegin(m)]):[3,23];case 5:return M.sent(),v=0,b=0,r?[3,7]:[4,e.iterator()];case 6:g=M.sent(),M.label=7;case 7:return!r||v<n.batchesPerEpoch?[4,g.next()]:[3,21];case 8:return w=M.sent(),r&&w.done?(console.warn("You provided `batchesPerEpoch` as "+n.batchesPerEpoch+", but your dataset iterator ran out of data after "+v+" batches; interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+n.batchesPerEpoch*n.epochs+" batches). You may need to use the repeat() function when building your dataset."),[3,21]):null==w.value?[3,15]:(_=zg(t,w.value),x=_.xs,C=_.ys,(S={}).batch=b,S.size=x[0].shape[0],[4,p.onBatchBegin(b,S)]);case 9:if(M.sent(),k=[],null==n.classWeight)return[3,13];E=Fg(n.classWeight,t.outputNames),F=0,M.label=10;case 10:return F<E.length?(A=(I=k).push,[4,Mg(C[F],null,E[F])]):[3,13];case 11:A.apply(I,[M.sent()]),M.label=12;case 12:return++F,[3,10];case 13:for(D=x.concat(C).concat(k),T=l(D),nn(D),F=0;F<u.length;++F)S[u[F]]=N=T[F],rn(N);return[4,p.onBatchEnd(b,S)];case 14:M.sent(),Um(S),b++,v++,M.label=15;case 15:return(r?v>=n.batchesPerEpoch:w.done)?i?(R=void 0,jg(n.validationData)?(O=jp,[4,t.evaluateDataset(n.validationData,{batches:n.validationBatches})]):[3,17]):[3,19]:[3,20];case 16:return R=O.apply(void 0,[M.sent()]),[3,18];case 17:R=jp(t.evaluate(a,o,{batchSize:null==n.validationBatchSize?Lg:n.validationBatchSize,verbose:0})),M.label=18;case 18:for(F=0;F<t.metricsNames.length;++F)y["val_"+t.metricsNames[F]]=R[F];M.label=19;case 19:return[3,21];case 20:return t.stopTraining_?[3,21]:[3,7];case 21:return[4,p.onEpochEnd(m,y)];case 22:return M.sent(),m++,t.stopTraining_?[3,23]:[3,4];case 23:return[4,p.onTrainEnd()];case 24:return M.sent(),[4,t.history.syncData()];case 25:return M.sent(),[2,t.history];case 26:return t.isTraining=!1,[7];case 27:return[2]}}))}))}function jg(t){return"function"==typeof t.iterator}function Ug(t,e,n){return Dp(this,void 0,void 0,(function(){var r,i,a,o,s,l,u,c,h,d;return Tp(this,(function(p){switch(p.label){case 0:if(r=null!=(n=n||{}).batches,i=t.testFunction,a=[],n.verbose>0)throw new Mp("Verbose mode is not implemented yet.");return ht.assert(!r||n.batches>0&&Number.isInteger(n.batches),(function(){return"Test loop expects `batches` to be a positive integer, but received "+JSON.stringify(n.batches)})),function(t){return"function"==typeof t.next}(e)?(s=e,[3,3]):[3,1];case 1:return[4,e.iterator()];case 2:s=p.sent(),p.label=3;case 3:o=s,l=0,u=0,c=function(){var e;return Tp(this,(function(s){switch(s.label){case 0:return[4,o.next()];case 1:return e=s.sent(),a=en((function(){if(e.value){var n=zg(t,e.value),r=n.xs.concat(n.ys),o=en((function(){return i(r)}));if(nn(r),0===u)for(var s=0;s<o.length;++s)a.push(Pn(0));var c=r[0].shape[0],h=function(t){var e=o[t],n=a[t];a[t]=en((function(){return Ar(a[t],xi(c,e))})),u>0&&nn(n)};for(s=0;s<o.length;++s)h(s);nn(o),l+=c,++u}return a})),e.done?(r&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` batches (in this case, "+n.batches+" batches). You may need to use the repeat() function when building your dataset."),[2,"break"]):[2]}}))},p.label=4;case 4:return!r||u<n.batches?[5,c()]:[3,6];case 5:return"break"===p.sent()?[3,6]:[3,4];case 6:for(h=0;h<a.length;++h)d=a[h],a[h]=Di(a[h],l),nn(d);return[2,Bp(a)]}}))}))}function Wg(t){ht.assert(t>0&&Number.isInteger(t),(function(){return"batchSize is required to be a positive integer, but got "+t}))}function Hg(t,e,n){return null==t?[null]:Array.isArray(t)?t.map((function(t){return Mf(t,e,n-e)})):Mf(t,e,n-e)}function qg(t,e){return en((function(){return null==t?null:Array.isArray(t)?t.map((function(t){return qg(t,e)})):Wf(t,"int32"===e.dtype?e:e.toInt())}))}function Gg(t,e){for(var n=[],r=0,i=null;r<t;)(i=r+e)>=t&&(i=t),n.push([r,i]),r=i;return n}function $g(t,e,n,r,i,a,o,s,l,u,c,h,d,p,f){return Dp(this,void 0,void 0,(function(){var m,g,y,v,b,w,_,x;return Tp(this,(function(C){switch(C.label){case 0:if(null==i&&(i=32),null==a&&(a=1),null==c&&(c=!0),null==d&&(d=0),m=!1,null!=l&&null!=u&&(m=!0),null!=f&&(m=!0,null==p))throw new Fp("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");return null!=(g=t.checkNumSamples(n,i,p,"steps_per_epoch"))&&(y=Rf(0,g)),null==o&&(o=1),v=Zm(s,o,a,d,g,p,i,m,h),w=v.history,(b=v.callbackList).setModel(t),t.history=w,[4,b.onTrainBegin()];case 1:C.sent(),t.stopTraining_=!1,_=function(a){var o,s,h,d,f;return Tp(this,(function(v){switch(v.label){case 0:return[4,b.onEpochBegin(a)];case 1:if(v.sent(),o={},null==p)return[3,2];throw new Mp("stepsPerEpoch mode is not implemented yet.");case 2:if("batch"===c)throw new Mp("batch shuffling is not implemneted yet");c&&ht.shuffle(y),s=Ln(y),h=Gg(g,i),d=function(a){var c;return Tp(this,(function(d){switch(d.label){case 0:return[4,b.onBatchBegin(a,c={})];case 1:return d.sent(),en((function(){var d=h[a][0],p=h[a][1],f=Mf(s,d,p-d);c.batch=a,c.size=p-d;for(var g=qg(n,f),y=e(g),v=0;v<r.length;++v){var b=r[v],w=y[v];c[b]=w,rn(w)}if(a===h.length-1&&m){var _=t.testLoop(l,u,i);for(v=0;v<r.length;++v)b=r[v],rn(w=_[v]),o["val_"+b]=w}})),[4,b.onBatchEnd(a,c)];case 2:return d.sent(),Um(c),t.stopTraining_?[2,"break"]:[2]}}))},f=0,v.label=3;case 3:return f<h.length?[5,d(f)]:[3,6];case 4:if("break"===v.sent())return[3,6];v.label=5;case 5:return++f,[3,3];case 6:s.dispose(),v.label=7;case 7:return[4,b.onEpochEnd(a,o)];case 8:return v.sent(),t.stopTraining_?[2,"break"]:[2]}}))},x=d,C.label=2;case 2:return x<a?[5,_(x)]:[3,5];case 3:if("break"===C.sent())return[3,5];C.label=4;case 4:return++x,[3,2];case 5:return[4,b.onTrainEnd()];case 6:return C.sent(),[4,t.history.syncData()];case 7:return C.sent(),[2,t.history]}}))}))}function Kg(t,e,n,r){return void 0===r&&(r={}),Dp(this,void 0,void 0,(function(){var i,a,o,s,l,u,c,h,d,p,f,m,g,y,v,b,w,_,x,C;return Tp(this,(function(S){switch(S.label){case 0:if(t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0,S.label=1;case 1:return S.trys.push([1,,7,8]),Wg(h=null==r.batchSize?32:r.batchSize),[4,t.standardizeUserData(e,n,r.sampleWeight,r.classWeight,!1,h)];case 2:if(d=S.sent(),i=d[0],a=d[1],c=d[2],p=!1,f=void 0,!(null!=r.validationData&&r.validationData.length>0))return[3,4];if(p=!0,2!==r.validationData.length)throw 3===r.validationData.length?new Mp("validationData including sample weights is not supported yet."):new Fp("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+r.validationData+" is invalid.");return[4,t.standardizeUserData(o=r.validationData[0],s=r.validationData[1],null,null,!0,h)];case 3:return m=S.sent(),f=(l=m[0]).concat(u=m[1]),[3,5];case 4:null!=r.validationSplit&&r.validationSplit>0&&r.validationSplit<1?(p=!0,g=Math.floor(i[0].shape[0]*(1-r.validationSplit)),l=Hg(i,g,y=i[0].shape[0]),i=Hg(i,0,g),u=Hg(a,g,y),a=Hg(a,0,g),f=l.concat(u)):null!=r.validationSteps&&(p=!0),S.label=5;case 5:return v=i.concat(a).concat(c),t.checkTrainableWeightsConsistency(),b=t.makeTrainFunction(),w=t.getDedupedMetricsNames(),_=void 0,x=void 0,p?(t.makeTestFunction(),_=t.testFunction,x=w.slice().concat(w.map((function(t){return"val_"+t})))):(_=null,f=[],x=w.slice()),C=Xm(r.callbacks,r.yieldEvery),[4,$g(t,b,v,w,h,r.epochs,r.verbose,C,_,f,r.shuffle,x,r.initialEpoch,null,null)];case 6:return[2,S.sent()];case 7:return t.isTraining=!1,Yg(i,e),Yg(a,n),Yg(l,o),Yg(u,s),null!=c&&nn(c),[7];case 8:return[2]}}))}))}function Xg(t){var e=[];t instanceof xt&&(t=[t]);for(var n=0;n<t.length;++n){var r=t[n];if(1===r.rank)e.push(Ff(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function Yg(t,e){if(null!=t){var n=[];if(e instanceof xt)n.push(e.id);else if(Array.isArray(e))e.forEach((function(t){return n.push(t.id)}));else if(null!=e)for(var r in e)n.push(e[r].id);var i=[];if(t instanceof xt)-1===n.indexOf(t.id)&&i.push(t);else if(Array.isArray(t))t.forEach((function(t){-1===n.indexOf(t.id)&&i.push(t)}));else if(null!=t)for(var a in t){var o=t[a];-1===n.indexOf(o.id)&&i.push(o)}i.forEach((function(t){t.isDisposed||t.dispose()}))}}function Zg(t){return Array.isArray(t)}function Qg(t){return!function(t){return t instanceof xt}(t)&&!Zg(t)}function Jg(t,e,n,r,i){if(void 0===r&&(r=!0),void 0===i&&(i=""),null==e||0===e.length){if(null!=t){var a=!1;if(Zg(t)&&t.length>0)a=!0;else if(Qg(t)){for(var o in t)if(t.hasOwnProperty(o)){a=!0;break}}else a=!0;if(a)throw new Fp("Error when checking model "+i+" expected no data, but got "+t)}return[]}if(null==t)return e.map((function(t){return null}));var s;if(Qg(t)){t=t,s=[];for(var l=0,u=e;l<u.length;l++){var c=u[l];if(null==t[c])throw new Fp('No data provided for "'+c+'". Need data for each key in: '+e);s.push(t[c])}}else if(Zg(t)){if((t=t).length!==e.length)throw new Fp("Error when checking model "+i+": the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see "+e.length+" Tensor(s), but instead got the following list of Tensor(s): "+t);s=t}else{if(t=t,e.length>1)throw new Fp("The model "+i+" expects "+e.length+" Tensor(s), but only received one Tensor. Found: Tensor with shape "+t.shape);s=[t]}if(s=Xg(s),null!=n)for(var h=0;h<e.length;++h)if(null!=n[h]){var d=s[h];if(d.shape.length!==n[h].length)throw new Fp("Error when checking "+i+": expected "+e[h]+" to have "+n[h].length+" dimension(s). but got array with shape "+d.shape);for(var p=0;p<n[h].length;++p)if(0!==p||r){var f=n[h][p];if(null!=f&&f>=0&&d.shape[p]!==f)throw new Fp("Error when checking "+i+": expected "+e[h]+" to have shape ["+n[h]+"], but got array with shape ["+d.shape+"].")}}return s}function ty(t,e,n,r,i){var a;if(void 0===r&&(r=!0),void 0===i&&(i=""),Array.isArray(t)){if(t.length!==e.length)throw new Fp("Error when checking model "+i+": the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see "+e.length+" Tensor(s), but instead got "+t.length+" Tensors(s).");a=t}else{if(e.length>1)throw new Fp("The model expects "+e.length+" "+i+" Tensors, but only received one Tensor. Found: array with shape "+JSON.stringify(t.shape)+".");a=[t]}if(null!=n)for(var o=0;o<e.length;++o)if(null!=n[o]){var s=a[o];if(s.shape.length!==n[o].length)throw new Fp("Error when checking "+i+": expected "+e[o]+" to have "+n[o].length+" dimension(s), but got array with shape "+JSON.stringify(s.shape));for(var l=0;l<n[o].length;++l)if(0!==l||r){var u=n[o][l];if(null!=u&&u!==s.shape[l])throw new Fp("Error when checking "+i+": expected "+e[o]+" to have shape "+JSON.stringify(n[o])+" but got array with shape "+JSON.stringify(s.shape)+".")}}}var ey=function(t){function e(e){var n=t.call(this,e)||this;return n.isTraining=!1,n}return Ep(e,t),e.prototype.summary=function(t,e,n){if(void 0===n&&(n=console.log),!this.built)throw new Fp("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");!function(t,e,n,r){void 0===r&&(r=console.log);var i,a=function(t){var e=!0,n=[],r=[];for(var i in t.nodesByDepth)n.push(t.nodesByDepth[i]);for(var a=0,o=n;a<o.length;a++){var s=o[a];if(s.length>1||1===s.length&&s[0].inboundLayers.length>1){e=!1;break}r.push.apply(r,s)}if(e)for(var l=0,u=t.layers;l<u.length;l++){for(var c=!1,h=0,d=u[l].inboundNodes;h<d.length;h++)if(-1!==r.indexOf(d[h])){if(c){e=!1;break}c=!0}if(!e)break}return e}(t),o=["Layer (type)","Output shape","Param #"];if(a?(e=e||65,n=n||[.45,.85,1]):(e=e||98,n=n||[.33,.55,.67,1]),n[n.length-1]<=1&&(n=n.map((function(t){return Math.floor(e*t)}))),!a)for(var s in o.push("Receives inputs"),i=[],t.nodesByDepth)i.push.apply(i,t.nodesByDepth[s]);r("_".repeat(e)),_g(o,n,r),r("=".repeat(e));for(var l=t.layers,u=0;u<l.length;++u)a?xg(l[u],n,r):Cg(l[u],n,i,r),r((u===l.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();var c=function(t){return Em(null!=t.collectedTrainableWeights?t.collectedTrainableWeights:t.trainableWeights)}(t),h=Em(t.nonTrainableWeights);r("Total params: "+(c+h)),r("Trainable params: "+c),r("Non-trainable params: "+h),r("_".repeat(e))}(this,t,e,n)},e.prototype.compile=function(t){var e=this;if(null==t.loss&&(t.loss=[]),this.loss=t.loss,"string"==typeof t.optimizer)this.optimizer_=function(t){var e={Adagrad:function(){return xp.adagrad(.01)},Adadelta:function(){return xp.adadelta(1,.95,Np())},Adam:function(){return xp.adam(.001,.9,.999,Np())},Adamax:function(){return xp.adamax(.002,.9,.999,Np(),0)},RMSProp:function(){return xp.rmsprop(.001,.9,0,Np())},SGD:function(){return xp.sgd(.01)}};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new Fp("Unknown Optimizer "+t)}(t.optimizer),this.isOptimizerOwned=!0;else{if(!(t.optimizer instanceof pp))throw new Fp("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=t.optimizer,this.isOptimizerOwned=!1}var n=[];if(Array.isArray(t.loss)||"string"==typeof t.loss||"function"==typeof t.loss)if(Array.isArray(t.loss)){if(t.loss.length!==this.outputs.length)throw new Fp("When passing an Array as loss, it should have one entry per model output. The model has "+this.outputs.length+" output(s), but you passed loss="+t.loss+".");n=t.loss.map((function(t){return lg(t)}))}else{var r=lg(t.loss);this.outputs.forEach((function(t){n.push(r)}))}else{for(var i in t.loss=t.loss,t.loss)if(-1===this.outputNames.indexOf(i))throw new Fp('Unknown entry in loss dictionary: "'+i+'". Only expected the following keys: '+this.outputNames);for(var a=0,o=this.outputNames;a<o.length;a++){var s=o[a];null==t.loss[s]&&console.warn('Output "'+s+'" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to '+s+" during training"),n.push(lg(t.loss[s]))}}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(var l=0;l<this.outputs.length;++l){var u=this.internalOutputShapes[l];this.feedOutputNames.push(this.outputNames[l]),this.feedOutputShapes.push(u),this.feedLossFns.push(this.lossFunctions[l])}var c=[];this.metrics=t.metrics,this.metricsNames=["loss"],this.metricsTensors=[],xf("loss",(function(){for(var t=0;t<e.outputs.length;++t)-1===c.indexOf(t)&&e.outputs.length>1&&(e.metricsTensors.push([e.lossFunctions[t],t]),e.metricsNames.push(e.outputNames[t]+"_loss"))}));var h=function(t,e){if(null==t||Array.isArray(t)&&0===t.length)return e.map((function(t){return[]}));var n;if("string"==typeof t||"function"==typeof t)n=[t];else{if(!Array.isArray(t)&&"object"!=typeof t)throw new TypeError("Type of metrics argument not understood. Expected an string,function, Array, or Object, found: "+t);n=t}if(Array.isArray(n))return e.map((function(t){return n}));for(var r=[],i=0,a=e;i<a.length;i++){var o=a[i],s=n.hasOwnProperty(o)?n[o]:[];Array.isArray(s)||(s=[s]),r.push(s)}return r}(t.metrics,this.outputNames);xf("metric",(function(){for(var t=function(t){if(-1!==c.indexOf(t))return"continue";!function(n){for(var r,i,a,o=function(n){if("string"==typeof n&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(n)){var o=e.internalOutputShapes[t];1===o[o.length-1]||e.lossFunctions[t]===ag?-1!==["accuracy","acc"].indexOf(n)?i=ug:-1!==["crossentropy","ce"].indexOf(n)&&(i=pg):e.lossFunctions[t]===ig?-1!==["accuracy","acc"].indexOf(n)?i=fg:-1!==["crossentropy","ce"].indexOf(n)&&(i=gg):-1!==["accuracy","acc"].indexOf(n)?i=cg:-1!==["crossentropy","ce"].indexOf(n)&&(i=mg);var s=void 0;-1!==["accuracy","acc"].indexOf(n)?s="acc":-1!==["crossentropy","ce"].indexOf(n)&&(s="ce"),a=i,r=""+s}else{var l=function(t){if("string"==typeof t&&t in yg)return yg[t];if("string"!=typeof t&&null!=t)return t;throw new Fp("Unknown metric "+t)}(n);a=l,r=""+vg(n)}var u;xf(r,(function(){u=a})),function(t,n,r){e.outputNames.length>1&&(n=e.outputNames[t]+"_"+n),e.metricsNames.push(n),e.metricsTensors.push([r,t])}(t,r,u)},s=0,l=n;s<l.length;s++)o(l[s])}(h[t])},n=0;n<e.outputs.length;++n)t(n)})),this.collectedTrainableWeights=this.trainableWeights},e.prototype.checkTrainableWeightsConsistency=function(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")},e.prototype.evaluate=function(t,e,n){void 0===n&&(n={});var r=null==n.batchSize?32:n.batchSize;Wg(r);var i=this.standardizeUserDataXY(t,e,!0,r);try{var a=i[0].concat(i[1]);return this.makeTestFunction(),Bp(this.testLoop(this.testFunction,a,r,n.verbose,n.steps))}finally{Yg(i[0],t),Yg(i[1],e)}},e.prototype.evaluateDataset=function(t,e){return Dp(this,void 0,void 0,(function(){return Tp(this,(function(n){return this.makeTestFunction(),[2,Ug(this,t,e)]}))}))},e.prototype.checkNumSamples=function(t,e,n,r){var i;if(void 0===r&&(r="steps"),null!=n){if(i=null,null!=e)throw new Fp("If "+r+" is set, batchSize must be null or undefined.Got batchSize = "+e)}else{if(null==t)throw new Fp("Either the input data should have a defined shape, or "+r+" shoud be specified.");i=Array.isArray(t)?t[0].shape[0]:t.shape[0]}return i},e.prototype.execute=function(t,e){if(Array.isArray(e)&&0===e.length)throw new Fp("`outputs` is an empty Array, which is not allowed.");var n=Array.isArray(e),r=this.retrieveSymbolicTensors(n?e:[e]),i=new Eg;if(t instanceof xt&&(t=[t]),Array.isArray(t)){if(t.length!==this.inputs.length)throw new Fp("The number of inputs provided ("+t.length+") does not match the number of inputs of this model ("+this.inputs.length+").");for(var a=0;a<this.inputs.length;++a)i.add(this.inputs[a],t[a])}else for(var o=0,s=this.inputs;o<s.length;o++){var l=s[o],u=t[l.name];if(null==u)throw new Fp("No value is provided for the model's input "+l.name);i.add(l,u)}var c=Dg(r,i);return n?c:c[0]},e.prototype.retrieveSymbolicTensors=function(t){for(var e=Lp(null,t.length),n=t.length,r=0,i=this.layers;r<i.length;r++){for(var a=i[r],o=Array.isArray(a.output)?a.output:[a.output],s=o.map((function(t){return t.name})),l=0;l<t.length;++l){var u=s.indexOf(t[l]);if(-1!==u&&(e[l]=o[u],n--),0===n)break}if(0===n)break}if(n>0){var c=[];throw e.forEach((function(e,n){null==e&&c.push(t[n])})),new Fp("Cannot find SymbolicTensors for output name(s): "+JSON.stringify(c))}return e},e.prototype.predictLoop=function(t,e,n){var r=this;return void 0===e&&(e=32),void 0===n&&(n=!1),en((function(){var i=r.checkNumSamples(t);if(n)throw new Mp("Verbose predictLoop() is not implemented yet.");for(var a=Gg(i,e),o=r.outputs.map((function(t){return[]})),s=function(e){en((function(){var n=Hg(t,a[e][0],a[e][1]),i=[];if(Array.isArray(n))for(var o=0;o<n.length;++o)i.push({key:r.inputs[o],value:n[o]});else i.push({key:r.inputs[0],value:n});var s=new Eg(i);return Dg(r.outputs,s)})).forEach((function(t,e){return o[e].push(t)}))},l=0;l<a.length;++l)s(l);return Bp(o.map((function(t){return Zn(t,0)})))}))},e.prototype.predict=function(t,e){void 0===e&&(e={});var n=Xg(t);ty(n,this.inputNames,this.feedInputShapes,!1);try{var r=null==e.batchSize?32:e.batchSize;return Wg(r),this.predictLoop(n,r)}finally{Yg(n,t)}},e.prototype.predictOnBatch=function(t){ty(t,this.inputNames,this.feedInputShapes,!0);var e=(Array.isArray(t)?t[0]:t).shape[0];return this.predictLoop(t,e)},e.prototype.standardizeUserDataXY=function(t,e,n,r){if(void 0===n&&(n=!0),null==this.optimizer_)throw new Op("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");for(var i=[],a=0;a<this.feedOutputShapes.length;++a){var o=this.feedOutputShapes[a];i.push(this.feedLossFns[a]===ig?o.slice(0,o.length-1).concat([1]):o)}if(function(t,e,n){var r=Kp(t.map((function(t){return t.shape[0]})));r.sort();var i=Kp(e.map((function(t){return t.shape[0]})));if(i.sort(),r.length>1)throw new Fp("All input Tensors (x) should have the same number of samples. Got array shapes: "+JSON.stringify(t.map((function(t){return t.shape}))));if(i.length>1)throw new Fp("All target Tensors (y) should have the same number of samples. Got array shapes: "+JSON.stringify(e.map((function(t){return t.shape}))));if(r.length>0&&i.length>0&&!ht.arraysEqual(r,i))throw new Fp("Input Tensors should have the same number of samples as target Tensors. Found "+r[0]+" input sample(s) and "+i[0]+" target sample(s).")}(t=Jg(t,this.feedInputNames,this.feedInputShapes,!1,"input"),e=Jg(e,this.feedOutputNames,i,!1,"target")),function(t,e,n){for(var r=[tg,ag,rg],i=0;i<t.length;++i){var a=t[i],o=e[i],s=n[i];if(null!=o){if(o===rg&&1===a.shape[a.shape.length-1])throw new Fp("You are passing a target array of shape "+a.shape+" while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(-1!==r.indexOf(o))for(var l=a.shape.slice(1),u=s.slice(1),c=0;c<l.length;++c){var h=u[c];if(null!=h&&l[c]!==h)throw new Fp("A target Tensor with shape "+a.shape+" was passed for an output of shape "+s+", while using a loss function that expects targets to have the same shape as the output.")}}}}(e,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=r&&r>0&&t[0].shape[0]%r!=0)throw new Fp("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+r+". Found: "+t[0].shape[0]+" sample(s).");return[t,e]},e.prototype.standardizeUserData=function(t,e,n,r,i,a){return void 0===i&&(i=!0),Dp(this,void 0,void 0,(function(){var o,s,l,u,c,h,d,p;return Tp(this,(function(f){switch(f.label){case 0:if(o=this.standardizeUserDataXY(t,e,i,a),s=o[0],l=o[1],null!=n)throw new Error("sample weight is not supported yet.");if(u=null,null==r)return[3,4];c=Fg(r,this.outputNames),u=[],h=0,f.label=1;case 1:return h<c.length?(p=(d=u).push,[4,Mg(l[h],null,c[h])]):[3,4];case 2:p.apply(d,[f.sent()]),f.label=3;case 3:return++h,[3,1];case 4:return[2,[s,l,u]]}}))}))},e.prototype.testLoop=function(t,e,n,r,i){var a=this;return void 0===r&&(r=0),en((function(){var o=a.checkNumSamples(e,n,i,"steps"),s=[];if(r>0)throw new Mp("Verbose mode is not implemented yet.");if(null!=i)throw new Mp("steps mode in testLoop() is not implemented yet");for(var l=Gg(o,n),u=Ln(Rf(0,o)),c=0;c<l.length;++c){var h=l[c][0],d=l[c][1],p=Mf(u,h,d-h),f=qg(e,p),m=t(f);if(0===c)for(var g=0;g<m.length;++g)s.push(Pn(0));for(g=0;g<m.length;++g)s[g]=Ar(s[g],xi(d-h,m[g]))}for(g=0;g<s.length;++g)s[g]=Di(s[g],o);return s}))},e.prototype.getDedupedMetricsNames=function(){for(var t=this.metricsNames,e=[],n=0;n<t.length;++n){var r=t[n],i=r;Vp(t,r)>1&&(i+="_"+Vp(t.slice(0,n),r)),e.push(i)}return e},e.prototype.makeTrainFunction=function(){var t=this;return function(e){var n=[],r=e.slice(0,t.inputs.length),i=e.slice(t.inputs.length,t.inputs.length+t.outputs.length),a=e.slice(t.inputs.length+t.outputs.length,t.inputs.length+2*t.outputs.length),o=[],s=t.collectedTrainableWeights.map((function(t){return t.read()}));return[t.optimizer_.minimize((function(){for(var e=[],s=0;s<t.inputs.length;++s)e.push({key:t.inputs[s],value:r[s]});var l,u=new Eg(e),c=Dg(t.outputs,u,{training:!0});for(s=0;s<t.lossFunctions.length;++s){var h=(0,t.lossFunctions[s])(i[s],c[s]);null!=a[s]&&(h=Pg(h,a[s]));var d=_c(h);n.push(d),l=0===s?h:Ar(l,h)}for(s=0;s<t.metricsTensors.length;++s){var p=void 0;if(t.outputs.length>1&&s<t.outputs.length)p=n[s];else{var f=t.metricsTensors[s][1];p=_c((0,t.metricsTensors[s][0])(i[f],c[f]))}rn(p),o.push(p)}return l=_c(l),t.calculateLosses().forEach((function(t){l=Ar(l,t)})),l}),!0,s)].concat(o)}},e.prototype.makeTestFunction=function(){var t=this;this.testFunction=function(e){return en((function(){for(var n,r=[],i=e.slice(0,t.inputs.length),a=e.slice(t.inputs.length,t.inputs.length+t.outputs.length),o=[],s=0;s<t.inputs.length;++s)o.push({key:t.inputs[s],value:i[s]});var l=new Eg(o),u=Dg(t.outputs,l);for(s=0;s<t.lossFunctions.length;++s){var c=_c((0,t.lossFunctions[s])(a[s],u[s]));n=0===s?c:Ar(n,c),r.push(n)}for(s=0;s<t.metricsTensors.length;++s){var h=t.metricsTensors[s][1],d=_c((0,t.metricsTensors[s][0])(a[h],u[h]));r.push(d)}return r}))}},e.prototype.fit=function(t,e,n){return void 0===n&&(n={}),Dp(this,void 0,void 0,(function(){return Tp(this,(function(r){return[2,Kg(this,t,e,n)]}))}))},e.prototype.fitDataset=function(t,e){return Dp(this,void 0,void 0,(function(){return Tp(this,(function(n){return[2,Bg(this,t,e)]}))}))},e.prototype.trainOnBatch=function(t,e){return Dp(this,void 0,void 0,(function(){var n,r,i,a,o,s,l,u,c;return Tp(this,(function(h){switch(h.label){case 0:return[4,this.standardizeUserData(t,e)];case 1:n=h.sent(),r=n[0],i=n[1],a=this.makeTrainFunction(),o=a(r.concat(i)),s=[],l=0,u=o,h.label=2;case 2:return l<u.length?[4,u[l].data()]:[3,5];case 3:c=h.sent(),s.push(c[0]),h.label=4;case 4:return l++,[3,2];case 5:return nn(o),[2,Bp(s)]}}))}))},e.prototype.getNamedWeights=function(t){for(var e=[],n=null!=t&&t.trainableOnly,r=n?this.trainableWeights:this.weights,i=this.getWeights(n),a=0;a<r.length;++a)n&&!r[a].trainable||e.push({name:r[a].originalName,tensor:i[a]});return e},Object.defineProperty(e.prototype,"stopTraining",{get:function(){return this.stopTraining_},set:function(t){this.stopTraining_=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"optimizer",{get:function(){return this.optimizer_},set:function(t){this.optimizer_!==t&&(this.optimizer_=t,this.isOptimizerOwned=!1)},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var e=t.prototype.dispose.call(this);if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){var n=Je().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-Je().numTensors}return e},e.prototype.getLossIdentifiers=function(){var t;if("string"==typeof this.loss)t=Up(this.loss);else if(Array.isArray(this.loss)){for(var e=0,n=this.loss;e<n.length;e++)if("string"!=typeof n[e])throw new Error("Serialization of non-string loss is not supported.");t=this.loss.map((function(t){return Up(t)}))}else{var r=Object.keys(this.loss);t={};for(var i=this.loss,a=0,o=r;a<o.length;a++){var s=o[a];if("string"!=typeof i[s])throw new Error("Serialization of non-string loss is not supported.");t[s]=Up(i[s])}}return t},e.prototype.getMetricIdentifiers=function(){if("string"==typeof this.metrics||"function"==typeof this.metrics)return[Up(vg(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map((function(t){return Up(vg(t))}));var t={};for(var e in this.metrics)t[e]=Up(vg(this.metrics[e]));return t},e.prototype.getTrainingConfig=function(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}},e.prototype.loadTrainingConfig=function(t){if(null!=t.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=t.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=t.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");var e,n,r=Qm(kg(t.optimizer_config));if("string"==typeof t.loss)e=Wp(t.loss);else if(Array.isArray(t.loss))e=t.loss.map((function(t){return Wp(t)}));else if(null!=t.loss)for(var i in e={},t.loss)e[i]=Wp(t.loss[i]);if(Array.isArray(t.metrics))n=t.metrics.map((function(t){return Wp(t)}));else if(null!=t.metrics)for(var i in n={},t.metrics)n[i]=Wp(t.metrics[i]);this.compile({loss:e,metrics:n,optimizer:r})},e.prototype.save=function(t,e){return Dp(this,void 0,void 0,(function(){var n,r,i,a,o,s,l,u,c,h;return Tp(this,(function(d){switch(d.label){case 0:if("string"==typeof t){if(0===(n=rp.getSaveHandlers(t)).length)throw new Fp("Cannot find any save handlers for URL '"+t+"'");if(n.length>1)throw new Fp("Found more than one ("+n.length+") save handlers for URL '"+t+"'");t=n[0]}if(null==t.save)throw new Fp("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return[4,rp.encodeWeights(this.getNamedWeights(e))];case 1:return r=d.sent(),i=this.toJSON(null,!1),a={modelTopology:i,format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v1.7.4",convertedBy:null},null!=e&&e.includeOptimizer&&null!=this.optimizer?(a.trainingConfig=this.getTrainingConfig(),o="optimizer",c=(u=rp).encodeWeights,[4,this.optimizer.getWeights()]):[3,4];case 2:return[4,c.apply(u,[d.sent(),o])];case 3:s=d.sent(),l=s.data,(h=r.specs).push.apply(h,s.specs),r.data=rp.concatenateArrayBuffers([r.data,l]),d.label=4;case 4:return null!=this.userDefinedMetadata&&(wg(this.userDefinedMetadata,this.name,!0),a.userDefinedMetadata=this.userDefinedMetadata),a.weightData=r.data,a.weightSpecs=r.specs,[2,t.save(a)]}}))}))},e.prototype.setUserDefinedMetadata=function(t){wg(t,this.name),this.userDefinedMetadata=t},e.prototype.getUserDefinedMetadata=function(){return this.userDefinedMetadata},e.className="Model",e}(Og);function ny(t,e,n){return Dp(this,void 0,void 0,(function(){var r,i,a,o,s,l,u,c,h;return Tp(this,(function(d){switch(d.label){case 0:if(null==n&&(n={}),null==t.load)throw new Fp("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");return[4,t.load()];case 1:if(r=d.sent(),null!=(i=r.modelTopology).model_config&&(i=i.model_config),a=null==n.strict||n.strict,o=null!=r.weightData&&null!=r.weightSpecs&&a,s=Qm(kg(i),e,o),null!=(l=r.trainingConfig)&&s.loadTrainingConfig(l),null!=r.userDefinedMetadata&&s.setUserDefinedMetadata(r.userDefinedMetadata),null==r.weightData)return[3,4];if(null==r.weightSpecs)throw new Fp("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");return u=function(t,e){var n=rp.decodeWeights(t,e),r={},i=[];return e.forEach((function(t){"optimizer"===t.group?i.push({name:t.name,tensor:n[t.name]}):r[t.name]=n[t.name]})),{modelWeights:r,optimizerWeights:i}}(r.weightData,r.weightSpecs),h=u.optimizerWeights,s.loadWeights(c=u.modelWeights,a),null!=s.optimizer&&h.length>0?[4,s.optimizer.setWeights(h)]:[3,3];case 2:d.sent(),d.label=3;case 3:nn(c),nn(h.map((function(t){return t.tensor}))),d.label=4;case 4:return[2,s]}}))}))}hp.registerClass(ey);var ry=function(t){function e(e){var n=t.call(this,{inputs:[],outputs:[]})||this;if(e=e||{},n.trainable=!0,n.built=!1,n.name=null!=e.name?e.name:_m("sequential_"),null!=e.layers)for(var r=0,i=e.layers;r<i.length;r++)n.add(i[r]);return n}return Ep(e,t),e.prototype.checkShape=function(t){if(t.inboundNodes[0].outputTensors[0].shape.some((function(t){return t<0})))throw new Fp("Negative dimension size caused by adding layer "+t.name+" with input shape ["+t.inboundNodes[0].inputTensors[0].shape+"]")},e.prototype.add=function(t){var n,r=t instanceof e||t instanceof ey;if(r){if(1!==(n=t).outputs.length)throw new Fp("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==n.inputs.length)throw new Fp("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===t.inboundNodes.length){if(null==t.batchInputShape)throw new Fp("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");var i=Bm({batchShape:t.batchInputShape,dtype:t.dtype,name:t.name+"_input"});t.apply(i)}if(r)this.outputs=n.outputs,this.inputs=n.inputs;else{if(1!==t.inboundNodes.length)throw new Fp("A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer "+t.name+" which has "+t.inboundNodes.length+" pre-existing inbound connections.");if(1!==t.inboundNodes[0].outputTensors.length)throw new Fp("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[t.inboundNodes[0].outputTensors[0]],this.inputs=function t(e,n,r){if((null==n||null!=r&&r>0)&&(n=e.sourceLayer,r=e.nodeIndex),0===n.inboundNodes.length)return[e];var i=n.inboundNodes[r];if(0===i.inboundLayers.length)return i.inputTensors;for(var a=[],o=0;o<i.inboundLayers.length;o++)for(var s=0,l=t(i.inputTensors[o],i.inboundLayers[o],i.nodeIndices[o]);s<l.length;s++){var u=l[s];-1===a.indexOf(u)&&a.push(u)}return a}(this.outputs[0])}this.inboundNodes=[],new Pm({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Lp(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map((function(t){return t.shape})),outputShapes:this.outputs[0].shape})}else{var a=t.apply(this.outputs[0]);if(Array.isArray(a))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[a],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(t),this.built=!1},e.prototype.pop=function(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{var t=this.layers.length-1;this.layers[t].outboundNodes=[],this.outputs=[this.layers[t].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}},e.prototype.call=function(t,e){return null==this.model&&this.build(),this.model.call(t,e)},e.prototype.build=function(t){if(km(t),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new ey({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0},e.prototype.countParams=function(){return this.built||this.build(),t.prototype.countParams.call(this)},e.prototype.summary=function(e,n,r){void 0===r&&(r=console.log),this.built||this.build(),t.prototype.summary.call(this,e,n,r)},e.prototype.setWeights=function(t){null==this.model&&this.build(),this.model.setWeights(t)},e.prototype.evaluate=function(t,e,n){if(void 0===n&&(n={}),!this.built)throw new Op("The model needs to be compiled before being used.");return this.model.evaluate(t,e,n)},e.prototype.evaluateDataset=function(t,e){return Dp(this,void 0,void 0,(function(){return Tp(this,(function(n){if(!this.built)throw new Op("The model needs to be compiled before being used.");return[2,this.model.evaluateDataset(t,e)]}))}))},e.prototype.predict=function(t,e){return void 0===e&&(e={}),null==this.model&&this.build(),this.model.predict(t,e)},e.prototype.predictOnBatch=function(t){return null==this.model&&this.build(),this.model.predictOnBatch(t)},e.prototype.compile=function(t){this.build(),this.model.compile(t),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames},Object.defineProperty(e.prototype,"optimizer",{get:function(){return null==this.model?void 0:this.model.optimizer},set:function(t){this.model.optimizer=t},enumerable:!0,configurable:!0}),e.prototype.fit=function(t,e,n){return void 0===n&&(n={}),Dp(this,void 0,void 0,(function(){return Tp(this,(function(r){if(!this.built)throw new Op("The model needs to be compiled before being used.");return[2,this.model.fit(t,e,n)]}))}))},e.prototype.fitDataset=function(t,e){return Dp(this,void 0,void 0,(function(){return Tp(this,(function(n){if(!this.built)throw new Op("The model needs to be compiled before being used.");return[2,this.model.fitDataset(t,e)]}))}))},e.prototype.trainOnBatch=function(t,e){return Dp(this,void 0,void 0,(function(){return Tp(this,(function(n){return[2,this.model.trainOnBatch(t,e)]}))}))},e.fromConfig=function(t,n,r,i){var a;void 0===r&&(r={}),void 0===i&&(i=!1);var o={};if(n instanceof Array){if(null==n[0].className||"Merge"===n[0].className)throw new Fp("Legacy serialization format not supported yet.");a=n}else ht.assert(null!=n.layers,(function(){return"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."})),a=n.layers,delete n.layers,o=n;var s=new t(o);if(!(s instanceof e))throw new Mp("Sequential.fromConfig called on non-Sequential input: "+s);for(var l=0,u=a;l<u.length;l++){var c=Qm(u[l],void 0,i);i&&c.setFastWeightInitDuringBuild(!0),s.add(c)}return s},Object.defineProperty(e.prototype,"stopTraining",{get:function(){if(null==this.model)throw new Fp("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining},set:function(t){if(null==this.model)throw new Fp("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=t},enumerable:!0,configurable:!0}),e.prototype.getConfig=function(){for(var t=[],e=0,n=this.layers;e<n.length;e++){var r=n[e],i={};i.className=r.getClassName(),i.config=r.getConfig(),t.push(i)}return{name:this.name,layers:t}},e.className="Sequential",e}(ey);function iy(t){return new ey(t)}function ay(t){return new ry(t)}function oy(t,e){return null==e&&(e={}),function(t,e){return Dp(this,void 0,void 0,(function(){var n;return Tp(this,(function(r){if(null==e&&(e={}),"string"==typeof t){if(0===(n=rp.getLoadHandlers(t,e.onProgress)).length)n.push(rp.browserHTTPRequest(t,e));else if(n.length>1)throw new Fp("Found more than one ("+n.length+") load handlers for URL '"+t+"'");t=n[0]}return[2,ny(t,void 0,e)]}))}))}(t,e)}function sy(t){return Bm(t)}function ly(t,e){Ym.registerCallbackConstructor(t,e)}hp.registerClass(ry);var uy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ep(e,t),e.prototype.getConfig=function(){return{}},e}(hp.Serializable),cy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ep(e,t),e.prototype.apply=function(t,e){return void 0===e&&(e=1),function(t,e){if(void 0===e&&(e=1),1!==e)throw new Mp("Support for alpha values other than 1 ("+e+") is not implemented yet.");return Ec(t)}(t,e)},e.className="elu",e}(uy);hp.registerClass(cy);var hy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ep(e,t),e.prototype.apply=function(t){return Nc(t)},e.className="selu",e}(uy);hp.registerClass(hy);var dy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ep(e,t),e.prototype.apply=function(t){return Dc(t)},e.className="relu",e}(uy);hp.registerClass(dy);var py=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ep(e,t),e.prototype.apply=function(t){return en((function(){return vi(6,Dc(t))}))},e.className="relu6",e}(uy);hp.registerClass(py);var fy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ep(e,t),e.prototype.apply=function(t){return t},e.className="linear",e}(uy);hp.registerClass(fy);var my=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ep(e,t),e.prototype.apply=function(t){return ti(t)},e.className="sigmoid",e}(uy);hp.registerClass(my);var gy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ep(e,t),e.prototype.apply=function(t){return function(t){return en((function(){var e=Ar(.5,xi(.2,t));return Br(e,0,1)}))}(t)},e.className="hardSigmoid",e}(uy);hp.registerClass(gy);var yy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ep(e,t),e.prototype.apply=function(t){return si(t)},e.className="softplus",e}(uy);hp.registerClass(yy);var vy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ep(e,t),e.prototype.apply=function(t){return function(t){return en((function(){return Di(t,Rr(t).add(1))}))}(t)},e.className="softsign",e}(uy);hp.registerClass(vy);var by=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ep(e,t),e.prototype.apply=function(t){return hi(t)},e.className="tanh",e}(uy);hp.registerClass(by);var wy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ep(e,t),e.prototype.apply=function(t,e){return void 0===e&&(e=-1),Ji(t,e)},e.className="softmax",e}(uy);hp.registerClass(wy);var _y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ep(e,t),e.prototype.apply=function(t,e){return void 0===e&&(e=-1),ta(t,e)},e.className="logSoftmax",e}(uy);function xy(t){return t.getClassName()}function Cy(t,e){return void 0===e&&(e={}),Gp(t,hp.SerializationMap.getMap().classNameMap,e,"activation")}function Sy(t){var e;return null==t?Cy(e={className:"linear",config:{}}):"string"==typeof t?((e={}).className=t,e.config={},Cy(e)):t instanceof uy?t:Cy(t)}function ky(t){if(null!=t&&"object"!=typeof t)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an object, but received: "+t)}hp.registerClass(_y);var Ey=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ep(e,t),e}(hp.Serializable),Iy=function(t){function e(e){var n=t.call(this)||this;return ky(e),n.l1=null==e||null==e.l1?.01:e.l1,n.l2=null==e||null==e.l2?.01:e.l2,n.hasL1=0!==n.l1,n.hasL2=0!==n.l2,n}return Ep(e,t),e.prototype.apply=function(t){var e=this;return en((function(){var n=qn([1]);return e.hasL1&&(n=Ar(n,Sc(xi(e.l1,Rr(t))))),e.hasL2&&(n=Ar(n,Sc(xi(e.l2,Hf(t))))),n.asScalar()}))},e.prototype.getConfig=function(){return{l1:this.l1,l2:this.l2}},e.fromConfig=function(t,e){return new t({l1:e.l1,l2:e.l2})},e.className="L1L2",e}(Ey);hp.registerClass(Iy);var Ay={l1l2:"L1L2"};function Dy(t){return qp(t)}function Ty(t,e){return void 0===e&&(e={}),Gp(t,hp.SerializationMap.getMap().classNameMap,e,"regularizer")}function Ny(t){return null==t?null:"string"==typeof t?Ty({className:t in Ay?Ay[t]:t,config:{}}):t instanceof Ey?t:Ty(t)}var Ry=function(t){function e(e){var n=t.call(this,null==e?{}:e)||this;return n.supportsMasking=!0,null!=e&&(n.maxValue=e.maxValue),n}return Ep(e,t),e.prototype.call=function(t,e){t=Sm(t);var n=Dc(t);return null!=this.maxValue&&(n=Br(n,0,this.maxValue)),n},e.prototype.computeOutputShape=function(t){return t},e.prototype.getConfig=function(){var e={maxValue:this.maxValue},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="ReLU",e}(zm);hp.registerClass(Ry);var Oy=function(t){function e(e){var n=t.call(this,null==e?{}:e)||this;return n.DEFAULT_ALPHA=.3,null==e&&(e={}),n.alpha=null==e.alpha?n.DEFAULT_ALPHA:e.alpha,n}return Ep(e,t),e.prototype.call=function(t,e){var n=Sm(t);return Ic(n,this.alpha)},e.prototype.computeOutputShape=function(t){return t},e.prototype.getConfig=function(){var e={alpha:this.alpha},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="LeakyReLU",e}(zm);hp.registerClass(Oy);var Fy=function(t){function e(e){var n=t.call(this,null==e?{}:e)||this;if(n.DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),n.supportsMasking=!0,n.alphaInitializer=gm(e.alphaInitializer||n.DEFAULT_ALPHA_INITIALIZER),n.alphaRegularizer=Ny(e.alphaRegularizer),n.alphaConstraint=cf(e.alphaConstraint),null==e.sharedAxes)n.sharedAxes=null;else if(Array.isArray(e.sharedAxes))n.sharedAxes=e.sharedAxes;else{if("number"!=typeof e.sharedAxes)throw new Fp("Expected sharedAxes to be a number or an array of numbers, but got "+e.sharedAxes);n.sharedAxes=[e.sharedAxes]}return n}return Ep(e,t),e.prototype.build=function(t){var e=(t=km(t)).slice(1);if(null!=this.sharedAxes)for(var n=0,r=this.sharedAxes;n<r.length;n++)e[(a=r[n])-1]=1;this.alpha=this.addWeight("alpha",e,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);var i={};if(null!=this.sharedAxes)for(var a=1;a<t.length;++a)i[a]=t[a];this.inputSpec=[new Om({ndim:t.length,axes:i})],this.built=!0},e.prototype.call=function(t,e){return t=Sm(t),Ac(t,this.alpha.read())},e.prototype.getConfig=function(){var e={alphaInitializer:mm(this.alphaInitializer),alphaRegularizer:Dy(this.alphaRegularizer),alphaConstraint:lf(this.alphaConstraint),sharedAxes:this.sharedAxes},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="PReLU",e}(zm);hp.registerClass(Fy);var My=function(t){function e(e){var n=t.call(this,null==e?{}:e)||this;if(n.DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==n.DEFAULT_ALPHA)throw new Mp("Non-default alpha value ("+e.alpha+") is not supported by the ELU layer yet.");return n.alpha=null==e.alpha?n.DEFAULT_ALPHA:e.alpha,n}return Ep(e,t),e.prototype.call=function(t,e){var n=Sm(t);return Ec(n)},e.prototype.computeOutputShape=function(t){return t},e.prototype.getConfig=function(){var e={alpha:this.alpha},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="ELU",e}(zm);hp.registerClass(My);var Py=function(t){function e(e){var n=t.call(this,null==e?{}:e)||this;return n.DEFAULT_THETA=1,null==e&&(e={}),n.theta=null==e.theta?n.DEFAULT_THETA:e.theta,n}return Ep(e,t),e.prototype.call=function(t,e){var n=Sm(t);return n.mul(Of(n.greater(this.theta),"float32"))},e.prototype.computeOutputShape=function(t){return t},e.prototype.getConfig=function(){var e={theta:this.theta},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="ThresholdedReLU",e}(zm);hp.registerClass(Py);var Ly=function(t){function e(e){var n=t.call(this,null==e?{}:e)||this;return n.DEFAULT_AXIS=1,null==e&&(e={}),n.softmax=(new wy).apply,n.axis=null==e.axis?n.DEFAULT_AXIS:e.axis,n}return Ep(e,t),e.prototype.call=function(t,e){var n=Sm(t);return this.softmax(n,this.axis)},e.prototype.computeOutputShape=function(t){return t},e.prototype.getConfig=function(){var e={axis:this.axis},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="Softmax",e}(zm);function zy(t,e,n){if("number"==typeof t)return Lp(t,e);if(t.length!==e)throw new Fp("The "+n+" argument must be an integer or tuple of "+e+" integers. Received: "+t.length+" elements.");for(var r=0;r<e;++r){var i=t[r];if(!If(i))throw new Fp("The "+n+" argument must be an integer or tuple of "+e+" integers. Received: "+JSON.stringify(t)+" including a non-integer number "+i)}return t}function Vy(t,e,n,r,i){return void 0===i&&(i=1),null==t?t:Math.floor((("same"===n?t:t-(e+(e-1)*(i-1))+1)+r-1)/r)}function By(t,e,n,r){if(null==t)return null;if("valid"===r)t=t*e+Nf([n-e,0]);else{if("same"!==r)throw new Fp("Unsupport padding mode: "+r+".");t*=e}return t}function jy(t,e){return en((function(){return yf(e),"channelsFirst"===e?ea(t,[0,2,3,1]):t}))}function Uy(t,e){return en((function(){return yf(e),"channelsFirst"===e?ea(t,[0,2,3,4,1]):t}))}function Wy(t,e,n,r,i,a,o,s){return void 0===r&&(r=[1,1]),void 0===i&&(i="valid"),void 0===s&&(s=null),en((function(){if(null==a&&(a="channelsLast"),yf(a),3!==t.rank&&4!==t.rank)throw new Fp("conv2dWithBiasActivation expects input to be of rank 3 or 4, but received "+t.rank+".");if(3!==e.rank&&4!==e.rank)throw new Fp("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received "+t.rank+".");var l=jy(t,a);if("causal"===i)throw new Mp("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=Rh.conv2d({x:l,filter:e,strides:r,pad:"same"===i?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:s}),"channelsFirst"===a&&(l=ea(l,[0,3,1,2])),l}))}hp.registerClass(Ly);var Hy=function(t){function e(n,r){var i=t.call(this,r)||this;if(i.bias=null,i.DEFAULT_KERNEL_INITIALIZER="glorotNormal",i.DEFAULT_BIAS_INITIALIZER="zeros",e.verifyArgs(r),i.rank=n,Qp(i.rank,"rank"),1!==i.rank&&2!==i.rank&&3!==i.rank)throw new Mp("Convolution layer for rank other than 1, 2, or 3 ("+i.rank+") is not implemented yet.");if(i.kernelSize=zy(r.kernelSize,n,"kernelSize"),i.strides=zy(null==r.strides?1:r.strides,n,"strides"),i.padding=null==r.padding?"valid":r.padding,vf(i.padding),i.dataFormat=null==r.dataFormat?"channelsLast":r.dataFormat,yf(i.dataFormat),i.activation=Sy(r.activation),i.useBias=null==r.useBias||r.useBias,i.biasInitializer=gm(r.biasInitializer||i.DEFAULT_BIAS_INITIALIZER),i.biasConstraint=cf(r.biasConstraint),i.biasRegularizer=Ny(r.biasRegularizer),i.activityRegularizer=Ny(r.activityRegularizer),i.dilationRate=zy(null==r.dilationRate?1:r.dilationRate,n,"dilationRate"),1===i.rank&&Array.isArray(i.dilationRate)&&1!==i.dilationRate.length)throw new Fp("dilationRate must be a number or an array of a single number for 1D convolution, but received "+JSON.stringify(i.dilationRate));if(2===i.rank){if("number"==typeof i.dilationRate)i.dilationRate=[i.dilationRate,i.dilationRate];else if(2!==i.dilationRate.length)throw new Fp("dilationRate must be a number or array of two numbers for 2D convolution, but received "+JSON.stringify(i.dilationRate))}else if(3===i.rank)if("number"==typeof i.dilationRate)i.dilationRate=[i.dilationRate,i.dilationRate,i.dilationRate];else if(3!==i.dilationRate.length)throw new Fp("dilationRate must be a number or array of three numbers for 3D convolution, but received "+JSON.stringify(i.dilationRate));return i}return Ep(e,t),e.verifyArgs=function(t){if(zp("kernelSize"in t,"required key 'kernelSize' not in config"),"number"!=typeof t.kernelSize&&!Zp(t.kernelSize,"number",1,3))throw new Fp("BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received "+JSON.stringify(t.kernelSize)+".")},e.prototype.getConfig=function(){var e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:xy(this.activation),useBias:this.useBias,biasInitializer:mm(this.biasInitializer),biasRegularizer:Dy(this.biasRegularizer),activityRegularizer:Dy(this.activityRegularizer),biasConstraint:lf(this.biasConstraint)},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e}(zm),qy=function(t){function e(n,r){var i=t.call(this,n,r)||this;return i.kernel=null,e.verifyArgs(r),i.filters=r.filters,Qp(i.filters,"filters"),i.kernelInitializer=gm(r.kernelInitializer||i.DEFAULT_KERNEL_INITIALIZER),i.kernelConstraint=cf(r.kernelConstraint),i.kernelRegularizer=Ny(r.kernelRegularizer),i}return Ep(e,t),e.prototype.build=function(t){var e;t=km(t);var n="channelsFirst"===this.dataFormat?1:t.length-1;if(null==t[n])throw new Fp("The channel dimension of the input should be defined. Found "+t[n]);var r=t[n],i=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:(e={},e[n]=r,e)}],this.built=!0},e.prototype.call=function(t,e){var n=this;return en((function(){var e;t=Sm(t);var r=null==n.bias?null:n.bias.read(),i=Jp(n.activation.getClassName());if(null!=i&&2===n.rank)e=Wy(t,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate,i);else{if(1===n.rank)e=function(t,e,n,r,i,a,o){return void 0===r&&(r=1),void 0===i&&(i="valid"),void 0===o&&(o=1),en((function(){if(null==a&&(a="channelsLast"),yf(a),3!==t.shape.length)throw new Fp("The input of a conv1dWithBias operation should be 3, but is "+t.shape.length+" instead.");if(3!==e.shape.length)throw new Fp("The kernel for a conv1dWithBias operation should be 3, but is "+e.shape.length+" instead");if(null!=n&&1!==n.shape.length)throw new Fp("The bias for a conv1dWithBias operation should be 1, but is "+e.shape.length+" instead");if("channelsFirst"===a&&(t=ea(t,[0,2,1])),"causal"===i)throw new Mp("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");var s=Pu(t,e,r,"same"===i?"same":"valid","NWC",o);return null!=n&&(s=Gf(s,n)),s}))}(t,n.kernel.read(),r,n.strides[0],n.padding,n.dataFormat,n.dilationRate[0]);else if(2===n.rank)e=Wy(t,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate);else{if(3!==n.rank)throw new Mp("convolutions greater than 3D are not implemented yet.");e=function(t,e,n,r,i,a,o){return void 0===r&&(r=[1,1,1]),void 0===i&&(i="valid"),en((function(){if(null==a&&(a="channelsLast"),yf(a),4!==t.rank&&5!==t.rank)throw new Fp("conv3dWithBias expects input to be of rank 4 or 5, but received "+t.rank+".");if(4!==e.rank&&5!==e.rank)throw new Fp("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+t.rank+".");var s=Uy(t,a);if("causal"===i)throw new Mp("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=zu(s,e,r,"same"===i?"same":"valid","NDHWC",o),null!=n&&(s=Gf(s,n)),"channelsFirst"===a&&(s=ea(s,[0,4,1,2,3])),s}))}(t,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate)}null!=n.activation&&(e=n.activation.apply(e))}return e}))},e.prototype.computeOutputShape=function(t){t=km(t);for(var e=[],n="channelsLast"===this.dataFormat?t.slice(1,t.length-1):t.slice(2),r=0;r<n.length;++r){var i=Vy(n[r],this.kernelSize[r],this.padding,this.strides[r],"number"==typeof this.dilationRate?this.dilationRate:this.dilationRate[r]);e.push(i)}var a=[t[0]];return"channelsLast"===this.dataFormat?(a=a.concat(e)).push(this.filters):(a.push(this.filters),a=a.concat(e)),a},e.prototype.getConfig=function(){var e={filters:this.filters,kernelInitializer:mm(this.kernelInitializer),kernelRegularizer:Dy(this.kernelRegularizer),kernelConstraint:lf(this.kernelConstraint)},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.verifyArgs=function(t){if(!("filters"in t)||"number"!=typeof t.filters||t.filters<1)throw new Fp("Convolution layer expected config.filters to be a 'number' > 0 but got "+JSON.stringify(t.filters))},e}(Hy),Gy=function(t){function e(n){var r=t.call(this,2,n)||this;return e.verifyArgs(n),r}return Ep(e,t),e.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this);return delete e.rank,e},e.verifyArgs=function(t){if("number"!=typeof t.kernelSize&&!Zp(t.kernelSize,"number",1,2))throw new Fp("Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received "+JSON.stringify(t.kernelSize)+".")},e.className="Conv2D",e}(qy);hp.registerClass(Gy);var $y=function(t){function e(n){var r=t.call(this,3,n)||this;return e.verifyArgs(n),r}return Ep(e,t),e.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this);return delete e.rank,e},e.verifyArgs=function(t){if("number"!=typeof t.kernelSize&&(!Array.isArray(t.kernelSize)||1!==t.kernelSize.length&&3!==t.kernelSize.length))throw new Fp("Conv3D expects config.kernelSize to be number or [number, number, number], but received "+JSON.stringify(t.kernelSize)+".")},e.className="Conv3D",e}(qy);hp.registerClass($y);var Ky=function(t){function e(e){var n=t.call(this,e)||this;if(n.inputSpec=[new Om({ndim:4})],"same"!==n.padding&&"valid"!==n.padding)throw new Fp("Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode "+n.padding);return n}return Ep(e,t),e.prototype.build=function(t){var e;if(4!==(t=km(t)).length)throw new Fp("Input should have rank 4; Received input shape: "+JSON.stringify(t));var n="channelsFirst"===this.dataFormat?1:t.length-1;if(null==t[n])throw new Fp("The channel dimension of the inputs should be defined. Found `None`.");var r=t[n],i=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Om({ndim:4,axes:(e={},e[n]=r,e)})],this.built=!0},e.prototype.call=function(t,e){var n=this;return en((function(){var e=Sm(t);if(4!==e.shape.length)throw new Fp("Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-"+e.shape.length);var r,i,a=e.shape;"channelsFirst"===n.dataFormat?(r=2,i=3):(r=1,i=2);var o=a[i],s=n.kernelSize[1],l=n.strides[1],u=[a[0],By(a[r],n.strides[0],n.kernelSize[0],n.padding),By(o,l,s,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(e=ea(e,[0,2,3,1]));var c=qu(e,n.kernel.read(),u,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(c=ea(c,[0,3,1,2])),null!=n.bias&&(c=Gf(c,n.bias.read(),n.dataFormat)),null!=n.activation&&(c=n.activation.apply(c)),c}))},e.prototype.computeOutputShape=function(t){var e,n,r,i=(t=km(t)).slice();"channelsFirst"===this.dataFormat?(e=1,n=2,r=3):(e=3,n=1,r=2);var a=this.kernelSize[0],o=this.kernelSize[1],s=this.strides[0],l=this.strides[1];return i[e]=this.filters,i[n]=By(i[n],s,a,this.padding),i[r]=By(i[r],l,o,this.padding),i},e.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this);return delete e.dilationRate,e},e.className="Conv2DTranspose",e}(Gy);hp.registerClass(Ky);var Xy=function(t){function e(e){return t.call(this,2,e)||this}return Ep(e,t),e.className="SeparableConv2D",e}(function(t){function e(e,n){var r=t.call(this,e,n)||this;if(r.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",r.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",r.depthwiseKernel=null,r.pointwiseKernel=null,null==n.filters)throw new Fp("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=n.kernelInitializer||null!=n.kernelRegularizer||null!=n.kernelConstraint)throw new Fp("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=n.padding&&"same"!==n.padding&&"valid"!==n.padding)throw new Fp("SeparableConv"+r.rank+"D supports only padding modes: 'same' and 'valid', but received "+JSON.stringify(n.padding));return r.depthMultiplier=null==n.depthMultiplier?1:n.depthMultiplier,r.depthwiseInitializer=gm(n.depthwiseInitializer||r.DEFAULT_DEPTHWISE_INITIALIZER),r.depthwiseRegularizer=Ny(n.depthwiseRegularizer),r.depthwiseConstraint=cf(n.depthwiseConstraint),r.pointwiseInitializer=gm(n.depthwiseInitializer||r.DEFAULT_POINTWISE_INITIALIZER),r.pointwiseRegularizer=Ny(n.pointwiseRegularizer),r.pointwiseConstraint=cf(n.pointwiseConstraint),r}return Ep(e,t),e.prototype.build=function(t){var e;if((t=km(t)).length<this.rank+2)throw new Fp("Inputs to SeparableConv"+this.rank+"D should have rank "+(this.rank+2)+", but received input shape: "+JSON.stringify(t));var n="channelsFirst"===this.dataFormat?1:t.length-1;if(null==t[n]||t[n]<0)throw new Fp("The channel dimension of the inputs should be defined, but found "+JSON.stringify(t[n]));for(var r=t[n],i=this.kernelSize.concat([r,this.depthMultiplier]),a=[],o=0;o<this.rank;++o)a.push(1);a.push(r*this.depthMultiplier,this.filters),this.depthwiseKernel=this.addWeight("depthwise_kernel",i,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,!0,this.pointwiseConstraint),this.bias=this.useBias?this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.inputSpec=[new Om({ndim:this.rank+2,axes:(e={},e[n]=r,e)})],this.built=!0},e.prototype.call=function(t,e){var n=this;return en((function(){var e;if(t=Sm(t),1===n.rank)throw new Mp("1D separable convolution is not implemented yet.");return 2===n.rank&&("channelsFirst"===n.dataFormat&&(t=ea(t,[0,2,3,1])),e=Hu(t,n.depthwiseKernel.read(),n.pointwiseKernel.read(),n.strides,n.padding,n.dilationRate,"NHWC")),n.useBias&&(e=Gf(e,n.bias.read(),n.dataFormat)),null!=n.activation&&(e=n.activation.apply(e)),"channelsFirst"===n.dataFormat&&(e=ea(e,[0,3,1,2])),e}))},e.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this);return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=mm(this.depthwiseInitializer),e.pointwiseInitializer=mm(this.pointwiseInitializer),e.depthwiseRegularizer=Dy(this.depthwiseRegularizer),e.pointwiseRegularizer=Dy(this.pointwiseRegularizer),e.depthwiseConstraint=lf(this.depthwiseConstraint),e.pointwiseConstraint=lf(this.pointwiseConstraint),e},e.className="SeparableConv",e}(qy));hp.registerClass(Xy);var Yy=function(t){function e(n){var r=t.call(this,1,n)||this;return e.verifyArgs(n),r.inputSpec=[{ndim:3}],r}return Ep(e,t),e.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this);return delete e.rank,delete e.dataFormat,e},e.verifyArgs=function(t){if("number"!=typeof t.kernelSize&&!Zp(t.kernelSize,"number",1,1))throw new Fp("Conv1D expects config.kernelSize to be number or number[] with length 1, but received "+JSON.stringify(t.kernelSize)+".")},e.className="Conv1D",e}(qy);hp.registerClass(Yy);var Zy=function(t){function e(e){var n=t.call(this,e)||this;return n.cropping="number"==typeof e.cropping?[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"==typeof e.cropping[0]?[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:e.cropping,n.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,n.inputSpec=[{ndim:4}],n}return Ep(e,t),e.prototype.computeOutputShape=function(t){return"channelsFirst"===this.dataFormat?[t[0],t[1],t[2]-this.cropping[0][0]-this.cropping[0][1],t[3]-this.cropping[1][0]-this.cropping[1][1]]:[t[0],t[1]-this.cropping[0][0]-this.cropping[0][1],t[2]-this.cropping[1][0]-this.cropping[1][1],t[3]]},e.prototype.call=function(t,e){var n=this;return en((function(){return t=Sm(t),"channelsLast"===n.dataFormat?Lf(Lf(t,n.cropping[0][0],t.shape[1]-n.cropping[0][0]-n.cropping[0][1],2),n.cropping[1][0],t.shape[2]-n.cropping[1][1]-n.cropping[1][0],3):Lf(Lf(t,n.cropping[0][0],t.shape[2]-n.cropping[0][0]-n.cropping[0][1],3),n.cropping[1][0],t.shape[3]-n.cropping[1][1]-n.cropping[1][0],4)}))},e.prototype.getConfig=function(){var e={cropping:this.cropping,dataFormat:this.dataFormat},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="Cropping2D",e}(zm);hp.registerClass(Zy);var Qy=function(t){function e(e){var n=t.call(this,e)||this;return n.DEFAULT_SIZE=[2,2],n.inputSpec=[{ndim:4}],n.size=null==e.size?n.DEFAULT_SIZE:e.size,n.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,n}return Ep(e,t),e.prototype.computeOutputShape=function(t){if("channelsFirst"===this.dataFormat){var e=null==t[2]?null:this.size[0]*t[2],n=null==t[3]?null:this.size[1]*t[3];return[t[0],t[1],e,n]}return[t[0],e=null==t[1]?null:this.size[0]*t[1],n=null==t[2]?null:this.size[1]*t[2],t[3]]},e.prototype.call=function(t,e){var n=this;return en((function(){var e=Sm(t),r=e.shape;if("channelsFirst"===n.dataFormat){e=ea(e,[0,2,3,1]);var i=n.size[0]*r[2],a=n.size[1]*r[3],o=e.resizeNearestNeighbor([i,a]);return ea(o,[0,3,1,2])}return e.resizeNearestNeighbor([i=n.size[0]*r[1],a=n.size[1]*r[2]])}))},e.prototype.getConfig=function(){var e={size:this.size,dataFormat:this.dataFormat},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="UpSampling2D",e}(zm);hp.registerClass(Qy);var Jy=function(t){function e(e){var n=t.call(this,2,e)||this;return n.depthwiseKernel=null,n.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,n.depthwiseInitializer=gm(e.depthwiseInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.depthwiseConstraint=cf(e.depthwiseConstraint),n.depthwiseRegularizer=Ny(e.depthwiseRegularizer),n}return Ep(e,t),e.prototype.build=function(t){if((t=km(t)).length<4)throw new Fp("Inputs to DepthwiseConv2D should have rank 4. Received input shape: "+JSON.stringify(t)+".");var e="channelsFirst"===this.dataFormat?1:3;if(null==t[e]||t[e]<0)throw new Fp("The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not ("+t[e]+").");var n=t[e];this.depthwiseKernel=this.addWeight("depthwise_kernel",[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier],null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.bias=this.useBias?this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0},e.prototype.call=function(t,e){var n=this;return en((function(){var e=function(t,e,n,r,i,a){return void 0===n&&(n=[1,1]),void 0===r&&(r="valid"),en((function(){null==i&&(i="channelsLast"),yf(i);var a=jy(t,i);if(4!==t.rank)throw new Fp("Input for depthwiseConv2d is required to be 4-D, but is instead "+t.rank+"-D");if(4!==e.rank)throw new Fp("depthwiseKernel is required to be 4-D, but is instead "+e.rank+"-D");return a=ju(a,e,n,"same"===r?"same":"valid","NHWC",null),"channelsFirst"===i&&(a=ea(a,[0,3,1,2])),a}))}(t=Sm(t),n.depthwiseKernel.read(),n.strides,n.padding,n.dataFormat);return n.useBias&&(e=Gf(e,n.bias.read(),n.dataFormat)),null!=n.activation&&(e=n.activation.apply(e)),e}))},e.prototype.computeOutputShape=function(t){t=km(t);var e="channelsFirst"===this.dataFormat?t[3]:t[2],n="channelsFirst"===this.dataFormat?t[1]*this.depthMultiplier:t[3]*this.depthMultiplier,r=Vy("channelsFirst"===this.dataFormat?t[2]:t[1],this.kernelSize[0],this.padding,this.strides[0]),i=Vy(e,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[t[0],n,r,i]:[t[0],r,i,n]},e.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this);return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=mm(this.depthwiseInitializer),e.depthwiseRegularizer=Dy(this.depthwiseRegularizer),e.depthwiseConstraint=lf(this.depthwiseRegularizer),e},e.className="DepthwiseConv2D",e}(Hy);hp.registerClass(Jy);var tv=function(t){function e(e){var n=t.call(this,e)||this;return n.rate=Math.max(Math.min(e.rate,1),0),n.noiseShape=e.noiseShape,n.seed=e.seed,n.supportsMasking=!0,n}return Ep(e,t),e.prototype.getNoiseShape=function(t){if(null==this.noiseShape)return this.noiseShape;for(var e=t.shape,n=[],r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?e[r]:this.noiseShape[r]);return n},e.prototype.call=function(t,e){var n=this;return en((function(){n.invokeCallHook(t,e);var r=Sm(t);if(0<n.rate&&n.rate<1){var i=null!=e.training&&e.training,a=n.getNoiseShape(r);return Kf((function(){return $f(r,n.rate,a,n.seed)}),(function(){return r}),i)}return t}))},e.prototype.getConfig=function(){var e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.prototype.dispose=function(){return t.prototype.dispose.call(this)},e.className="Dropout",e}(zm);hp.registerClass(tv);var ev=function(t){function e(e){var n=t.call(this,e)||this;return n.inputSpec=[{ndim:3}],n}return Ep(e,t),e.prototype.getNoiseShape=function(t){var e=t.shape;return[e[0],1,e[2]]},e.className="SpatialDropout1D",e}(tv);hp.registerClass(ev);var nv=function(t){function e(e){var n=t.call(this,e)||this;if(n.activation=null,n.useBias=!0,n.kernel=null,n.bias=null,n.DEFAULT_KERNEL_INITIALIZER="glorotNormal",n.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){var r=null;null!=e.batchSize&&(r=e.batchSize),n.batchInputShape=[r,e.inputDim]}return n.units=e.units,Qp(n.units,"units"),n.activation=Sy(e.activation),null!=e.useBias&&(n.useBias=e.useBias),n.kernelInitializer=gm(e.kernelInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.biasInitializer=gm(e.biasInitializer||n.DEFAULT_BIAS_INITIALIZER),n.kernelConstraint=cf(e.kernelConstraint),n.biasConstraint=cf(e.biasConstraint),n.kernelRegularizer=Ny(e.kernelRegularizer),n.biasRegularizer=Ny(e.biasRegularizer),n.activityRegularizer=Ny(e.activityRegularizer),n.supportsMasking=!0,n.inputSpec=[{minNDim:2}],n}return Ep(e,t),e.prototype.build=function(t){var e,n=(t=km(t))[t.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:(e={},e[-1]=n,e)}],this.built=!0},e.prototype.computeOutputShape=function(t){var e=(t=km(t)).slice();return e[e.length-1]=this.units,e},e.prototype.call=function(t,e){var n=this;return en((function(){n.invokeCallHook(t,e);var r,i=Sm(t),a=Jp(n.activation.getClassName());return null!=a?r=Uf(i,n.kernel.read(),a,n.bias?n.bias.read():null):(r=Uf(i,n.kernel.read()),null!=n.bias&&(r=Gf(r,n.bias.read())),null!=n.activation&&(r=n.activation.apply(r))),r}))},e.prototype.getConfig=function(){var e={units:this.units,activation:xy(this.activation),useBias:this.useBias,kernelInitializer:mm(this.kernelInitializer),biasInitializer:mm(this.biasInitializer),kernelRegularizer:Dy(this.kernelRegularizer),biasRegularizer:Dy(this.biasRegularizer),activityRegularizer:Dy(this.activityRegularizer),kernelConstraint:lf(this.kernelConstraint),biasConstraint:lf(this.biasConstraint)},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="Dense",e}(zm);hp.registerClass(nv);var rv=function(t){function e(e){var n=this;return(n=t.call(this,e=e||{})||this).inputSpec=[{minNDim:3}],n.dataFormat=e.dataFormat,n}return Ep(e,t),e.prototype.computeOutputShape=function(t){for(var e=0,n=(t=km(t)).slice(1);e<n.length;e++)if(null==n[e])throw new Fp('The shape of the input to "Flatten" is not fully defined (got '+t.slice(1)+'). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.');return[t[0],Af(t,1)]},e.prototype.call=function(t,e){var n=this;return en((function(){n.invokeCallHook(t,e);var r=Sm(t);if("channelsFirst"===n.dataFormat&&r.rank>1){for(var i=[0],a=2;a<r.rank;++a)i.push(a);i.push(1),r=r.transpose(i)}return function(t){if(t.rank<=1)throw new Fp("batchFlatten requires a minimum rank of 2. Got rank: "+t.rank+".");var e=[t.shape[0],Af(t.shape,1)];return t.reshape(e)}(r)}))},e.prototype.getConfig=function(){var e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);var n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="Flatten",e}(zm);hp.registerClass(rv);var iv=function(t){function e(e){var n=t.call(this,e)||this;return n.supportsMasking=!0,n.activation=Sy(e.activation),n}return Ep(e,t),e.prototype.call=function(t,e){var n=this;return en((function(){n.invokeCallHook(t,e);var r=Sm(t);return n.activation.apply(r)}))},e.prototype.getConfig=function(){var e={activation:xy(this.activation)},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="Activation",e}(zm);hp.registerClass(iv);var av=function(t){function e(e){var n=t.call(this,e)||this;return n.n=e.n,n.inputSpec=[{ndim:2}],n}return Ep(e,t),e.prototype.computeOutputShape=function(t){return[t[0],this.n,t[1]]},e.prototype.call=function(t,e){var n=this;return en((function(){return function(t,e){return en((function(){if(2!==t.shape.length)throw new Fp("repeat() expects a rank-2 tensor, but received a rank-"+t.shape.length+" tensor.");return Bf(Ff(t,1),[1,e,1])}))}(t=Sm(t),n.n)}))},e.prototype.getConfig=function(){var e={n:this.n},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="RepeatVector",e}(zm);hp.registerClass(av);var ov=function(t){function e(e){var n=t.call(this,e)||this;n.targetShape=e.targetShape;for(var r=0;r<n.targetShape.length;++r)n.isUnknown(n.targetShape[r])&&(n.targetShape[r]=null);return n}return Ep(e,t),e.prototype.isUnknown=function(t){return t<0||null==t},e.prototype.fixUnknownDimension=function(t,e){for(var n="Total size of new array must be unchanged.",r=e.slice(),i=1,a=null,o=0;o<r.length;++o){var s=r[o];if(this.isUnknown(s)){if(null!==a)throw new Fp("Can only specifiy one unknown dimension.");a=o}else i*=s}var l=Af(t);if(null!==a){if(0===i||l%i!=0)throw new Fp(n);r[a]=l/i}else if(l!==i)throw new Fp(n);return r},e.prototype.computeOutputShape=function(t){for(var e=!1,n=0;n<t.length;++n)if(this.isUnknown(t[n])){e=!0;break}return e?t.slice(0,1).concat(this.targetShape):t.slice(0,1).concat(this.fixUnknownDimension(t.slice(1),this.targetShape))},e.prototype.call=function(t,e){var n=this;return en((function(){n.invokeCallHook(t,e);var r=Sm(t),i=r.shape,a=i.slice(0,1).concat(n.fixUnknownDimension(i.slice(1),n.targetShape));return r.reshape(a)}))},e.prototype.getConfig=function(){var e={targetShape:this.targetShape},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="Reshape",e}(zm);hp.registerClass(ov);var sv=function(t){function e(e){var n=t.call(this,e)||this;if(null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+e.dims+" instead.");var r=Rf(1,e.dims.length+1);if(!ht.arraysEqual(e.dims.slice().sort(),r))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");return n.dims=e.dims,n.dimsIncludingBatch=[0].concat(n.dims),n.inputSpec=[new Om({ndim:n.dims.length+1})],n}return Ep(e,t),e.prototype.computeOutputShape=function(t){var e=(t=km(t)).slice();return this.dims.forEach((function(n,r){e[r+1]=t[n]})),e},e.prototype.call=function(t,e){return ea(Sm(t),this.dimsIncludingBatch)},e.prototype.getConfig=function(){var e={dims:this.dims},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="Permute",e}(zm);hp.registerClass(sv);var lv=function(t){function e(e){var n=t.call(this,null==e?{}:e)||this;return n.supportsMasking=!0,n.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0,n}return Ep(e,t),e.prototype.computeOutputShape=function(t){return t},e.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this),n={maskValue:this.maskValue};return Object.assign(n,e),n},e.prototype.computeMask=function(t,e){var n=Sm(t);return gc(Eu(n,this.maskValue),-1)},e.prototype.call=function(t,e){var n=this;return en((function(){n.invokeCallHook(t,e);var r=Sm(t),i=gc(Eu(r,n.maskValue),-1,!0);return r.mul(i.asType(r.dtype))}))},e.className="Masking",e}(zm);hp.registerClass(lv);var uv=function(t){function e(e){var n=t.call(this,e)||this;if(n.embeddings=null,n.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){var r=null;null!=e.batchSize&&(r=e.batchSize),n.batchInputShape=null==e.inputLength?[r,null]:[r].concat(jp(e.inputLength))}return n.inputDim=e.inputDim,Qp(n.inputDim,"inputDim"),n.outputDim=e.outputDim,Qp(n.outputDim,"outputDim"),n.embeddingsInitializer=gm(e.embeddingsInitializer||n.DEFAULT_EMBEDDINGS_INITIALIZER),n.embeddingsRegularizer=Ny(e.embeddingsRegularizer),n.activityRegularizer=Ny(e.activityRegularizer),n.embeddingsConstraint=cf(e.embeddingsConstraint),n.maskZero=e.maskZero,n.supportsMasking=e.maskZero,n.inputLength=e.inputLength,n}return Ep(e,t),e.prototype.build=function(t){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0},e.prototype.warnOnIncompatibleInputShape=function(t){},e.prototype.computeMask=function(t,e){var n=this;return en((function(){return n.maskZero?(t=Sm(t),Eu(t,Yn(t))):null}))},e.prototype.computeOutputShape=function(t){if(t=km(t),null==this.inputLength)return t.concat([this.outputDim]);var e=jp(this.inputLength);if(e.length!==t.length-1)throw new Fp('"inputLength" is '+this.inputLength+", but received input shape has shape "+t);for(var n=0,r=0;r<e.length;++r){var i=e[r],a=t[r+1];if(null!=i&&null!=a&&i!==a)throw new Fp('"inputLength" is '+this.inputLength+", but received input shape has shape "+t);null==i&&(e[n]=a),n++}return[t[0]].concat(e,[this.outputDim])},e.prototype.call=function(t,e){var n=this;return en((function(){n.invokeCallHook(t,e);var r=Sm(t);return"int32"!==r.dtype&&(r=Of(r,"int32")),Wf(n.embeddings.read(),r.as1D()).reshape(km(n.computeOutputShape(r.shape)))}))},e.prototype.getConfig=function(){var e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:mm(this.embeddingsInitializer),embeddingsRegularizer:Dy(this.embeddingsRegularizer),activityRegularizer:Dy(this.activityRegularizer),embeddingsConstraint:lf(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="Embedding",e}(zm);hp.registerClass(uv);var cv=function(t){function e(e){var n=t.call(this,e||{})||this;return n.supportsMasking=!0,n}return Ep(e,t),e.prototype.mergeFunction=function(t){throw new Mp},e.prototype.computeElementwiseOpOutputShape=function(t,e){if(null==t||null==e)return null;if(t.length<e.length)return this.computeElementwiseOpOutputShape(e,t);if(0===e.length)return t;for(var n=t.slice(0,t.length-e.length),r=0;r<e.length;++r){var i=t[t.length-e.length+r],a=e[r];if(null==i||null==a||i<0||a<0)n.push(null);else if(1===i)n.push(a);else if(1===a)n.push(i);else{if(i!==a)throw new Fp("Operands could not be broadcast together with shapes "+JSON.stringify(t)+" "+JSON.stringify(e));n.push(i)}}return n},e.prototype.build=function(t){if(Array.isArray(t)&&!Array.isArray(t[0])&&(t=[km(t)]),(t=t).length<2)throw new Fp("A merge layer should be called on an Array of at least 2 inputs. Got "+t.length+" input(s).");for(var e=[],n=0,r=t;n<r.length;n++)null!=(o=r[n])&&null!==o[0]&&e.push(o[0]);if((e=Kp(e)).length>1)throw new Fp("Can not merge tensors with different batch sizes. Got tensors with shapes: "+JSON.stringify(t)+".");for(var i=null==t[0]?null:t[0].slice(1),a=1;a<t.length;++a){var o=null==t[a]?null:t[a].slice(1);i=this.computeElementwiseOpOutputShape(i,o)}var s=t.map((function(t){return t.length}));this.reshapeRequired=-1!==t.indexOf(null)||1!==Kp(s).length},e.prototype.call=function(t,e){var n=this;return en((function(){if(t=t,n.reshapeRequired){var e=[],r=t.map((function(t){return t.rank}));if(-1===r.indexOf(null)){for(var i=Nf(r),a=0,o=t;a<o.length;a++){for(var s=(d=o[a]).rank,l=0;l<i-s;++l)d=Ff(d,1);e.push(d)}return n.mergeFunction(e)}for(var u=!1,c=0,h=t;c<h.length;c++){var d;if(null==(s=(d=h[c]).rank)){var p=d.shape,f=p[0],m=p.slice(1).concat([f]),g=d.reshape([f].concat(Af(p.slice(1))));g=(g=ea(g,[1,0])).reshape(m),e.push(g),u=!0}else if(s>1){var y=Rf(1,s).concat([0]);e.push(ea(d,y)),u=!0}else e.push(d)}var v=n.mergeFunction(e),b=v.rank;if(u)if(null==b){var w=v.shape;m=[f=w[w.length-1]].concat(w.slice(0,w.length-1)),v=ea(v.reshape([-1,f]),[1,0]).reshape(m)}else b>1&&(y=[b-1].concat(Rf(0,b-1)),v=ea(v,y));return v}return n.mergeFunction(t)}))},e.prototype.computeOutputShape=function(t){var e;e=null==(t=t)[0]?null:t[0].slice(1);for(var n=1;n<t.length;++n){var r=null==t[n]?null:t[n].slice(1);e=this.computeElementwiseOpOutputShape(e,r)}for(var i=[],a=0,o=t;a<o.length;a++)null!=(r=o[a])&&null!==r[0]&&i.push(r[0]);return 1===(i=Kp(i)).length?i.concat(e):[null].concat(e)},e.prototype.computeMask=function(t,e){return en((function(){if(null==e)return null;if(!Array.isArray(e))throw new Fp("`mask` should be an Array");if(!Array.isArray(t))throw new Fp("`inputs` should be an Array");if(e.length!==t.length)throw new Fp("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths ("+t.length+" vs "+e.length+")");if(e.every((function(t){return null==t})))return null;for(var n=(e=e.map((function(t){return null==t?t:ur(t,0)})))[0],r=1;r<e.length-1;++r)n=zl(n,e[r]);return n}))},e}(zm),hv=function(t){function e(e){return t.call(this,e)||this}return Ep(e,t),e.prototype.mergeFunction=function(t){return en((function(){for(var e=t[0].clone(),n=1;n<t.length;++n)e=Ar(e,t[n]);return e}))},e.className="Add",e}(cv);hp.registerClass(hv);var dv=function(t){function e(e){return t.call(this,e)||this}return Ep(e,t),e.prototype.mergeFunction=function(t){return en((function(){for(var e=t[0].clone(),n=1;n<t.length;++n)e=xi(e,t[n]);return e}))},e.className="Multiply",e}(cv);hp.registerClass(dv);var pv=function(t){function e(e){return t.call(this,e)||this}return Ep(e,t),e.prototype.mergeFunction=function(t){return en((function(){for(var e=t[0].clone(),n=1;n<t.length;++n)e=Ar(e,t[n]);return xi(1/t.length,e)}))},e.className="Average",e}(cv);hp.registerClass(pv);var fv=function(t){function e(e){return t.call(this,e)||this}return Ep(e,t),e.prototype.mergeFunction=function(t){return en((function(){for(var e=t[0],n=1;n<t.length;++n)e=gi(e,t[n]);return e}))},e.className="Maximum",e}(cv);hp.registerClass(fv);var mv=function(t){function e(e){return t.call(this,e)||this}return Ep(e,t),e.prototype.mergeFunction=function(t){return en((function(){for(var e=t[0],n=1;n<t.length;++n)e=vi(e,t[n]);return e}))},e.className="Minimum",e}(cv);hp.registerClass(mv);var gv=function(t){function e(e){var n=t.call(this,e)||this;return n.DEFAULT_AXIS=-1,null==e&&(e={}),n.axis=null==e.axis?n.DEFAULT_AXIS:e.axis,n.supportsMasking=!0,n.reshapeRequired=!1,n}return Ep(e,t),e.prototype.build=function(t){if(!Array.isArray(t)||!Array.isArray(t[0])||1===t.length)throw new Fp("A `Concatenate` layer should be called on a list of at least 2 inputs");for(var e=!0,n=0,r=t=t;n<r.length;n++)if(null!=(c=r[n])){e=!1;break}if(!e){for(var i=[],a=0;a<t.length;++a){var o=t[a].slice();o.splice(this.axis,1);for(var s=!1,l=0,u=i;l<u.length;l++){var c=u[l];if(ht.arraysEqual(c,o)){s=!0;break}}s||i.push(o)}if(i.length>1)throw new Fp("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(t))}},e.prototype.mergeFunction=function(t){var e=this;return en((function(){return zf(t,e.axis)}))},e.prototype.computeOutputShape=function(t){if(!Array.isArray(t)||!Array.isArray(t[0]))throw new Fp("A `Concatenate` layer should be called on a list of inputs.");for(var e=t,n=e[0].slice(),r=this.axis<0?n.length+this.axis:this.axis,i=0,a=e.slice(1);i<a.length;i++){var o=a[i];if(null==n[r]||null==o[r]){n[r]=null;break}n[r]+=o[r]}return n},e.prototype.computeMask=function(t,e){var n=this;if(null==e)return null;if(!Array.isArray(e))throw new Fp("`mask` should be an array for Concatenate");if(!Array.isArray(t))throw new Fp("`inputs` should be an array for Concatenate");if(e.length!==t.length)throw new Fp("Mismatch in the length of mask ("+e.length+") and the legnth of inputs ("+t.length+")");return en((function(){var r=!0;if(e.forEach((function(t){null==t||(r=!1)})),r)return null;for(var i=[],a=0;a<t.length;++a)i.push(null==e[a]?Xn(t[a]).asType("bool"):e[a].rank<t[a].rank?ur(e[a],-1):e[a]);var o=Zn(i,n.axis);return mc(o,-1,!1)}))},e.prototype.getConfig=function(){var e={axis:this.axis},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="Concatenate",e}(cv);function yv(t,e){for(;t<0;)t+=e;return t}hp.registerClass(gv);var vv=function(t){function e(e){var n=t.call(this,e)||this;return n.axes=e.axes,n.normalize=null!=e.normalize&&e.normalize,n.supportsMasking=!0,n.reshapeRequired=!1,n}return Ep(e,t),e.prototype.build=function(t){ht.assert(Array.isArray(t)&&2===t.length&&Array.isArray(t[0])&&Array.isArray(t[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var e=t[0],n=t[1];if(e.length>3||n.length>3)throw new Mp("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(e,n);if(e[r[0]]!==n[r[1]])throw new Fp("Dimension incompatibility: "+e[r[0]]+" !== "+n[r[1]])},e.prototype.mergeFunction=function(t){if(2!==t.length)throw new Fp("A `Dot` layer must be called on exactly 2 inputs, but received "+t.length+" input(s).");var e,n=t[0],r=t[1];return e=Array.isArray(this.axes)?this.axes.map((function(e,n){return yv(e,t[n].shape.length)})):[yv(this.axes,n.shape.length),yv(this.axes,r.shape.length)],this.normalize&&(n=Jm(n,e[0]),r=Jm(r,e[1])),function(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new Mp("batchDot is not implemented for tensors of 4D or higher rank yet");if(ht.assert(t.shape.length>=2,(function(){return"batchDot requires the rank of x to be >= 2, but got "+t.shape.length})),ht.assert(t.shape.length>=2,(function(){return"batchDot requires the rank of y to be >= 2, but got "+e.shape.length})),"number"==typeof n&&(n=[n,n]),"complex64"===t.dtype||"complex64"===e.dtype)throw new Mp("batchDot is not implemented for complex64-type Tensors yet.");var r=t.shape.length,i=e.shape.length;null==n&&(n=[r-1,i-2]);var a=n;return en((function(){var n,o;if(r>i){n=r-i;for(var s=[],l=0;l<n;++l)s.push(1);e=e.reshape(e.shape.concat(s))}else if(i>r){for(n=i-r,s=[],l=0;l<n;++l)s.push(1);t=t.reshape(t.shape.concat(s))}else n=0;if(o=2===t.shape.length&&2===e.shape.length?a[0]===a[1]?t.mulStrict(e).sum(a[0]):t.transpose([1,0]).mulStrict(e).sum(a[1]):t.matMul(e,a[0]!==t.shape.length-1,a[1]===e.shape.length-1),n>0){var u,c=[];for(l=u=r>i?r+i-3:r-1;l<u+n;++l)c.push(l);o=o.squeeze(c)}return 1===o.shape.length&&(o=o.expandDims(1)),o}))}(n,r,e)},e.prototype.interpretAxes=function(t,e){return Array.isArray(this.axes)?this.axes:[yv(this.axes,t.length),yv(this.axes,e.length)]},e.prototype.computeOutputShape=function(t){ht.assert(Array.isArray(t)&&2===t.length&&Array.isArray(t[0])&&Array.isArray(t[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var e=t[0].slice(),n=t[1].slice();if(e.length>3||n.length>3)throw new Mp("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(e,n);e.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);var i=e.concat(n);return 1===i.length&&i.push(1),i},e.prototype.computeMask=function(t,e){return null},e.prototype.getConfig=function(){var e={axes:this.axes,normalize:this.normalize},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="Dot",e}(cv);hp.registerClass(vv);var bv=function(t){function e(e){var n=t.call(this,e)||this;return n.supportsMasking=!0,n.stddev=e.stddev,n}return Ep(e,t),e.prototype.computeOutputShape=function(t){return t},e.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this),n={stddev:this.stddev};return Object.assign(n,e),n},e.prototype.call=function(t,e){var n=this;return en((function(){n.invokeCallHook(t,e);var r=Sm(t);return Kf((function(){return jf(r.shape,0,n.stddev).add(r)}),(function(){return r}),e.training||!1)}))},e.className="GaussianNoise",e}(zm);hp.registerClass(bv);var wv=function(t){function e(e){var n=t.call(this,e)||this;return n.supportsMasking=!0,n.rate=e.rate,n}return Ep(e,t),e.prototype.computeOutputShape=function(t){return t},e.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this),n={rate:this.rate};return Object.assign(n,e),n},e.prototype.call=function(t,e){var n=this;return en((function(){n.invokeCallHook(t,e);var r=Sm(t);return n.rate>0&&n.rate<1?Kf((function(){var t=Math.sqrt(n.rate/(1-n.rate));return r.mul(jf(r.shape,1,t))}),(function(){return r}),e.training||!1):r}))},e.className="GaussianDropout",e}(zm);hp.registerClass(wv);var _v=function(t){function e(e){var n=t.call(this,e)||this;return n.supportsMasking=!0,n.rate=e.rate,n.noiseShape=e.noiseShape,n}return Ep(e,t),e.prototype._getNoiseShape=function(t){return this.noiseShape||Sm(t).shape},e.prototype.computeOutputShape=function(t){return t},e.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this),n={rate:this.rate};return Object.assign(n,e),n},e.prototype.call=function(t,e){var n=this;return en((function(){if(n.rate<1&&n.rate>0){var r=n._getNoiseShape(t);return Kf((function(){var e=Sm(t),i=-1.7580993408473766,a=bu(du(r),n.rate);a=Of(a,"float32");var o=Math.pow((1-n.rate)*(1+n.rate*Math.pow(i,2)),-.5),s=-o*i*n.rate;return e.mul(a).add(a.add(-1).mul(i)).mul(o).add(s)}),(function(){return Sm(t)}),e.training||!1)}return t}))},e.className="AlphaDropout",e}(zm);function xv(t,e,n,r,i,a){var o;if(void 0===a&&(a=.001),2===t.rank)o=Dl(t,e,n,r,i,a);else if(3===t.rank)o=Rl(t,e,n,r,i,a);else{if(4!==t.rank)throw new Mp("batchNormalization is not implemented for array of rank "+t.rank+" yet");o=Ml(t,e,n,r,i,a)}return o}hp.registerClass(_v);var Cv=function(t){function e(e){var n=this;return null==e&&(e={}),(n=t.call(this,e)||this).supportsMasking=!0,n.axis=null==e.axis?-1:e.axis,n.momentum=null==e.momentum?.99:e.momentum,n.epsilon=null==e.epsilon?.001:e.epsilon,n.center=null==e.center||e.center,n.scale=null==e.scale||e.scale,n.betaInitializer=gm(e.betaInitializer||"zeros"),n.gammaInitializer=gm(e.gammaInitializer||"ones"),n.movingMeanInitializer=gm(e.movingMeanInitializer||"zeros"),n.movingVarianceInitializer=gm(e.movingVarianceInitializer||"ones"),n.betaConstraint=cf(e.betaConstraint),n.gammaConstraint=cf(e.gammaConstraint),n.betaRegularizer=Ny(e.betaRegularizer),n.gammaRegularizer=Ny(e.gammaRegularizer),n}return Ep(e,t),e.prototype.build=function(t){var e;t=km(t);var n=this.axis>=0?this.axis:this.axis+t.length,r=t[n];if(null==r)throw new Fp("Axis "+n+" of input tensor should have a defined dimension but the layer received an input with shape "+JSON.stringify(t)+".");this.inputSpec=[new Om({ndim:t.length,axes:(e={},e[n]=r,e)})];var i=[r];this.scale&&(this.gamma=this.addWeight("gamma",i,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",i,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",i,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",i,null,this.movingVarianceInitializer,null,!1),this.built=!0},e.prototype.call=function(t,e){var n=this;return en((function(){var r=null!=e.training&&e.training,i=Sm(t),a=i.shape,o=a.length,s=Rf(0,o),l=n.axis>=0?n.axis:n.axis+o;s.splice(l,1);var u=Lp(1,o);u[l]=a[l];var c=s.slice();c.sort();var h=!ht.arraysEqual(c,Rf(0,o).slice(0,o-1));if(!r)return function(){if(h){var t=n.movingMean.read().reshape(u),e=n.movingVariance.read().reshape(u),r=n.center?n.beta.read().reshape(u):null,a=n.scale?n.gamma.read().reshape(u):null;return xv(i,t,e,r,a,n.epsilon)}return xv(i,n.movingMean.read(),n.movingVariance.read(),null==n.beta?null:n.beta.read(),null==n.gamma?null:n.gamma.read(),n.epsilon)}();var d=function(t,e,n,r,i){return void 0===i&&(i=.001),ht.arraysEqual(r.slice().sort(),Rf(0,t.rank-1))?function(t,e,n,r,i){return void 0===i&&(i=.001),en((function(){var a=Cc(t,r),o=a.mean,s=a.variance;return[xv(t,o,s,n,e,i),o,s]}))}(t,e,n,r,i):function(t,e,n,r,i){return void 0===i&&(i=.001),en((function(){for(var a=Cc(t,r),o=a.mean,s=a.variance,l=[],u=0,c=Rf(0,t.rank);u<c.length;u++){var h=c[u];-1!==r.indexOf(h)?l.push(1):l.push(t.shape[h])}var d=o.reshape(l),p=s.reshape(l),f=null==e?null:e.reshape(l),m=null==n?null:n.reshape(l);return[xv(t,d,p,m,f,i),o,s]}))}(t,e,n,r,i)}(i,n.gamma.read(),n.beta.read(),s,n.epsilon),p=d[0],f=d[2],m=function(t,e,n){en((function(){var r=1-n,i=t.read(),a=i.sub(e).mul(r);t.write(i.sub(a))}))};return m(n.movingMean,d[1],n.momentum),m(n.movingVariance,f,n.momentum),p}))},e.prototype.getConfig=function(){var e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:mm(this.betaInitializer),gammaInitializer:mm(this.gammaInitializer),movingMeanInitializer:mm(this.movingMeanInitializer),movingVarianceInitializer:mm(this.movingVarianceInitializer),betaRegularizer:Dy(this.betaRegularizer),gammaRegularizer:Dy(this.gammaRegularizer),betaConstraint:lf(this.betaConstraint),gammaConstraint:lf(this.gammaConstraint)},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="BatchNormalization",e}(zm);hp.registerClass(Cv);var Sv=function(t){function e(e){var n=this;if(null==e&&(e={}),(n=t.call(this,e)||this).axis=null==e.axis?-1:e.axis,"number"==typeof n.axis){if(!Number.isInteger(n.axis))throw new Error("Expected axis to be an integer, but received "+n.axis)}else{if(!Array.isArray(n.axis))throw new Error("Expected axis to be an integer or an array of integers, but received "+JSON.stringify(n.axis));for(var r=0,i=n.axis;r<i.length;r++)if(!Number.isInteger(i[r]))throw new Error("Expected axis to be an array of integers, but received "+JSON.stringify(n.axis))}return n.epsilon=null==e.epsilon?.001:e.epsilon,n.center=null==e.center||e.center,n.scale=null==e.scale||e.scale,n.betaInitializer=gm(e.betaInitializer||"zeros"),n.gammaInitializer=gm(e.gammaInitializer||"ones"),n.betaRegularizer=Ny(e.betaRegularizer),n.gammaRegularizer=Ny(e.gammaRegularizer),n.supportsMasking=!0,n}return Ep(e,t),e.prototype.build=function(t){var e=(t=km(t)).length;"number"==typeof this.axis&&(this.axis=[this.axis]);for(var n=0;n<this.axis.length;++n)this.axis[n]<0&&(this.axis[n]+=e);for(var r=0,i=this.axis;r<i.length;r++){var a=i[r];if(a<0||a>=e)throw new Error("Invalid axis: "+a)}if(this.axis.length!==Kp(this.axis).length)throw new Error("Found duplicate axes in: "+this.axis);var o=this.axis.map((function(e){return t[e]}));this.gamma=this.scale?this.addWeight("gamma",o,"float32",this.gammaInitializer,this.gammaRegularizer,!0):null,this.beta=this.center?this.addWeight("beta",o,"float32",this.betaInitializer,this.betaRegularizer,!0):null,this.built=!0},e.prototype.call=function(t,e){var n=this,r=Sm(t),i=r.shape,a=i.length;return en((function(){for(var t=Cc(r,n.axis,!0),e=t.mean,o=t.variance,s=Lp(1,a),l=0,u=n.axis;l<u.length;l++){var c=u[l];s[c]=i[c]}for(var h=function(t){return null!=t&&t.shape.length!==a&&n.axis!==[a-1]?t.reshape(s):t},d=h(n.gamma.read()),p=h(n.beta.read()),f=[],m=[],g=0;g<a;++g)-1!==n.axis.indexOf(g)?(f.push(i[g]),m.push(1)):(f.push(1),m.push(i[g]));return e=e.tile(f),o=o.tile(f),d=d.tile(m),p=p.tile(m),xv(r,e,o,p,d,n.epsilon)}))},e.prototype.getConfig=function(){var e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:mm(this.betaInitializer),gammaInitializer:mm(this.gammaInitializer),betaRegularizer:Dy(this.betaRegularizer),gammaRegularizer:Dy(this.gammaRegularizer)},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="LayerNormalization",e}(zm);hp.registerClass(Sv);var kv=function(t){function e(e){var n=this;if(null==e&&(e={}),(n=t.call(this,e)||this).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)n.padding=[[1,1],[1,1]];else if("number"==typeof e.padding)n.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new Fp("ZeroPadding2D expects padding to be a length-2 array, but received a length-"+e.padding.length+" array.");var r=void 0,i=void 0;if("number"==typeof e.padding[0])r=[e.padding[0],e.padding[0]],i=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new Fp("ZeroPadding2D expects height padding to be a length-2 array, but received a length-"+e.padding[0].length+" array.");if(r=e.padding[0],2!==e.padding[1].length)throw new Fp("ZeroPadding2D expects width padding to be a length-2 array, but received a length-"+e.padding[1].length+" array.");i=e.padding[1]}n.padding=[r,i]}return n.inputSpec=[new Om({ndim:4})],n}return Ep(e,t),e.prototype.computeOutputShape=function(t){return t=km(t),"channelsFirst"===this.dataFormat?[t[0],t[1],null!=t[2]&&t[2]>=0?t[2]+this.padding[0][0]+this.padding[0][1]:null,null!=t[3]&&t[3]>=0?t[3]+this.padding[1][0]+this.padding[1][1]:null]:[t[0],null!=t[1]&&t[1]>=0?t[1]+this.padding[0][0]+this.padding[0][1]:null,null!=t[2]&&t[2]>=0?t[2]+this.padding[1][0]+this.padding[1][1]:null,t[3]]},e.prototype.call=function(t,e){var n=this;return en((function(){return function(t,e,n){return en((function(){if(4!==t.rank)throw new Fp("temporalPadding expects input tensor to be 4-D, but received a "+t.rank+"-D tensor.");if(null==e&&(e=[[1,1],[1,1]]),2!==e.length||2!==e[0].length||2!==e[1].length)throw new Fp("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==n&&(n="channelsLast"),"channelsLast"!==n&&"channelsFirst"!==n)throw new Fp("Unknown data format: "+n+". Supported data formats are 'channelsLast' and 'channelsFirst.");return Xl(t,"channelsFirst"===n?[[0,0],[0,0],e[0],e[1]]:[[0,0],e[0],e[1],[0,0]])}))}(Sm(t),n.padding,n.dataFormat)}))},e.prototype.getConfig=function(){var e={padding:this.padding,dataFormat:this.dataFormat},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="ZeroPadding2D",e}(zm);function Ev(t,e,n,r,i,a){return en((function(){var o;yf(i),bf(a),vf(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==i&&(i="channelsLast"),null==a&&(a="max"),t=jy(t,i);var s="same"===r?"same":"valid";return o="max"===a?rc(t,e,n,s):ic(t,e,n,s),"channelsFirst"===i&&(o=ea(o,[0,3,1,2])),o}))}function Iv(t,e,n,r,i,a){return en((function(){var o;yf(i),bf(a),vf(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==i&&(i="channelsLast"),null==a&&(a="max"),t=Uy(t,i);var s="same"===r?"same":"valid";return o="max"===a?oc(t,e,n,s):sc(t,e,n,s),"channelsFirst"===i&&(o=ea(o,[0,4,1,2,3])),o}))}hp.registerClass(kv);var Av=function(t){function e(e){var n=this;if(null==e.poolSize&&(e.poolSize=2),n=t.call(this,e)||this,"number"==typeof e.poolSize)n.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!=typeof e.poolSize[0])throw new Fp("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+JSON.stringify(e.poolSize));n.poolSize=e.poolSize}if(Qp(n.poolSize,"poolSize"),null==e.strides)n.strides=n.poolSize;else if("number"==typeof e.strides)n.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!=typeof e.strides[0])throw new Fp("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+JSON.stringify(e.strides));n.strides=e.strides}return Qp(n.strides,"strides"),n.padding=null==e.padding?"valid":e.padding,vf(n.padding),n.inputSpec=[new Om({ndim:3})],n}return Ep(e,t),e.prototype.computeOutputShape=function(t){var e=Vy((t=km(t))[1],this.poolSize[0],this.padding,this.strides[0]);return[t[0],e,t[2]]},e.prototype.call=function(t,e){var n=this;return en((function(){n.invokeCallHook(t,e),t=Ff(Sm(t),2);var r=n.poolingFunction(Sm(t),[n.poolSize[0],1],[n.strides[0],1],n.padding,"channelsLast");return dr(r,[2])}))},e.prototype.getConfig=function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e}(zm),Dv=function(t){function e(e){return t.call(this,e)||this}return Ep(e,t),e.prototype.poolingFunction=function(t,e,n,r,i){return yf(i),vf(r),Ev(t,e,n,r,i,"max")},e.className="MaxPooling1D",e}(Av);hp.registerClass(Dv);var Tv=function(t){function e(e){return t.call(this,e)||this}return Ep(e,t),e.prototype.poolingFunction=function(t,e,n,r,i){return yf(i),vf(r),Ev(t,e,n,r,i,"avg")},e.className="AveragePooling1D",e}(Av);hp.registerClass(Tv);var Nv=function(t){function e(e){var n=this;if(null==e.poolSize&&(e.poolSize=[2,2]),(n=t.call(this,e)||this).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)n.strides=n.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new Fp("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+e.strides.length+".");n.strides=e.strides}else n.strides=[e.strides,e.strides];return Qp(n.poolSize,"poolSize"),Qp(n.strides,"strides"),n.padding=null==e.padding?"valid":e.padding,n.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,yf(n.dataFormat),vf(n.padding),n.inputSpec=[new Om({ndim:4})],n}return Ep(e,t),e.prototype.computeOutputShape=function(t){t=km(t);var e="channelsFirst"===this.dataFormat?t[2]:t[1],n="channelsFirst"===this.dataFormat?t[3]:t[2];return e=Vy(e,this.poolSize[0],this.padding,this.strides[0]),n=Vy(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[t[0],t[1],e,n]:[t[0],e,n,t[3]]},e.prototype.call=function(t,e){var n=this;return en((function(){return n.invokeCallHook(t,e),n.poolingFunction(Sm(t),n.poolSize,n.strides,n.padding,n.dataFormat)}))},e.prototype.getConfig=function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e}(zm),Rv=function(t){function e(e){return t.call(this,e)||this}return Ep(e,t),e.prototype.poolingFunction=function(t,e,n,r,i){return yf(i),vf(r),Ev(t,e,n,r,i,"max")},e.className="MaxPooling2D",e}(Nv);hp.registerClass(Rv);var Ov=function(t){function e(e){return t.call(this,e)||this}return Ep(e,t),e.prototype.poolingFunction=function(t,e,n,r,i){return yf(i),vf(r),Ev(t,e,n,r,i,"avg")},e.className="AveragePooling2D",e}(Nv);hp.registerClass(Ov);var Fv=function(t){function e(e){var n=this;if(null==e.poolSize&&(e.poolSize=[2,2,2]),(n=t.call(this,e)||this).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)n.strides=n.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new Fp("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+e.strides.length+".");n.strides=e.strides}else n.strides=[e.strides,e.strides,e.strides];return Qp(n.poolSize,"poolSize"),Qp(n.strides,"strides"),n.padding=null==e.padding?"valid":e.padding,n.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,yf(n.dataFormat),vf(n.padding),n.inputSpec=[new Om({ndim:5})],n}return Ep(e,t),e.prototype.computeOutputShape=function(t){t=km(t);var e="channelsFirst"===this.dataFormat?t[2]:t[1],n="channelsFirst"===this.dataFormat?t[3]:t[2],r="channelsFirst"===this.dataFormat?t[4]:t[3];return e=Vy(e,this.poolSize[0],this.padding,this.strides[0]),n=Vy(n,this.poolSize[1],this.padding,this.strides[1]),r=Vy(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[t[0],t[1],e,n,r]:[t[0],e,n,r,t[4]]},e.prototype.call=function(t,e){var n=this;return en((function(){return n.invokeCallHook(t,e),n.poolingFunction(Sm(t),n.poolSize,n.strides,n.padding,n.dataFormat)}))},e.prototype.getConfig=function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e}(zm),Mv=function(t){function e(e){return t.call(this,e)||this}return Ep(e,t),e.prototype.poolingFunction=function(t,e,n,r,i){return yf(i),vf(r),Iv(t,e,n,r,i,"max")},e.className="MaxPooling3D",e}(Fv);hp.registerClass(Mv);var Pv=function(t){function e(e){return t.call(this,e)||this}return Ep(e,t),e.prototype.poolingFunction=function(t,e,n,r,i){return yf(i),vf(r),Iv(t,e,n,r,i,"avg")},e.className="AveragePooling3D",e}(Fv);hp.registerClass(Pv);var Lv=function(t){function e(e){var n=t.call(this,e)||this;return n.inputSpec=[new Om({ndim:3})],n}return Ep(e,t),e.prototype.computeOutputShape=function(t){return[t[0],t[2]]},e.prototype.call=function(t,e){throw new Mp},e}(zm),zv=function(t){function e(e){return t.call(this,e||{})||this}return Ep(e,t),e.prototype.call=function(t,e){return en((function(){var e=Sm(t);return _c(e,1)}))},e.className="GlobalAveragePooling1D",e}(Lv);hp.registerClass(zv);var Vv=function(t){function e(e){return t.call(this,e||{})||this}return Ep(e,t),e.prototype.call=function(t,e){return en((function(){var e=Sm(t);return wc(e,1)}))},e.className="GlobalMaxPooling1D",e}(Lv);hp.registerClass(Vv);var Bv=function(t){function e(e){var n=t.call(this,e)||this;return n.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,yf(n.dataFormat),n.inputSpec=[new Om({ndim:4})],n}return Ep(e,t),e.prototype.computeOutputShape=function(t){return t=t,"channelsLast"===this.dataFormat?[t[0],t[3]]:[t[0],t[1]]},e.prototype.call=function(t,e){throw new Mp},e.prototype.getConfig=function(){var e={dataFormat:this.dataFormat},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e}(zm),jv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ep(e,t),e.prototype.call=function(t,e){var n=this;return en((function(){var e=Sm(t);return _c(e,"channelsLast"===n.dataFormat?[1,2]:[2,3])}))},e.className="GlobalAveragePooling2D",e}(Bv);hp.registerClass(jv);var Uv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ep(e,t),e.prototype.call=function(t,e){var n=this;return en((function(){var e=Sm(t);return wc(e,"channelsLast"===n.dataFormat?[1,2]:[2,3])}))},e.className="GlobalMaxPooling2D",e}(Bv);function Wv(t,e,n,r){if(Array.isArray(t)){if(null!=e||null!=n)throw new Fp("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function i(t){return null==t||Array.isArray(t)?t:[t]}return{inputs:t,initialState:e=i(e),constants:n=i(n)}}function Hv(t,e,n,r,i,a,o,s){return void 0===r&&(r=!1),void 0===o&&(o=!1),void 0===s&&(s=!1),en((function(){var l=e.shape.length;if(l<3)throw new Fp("Input should be at least 3D, but is "+l+"D.");var u=[1,0].concat(Rf(2,l));if(e=ea(e,u),null!=a)throw new Mp("The rnn() functoin of the deeplearn.js backend does not support constants yet.");o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=i&&((i=i.asType("bool").asType("float32")).rank===l-1&&(i=ur(i,-1)),i=ea(i,u)),r&&(e=Yu(e,0),null!=i&&(i=Yu(i,0)));var c,h,d=[],p=n,f=e.shape[0],m=fr(e);null!=i&&(h=fr(i));for(var g,y=function(e){var n=m[e],r=en((function(){return t(n,p)}));if(null==i)c=r[0],p=r[1];else{var a=en((function(){var t=h[e],n=Xn(t).sub(t);return{output:r[0].mul(t).addStrict(p[0].mul(n)),newStates:p.map((function(e,i){return r[1][i].mul(t).addStrict(e.mul(n))}))}}));c=a.output,p=a.newStates}s&&d.push(c)},v=0;v<f;++v)y(v);return s&&(g=pr(d,1)),[c,g,p]}))}hp.registerClass(Uv);var qv=function(t){function e(e){var n,r=t.call(this,e)||this;if(null==e.cell)throw new Fp("cell property is missing for the constructor of RNN.");if(null==(n=Array.isArray(e.cell)?new Jv({cells:e.cell}):e.cell).stateSize)throw new Fp("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");return r.cell=n,r.returnSequences=null!=e.returnSequences&&e.returnSequences,r.returnState=null!=e.returnState&&e.returnState,r.goBackwards=null!=e.goBackwards&&e.goBackwards,r._stateful=null!=e.stateful&&e.stateful,r.unroll=null!=e.unroll&&e.unroll,r.supportsMasking=!0,r.inputSpec=[new Om({ndim:3})],r.stateSpec=null,r.states_=null,r.numConstants=null,r.keptStates=[],r}return Ep(e,t),e.prototype.getStates=function(){return null==this.states_?Rf(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map((function(t){return null})):this.states_},e.prototype.setStates=function(t){this.states_=t},e.prototype.computeOutputShape=function(t){xm(t)&&(t=t[0]),t=t;var e=this.cell.stateSize;Array.isArray(e)||(e=[e]);var n,r=e[0];if(n=this.returnSequences?[t[0],t[1],r]:[t[0],r],this.returnState){for(var i=[],a=0,o=e;a<o.length;a++)i.push([t[0],o[a]]);return[n].concat(i)}return n},e.prototype.computeMask=function(t,e){var n=this;return en((function(){Array.isArray(e)&&(e=e[0]);var t=n.returnSequences?e:null;if(n.returnState){var r=n.states.map((function(t){return null}));return[t].concat(r)}return t}))},Object.defineProperty(e.prototype,"states",{get:function(){if(null==this.states_){for(var t=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,e=[],n=0;n<t;++n)e.push(null);return e}return this.states_},set:function(t){this.states_=t},enumerable:!0,configurable:!0}),e.prototype.build=function(t){if(null!=this.numConstants)throw new Mp("Constants support is not implemented in RNN yet.");xm(t)&&(t=t[0]),t=t,this.inputSpec[0]=new Om({shape:[this.stateful?t[0]:null,null,t[t.length-1]]});var e,n=[t[0]].concat(t.slice(2));if(this.cell.build(n),e=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!ht.arraysEqual(this.stateSpec.map((function(t){return t.shape[t.shape.length-1]})),e))throw new Fp("An initialState was passed that is not compatible with cell.stateSize. Received stateSpec="+this.stateSpec+"; However cell.stateSize is "+this.cell.stateSize)}else this.stateSpec=e.map((function(t){return new Om({shape:[null,t]})}));this.stateful&&this.resetStates()},e.prototype.resetStates=function(t,e){var n=this;void 0===e&&(e=!1),en((function(){if(!n.stateful)throw new Rp("Cannot call resetStates() on an RNN Layer that is not stateful.");var r=n.inputSpec[0].shape[0];if(null==r)throw new Fp("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==n.states_)n.states_=Array.isArray(n.cell.stateSize)?n.cell.stateSize.map((function(t){return qn([r,t])})):[qn([r,n.cell.stateSize])];else if(null==t)nn(n.states_),null!=n.keptStates&&(nn(n.keptStates),n.keptStates=[]),Array.isArray(n.cell.stateSize)?n.states_=n.cell.stateSize.map((function(t){return qn([r,t])})):n.states_[0]=qn([r,n.cell.stateSize]);else{if(Array.isArray(t)||(t=[t]),t.length!==n.states_.length)throw new Fp("Layer "+n.name+" expects "+n.states_.length+" state(s), but it received "+t.length+" state value(s). Input received: "+t);!0===e?n.keptStates.push(n.states_.slice()):nn(n.states_);for(var i=0;i<n.states_.length;++i){var a=t[i],o=Array.isArray(n.cell.stateSize)?n.cell.stateSize[i]:n.cell.stateSize,s=[r,o];if(!ht.arraysEqual(a.shape,s))throw new Fp("State "+i+" is incompatible with layer "+n.name+": expected shape="+s+", received shape="+a.shape);n.states_[i]=a}}n.states_=n.states_.map((function(t){return rn(t.clone())}))}))},e.prototype.apply=function(e,n){var r=null==n?null:n.initialState,i=null==n?null:n.constants;null==n&&(n={});var a=Wv(e,r,i,this.numConstants);e=a.inputs,i=a.constants;var o=[],s=[];if(null!=(r=a.initialState)){n.initialState=r,o=o.concat(r),this.stateSpec=[];for(var l=0,u=r;l<u.length;l++)this.stateSpec.push(new Om({shape:u[l].shape}));s=s.concat(this.stateSpec)}if(null!=i&&(n.constants=i,o=o.concat(i),this.numConstants=i.length),o[0]instanceof Fm){var c=[e].concat(o),h=this.inputSpec.concat(s),d=this.inputSpec;this.inputSpec=h;var p=t.prototype.apply.call(this,c,n);return this.inputSpec=d,p}return t.prototype.apply.call(this,e,n)},e.prototype.call=function(t,e){var n=this;return en((function(){var r=null==e?null:e.mask,i=null==e?null:e.training,a=null==e?null:e.initialState;t=Sm(t),null==a&&(a=n.stateful?n.states_:n.getInitialState(t));var o=Array.isArray(n.cell.stateSize)?n.cell.stateSize.length:1;if(a.length!==o)throw new Fp("RNN Layer has "+o+" state(s) but was passed "+a.length+" initial state(s).");n.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");var s={training:i},l=Hv((function(t,e){var r=n.cell.call([t].concat(e),s);return[r[0],r.slice(1)]}),t,a,n.goBackwards,r,null,n.unroll,n.returnSequences),u=l[0],c=l[1],h=l[2];n.stateful&&n.resetStates(h,i);var d=n.returnSequences?c:u;return n.returnState?[d].concat(h):d}))},e.prototype.getInitialState=function(t){var e=this;return en((function(){var n=qn(t.shape);return n=Ff(n=Sc(n,[1,2])),Array.isArray(e.cell.stateSize)?e.cell.stateSize.map((function(t){return t>1?Bf(n,[1,t]):n})):e.cell.stateSize>1?[Bf(n,[1,e.cell.stateSize])]:[n]}))},Object.defineProperty(e.prototype,"trainableWeights",{get:function(){return this.trainable?this.cell.trainableWeights:[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonTrainableWeights",{get:function(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights},enumerable:!0,configurable:!0}),e.prototype.setFastWeightInitDuringBuild=function(e){t.prototype.setFastWeightInitDuringBuild.call(this,e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)},e.prototype.getConfig=function(){var e={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(e.numConstants=this.numConstants);var n=this.cell.getConfig();e.cell={className:this.cell.getClassName(),config:n};var r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},e.fromConfig=function(t,e,n){void 0===n&&(n={});var r=Qm(e.cell,n);return new t(Object.assign(e,{cell:r}))},e.className="RNN",e}(zm);hp.registerClass(qv);var Gv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ep(e,t),e}(zm),$v=function(t){function e(e){var n=t.call(this,e)||this;return n.DEFAULT_ACTIVATION="tanh",n.DEFAULT_KERNEL_INITIALIZER="glorotNormal",n.DEFAULT_RECURRENT_INITIALIZER="orthogonal",n.DEFAULT_BIAS_INITIALIZER="zeros",n.units=e.units,Qp(n.units,"units"),n.activation=Sy(null==e.activation?n.DEFAULT_ACTIVATION:e.activation),n.useBias=null==e.useBias||e.useBias,n.kernelInitializer=gm(e.kernelInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.recurrentInitializer=gm(e.recurrentInitializer||n.DEFAULT_RECURRENT_INITIALIZER),n.biasInitializer=gm(e.biasInitializer||n.DEFAULT_BIAS_INITIALIZER),n.kernelRegularizer=Ny(e.kernelRegularizer),n.recurrentRegularizer=Ny(e.recurrentRegularizer),n.biasRegularizer=Ny(e.biasRegularizer),n.kernelConstraint=cf(e.kernelConstraint),n.recurrentConstraint=cf(e.recurrentConstraint),n.biasConstraint=cf(e.biasConstraint),n.dropout=Tf([1,Nf([0,null==e.dropout?0:e.dropout])]),n.recurrentDropout=Tf([1,Nf([0,null==e.recurrentDropout?0:e.recurrentDropout])]),n.stateSize=n.units,n.dropoutMask=null,n.recurrentDropoutMask=null,n}return Ep(e,t),e.prototype.build=function(t){t=km(t),this.kernel=this.addWeight("kernel",[t[t.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.bias=this.useBias?this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0},e.prototype.call=function(t,e){var n=this;return en((function(){if(2!==(t=t).length)throw new Fp("SimpleRNNCell expects 2 input Tensors, got "+t.length+".");var r=t[1];t=t[0];var i,a=null!=e.training&&e.training;0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=tb((function(){return Xn(t)}),n.dropout,a)),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=tb((function(){return Xn(r)}),n.recurrentDropout,a));var o=n.dropoutMask,s=n.recurrentDropoutMask;i=Uf(null!=o?xi(t,o):t,n.kernel.read()),null!=n.bias&&(i=Gf(i,n.bias.read())),null!=s&&(r=xi(r,s));var l=Ar(i,Uf(r,n.recurrentKernel.read()));return null!=n.activation&&(l=n.activation.apply(l)),[l,l]}))},e.prototype.getConfig=function(){var e={units:this.units,activation:xy(this.activation),useBias:this.useBias,kernelInitializer:mm(this.kernelInitializer),recurrentInitializer:mm(this.recurrentInitializer),biasInitializer:mm(this.biasInitializer),kernelRegularizer:Dy(this.kernelRegularizer),recurrentRegularizer:Dy(this.recurrentRegularizer),biasRegularizer:Dy(this.biasRegularizer),activityRegularizer:Dy(this.activityRegularizer),kernelConstraint:lf(this.kernelConstraint),recurrentConstraint:lf(this.recurrentConstraint),biasConstraint:lf(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="SimpleRNNCell",e}(Gv);hp.registerClass($v);var Kv=function(t){function e(e){return e.cell=new $v(e),t.call(this,e)||this}return Ep(e,t),e.prototype.call=function(e,n){var r=this;return en((function(){return null!=r.cell.dropoutMask&&(nn(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(nn(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null),t.prototype.call.call(r,e,{mask:null==n?null:n.mask,training:null==n?null:n.training,initialState:null==n?null:n.initialState})}))},Object.defineProperty(e.prototype,"units",{get:function(){return this.cell.units},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activation",{get:function(){return this.cell.activation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useBias",{get:function(){return this.cell.useBias},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kernelInitializer",{get:function(){return this.cell.kernelInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentInitializer",{get:function(){return this.cell.recurrentInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"biasInitializer",{get:function(){return this.cell.biasInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kernelRegularizer",{get:function(){return this.cell.kernelRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentRegularizer",{get:function(){return this.cell.recurrentRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"biasRegularizer",{get:function(){return this.cell.biasRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kernelConstraint",{get:function(){return this.cell.kernelConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentConstraint",{get:function(){return this.cell.recurrentConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"biasConstraint",{get:function(){return this.cell.biasConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropout",{get:function(){return this.cell.dropout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentDropout",{get:function(){return this.cell.recurrentDropout},enumerable:!0,configurable:!0}),e.prototype.getConfig=function(){var e={units:this.units,activation:xy(this.activation),useBias:this.useBias,kernelInitializer:mm(this.kernelInitializer),recurrentInitializer:mm(this.recurrentInitializer),biasInitializer:mm(this.biasInitializer),kernelRegularizer:Dy(this.kernelRegularizer),recurrentRegularizer:Dy(this.recurrentRegularizer),biasRegularizer:Dy(this.biasRegularizer),activityRegularizer:Dy(this.activityRegularizer),kernelConstraint:lf(this.kernelConstraint),recurrentConstraint:lf(this.recurrentConstraint),biasConstraint:lf(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout},n=t.prototype.getConfig.call(this);return delete n.cell,Object.assign(e,n),e},e.fromConfig=function(t,e){return new t(e)},e.className="SimpleRNN",e}(qv);hp.registerClass(Kv);var Xv=function(t){function e(e){var n=t.call(this,e)||this;return n.DEFAULT_ACTIVATION="tanh",n.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",n.DEFAULT_KERNEL_INITIALIZER="glorotNormal",n.DEFAULT_RECURRENT_INITIALIZER="orthogonal",n.DEFAULT_BIAS_INITIALIZER="zeros",n.units=e.units,Qp(n.units,"units"),n.activation=Sy(void 0===e.activation?n.DEFAULT_ACTIVATION:e.activation),n.recurrentActivation=Sy(void 0===e.recurrentActivation?n.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),n.useBias=null==e.useBias||e.useBias,n.kernelInitializer=gm(e.kernelInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.recurrentInitializer=gm(e.recurrentInitializer||n.DEFAULT_RECURRENT_INITIALIZER),n.biasInitializer=gm(e.biasInitializer||n.DEFAULT_BIAS_INITIALIZER),n.kernelRegularizer=Ny(e.kernelRegularizer),n.recurrentRegularizer=Ny(e.recurrentRegularizer),n.biasRegularizer=Ny(e.biasRegularizer),n.kernelConstraint=cf(e.kernelConstraint),n.recurrentConstraint=cf(e.recurrentConstraint),n.biasConstraint=cf(e.biasConstraint),n.dropout=Tf([1,Nf([0,null==e.dropout?0:e.dropout])]),n.recurrentDropout=Tf([1,Nf([0,null==e.recurrentDropout?0:e.recurrentDropout])]),n.implementation=e.implementation,n.stateSize=n.units,n.dropoutMask=null,n.recurrentDropoutMask=null,n}return Ep(e,t),e.prototype.build=function(t){var e=(t=km(t))[t.length-1];this.kernel=this.addWeight("kernel",[e,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.bias=this.useBias?this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0},e.prototype.call=function(t,e){var n=this;return en((function(){if(2!==(t=t).length)throw new Fp("GRUCell expects 2 input Tensors (inputs, h, c), got "+t.length+".");var r=null!=e.training&&e.training,i=t[1];t=t[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=tb((function(){return Xn(t)}),n.dropout,r,3)),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=tb((function(){return Xn(i)}),n.recurrentDropout,r,3));var a,o,s,l=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(t=xi(t,n.dropoutMask[0]));var u=Uf(t,n.kernel.read());n.useBias&&(u=Gf(u,n.bias.read())),0<n.recurrentDropout&&n.recurrentDropout<1&&(i=xi(i,l[0]));var c=n.recurrentKernel.read(),h=nr(c,[2*n.units,n.units],c.rank-1),d=h[1],p=Uf(i,h[0]),f=nr(u,3,u.rank-1),m=f[0],g=f[1],y=f[2],v=nr(p,2,p.rank-1),b=v[1];a=n.recurrentActivation.apply(Ar(m,v[0])),o=n.recurrentActivation.apply(Ar(g,b));var w=Uf(xi(o,i),d);s=n.activation.apply(Ar(y,w));var _=Ar(xi(a,i),xi(Ar(1,Yr(a)),s));return[_,_]}))},e.prototype.getConfig=function(){var e={units:this.units,activation:xy(this.activation),recurrentActivation:xy(this.recurrentActivation),useBias:this.useBias,kernelInitializer:mm(this.kernelInitializer),recurrentInitializer:mm(this.recurrentInitializer),biasInitializer:mm(this.biasInitializer),kernelRegularizer:Dy(this.kernelRegularizer),recurrentRegularizer:Dy(this.recurrentRegularizer),biasRegularizer:Dy(this.biasRegularizer),activityRegularizer:Dy(this.activityRegularizer),kernelConstraint:lf(this.kernelConstraint),recurrentConstraint:lf(this.recurrentConstraint),biasConstraint:lf(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="GRUCell",e}(Gv);hp.registerClass(Xv);var Yv=function(t){function e(e){return 0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new Xv(e),t.call(this,e)||this}return Ep(e,t),e.prototype.call=function(e,n){var r=this;return en((function(){return null!=r.cell.dropoutMask&&(nn(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(nn(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null),t.prototype.call.call(r,e,{mask:null==n?null:n.mask,training:null==n?null:n.training,initialState:null==n?null:n.initialState})}))},Object.defineProperty(e.prototype,"units",{get:function(){return this.cell.units},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activation",{get:function(){return this.cell.activation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentActivation",{get:function(){return this.cell.recurrentActivation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useBias",{get:function(){return this.cell.useBias},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kernelInitializer",{get:function(){return this.cell.kernelInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentInitializer",{get:function(){return this.cell.recurrentInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"biasInitializer",{get:function(){return this.cell.biasInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kernelRegularizer",{get:function(){return this.cell.kernelRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentRegularizer",{get:function(){return this.cell.recurrentRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"biasRegularizer",{get:function(){return this.cell.biasRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kernelConstraint",{get:function(){return this.cell.kernelConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentConstraint",{get:function(){return this.cell.recurrentConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"biasConstraint",{get:function(){return this.cell.biasConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropout",{get:function(){return this.cell.dropout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentDropout",{get:function(){return this.cell.recurrentDropout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"implementation",{get:function(){return this.cell.implementation},enumerable:!0,configurable:!0}),e.prototype.getConfig=function(){var e={units:this.units,activation:xy(this.activation),recurrentActivation:xy(this.recurrentActivation),useBias:this.useBias,kernelInitializer:mm(this.kernelInitializer),recurrentInitializer:mm(this.recurrentInitializer),biasInitializer:mm(this.biasInitializer),kernelRegularizer:Dy(this.kernelRegularizer),recurrentRegularizer:Dy(this.recurrentRegularizer),biasRegularizer:Dy(this.biasRegularizer),activityRegularizer:Dy(this.activityRegularizer),kernelConstraint:lf(this.kernelConstraint),recurrentConstraint:lf(this.recurrentConstraint),biasConstraint:lf(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},n=t.prototype.getConfig.call(this);return delete n.cell,Object.assign(e,n),e},e.fromConfig=function(t,e){return 0===e.implmentation&&(e.implementation=1),new t(e)},e.className="GRU",e}(qv);hp.registerClass(Yv);var Zv=function(t){function e(e){var n=t.call(this,e)||this;return n.DEFAULT_ACTIVATION="tanh",n.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",n.DEFAULT_KERNEL_INITIALIZER="glorotNormal",n.DEFAULT_RECURRENT_INITIALIZER="orthogonal",n.DEFAULT_BIAS_INITIALIZER="zeros",n.units=e.units,Qp(n.units,"units"),n.activation=Sy(void 0===e.activation?n.DEFAULT_ACTIVATION:e.activation),n.recurrentActivation=Sy(void 0===e.recurrentActivation?n.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),n.useBias=null==e.useBias||e.useBias,n.kernelInitializer=gm(e.kernelInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.recurrentInitializer=gm(e.recurrentInitializer||n.DEFAULT_RECURRENT_INITIALIZER),n.biasInitializer=gm(e.biasInitializer||n.DEFAULT_BIAS_INITIALIZER),n.unitForgetBias=e.unitForgetBias,n.kernelRegularizer=Ny(e.kernelRegularizer),n.recurrentRegularizer=Ny(e.recurrentRegularizer),n.biasRegularizer=Ny(e.biasRegularizer),n.kernelConstraint=cf(e.kernelConstraint),n.recurrentConstraint=cf(e.recurrentConstraint),n.biasConstraint=cf(e.biasConstraint),n.dropout=Tf([1,Nf([0,null==e.dropout?0:e.dropout])]),n.recurrentDropout=Tf([1,Nf([0,null==e.recurrentDropout?0:e.recurrentDropout])]),n.implementation=e.implementation,n.stateSize=[n.units,n.units],n.dropoutMask=null,n.recurrentDropoutMask=null,n}return Ep(e,t),e.prototype.build=function(t){var e,n,r=(t=km(t))[t.length-1];if(this.kernel=this.addWeight("kernel",[r,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){var i=this.biasInitializer,a=this.units;n=new((e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ep(e,t),e.prototype.apply=function(t,e){var n=i.apply([a]),r=(new Jf).apply([a]),o=i.apply([2*a]);return Vf(Vf(n,r),o)},e}(Zf)).className="CustomInit",e)}else n=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,n,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0},e.prototype.call=function(t,e){var n=this;return en((function(){var r=null!=e.training&&e.training;if(3!==(t=t).length)throw new Fp("LSTMCell expects 3 input Tensors (inputs, h, c), got "+t.length+".");var i=t[1],a=t[2];t=t[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=tb((function(){return Xn(t)}),n.dropout,r,4)),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=tb((function(){return Xn(i)}),n.recurrentDropout,r,4));var o,s,l,u,c=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(t=xi(t,n.dropoutMask[0]));var h=Uf(t,n.kernel.read());0<n.recurrentDropout&&n.recurrentDropout<1&&(i=xi(i,c[0])),h=Ar(h,Uf(i,n.recurrentKernel.read())),n.useBias&&(h=Gf(h,n.bias.read()));var d=nr(h,4,h.rank-1),p=d[1],f=d[2],m=d[3];o=n.recurrentActivation.apply(d[0]),s=n.recurrentActivation.apply(p),l=Ar(xi(s,a),xi(o,n.activation.apply(f))),u=n.recurrentActivation.apply(m);var g=xi(u,n.activation.apply(l));return[g,g,l]}))},e.prototype.getConfig=function(){var e={units:this.units,activation:xy(this.activation),recurrentActivation:xy(this.recurrentActivation),useBias:this.useBias,kernelInitializer:mm(this.kernelInitializer),recurrentInitializer:mm(this.recurrentInitializer),biasInitializer:mm(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Dy(this.kernelRegularizer),recurrentRegularizer:Dy(this.recurrentRegularizer),biasRegularizer:Dy(this.biasRegularizer),activityRegularizer:Dy(this.activityRegularizer),kernelConstraint:lf(this.kernelConstraint),recurrentConstraint:lf(this.recurrentConstraint),biasConstraint:lf(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="LSTMCell",e}(Gv);hp.registerClass(Zv);var Qv=function(t){function e(e){return 0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new Zv(e),t.call(this,e)||this}return Ep(e,t),e.prototype.call=function(e,n){var r=this;return en((function(){return null!=r.cell.dropoutMask&&(nn(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(nn(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null),t.prototype.call.call(r,e,{mask:null==n?null:n.mask,training:null==n?null:n.training,initialState:null==n?null:n.initialState})}))},Object.defineProperty(e.prototype,"units",{get:function(){return this.cell.units},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activation",{get:function(){return this.cell.activation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentActivation",{get:function(){return this.cell.recurrentActivation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useBias",{get:function(){return this.cell.useBias},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kernelInitializer",{get:function(){return this.cell.kernelInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentInitializer",{get:function(){return this.cell.recurrentInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"biasInitializer",{get:function(){return this.cell.biasInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unitForgetBias",{get:function(){return this.cell.unitForgetBias},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kernelRegularizer",{get:function(){return this.cell.kernelRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentRegularizer",{get:function(){return this.cell.recurrentRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"biasRegularizer",{get:function(){return this.cell.biasRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kernelConstraint",{get:function(){return this.cell.kernelConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentConstraint",{get:function(){return this.cell.recurrentConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"biasConstraint",{get:function(){return this.cell.biasConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropout",{get:function(){return this.cell.dropout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentDropout",{get:function(){return this.cell.recurrentDropout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"implementation",{get:function(){return this.cell.implementation},enumerable:!0,configurable:!0}),e.prototype.getConfig=function(){var e={units:this.units,activation:xy(this.activation),recurrentActivation:xy(this.recurrentActivation),useBias:this.useBias,kernelInitializer:mm(this.kernelInitializer),recurrentInitializer:mm(this.recurrentInitializer),biasInitializer:mm(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Dy(this.kernelRegularizer),recurrentRegularizer:Dy(this.recurrentRegularizer),biasRegularizer:Dy(this.biasRegularizer),activityRegularizer:Dy(this.activityRegularizer),kernelConstraint:lf(this.kernelConstraint),recurrentConstraint:lf(this.recurrentConstraint),biasConstraint:lf(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},n=t.prototype.getConfig.call(this);return delete n.cell,Object.assign(e,n),e},e.fromConfig=function(t,e){return 0===e.implmentation&&(e.implementation=1),new t(e)},e.className="LSTM",e}(qv);hp.registerClass(Qv);var Jv=function(t){function e(e){var n=t.call(this,e)||this;return n.cells=e.cells,n}return Ep(e,t),Object.defineProperty(e.prototype,"stateSize",{get:function(){for(var t=[],e=0,n=this.cells.slice().reverse();e<n.length;e++){var r=n[e];Array.isArray(r.stateSize)?t.push.apply(t,r.stateSize):t.push(r.stateSize)}return t},enumerable:!0,configurable:!0}),e.prototype.call=function(t,e){var n=this;return en((function(){for(var r=(t=t).slice(1),i=[],a=0,o=n.cells.slice().reverse();a<o.length;a++){var s=o[a];Array.isArray(s.stateSize)?i.push(r.splice(0,s.stateSize.length)):i.push(r.splice(0,1))}i.reverse();for(var l,u=[],c=0;c<n.cells.length;++c)s=n.cells[c],r=i[c],l=0===c?[t[0]].concat(r):[l[0]].concat(r),l=s.call(l,e),u.push(l.slice(1));r=[];for(var h=0,d=u.slice().reverse();h<d.length;h++)r.push.apply(r,d[h]);return[l[0]].concat(r)}))},e.prototype.build=function(t){var e;xm(t)&&(t=t[0]),t=t,this.cells.forEach((function(n,r){xf("RNNCell_"+r,(function(){n.build(t),e=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,t=[t[0],e]}))})),this.built=!0},e.prototype.getConfig=function(){for(var e=[],n=0,r=this.cells;n<r.length;n++){var i=r[n];e.push({className:i.getClassName(),config:i.getConfig()})}var a={cells:e},o=t.prototype.getConfig.call(this);return Object.assign(a,o),a},e.fromConfig=function(t,e,n){void 0===n&&(n={});for(var r=[],i=0,a=e.cells;i<a.length;i++)r.push(Qm(a[i],n));return new t({cells:r})},Object.defineProperty(e.prototype,"trainableWeights",{get:function(){if(!this.trainable)return[];for(var t=[],e=0,n=this.cells;e<n.length;e++)t.push.apply(t,n[e].trainableWeights);return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonTrainableWeights",{get:function(){for(var t=[],e=0,n=this.cells;e<n.length;e++){var r=n[e];t.push.apply(t,r.nonTrainableWeights)}if(!this.trainable){for(var i=[],a=0,o=this.cells;a<o.length;a++)i.push.apply(i,(r=o[a]).trainableWeights);return i.concat(t)}return t},enumerable:!0,configurable:!0}),e.prototype.getWeights=function(){for(var t=[],e=0,n=this.cells;e<n.length;e++)t.push.apply(t,n[e].weights);return Dm(t)},e.prototype.setWeights=function(t){for(var e=[],n=0,r=this.cells;n<r.length;n++)for(var i=r[n],a=t.splice(i.weights.length),o=0;o<i.weights.length;++o)e.push([i.weights[o],a[o]]);Tm(e)},e.className="StackedRNNCells",e}(Gv);function tb(t,e,n,r){function i(){return $f(t(),e)}if(void 0===n&&(n=null),void 0===r&&(r=1),r>1){for(var a=[],o=0;o<r;o++)a.push(Kf(i,t,n));return a.map((function(t){return rn(t.clone())}))}return rn(Kf(i,t,n).clone())}hp.registerClass(Jv);var eb=function(t){function e(e){var n=t.call(this,e)||this;return n.layer=e.layer,n}return Ep(e,t),e.prototype.build=function(t){this.built=!0},Object.defineProperty(e.prototype,"trainable",{get:function(){return null!=this.layer&&this.layer.trainable},set:function(t){null!=this.layer&&(this.layer.trainable=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trainableWeights",{get:function(){return this.layer.trainableWeights},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonTrainableWeights",{get:function(){return this.layer.nonTrainableWeights},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"updates",{get:function(){return this.layer._updates},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"losses",{get:function(){return this.layer.losses},enumerable:!0,configurable:!0}),e.prototype.getWeights=function(){return this.layer.getWeights()},e.prototype.setWeights=function(t){this.layer.setWeights(t)},e.prototype.getConfig=function(){var e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.prototype.setFastWeightInitDuringBuild=function(e){t.prototype.setFastWeightInitDuringBuild.call(this,e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)},e.fromConfig=function(t,e,n){void 0===n&&(n={});var r=Qm(e.layer,n);delete e.layer;var i={layer:r};return Object.assign(i,e),new t(i)},e}(zm),nb=function(t){function e(e){var n=t.call(this,e)||this;return n.supportsMasking=!0,n}return Ep(e,t),e.prototype.build=function(e){if((e=km(e)).length<3)throw new Fp("TimeDistributed layer expects an input shape >= 3D, but received input shape "+JSON.stringify(e));this.inputSpec=[{shape:e}];var n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),t.prototype.build.call(this,e)},e.prototype.computeOutputShape=function(t){var e=[(t=km(t))[0]].concat(t.slice(2)),n=this.layer.computeOutputShape(e);return[n[0],t[1]].concat(n.slice(1))},e.prototype.call=function(t,e){var n=this;return en((function(){return Hv((function(t,r){return[Sm(n.layer.call(t,e)),[]]}),t=Sm(t),[],!1,null,null,!1,!0)[1]}))},e.className="TimeDistributed",e}(eb);hp.registerClass(nb);var rb="concat",ib=function(t){function e(e){var n=t.call(this,e)||this,r=e.layer.getConfig(),i={};i.className=e.layer.getClassName(),i.config=r,n.forwardLayer=Qm(i),r.goBackwards=!0!==r.goBackwards;var a={};if(a.className=e.layer.getClassName(),a.config=r,n.backwardLayer=Qm(a),n.forwardLayer.name="forward_"+n.forwardLayer.name,n.backwardLayer.name="backward_"+n.backwardLayer.name,n.mergeMode=void 0===e.mergeMode?rb:e.mergeMode,function(t){Yp(mf,"BidirectionalMergeMode",t)}(n.mergeMode),e.weights)throw new Mp("weights support is not implemented for Bidirectional layer yet.");return n._stateful=e.layer.stateful,n.returnSequences=e.layer.returnSequences,n.returnState=e.layer.returnState,n.supportsMasking=!0,n._trainable=!0,n.inputSpec=e.layer.inputSpec,n.numConstants=null,n}return Ep(e,t),Object.defineProperty(e.prototype,"trainable",{get:function(){return this._trainable},set:function(t){this._trainable=t,null!=this.forwardLayer&&(this.forwardLayer.trainable=t),null!=this.backwardLayer&&(this.backwardLayer.trainable=t)},enumerable:!0,configurable:!0}),e.prototype.getWeights=function(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())},e.prototype.setWeights=function(t){var e=Math.floor(t.length/2);this.forwardLayer.setWeights(t.slice(0,e)),this.backwardLayer.setWeights(t.slice(e))},e.prototype.computeOutputShape=function(t){var e,n,r,i=this.forwardLayer.computeOutputShape(t);return Array.isArray(i)&&Array.isArray(i[0])||(i=[i]),i=i,this.returnState?(r=i.slice(1),e=i[0]):e=i[0],e=e,"concat"===this.mergeMode?(e[e.length-1]*=2,n=[e]):n=null==this.mergeMode?[e,e.slice()]:[e],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[e].concat(r).concat(r.slice()):Bp(n)},e.prototype.apply=function(e,n){var r=null==n?null:n.initialState,i=null==n?null:n.constants;null==n&&(n={});var a=Wv(e,r,i,this.numConstants);if(e=a.inputs,r=a.initialState,i=a.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(null==r||0===r.length)&&null==i)return t.prototype.apply.call(this,e,n);var o=[],s=[];if(null!=r){var l=r.length;if(l%2>0)throw new Fp("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,o.push.apply(o,r);var u=r.map((function(t){return new Om({shape:t.shape})}));this.forwardLayer.stateSpec=u.slice(0,l/2),this.backwardLayer.stateSpec=u.slice(l/2),s.push.apply(s,u)}if(null!=i)throw new Mp("Support for constants in Bidirectional layers is not implemented yet.");for(var c=o[0]instanceof Fm,h=0,d=o;h<d.length;h++)if(d[h]instanceof Fm!==c)throw new Fp("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(c){var p=[e].concat(o),f=this.inputSpec.concat(s),m=this.inputSpec;this.inputSpec=f;var g=t.prototype.apply.call(this,p,n);return this.inputSpec=m,g}return t.prototype.apply.call(this,e,n)},e.prototype.call=function(t,e){var n=this;return en((function(){var r,i,a,o,s=e.initialState;if(null==s)r=n.forwardLayer.call(t,e),i=n.backwardLayer.call(t,e);else{var l=s.slice(0,s.length/2),u=s.slice(s.length/2);r=n.forwardLayer.call(t,Object.assign(e,{initialState:l})),i=n.backwardLayer.call(t,Object.assign(e,{initialState:u}))}return n.returnState&&(Array.isArray(r)&&(a=r.slice(1).concat(i.slice(1))),r=r[0],i=i[0]),n.returnSequences&&(i=Yu(i,1)),"concat"===n.mergeMode?o=zf([r,i]):"sum"===n.mergeMode?o=Ar(r,i):"ave"===n.mergeMode?o=xi(.5,Ar(r,i)):"mul"===n.mergeMode?o=xi(r,i):null==n.mergeMode&&(o=[r,i]),n.returnState?null==n.mergeMode?o.concat(a):[o].concat(a):o}))},e.prototype.resetStates=function(t){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()},e.prototype.build=function(t){var e=this;xf(this.forwardLayer.name,(function(){e.forwardLayer.build(t)})),xf(this.backwardLayer.name,(function(){e.backwardLayer.build(t)})),this.built=!0},e.prototype.computeMask=function(t,e){var n;if(Array.isArray(e)&&(e=e[0]),n=this.returnSequences?null==this.mergeMode?[e,e]:e:null==this.mergeMode?[null,null]:null,this.returnState){var r=this.forwardLayer.states.map((function(t){return null}));return Array.isArray(n)?n.concat(r).concat(r):[n].concat(r).concat(r)}return n},Object.defineProperty(e.prototype,"trainableWeights",{get:function(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonTrainableWeights",{get:function(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)},enumerable:!0,configurable:!0}),e.prototype.setFastWeightInitDuringBuild=function(e){t.prototype.setFastWeightInitDuringBuild.call(this,e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)},e.prototype.getConfig=function(){var e={mergeMode:this.mergeMode},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.fromConfig=function(t,e){var n=Qm(e.layer);if(delete e.layer,null!=e.numConstants)throw new Mp("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");var r=e;return r.layer=n,new t(r)},e.className="Bidirectional",e}(eb);function ab(t){return new Tv(t)}function ob(t){return new Ov(t)}function sb(t){return new Pv(t)}function lb(t){return new Vv(t)}function ub(t){return new Uv(t)}function cb(t){return new Dv(t)}function hb(t){return new Rv(t)}hp.registerClass(ib);var db=Object.freeze({inputLayer:function(t){return new Vm(t)},elu:function(t){return new My(t)},reLU:function(t){return new Ry(t)},leakyReLU:function(t){return new Oy(t)},prelu:function(t){return new Fy(t)},softmax:function(t){return new Ly(t)},thresholdedReLU:function(t){return new Py(t)},conv1d:function(t){return new Yy(t)},conv2d:function(t){return new Gy(t)},conv2dTranspose:function(t){return new Ky(t)},conv3d:function(t){return new $y(t)},separableConv2d:function(t){return new Xy(t)},cropping2D:function(t){return new Zy(t)},upSampling2d:function(t){return new Qy(t)},depthwiseConv2d:function(t){return new Jy(t)},activation:function(t){return new iv(t)},dense:function(t){return new nv(t)},dropout:function(t){return new tv(t)},spatialDropout1d:function(t){return new ev(t)},flatten:function(t){return new rv(t)},repeatVector:function(t){return new av(t)},reshape:function(t){return new ov(t)},permute:function(t){return new sv(t)},embedding:function(t){return new uv(t)},add:function(t){return new hv(t)},average:function(t){return new pv(t)},concatenate:function(t){return new gv(t)},maximum:function(t){return new fv(t)},minimum:function(t){return new mv(t)},multiply:function(t){return new dv(t)},dot:function(t){return new vv(t)},batchNormalization:function(t){return new Cv(t)},layerNormalization:function(t){return new Sv(t)},zeroPadding2d:function(t){return new kv(t)},averagePooling1d:ab,avgPool1d:function(t){return ab(t)},avgPooling1d:function(t){return ab(t)},averagePooling2d:ob,avgPool2d:function(t){return ob(t)},avgPooling2d:function(t){return ob(t)},averagePooling3d:sb,avgPool3d:function(t){return sb(t)},avgPooling3d:function(t){return sb(t)},globalAveragePooling1d:function(t){return new zv(t)},globalAveragePooling2d:function(t){return new jv(t)},globalMaxPooling1d:lb,globalMaxPooling2d:ub,maxPooling1d:cb,maxPooling2d:hb,maxPooling3d:function(t){return new Mv(t)},gru:function(t){return new Yv(t)},gruCell:function(t){return new Xv(t)},lstm:function(t){return new Qv(t)},lstmCell:function(t){return new Zv(t)},simpleRNN:function(t){return new Kv(t)},simpleRNNCell:function(t){return new $v(t)},rnn:function(t){return new qv(t)},stackedRNNCells:function(t){return new Jv(t)},bidirectional:function(t){return new ib(t)},timeDistributed:function(t){return new nb(t)},globalMaxPool1d:lb,globalMaxPool2d:ub,maxPool1d:cb,maxPool2d:hb,Layer:zm,RNN:qv,RNNCell:Gv,input:sy,gaussianNoise:function(t){return new bv(t)},gaussianDropout:function(t){return new wv(t)},alphaDropout:function(t){return new _v(t)},masking:function(t){return new lv(t)}}),pb=Object.freeze({binaryAccuracy:function(t,e){return ug(t,e)},binaryCrossentropy:function(t,e){return pg(t,e)},sparseCategoricalAccuracy:function(t,e){return fg(t,e)},categoricalAccuracy:function(t,e){return cg(t,e)},categoricalCrossentropy:function(t,e){return mg(t,e)},precision:function(t,e){return dg(t,e)},recall:function(t,e){return function(t,e){return en((function(){var n=hg(t,e),r=function(t,e){return en((function(){return zl(t.equal(1),e.equal(0)).sum().cast("float32")}))}(t,e),i=n.add(r);return Ul(vu(i,0),n.div(i),0).cast("float32")}))}(t,e)},cosineProximity:function(t,e){return og(t,e)},meanAbsoluteError:function(t,e){return eg(t,e)},meanAbsolutePercentageError:function(t,e){return ng(t,e)},MAPE:function(t,e){return ng(t,e)},mape:function(t,e){return ng(t,e)},meanSquaredError:function(t,e){return tg(t,e)},MSE:function(t,e){return tg(t,e)},mse:function(t,e){return tg(t,e)}}),fb=Object.freeze({modelFromJSON:function(t,e){return Dp(this,void 0,void 0,(function(){var n,r,i,a,o,s,l,u;return Tp(this,(function(c){switch(c.label){case 0:return"modelTopology"in t||(t={modelTopology:t}),null!=(n=(t=t).modelTopology).model_config&&(n=n.model_config),r=kg(n),i=Qm(r,e),null==t.weightsManifest?[3,2]:[4,rp.loadWeights(t.weightsManifest,t.pathPrefix,i.weights.map((function(t){return t.originalName})))];case 1:for(a=c.sent(),o={},s=0,l=i.weights;s<l.length;s++)o[(u=l[s]).originalName]=a[u.originalName];i.loadWeights(o),nn(a),c.label=2;case 2:return[2,i]}}))}))}}),mb=Object.freeze({l1l2:function(t){return new Iy(t)},l1:function(t){return function(t){return ky(t),new Iy({l1:null!=t?t.l1:null,l2:0})}(t)},l2:function(t){return function(t){return ky(t),new Iy({l2:null!=t?t.l2:null,l1:0})}(t)}}),gb=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.model=null,e}return Ep(e,t),e.prototype.setModel=function(t){if(!(t instanceof ey))throw new Error("model must be a LayersModel, not some other Container");this.model=t},e}(Hm);function yb(t,e){return t<e}function vb(t,e){return t>e}var bb,wb,_b=function(t){function e(e){var n=t.call(this)||this;if(null==e&&(e={}),e.restoreBestWeights)throw new Mp("restoreBestWeights = True is not implemented in EarlyStopping yet.");return n.monitor=e.monitor||"val_loss",n.minDelta=Math.abs(e.minDelta||0),n.patience=e.patience||0,n.verbose=e.verbose||0,n.mode=e.mode||"auto",n.baseline=e.baseline,-1===["auto","min","max"].indexOf(n.mode)&&(console.warn("EarlyStopping mode '"+n.mode+"' is invalid. Falling back to mode 'auto'."),n.mode="auto"),n.monitorFunc="min"===n.mode?yb:"max"===n.mode?vb:-1!==n.monitor.indexOf("acc")?vb:yb,n.monitorFunc===yb&&(n.minDelta*=-1),n}return Ep(e,t),e.prototype.onTrainBegin=function(t){return Dp(this,void 0,void 0,(function(){return Tp(this,(function(t){return this.wait=0,this.stoppedEpoch=0,this.best=null!=this.baseline?this.baseline:this.monitorFunc===yb?1/0:-1/0,[2]}))}))},e.prototype.onEpochEnd=function(t,e){return Dp(this,void 0,void 0,(function(){var n;return Tp(this,(function(r){switch(r.label){case 0:return[4,jm(e)];case 1:return r.sent(),null==(n=this.getMonitorValue(e))?[2]:(this.monitorFunc(n-this.minDelta,this.best)?(this.best=n,this.wait=0):(this.wait++,this.wait>=this.patience&&(this.stoppedEpoch=t,this.model.stopTraining=!0)),[2])}}))}))},e.prototype.onTrainEnd=function(t){return Dp(this,void 0,void 0,(function(){return Tp(this,(function(t){return this.stoppedEpoch>0&&this.verbose&&console.log("Epoch "+this.stoppedEpoch+": early stopping."),[2]}))}))},e.prototype.getMonitorValue=function(t){null==t&&(t={});var e=t[this.monitor];return null==e&&console.warn("Metric for EarlyStopping "+this.monitor+" is not available. Available metrics are: "+Object.keys(t)),e},e}(gb),xb={earlyStopping:function(t){return new _b(t)}},Cb=function(){return(Cb=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Sb(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{l(r.next(t))}catch(t){a(t)}}function s(t){try{l(r.throw(t))}catch(t){a(t)}}function l(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(o,s)}l((r=r.apply(t,e||[])).next())}))}function kb(t,e){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(t){a=[6,t],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}!function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF"}(bb||(bb={})),function(t){!function(t){t[t.LEGACY=0]="LEGACY",t[t.V1=1]="V1",t[t.V2=2]="V2"}(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))}(wb||(wb={}));var Eb={};function Ib(t,e){Eb[t]={tfOpName:t,category:"custom",inputs:[],attrs:[],customExecutor:e}}function Ab(t){return Eb[t]}function Db(t){delete Eb[t]}function Tb(t,e,n,r){var i=e.inputParams[t];if(i&&void 0!==i.inputIndexStart){var a=i.inputIndexStart,o=0===i.inputIndexEnd?void 0:void 0===i.inputIndexEnd?a+1:i.inputIndexEnd;if("tensor"===i.type)return Nb(e.inputNames[i.inputIndexStart],n,r);if("tensors"===i.type)return e.inputNames.slice(a,o).map((function(t){return Nb(t,n,r)}));var s=Array.prototype.slice.call(Nb(e.inputNames.slice(a)[0],n,r).dataSync());return"number"===i.type?s[0]:s}var l=e.attrParams[t];return l&&l.value}function Nb(t,e,n){var r=Fb(t),i=r[0],a=r[1],o=n.currentContextIds.find((function(t){return!!e[Ob(i,t)]}));return void 0!==o?e[Ob(i,o)][a]:void 0}function Rb(t,e){var n=Fb(t),r=n[1];return[Ob(n[0],e&&e.currentContextId),r]}function Ob(t,e){return e?t+"-"+e:t}function Fb(t){var e=t.lastIndexOf(":");return-1===e?[t,0]:[t.substring(0,e),Number(t.substring(e+1))]}function Mb(t,e){for(var n=[],r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n}var Pb=Object.freeze({json:[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]}),Lb=Object.freeze({json:[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"clip_value_min",name:"clipValueMin",type:"number"},{tfName:"clip_value_max",name:"clipValueMax",type:"number"}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"clipValueMin",name:"clipValueMin",type:"number",defaultValue:0},{tfName:"clipValueMax",name:"clipValueMax",type:"number",defaultValue:6}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]}),zb=Object.freeze({json:[{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"}]}]}),Vb=Object.freeze({json:[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]}]}),Bb=Object.freeze({json:[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}]}),jb=Object.freeze({json:[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]}),Ub=Object.freeze({json:[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]}]}),Wb=Object.freeze({json:[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}]}),Hb=Object.freeze({json:[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]}]}),qb=Object.freeze({json:[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]}),Gb=Object.freeze({json:[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]}),$b=Object.freeze({json:[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}]}),Kb=Object.freeze({json:[{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]}]}),Xb=Object.freeze({json:[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool",notSupported:!0}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}]}),Yb=Object.freeze({json:[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}]}),Zb=Object.freeze({json:[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]}]}),Qb=function(){function t(){var t=[].concat.apply([],[Pb,Lb,zb,Vb,Bb,jb,Ub,qb,Hb,Wb,Gb,$b,Kb,Xb,Yb,Zb].map((function(t){return t.json})));this.opMappers=t.reduce((function(t,e){return t[e.tfOpName]=e,t}),{})}return Object.defineProperty(t,"Instance",{get:function(){return this._instance||(this._instance=new this)},enumerable:!0,configurable:!0}),t.prototype.transformGraph=function(t,e){var n=this;void 0===e&&(e={});var r=[],i=[],a=t.node.reduce((function(t,e){return t[e.name]=n.mapNode(e),e.op.startsWith("Placeholder")&&r.push(t[e.name]),"Const"===e.op&&i.push(t[e.name]),t}),{}),o=[],s=[],l={},u={};null!=e&&(l=this.mapSignatureEntries(e.inputs),u=this.mapSignatureEntries(e.outputs));var c=Object.keys(a);return c.forEach((function(t){var e=a[t];e.inputNames.forEach((function(t){var n=Rb(t)[0];e.inputs.push(a[n]),a[n].children.push(e)}))})),0===Object.keys(u).length?c.forEach((function(t){var e=a[t];0===e.children.length&&s.push(e)})):Object.keys(u).forEach((function(t){var e=Rb(t)[0],n=a[e];null!=n&&(n.signatureKey=u[t],s.push(n))})),Object.keys(l).length>0?Object.keys(l).forEach((function(t){var e=Rb(t)[0],n=a[e];n&&(n.signatureKey=l[t],o.push(n))})):o=r,{nodes:a,inputs:o,outputs:s,weights:i,placeholders:r,signature:e}},t.prototype.mapSignatureEntries=function(t){return Object.keys(t||{}).reduce((function(e,n){return e[t[n].name]=n,e}),{})},t.prototype.mapNode=function(t){var e=Ab(t.op)||this.opMappers[t.op]||{};null==t.attr&&(t.attr={});var n={name:t.name,op:t.op,category:e.category,inputNames:(t.input||[]).map((function(t){return t.startsWith("^")?t.substr(1):t})),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:t.attr};return null!=e.inputs&&(n.inputParams=e.inputs.reduce((function(t,e){return t[e.name]={type:e.type,inputIndexStart:e.start,inputIndexEnd:e.end},t}),{})),null!=e.attrs&&(n.attrParams=e.attrs.reduce((function(e,n){var r=n.type,i=void 0;switch(n.type){case"string":void 0===(i=tw(t.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(i=tw(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":void 0===(i=uw(t.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(i=uw(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":void 0===(i=nw(t.attr,n.tfName,n.defaultValue||0))&&n.tfDeprecatedName&&(i=nw(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":void 0===(i=lw(t.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(i=lw(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":void 0===(i=ew(t.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(i=ew(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":void 0===(i=hw(t.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(i=hw(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":void 0===(i=sw(t.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(i=sw(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":void 0===(i=cw(t.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(i=cw(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":void 0===(i=iw(t.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(i=iw(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":void 0===(i=aw(t.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(i=aw(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: "+n.type+" for op: "+t.op)}return e[n.name]={value:i,type:r},e}),{})),n},t}();function Jb(t,e){var n=Array.isArray(t)?String.fromCharCode.apply(null,t):function(t){var e=c().global;if(void 0!==e.atob)return e.atob(t);if("undefined"!=typeof Buffer)return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(t);return e?n:n.toLowerCase()}function tw(t,e,n,r){void 0===r&&(r=!1);var i=t[e];return null!=i?Jb(i.s,r):n}function ew(t,e,n){var r=t[e];return r?r.b:n}function nw(t,e,n){var r=t[e]||{},i=null!=r.i?r.i:null!=r.f?r.f:n;return"number"==typeof i?i:parseInt(i,10)}function rw(t){switch("string"==typeof t&&(t=bb[t]),t){case bb.DT_FLOAT:return"float32";case bb.DT_INT32:case bb.DT_INT64:case bb.DT_INT8:case bb.DT_UINT8:return"int32";case bb.DT_BOOL:return"bool";case bb.DT_DOUBLE:return"float32";case bb.DT_STRING:return"string";default:return null}}function iw(t,e,n){var r=t[e];return r&&r.type?rw(r.type):n}function aw(t,e,n){var r=t[e];return r&&r.list&&r.list.type?r.list.type.map((function(t){return rw(t)})):n}function ow(t){if(!t.unknownRank)return null!=t.dim?t.dim.map((function(t){return"number"==typeof t.size?t.size:parseInt(t.size,10)})):[]}function sw(t,e,n){var r=t[e];return r&&r.shape?ow(r.shape):n}function lw(t,e,n){var r=t[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map((function(t){return"number"==typeof t?t:parseInt(t,10)})):n}function uw(t,e,n,r){void 0===r&&(r=!1);var i=t[e];return i&&i.list&&i.list.s?i.list.s.map((function(t){return Jb(t,r)})):n}function cw(t,e,n){var r=t[e];return r&&r.list&&r.list.shape?r.list.shape.map((function(t){return ow(t)})):n}function hw(t,e,n){var r=t[e];return r&&r.list&&r.list.b?r.list.b:n}var dw=function(){function t(t,e,n){var r=this;this.node=t,this.tensorMap=e,this.context=n,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map((function(t){return r.getInput(t)})),null!=t.rawAttrs&&(this.attrs=Object.keys(t.rawAttrs).reduce((function(t,e){return t[e]=r.getAttr(e),t}),{}))}return t.prototype.getInput=function(t){return Nb(t,this.tensorMap,this.context)},t.prototype.getAttr=function(t,e){var n=this.node.rawAttrs[t];if(null!=n.tensor)return Nb(t,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return nw(this.node.rawAttrs,t,e);if(null!=n.s)return tw(this.node.rawAttrs,t,e);if(null!=n.b)return ew(this.node.rawAttrs,t,e);if(null!=n.shape)return sw(this.node.rawAttrs,t,e);if(null!=n.type)return iw(this.node.rawAttrs,t,e);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return lw(this.node.rawAttrs,t,e);if(null!=n.list.s)return uw(this.node.rawAttrs,t,e);if(null!=n.list.shape)return cw(this.node.rawAttrs,t,e);if(null!=n.list.b)return hw(this.node.rawAttrs,t,e);if(null!=n.list.type)return aw(this.node.rawAttrs,t,e)}return e},t}(),pw=function(t,e,n){switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[Ar(Tb("a",t,e,n),Tb("b",t,e,n))];case"AddN":return[wl(Tb("tensors",t,e,n))];case"FloorMod":case"Mod":return[wi(Tb("a",t,e,n),Tb("b",t,e,n))];case"Mul":return[xi(Tb("a",t,e,n),Tb("b",t,e,n))];case"RealDiv":case"Div":return[Di(Tb("a",t,e,n),Tb("b",t,e,n))];case"DivNoNan":return[Hl(Tb("a",t,e,n),Tb("b",t,e,n))];case"FloorDiv":return[mi(Tb("a",t,e,n),Tb("b",t,e,n))];case"Sub":return[Ii(Tb("a",t,e,n),Tb("b",t,e,n))];case"Minimum":return[vi(Tb("a",t,e,n),Tb("b",t,e,n))];case"Maximum":return[gi(Tb("a",t,e,n),Tb("b",t,e,n))];case"Pow":return[Si(Tb("a",t,e,n),Tb("b",t,e,n))];case"SquaredDifference":return[fu(Tb("a",t,e,n),Tb("b",t,e,n))];default:throw TypeError("Node type "+t.op+" is not implemented")}},fw=function(t,e,n){switch(t.op){case"Abs":case"ComplexAbs":return[Rr(Tb("x",t,e,n))];case"Acos":return[Or(Tb("x",t,e,n))];case"Acosh":return[Fr(Tb("x",t,e,n))];case"Asin":return[Mr(Tb("x",t,e,n))];case"Asinh":return[Pr(Tb("x",t,e,n))];case"Atan":return[Lr(Tb("x",t,e,n))];case"Atan2":return[pi(Tb("x",t,e,n),Tb("y",t,e,n))];case"Atanh":return[zr(Tb("x",t,e,n))];case"Ceil":return[Vr(Tb("x",t,e,n))];case"Complex":return[Nn(Tb("real",t,e,n),Tb("imag",t,e,n))];case"Cos":return[jr(Tb("x",t,e,n))];case"Cosh":return[Ur(Tb("x",t,e,n))];case"Elu":return[Ec(Tb("x",t,e,n))];case"Erf":return[Wr(Tb("x",t,e,n))];case"Exp":return[Hr(Tb("x",t,e,n))];case"Expm1":return[qr(Tb("x",t,e,n))];case"Floor":return[Gr(Tb("x",t,e,n))];case"Log":return[$r(Tb("x",t,e,n))];case"Log1p":return[Kr(Tb("x",t,e,n))];case"Imag":return[On(Tb("x",t,e,n))];case"Neg":return[Yr(Tb("x",t,e,n))];case"Reciprocal":return[Zr(Tb("x",t,e,n))];case"Real":return[Rn(Tb("x",t,e,n))];case"Relu":return[Dc(Tb("x",t,e,n))];case"Round":return[Qr(Tb("x",t,e,n))];case"Selu":return[Nc(Tb("x",t,e,n))];case"Sigmoid":return[ti(Tb("x",t,e,n))];case"Sin":return[ai(Tb("x",t,e,n))];case"Sign":return[ei(Tb("x",t,e,n))];case"Sinh":return[oi(Tb("x",t,e,n))];case"Softplus":return[si(Tb("x",t,e,n))];case"Sqrt":return[li(Tb("x",t,e,n))];case"Square":return[pu(Tb("x",t,e,n))];case"Tanh":return[hi(Tb("x",t,e,n))];case"Tan":return[ci(Tb("x",t,e,n))];case"Relu6":case"ClipByValue":return[Br(Tb("x",t,e,n),Tb("clipValueMin",t,e,n),Tb("clipValueMax",t,e,n))];case"Rsqrt":return[Jr(Nb(t.inputNames[0],e,n))];case"Prod":return[kc(Tb("x",t,e,n),Tb("axes",t,e,n))];case"LeakyRelu":return[Ic(Tb("x",t,e,n),Tb("alpha",t,e,n))];case"Prelu":return[Ac(Tb("x",t,e,n),Tb("alpha",t,e,n))];default:throw TypeError("Node type "+t.op+" is not implemented")}},mw=function(){function t(e,n,r,i,a,o,s){this.name=e,this.dtype=n,this.maxSize=r,this.elementShape=i,this.identicalElementShapes=a,this.dynamicSize=o,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.id=t.nextId++}return Object.defineProperty(t.prototype,"closed",{get:function(){return this.closed_},enumerable:!0,configurable:!0}),t.prototype.clearAndClose=function(){this.tensors.forEach((function(t){return t.tensor.dispose()})),this.tensors=[],this.closed_=!0},t.prototype.size=function(){return this.tensors.length},t.prototype.read=function(t){if(this.closed_)throw new Error("TensorArray "+this.name+" has already been closed.");if(t<0||t>=this.tensors.length)throw new Error("Tried to read from index "+t+", but array size is: "+this.tensors.length);var e=this.tensors[t];if(e.cleared)throw new Error("TensorArray "+this.name+": Could not read index "+t+" twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(e.cleared=!0),e.read=!0,e.tensor},t.prototype.readMany=function(t){var e=this;return t.map((function(t){return e.read(t)}))},t.prototype.write=function(t,e){if(this.closed_)throw new Error("TensorArray "+this.name+" has already been closed.");if(t<0||!this.dynamicSize&&t>=this.maxSize)throw new Error("Tried to write to index "+t+", but array is not resizeable and size is: "+this.maxSize);var n=this.tensors[t]||{};if(e.dtype!==this.dtype)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+t+",\n          because the value dtype is "+e.dtype+", but TensorArray dtype is "+this.dtype+".");if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=e.shape),this.assertShapesMatchAllowUndefinedSize(this.elementShape,e.shape,"TensorArray "+this.name+": Could not write to TensorArray index "+t+"."),n&&n.read)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+t+", because it has already been read.");if(n&&n.written)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+t+", because it has already been written.");n.tensor=e,n.written=!0,this.tensors[t]=n},t.prototype.writeMany=function(t,e){var n=this;if(t.length!==e.length)throw new Error("TensorArray "+this.name+": could not write multiple tensors,because the index size: "+t.length+" is not the same as tensors size: "+e.length+".");t.forEach((function(t,r){return n.write(t,e[r])}))},t.prototype.gather=function(t,e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but gather requested dtype "+e);if(!t){t=[];for(var n=0;n<this.size();n++)t.push(n)}if(0===t.length)return Fn([],[0].concat(this.elementShape));var r=this.readMany(t);return this.assertShapesMatchAllowUndefinedSize(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),pr(r,0)},t.prototype.concat=function(t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but concat requested dtype "+t);if(0===this.size())return Fn([],[0].concat(this.elementShape));for(var e=[],n=0;n<this.size();n++)e.push(n);var r=this.readMany(e);return this.assertShapesMatchAllowUndefinedSize(this.elementShape,r[0].shape,"TensorArray shape mismatch: tensor array shape ("+this.elementShape+") vs first tensor shape ("+r[0].shape+")"),Zn(r,0)},t.prototype.scatter=function(t,e){if(e.dtype!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but tensor has dtype "+e.dtype);if(t.length!==e.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: "+t.length+" vs. "+e.shape[0]);var n=Math.max.apply(Math,t);if(!this.dynamicSize&&n>=this.maxSize)throw new Error("Max index must be < array size ("+n+"  vs. "+this.maxSize+")");this.writeMany(t,fr(e,0))},t.prototype.split=function(t,e){var n=this;if(e.dtype!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but tensor has dtype "+e.dtype);var r=0,i=t.map((function(t){return r+=t}));if(r!==e.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        "+r+", and tensor's shape is: "+e.shape);if(!this.dynamicSize&&t.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths ("+this.maxSize+" vs. "+t.length+"), and the TensorArray is not marked as dynamically resizeable");var a=0===r?0:e.size/r,o=[];en((function(){e=e.reshape([1,r,a]);for(var s=0;s<t.length;++s)o[s]=uc(e,[0,0===s?0:i[s-1],0],[1,t[s],a]).reshape(n.elementShape);return o}));for(var s=[],l=0;l<t.length;l++)s[l]=l;this.writeMany(s,o)},t.prototype.assertShapesMatchAllowUndefinedSize=function(t,e,n){void 0===n&&(n=""),ht.assert(this.shapesEqualAllowUndefinedSize(t,e),(function(){return n+" Shapes "+t+" and "+e+" must match"}))},t.prototype.shapesEqualAllowUndefinedSize=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(-1!==t[n]&&-1!==e[n]&&t[n]!==e[n])return!1;return!0},t.nextId=0,t}(),gw=function(t,e,n){return Sb(void 0,void 0,void 0,(function(){var r,i,a,o,s,l,u,c,h,d,p,f,m,g,y,v,b,w,_,x,C,S,k,E,I,A,D,T,N,R,O,F,M,P;return kb(this,(function(L){switch(L.label){case 0:switch(t.op){case"LoopCond":return[3,1];case"Switch":return[3,2];case"Merge":return[3,4];case"Enter":return[3,5];case"Exit":return[3,6];case"NextIteration":return[3,7];case"TensorArrayV3":return[3,8];case"TensorArrayWriteV3":return[3,9];case"TensorArrayReadV3":return[3,10];case"TensorArrayGatherV3":return[3,11];case"TensorArrayScatterV3":return[3,12];case"TensorArrayConcatV3":return[3,13];case"TensorArraySplitV3":return[3,14];case"TensorArraySizeV3":return[3,15];case"TensorArrayCloseV3":return[3,16]}return[3,17];case 1:return[2,[Tb("pred",t,e,n).clone()]];case 2:return r=Tb("pred",t,e,n),i=Tb("data",t,e,n),[4,r.data()];case 3:return[2,L.sent()[0]?[void 0,i.clone()]:[i.clone(),void 0]];case 4:return[2,(a=t.inputNames.find((function(t){return void 0!==Nb(t,e,n)})))?[Nb(a,e,n).clone()]:void 0];case 5:return o=Tb("frameName",t,e,n),s=Tb("tensor",t,e,n),n.enterFrame(o),[2,[s.clone()]];case 6:return l=Tb("tensor",t,e,n),n.exitFrame(),[2,[l.clone()]];case 7:return u=Tb("tensor",t,e,n),n.nextIteration(),[2,[u.clone()]];case 8:return c=Tb("size",t,e,n),h=Tb("dtype",t,e,n),d=Tb("elementShape",t,e,n),p=Tb("dynamicSize",t,e,n),f=Tb("clearAfterRead",t,e,n),m=Tb("identicalElementShapes",t,e,n),g=Tb("name",t,e,n),y=new mw(g,h,c,d,m,p,f),n.addTensorArray(y),[2,[Pn(y.id),Pn(1)]];case 9:return v=Tb("tensorArrayId",t,e,n),b=Tb("index",t,e,n),w=Tb("tensor",t,e,n),n.getTensorArray(v).write(b,w),[2,[Pn(1)]];case 10:return _=Tb("tensorArrayId",t,e,n),x=Tb("index",t,e,n),[2,[n.getTensorArray(_).read(x)]];case 11:return C=Tb("tensorArrayId",t,e,n),S=Tb("indices",t,e,n),k=Tb("dtype",t,e,n),[2,[n.getTensorArray(C).gather(S,k)]];case 12:return E=Tb("tensorArrayId",t,e,n),I=Tb("indices",t,e,n),A=Tb("tensor",t,e,n),n.getTensorArray(E).scatter(I,A),[2,[Pn(1)]];case 13:return D=Tb("tensorArrayId",t,e,n),T=n.getTensorArray(D),N=Tb("dtype",t,e,n),[2,[T.concat(N)]];case 14:return R=Tb("tensorArrayId",t,e,n),O=Tb("tensor",t,e,n),F=Tb("lengths",t,e,n),n.getTensorArray(R).split(F,O),[2,[Pn(1)]];case 15:return M=Tb("tensorArrayId",t,e,n),[2,[Pn(n.getTensorArray(M).size(),"int32")]];case 16:return P=Tb("tensorArrayId",t,e,n),n.getTensorArray(P).clearAndClose(),[2,[Pn(0)]];case 17:throw TypeError("Node type "+t.op+" is not implemented")}}))}))},yw=function(t,e,n){switch(t.op){case"Conv1D":var r=Tb("stride",t,e,n),i=Tb("pad",t,e,n),a=Tb("dataFormat",t,e,n).toUpperCase(),o=Tb("dilation",t,e,n);return[Pu(Tb("x",t,e,n),Tb("filter",t,e,n),r,i,a,o)];case"Conv2D":r=Tb("strides",t,e,n),i=Tb("pad",t,e,n),a=Tb("dataFormat",t,e,n).toUpperCase();var s=Tb("dilations",t,e,n);return[Lu(Tb("x",t,e,n),Tb("filter",t,e,n),[r[1],r[2]],i,a,[s[1],s[2]])];case"_FusedConv2D":case"FusedDepthwiseConv2dNative":var l=Tb("fusedOps",t,e,n),u=l[0],c=l[1],h="biasadd"===u,d="prelu"===c,p="fusedbatchnorm"===u,f=Tb("numArgs",t,e,n);if(h){if(d&&2!==f)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!d&&1!==f)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(p)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported.");r=Tb("strides",t,e,n),i=Tb("pad",t,e,n),a=Tb("dataFormat",t,e,n).toUpperCase(),s=Tb("dilations",t,e,n);var m=Tb("args",t,e,n),g=m[0],y=m[1];return[("_FusedConv2D"===t.op?Rh.conv2d:Rh.depthwiseConv2d)({x:Tb("x",t,e,n),filter:Tb("filter",t,e,n),strides:[r[1],r[2]],pad:i,dataFormat:a,dilations:[s[1],s[2]],bias:g,activation:c,preluActivationWeights:y})];case"Conv2DBackpropInput":case"Conv2dTranspose":var v=Tb("outputShape",t,e,n);return r=Tb("strides",t,e,n),i=Tb("pad",t,e,n),[qu(Tb("x",t,e,n),Tb("filter",t,e,n),v,[r[1],r[2]],i)];case"DepthwiseConv2dNative":case"DepthwiseConv2d":return r=Tb("strides",t,e,n),i=Tb("pad",t,e,n),s=Tb("dilations",t,e,n),a=Tb("dataFormat",t,e,n).toUpperCase(),[ju(Tb("input",t,e,n),Tb("filter",t,e,n),[r[1],r[2]],i,a,[s[1],s[2]])];case"Conv3D":return r=Tb("strides",t,e,n),i=Tb("pad",t,e,n),a=Tb("dataFormat",t,e,n).toUpperCase(),s=Tb("dilations",t,e,n),[zu(Tb("x",t,e,n),Tb("filter",t,e,n),[r[1],r[2],r[3]],i,a,[s[1],s[2],s[3]])];case"AvgPool":r=Tb("strides",t,e,n),i=Tb("pad",t,e,n);var b=Tb("kernelSize",t,e,n);return[ic(Tb("x",t,e,n),[b[1],b[2]],[r[1],r[2]],i)];case"MaxPool":return r=Tb("strides",t,e,n),i=Tb("pad",t,e,n),b=Tb("kernelSize",t,e,n),[rc(Tb("x",t,e,n),[b[1],b[2]],[r[1],r[2]],i)];case"MaxPoolWithArgmax":r=Tb("strides",t,e,n),i=Tb("pad",t,e,n),b=Tb("kernelSize",t,e,n);var w=Tb("includeBatchInIndex",t,e,n),_=lc(Tb("x",t,e,n),[b[1],b[2]],[r[1],r[2]],i,w);return[_.result,_.indexes];case"AvgPool3D":return r=Tb("strides",t,e,n),i=Tb("pad",t,e,n),b=Tb("kernelSize",t,e,n),[sc(Tb("x",t,e,n),[b[1],b[2],b[3]],[r[1],r[2],r[3]],i)];case"MaxPool3D":return r=Tb("strides",t,e,n),i=Tb("pad",t,e,n),b=Tb("kernelSize",t,e,n),[oc(Tb("x",t,e,n),[b[1],b[2],b[3]],[r[1],r[2],r[3]],i)];default:throw TypeError("Node type "+t.op+" is not implemented")}},vw=function(t,e,n){switch(t.op){case"Fill":var r=Tb("shape",t,e,n),i=Tb("dtype",t,e,n);return[Gn(r,Tb("value",t,e,n),i)];case"LinSpace":var a=Tb("start",t,e,n);return[$n(a,Tb("stop",t,e,n),Tb("num",t,e,n))];case"Multinomial":var o=Tb("logits",t,e,n),s=Tb("numSamples",t,e,n),l=Tb("seed",t,e,n);return[$l(o,s,l)];case"OneHot":var u=Tb("indices",t,e,n),c=Tb("depth",t,e,n),h=Tb("onValue",t,e,n),d=Tb("offValue",t,e,n);return[Kl(u,c,h,d)];case"Ones":return[Hn(Tb("shape",t,e,n),Tb("dtype",t,e,n))];case"OnesLike":return[Xn(Tb("x",t,e,n))];case"RandomUniform":return[du(Tb("shape",t,e,n),Tb("minval",t,e,n),Tb("maxval",t,e,n),Tb("dtype",t,e,n))];case"Range":return[Kn(a=Tb("start",t,e,n),Tb("stop",t,e,n),Tb("step",t,e,n),Tb("dtype",t,e,n))];case"TruncatedNormal":r=Tb("shape",t,e,n);var p=Tb("mean",t,e,n),f=Tb("stdDev",t,e,n);return l=Tb("seed",t,e,n),[mu(r,p,f,Tb("dtype",t,e,n),l)];case"Zeros":return[qn(Tb("shape",t,e,n),Tb("dtype",t,e,n))];case"ZerosLike":return[Yn(Tb("x",t,e,n))];default:throw TypeError("Node type "+t.op+" is not implemented")}},bw=function(t,e,n){return Sb(void 0,void 0,void 0,(function(){var r,i,a,o,s,l,u,c;return kb(this,(function(h){switch(h.label){case 0:switch(t.op){case"NonMaxSuppressionV5":case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":return[3,1];case"Where":return[3,5];case"ListDiff":return[3,7]}return[3,8];case 1:return r=Tb("boxes",t,e,n),i=Tb("scores",t,e,n),a=Tb("maxOutputSize",t,e,n),o=Tb("iouThreshold",t,e,n),s=Tb("scoreThreshold",t,e,n),"NonMaxSuppressionV5"!==t.op?[3,3]:(l=Tb("softNmsSigma",t,e,n),[4,Sh.nonMaxSuppressionWithScoreAsync(r,i,a,o,s,l)]);case 2:return[2,[(c=h.sent()).selectedIndices,c.selectedScores]];case 3:return[4,Sh.nonMaxSuppressionAsync(r,i,a,o,s)];case 4:return[2,[h.sent()]];case 5:return u=Tb("condition",t,e,n).asType("bool"),[4,Wl(u)];case 6:return c=[h.sent()],u.dispose(),[2,c];case 7:return[2,mr(Tb("x",t,e,n),Tb("y",t,e,n))];case 8:throw TypeError("Node type "+t.op+" is not implemented")}}))}))},ww=function(t,e,n){switch(t.op){case"TopKV2":var r=Tb("x",t,e,n),i=Tb("k",t,e,n),a=Tb("sorted",t,e,n),o=zc(r,i,a);return[o.values,o.indices];default:throw TypeError("Node type "+t.op+" is not implemented")}},_w=function(t,e,n){switch(t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":var r=Tb("default",t,e,n);return[Nb(t.name,e,n)||r];case"Placeholder":return[Nb(t.name,e,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":return[Tb("x",t,e,n).clone()];case"IdentityN":return Tb("x",t,e,n).map((function(t){return t.clone()}));case"Snapshot":return[Tb("x",t,e,n).clone()];case"Shape":return[Ln(Tb("x",t,e,n).shape,"int32")];case"ShapeN":return Tb("x",t,e,n).map((function(t){return Ln(t.shape)}));case"Size":return[Pn(Tb("x",t,e,n).size,"int32")];case"Rank":return[Pn(Tb("x",t,e,n).rank,"int32")];case"NoOp":return[Pn(1)];case"Print":var i=Tb("x",t,e,n),a=Tb("data",t,e,n),o=Tb("message",t,e,n),s=Tb("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(o);for(var l=0;l<a.length;l++)console.log(Array.prototype.slice.call(a[l].dataSync()).slice(0,s));return[i];default:throw TypeError("Node type "+t.op+" is not implemented")}},xw=function(t,e,n){switch(t.op){case"ResizeBilinear":var r=Tb("images",t,e,n),i=Tb("size",t,e,n),a=Tb("alignCorners",t,e,n);return[Sh.resizeBilinear(r,[i[0],i[1]],a)];case"ResizeNearestNeighbor":return r=Tb("images",t,e,n),i=Tb("size",t,e,n),a=Tb("alignCorners",t,e,n),[Sh.resizeNearestNeighbor(r,[i[0],i[1]],a)];case"CropAndResize":var o=Tb("image",t,e,n),s=Tb("boxes",t,e,n),l=Tb("boxInd",t,e,n),u=Tb("cropSize",t,e,n),c=Tb("method",t,e,n),h=Tb("extrapolationValue",t,e,n);return[Sh.cropAndResize(o,s,l,u,c,h)];default:throw TypeError("Node type "+t.op+" is not implemented")}},Cw=function(t,e,n){switch(t.op){case"Equal":return[gu(Tb("a",t,e,n),Tb("b",t,e,n))];case"NotEqual":return[Eu(Tb("a",t,e,n),Tb("b",t,e,n))];case"Greater":return[vu(Tb("a",t,e,n),Tb("b",t,e,n))];case"GreaterEqual":return[bu(Tb("a",t,e,n),Tb("b",t,e,n))];case"Less":return[xu(Tb("a",t,e,n),Tb("b",t,e,n))];case"LessEqual":return[Cu(Tb("a",t,e,n),Tb("b",t,e,n))];case"LogicalAnd":return[zl(Tb("a",t,e,n),Tb("b",t,e,n))];case"LogicalNot":return[Vl(Tb("a",t,e,n))];case"LogicalOr":return[Bl(Tb("a",t,e,n),Tb("b",t,e,n))];case"Select":case"SelectV2":return[Ul(Tb("condition",t,e,n),Tb("a",t,e,n),Tb("b",t,e,n))];default:throw TypeError("Node type "+t.op+" is not implemented")}},Sw=function(t,e,n){switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[$u(Tb("a",t,e,n),Tb("b",t,e,n),Tb("transposeA",t,e,n),Tb("transposeB",t,e,n))];case"Transpose":return[ea(Tb("x",t,e,n),Tb("perm",t,e,n))];case"_FusedMatMul":var r=Tb("fusedOps",t,e,n),i=r[1],a="biasadd"===r[0],o="prelu"===i,s=Tb("numArgs",t,e,n);if(a){if(o&&2!==s)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&1!==s)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}var l=Tb("args",t,e,n),u=l[0],c=l[1];return[Rh.matMul({a:Tb("a",t,e,n),b:Tb("b",t,e,n),transposeA:Tb("transposeA",t,e,n),transposeB:Tb("transposeB",t,e,n),bias:u,activation:i,preluActivationWeights:c})];default:throw TypeError("Node type "+t.op+" is not implemented")}},kw=function(t,e,n){switch(t.op){case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[El(Tb("x",t,e,n),Tb("mean",t,e,n),Tb("variance",t,e,n),Tb("offset",t,e,n),Tb("scale",t,e,n),Tb("epsilon",t,e,n))];case"LRN":return[Rc(Tb("x",t,e,n),Tb("radius",t,e,n),Tb("bias",t,e,n),Tb("alpha",t,e,n),Tb("beta",t,e,n))];case"Softmax":return[Ji(Tb("x",t,e,n))];case"LogSoftmax":return[ta(Tb("x",t,e,n))];case"SparseToDense":return[qc(Tb("sparseIndices",t,e,n),Tb("outputShape",t,e,n),Tb("sparseValues",t,e,n),Tb("defaultValue",t,e,n))];default:throw TypeError("Node type "+t.op+" is not implemented")}},Ew=function(t,e,n){switch(t.op){case"Max":var r=Tb("axis",t,e,n),i=Tb("keepDims",t,e,n);return[wc(Tb("x",t,e,n),r,i)];case"Mean":return r=Tb("axis",t,e,n),i=Tb("keepDims",t,e,n),[_c(Tb("x",t,e,n),r,i)];case"Min":return r=Tb("axis",t,e,n),i=Tb("keepDims",t,e,n),[xc(Tb("x",t,e,n),r,i)];case"Sum":return r=Tb("axis",t,e,n),i=Tb("keepDims",t,e,n),[Sc(Tb("x",t,e,n),r,i)];case"All":return r=Tb("axis",t,e,n),i=Tb("keepDims",t,e,n),[mc(Tb("x",t,e,n),r,i)];case"Any":return r=Tb("axis",t,e,n),i=Tb("keepDims",t,e,n),[gc(Tb("x",t,e,n),r,i)];case"ArgMax":return r=Tb("axis",t,e,n),[yc(Tb("x",t,e,n),r)];case"ArgMin":return r=Tb("axis",t,e,n),[vc(Tb("x",t,e,n),r)];case"Prod":return r=Tb("axis",t,e,n),i=Tb("keepDims",t,e,n),[kc(Tb("x",t,e,n),r,i)];default:throw TypeError("Node type "+t.op+" is not implemented")}},Iw=function(t,e,n){switch(t.op){case"ConcatV2":case"Concat":var r=Tb("n",t,e,n),i=Tb("axis",t,e,n),a=Tb("tensors",t,e,n);return a=a.slice(0,r),[Zn(a,i)];case"GatherV2":case"Gather":i=Tb("axis",t,e,n);var o=Tb("x",t,e,n),s=Tb("indices",t,e,n);return[Tu(o,s.asType("int32"),i)];case"ReverseV2":case"Reverse":return i=Tb("axis",t,e,n),o=Tb("x",t,e,n),[Yu(o,i)];case"Slice":var l=Tb("begin",t,e,n),u=Tb("size",t,e,n);return[uc(Tb("x",t,e,n),l,u)];case"StridedSlice":l=Tb("begin",t,e,n);var c=Tb("end",t,e,n),h=Tb("strides",t,e,n),d=Tb("beginMask",t,e,n),p=Tb("endMask",t,e,n),f=Tb("ellipsisMask",t,e,n),m=Tb("newAxisMask",t,e,n),g=Tb("shrinkAxisMask",t,e,n),y=Tb("x",t,e,n);if(1===l.length&&y.shape.length>1)for(var v=1;v<y.shape.length;v++)l.push(0),c.push(y.shape[v]),h.push(h[0]);return[Lc(y,l,c,h,d,p,f,m,g)];case"Pack":return en((function(){var r=Tb("axis",t,e,n),i=Tb("tensors",t,e,n),a=i[0].shape,o=i[0].squeeze().shape,s=i.map((function(t){var e=ht.arraysEqual(t.shape,a);if(!e&&!ht.arraysEqual(t.squeeze().shape,o))throw new Error("the input tensors shape does not match");return e?t:t.reshape(a)}));return[pr(s,r)]}));case"Unpack":return en((function(){var r=Tb("axis",t,e,n),i=Tb("tensor",t,e,n);return fr(i,r)}));case"Tile":var b=Tb("reps",t,e,n);return[ql(Tb("x",t,e,n),b)];case"Split":case"SplitV":i=Tb("axis",t,e,n);var w=Tb("numOrSizeSplits",t,e,n);return nr(Tb("x",t,e,n),w,i);case"ScatterNd":s=Tb("indices",t,e,n);var _=Tb("values",t,e,n),x=Tb("shape",t,e,n);return[Vc(s,_,x)];case"GatherNd":var C=Tb("x",t,e,n);return s=Tb("indices",t,e,n),[Gc(C,s)];case"SparseToDense":s=Tb("sparseIndices",t,e,n),x=Tb("outputShape",t,e,n);var S=Tb("sparseValues",t,e,n),k=Tb("defaultValue",t,e,n);return[qc(s,S,x,S.dtype===k.dtype?k:k.asType(S.dtype))];default:throw TypeError("Node type "+t.op+" is not implemented")}},Aw=function(t,e,n){switch(t.op){case"FFT":return[Bc(Tb("x",t,e,n))];case"IFFT":return[jc(Tb("x",t,e,n))];case"RFFT":return[Uc(Tb("x",t,e,n))];case"IRFFT":return[Wc(Tb("x",t,e,n))];default:throw TypeError("Node type "+t.op+" is not implemented")}},Dw=function(t,e,n){switch(t.op){case"Cast":return[or(Tb("x",t,e,n),Tb("dtype",t,e,n))];case"ExpandDims":var r=Tb("axis",t,e,n);return[ur(Tb("x",t,e,n),r)];case"Squeeze":return r=Tb("axis",t,e,n),[dr(Tb("x",t,e,n),r)];case"Reshape":return[cr(Tb("x",t,e,n),Tb("shape",t,e,n))];case"PadV2":case"Pad":return[Xl(Tb("x",t,e,n),Mb(Tb("padding",t,e,n),2),Tb("constantValue",t,e,n))];case"SpaceToBatchND":var i=Tb("blockShape",t,e,n),a=Mb(Tb("paddings",t,e,n),2);return[hr(Tb("x",t,e,n),i,a)];case"BatchToSpaceND":i=Tb("blockShape",t,e,n);var o=Mb(Tb("crops",t,e,n),2);return[ar(Tb("x",t,e,n),i,o)];case"DepthToSpace":var s=Tb("blockSize",t,e,n),l=Tb("dataFormat",t,e,n).toUpperCase();return[lr(Tb("x",t,e,n),s,l)];default:throw TypeError("Node type "+t.op+" is not implemented")}};function Tw(t,e,n){var r=function(t,e,n){switch(t.category){case"arithmetic":return en((function(){return pw(t,e,n)}));case"basic_math":return en((function(){return fw(t,e,n)}));case"control":return gw(t,e,n);case"convolution":return en((function(){return yw(t,e,n)}));case"creation":return en((function(){return vw(t,e,n)}));case"dynamic":return bw(t,e,n);case"evaluation":return en((function(){return ww(t,e,n)}));case"image":return en((function(){return xw(t,e,n)}));case"graph":return en((function(){return _w(t,e,n)}));case"logical":return en((function(){return Cw(t,e,n)}));case"matrices":return en((function(){return Sw(t,e,n)}));case"normalization":return en((function(){return kw(t,e,n)}));case"reduction":return en((function(){return Ew(t,e,n)}));case"slice_join":return en((function(){return Iw(t,e,n)}));case"spectral":return en((function(){return Aw(t,e,n)}));case"transformation":return en((function(){return Dw(t,e,n)}));case"custom":var r=Ab(t.op);if(r&&r.customExecutor)return r.customExecutor(new dw(t,e,n));throw TypeError("Custom op "+t.op+" is not registered.");default:throw TypeError("Unknown op '"+t.op+"'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}}(t,e,n);return r instanceof Promise?r.then((function(t){return[].concat(t)})):[].concat(r)}var Nw=function(){function t(t,e){this.weightMap=t,this.tensorArrayMap=e,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}return t.prototype.newFrame=function(t,e){return{id:t,frameName:e,iterationId:0}},Object.defineProperty(t.prototype,"currentContext",{get:function(){return this.contexts},set:function(t){this.contexts!==t&&(this.contexts=t,this.generateCurrentContextIds())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentContextId",{get:function(){return this._currentContextIds[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentContextIds",{get:function(){return this._currentContextIds},enumerable:!0,configurable:!0}),t.prototype.generateCurrentContextIds=function(){for(var t=[],e=0;e<this.contexts.length-1;e++){var n=this.contexts.slice(0,this.contexts.length-e);t.push(this.contextIdforContexts(n))}t.push(""),this._currentContextIds=t},t.prototype.contextIdforContexts=function(t){return t?t.map((function(t){return 0===t.id&&0===t.iterationId?"":t.frameName+"-"+t.iterationId})).join("/"):""},t.prototype.enterFrame=function(t){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,t)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))},t.prototype.exitFrame=function(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()},t.prototype.nextIteration=function(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");this.contexts=this.contexts.slice(),this.lastId++;var t=Object.assign({},this.contexts[this.contexts.length-1]);t.iterationId+=1,t.id=this.lastId,this.contexts.splice(-1,1,t),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))},t.prototype.getWeight=function(t){return this.weightMap[t]},t.prototype.addTensorArray=function(t){this.tensorArrayMap[t.id]=t},t.prototype.getTensorArray=function(t){return this.tensorArrayMap[t]},t}();function Rw(t,e,n){for(var r=new Set,i=[],a=null,o=null,s=new Set,l=Object.keys(t).map((function(t){return Fb(t)[0]})),u=e.slice();u.length>0;){var c=u.pop();(Mw(c)||Pw(c))&&null==a&&(o=(a=c).children.map((function(t){return t.name})).filter((function(t){return r.has(t)}))),r.add(c.name),null==n[c.name]&&-1===l.indexOf(c.name)&&(0!==c.inputs.length?c.inputs.forEach((function(t){s.has(t.name)||(s.add(t.name),u.push(t))})):i.push(c.name))}return{inputs:t,outputs:e,usedNodes:r,missingInputs:i,dynamicNode:a,syncInputs:o}}var Ow=["Switch","Merge","Enter","Exit","NextIteration"],Fw=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"];function Mw(t){return Ow.indexOf(t.op)>=0}function Pw(t){return Fw.indexOf(t.op)>=0}var Lw=function(){function t(t){this.graph=t,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._outputs=t.outputs,this._inputs=t.inputs,this._signature=t.signature}return Object.defineProperty(t.prototype,"weightMap",{get:function(){return this._weightMap},set:function(t){var e=Object.keys(t).map((function(e){return t[e].map((function(t){return t.id}))}));this.weightIds=[].concat.apply([],e),this._weightMap=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputs",{get:function(){return this._inputs.map((function(t){return{name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0}}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputs",{get:function(){return this._outputs.map((function(t){return{name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0}}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputNodes",{get:function(){return this._inputs.map((function(t){return t.signatureKey||t.name}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputNodes",{get:function(){return this._outputs.map((function(t){return t.signatureKey||t.name}))},enumerable:!0,configurable:!0}),t.prototype.getCompilationKey=function(t,e){var n=t.map((function(t){return t.name})).sort(),r=e.map((function(t){return t.name})).sort();return n.join(this.SEPERATOR)+"--"+r.join(this.SEPERATOR)},t.prototype.compile=function(t,e){var n=Rw(t,e,this.weightMap),r=n.missingInputs,i=n.dynamicNode;if(null!=i)throw new Error("This execution contains the node '"+i.name+"', which has the dynamic op '"+i.op+"'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs ["+n.syncInputs+"]");if(r.length>0){var a=e.map((function(t){return t.name})),o=Object.keys(t);throw new Error("Cannot compute the outputs ["+a+"] from the provided inputs ["+o+"]. Missing the following inputs: ["+r+"]")}return function(t,e,n){var r=n.usedNodes,i=[];Object.keys(n.inputs).map((function(t){return Fb(t)[0]})).map((function(e){return t.nodes[e]})).forEach((function(t){r.has(t.name)&&i.push(t)})),t.weights.forEach((function(t){r.has(t.name)&&i.push(t)}));for(var a=new Set,o=[];i.length>0;){var s=i.pop();a.add(s.name),e[s.name]||o.push(s),s.children.forEach((function(t){!a.has(t.name)&&r.has(t.name)&&t.inputs.every((function(t){return a.has(t.name)}))&&i.push(t)}))}return o}(this.graph,this.weightMap,n)},t.prototype.execute=function(t,e){var n=this;t=this.mapInputs(t);var r=Object.keys(t).sort();this.checkInputs(t),this.checkInputShapeAndType(t),e=this.mapOutputs(e),this.checkOutputs(e);var i=r.map((function(t){return n.graph.nodes[Fb(t)[0]]})),a=e.map((function(t){return n.graph.nodes[Fb(t)[0]]})),o=this.getCompilationKey(i,a),s=this.compiledMap.get(o);null==s&&(s=this.compile(t,a),this.compiledMap.set(o,s));var l={};return en((function(){var r=new Nw(n._weightMap,l),i=Cb({},n.weightMap);Object.keys(t).forEach((function(e){var n=Fb(e),r=n[0],a=[];a[n[1]]=t[e],i[r]=a}));for(var a=n.getFrozenTensorIds(i),o={},u=0;u<s.length;u++){var c=s[u];if(!i[c.name]){var h=Tw(c,i,r);if(h instanceof Promise)throw new Error("The execution of the op '"+c.op+"' returned a promise. Please use model.executeAsync() instead.");i[c.name]=h,n.checkTensorForDisposal(c.name,c,i,r,a,e,o)}}return e.map((function(t){return Nb(t,i,r)}))}))},t.prototype.getFrozenTensorIds=function(t){var e=[].concat.apply([],Object.keys(t).map((function(e){return t[e]})).map((function(t){return t.map((function(t){return t.id}))})));return new Set(e)},t.prototype.checkTensorForDisposal=function(t,e,n,r,i,a,o){"control"!==e.category&&-1===a.indexOf(t)&&(n[t].forEach((function(t){null!=t&&(o[t.id]=(o[t.id]||0)+e.children.length)})),e.inputs.forEach((function(t){if("control"!==t.category){var e=function(t,e,n){return e[Ob(t,n.currentContextId)]}(t.name,n,r);null!=e&&e.forEach((function(t){if(t&&!i.has(t.id)){var e=o[t.id];1===e?(t.dispose(),delete o[t.id]):null!=e&&o[t.id]--}}))}})))},t.prototype.executeAsync=function(t,e){return Sb(this,void 0,void 0,(function(){var n,r,i,a,o,s=this;return kb(this,(function(l){switch(l.label){case 0:return t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),e=this.mapOutputs(e),this.checkOutputs(e),n=new Nw(this._weightMap,{}),[4,this.executeWithControlFlow(t,n,e)];case 1:return r=l.sent(),i=e.map((function(t){return Nb(t,r,n)})),a=new Set(i.map((function(t){return t.id}))),o=new Set(Object.keys(t).map((function(e){return t[e].id}))),Object.keys(r).forEach((function(t){r[t].forEach((function(t){!t||t.isDisposed||a.has(t.id)||o.has(t.id)||-1!==s.weightIds.indexOf(t.id)||t.dispose()}))})),[2,i]}}))}))},t.prototype.executeWithControlFlow=function(t,e,n){return Sb(this,void 0,void 0,(function(){var r,i,a,o,s,l,u,c,h,d,p,f,m,g,y,v,b=this;return kb(this,(function(w){switch(w.label){case 0:r=Object.keys(t),i=r.map((function(t){return b.graph.nodes[Fb(t)[0]]})),a=n.map((function(t){return b.graph.nodes[Fb(t)[0]]})),o=Rw(t,a,this.weightMap),s=o.usedNodes,l=o.missingInputs,u=o.dynamicNode,c=o.syncInputs,h=i.concat(this.graph.weights).map((function(t){return{node:t,contexts:e.currentContext}})),d=Cb({},this.weightMap),Object.keys(t).forEach((function(e){var n=Fb(e),r=n[0],i=[];i[n[1]]=t[e],d[r]=i})),p={},f=this.getFrozenTensorIds(d),m={},w.label=1;case 1:return h.length>0?(g=this.processStack(i,h,e,d,m,f,n,p,s),[4,Promise.all(g)]):[3,3];case 2:return w.sent(),[3,1];case 3:if(null==u&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead."),(y=a.filter((function(t){return!Mw(t)&&!Nb(t.name,d,e)})).map((function(t){return t.name}))).length>0)throw v="",null!=u&&(v="Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs ["+c+"]"),new Error("Cannot compute the outputs ["+y+"] from the provided inputs ["+r+"]. Consider providing the following inputs: ["+l+"]. "+v);return[2,d]}}))}))},t.prototype.processStack=function(t,e,n,r,i,a,o,s,l){for(var u=this,c=[],h=function(){var h=e.pop();n.currentContext=h.contexts;var p="";if("Enter"===h.node.op&&Tb("isConstant",h.node,r,n)&&(p=Rb(h.node.name,n)[0]),-1===t.indexOf(h.node)){var f=Tw(h.node,r,n);p||(p=Rb(h.node.name,n)[0]);var m=n.currentContext;f instanceof Promise?c.push(f.then((function(t){return r[p]=t,n.currentContext=m,u.checkTensorForDisposal(p,h.node,r,n,a,o,s),u.processChildNodes(h.node,e,n,r,i,l),t}))):(r[p]=f,d.checkTensorForDisposal(p,h.node,r,n,a,o,s),d.processChildNodes(h.node,e,n,r,i,l))}else d.processChildNodes(h.node,e,n,r,i,l)},d=this;e.length>0;)h();return c},t.prototype.processChildNodes=function(t,e,n,r,i,a){t.children.forEach((function(t){var o=Rb(t.name,n)[0];!i[o]&&a.has(t.name)&&("Merge"===t.op?t.inputNames.some((function(t){return!!Nb(t,r,n)}))&&(i[o]=!0,e.push({contexts:n.currentContext,node:t})):t.inputNames.every((function(t){return!!Nb(t,r,n)}))&&(i[o]=!0,e.push({contexts:n.currentContext,node:t})))}))},t.prototype.dispose=function(){var t=this;Object.keys(this.weightMap).forEach((function(e){return t.weightMap[e].forEach((function(t){return t.dispose()}))}))},t.prototype.checkInputShapeAndType=function(t){var e=this;Object.keys(t).forEach((function(n){var r=t[n],i=Fb(n)[0],a=e.graph.nodes[i];if(a.attrParams.shape&&a.attrParams.shape.value){var o=a.attrParams.shape.value,s=o.length===r.shape.length&&r.shape.every((function(t,e){return-1===o[e]||o[e]===t}));ht.assert(s,(function(){return"The shape of dict['"+a.name+"'] provided in model.execute(dict) must be ["+o+"], but was ["+r.shape+"]"}))}a.attrParams.dtype&&a.attrParams.dtype.value&&ht.assert(r.dtype===a.attrParams.dtype.value,(function(){return"The dtype of dict['"+a.name+"'] provided in model.execute(dict) must be "+a.attrParams.dtype.value+", but was "+r.dtype}))}))},t.prototype.mapInputs=function(t){var e={};for(var n in t)null!=this._signature&&null!=this._signature.inputs&&null!=this._signature.inputs[n]?e[this._signature.inputs[n].name]=t[n]:e[n]=t[n];return e},t.prototype.checkInputs=function(t){var e=this,n=Object.keys(t).filter((function(t){var n=Fb(t)[0];return null==e.graph.nodes[n]}));if(n.length>0)throw new Error("The dict provided in model.execute(dict) has keys: ["+n+"] that are not part of graph")},t.prototype.mapOutputs=function(t){var e=this;return t.map((function(t){return null!=e._signature&&null!=e._signature.outputs&&null!=e._signature.outputs[t]?e._signature.outputs[t].name:t}),{})},t.prototype.checkOutputs=function(t){var e=this;t.forEach((function(t){var n=Fb(t)[0];if(!e.graph.nodes[n])throw new Error("The output '"+t+"' is not found in the graph")}))},t}(),zw="?tfjs-format=file",Vw="model.json",Bw=function(){function t(t,e){void 0===e&&(e={}),this.modelUrl=t,this.loadOptions=e,this.version="n/a",null==e&&(this.loadOptions={})}return Object.defineProperty(t.prototype,"modelVersion",{get:function(){return this.version},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputNodes",{get:function(){return this.executor.inputNodes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputNodes",{get:function(){return this.executor.outputNodes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputs",{get:function(){return this.executor.inputs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputs",{get:function(){return this.executor.outputs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"weights",{get:function(){return this.executor.weightMap},enumerable:!0,configurable:!0}),t.prototype.findIOHandler=function(){var t=this.modelUrl;if(null!=t.load)this.handler=t;else if(null!=this.loadOptions.requestInit)this.handler=rp.browserHTTPRequest(t,this.loadOptions);else{var e=rp.getLoadHandlers(t,this.loadOptions.onProgress);if(0===e.length)e.push(rp.browserHTTPRequest(t,this.loadOptions));else if(e.length>1)throw new Error("Found more than one ("+e.length+") load handlers for URL '"+[t]+"'");this.handler=e[0]}},t.prototype.load=function(){return Sb(this,void 0,void 0,(function(){var t,e,n,r;return kb(this,(function(i){switch(i.label){case 0:if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");return t=this,[4,this.handler.load()];case 1:return t.artifacts=i.sent(),n={},null!=this.artifacts.userDefinedMetadata&&(n=this.artifacts.userDefinedMetadata.signature),this.version=(e=this.artifacts.modelTopology).versions.producer+"."+e.versions.minConsumer,r=rp.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs),this.executor=new Lw(Qb.Instance.transformGraph(e,n)),this.executor.weightMap=this.convertTensorMapToTensorsMap(r),[2,!0]}}))}))},t.prototype.save=function(t,e){return Sb(this,void 0,void 0,(function(){var e;return kb(this,(function(n){if("string"==typeof t){if(0===(e=rp.getSaveHandlers(t)).length)throw new Error("Cannot find any save handlers for URL '"+t+"'");if(e.length>1)throw new Error("Found more than one ("+e.length+") save handlers for URL '"+t+"'");t=e[0]}if(null==t.save)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return[2,t.save(this.artifacts)]}))}))},t.prototype.predict=function(t,e){return this.execute(t,this.outputNodes)},t.prototype.normalizeInputs=function(t){if(!(t instanceof xt||Array.isArray(t)))return t;if((t=Array.isArray(t)?t:[t]).length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,the graph model has "+this.inputNodes.length+" placeholders, while there are "+t.length+" input tensors.");return this.inputNodes.reduce((function(e,n,r){return e[n]=t[r],e}),{})},t.prototype.normalizeOutputs=function(t){return t=t||this.outputNodes,Array.isArray(t)?t:[t]},t.prototype.execute=function(t,e){t=this.normalizeInputs(t),e=this.normalizeOutputs(e);var n=this.executor.execute(t,e);return n.length>1?n:n[0]},t.prototype.executeAsync=function(t,e){return Sb(this,void 0,void 0,(function(){var n;return kb(this,(function(r){switch(r.label){case 0:return t=this.normalizeInputs(t),e=this.normalizeOutputs(e),[4,this.executor.executeAsync(t,e)];case 1:return[2,(n=r.sent()).length>1?n:n[0]]}}))}))},t.prototype.convertTensorMapToTensorsMap=function(t){return Object.keys(t).reduce((function(e,n){return e[n]=[t[n]],e}),{})},t.prototype.dispose=function(){this.executor.dispose()},t}();function jw(t,e){return void 0===e&&(e={}),Sb(this,void 0,void 0,(function(){var n;return kb(this,(function(r){switch(r.label){case 0:if(null==t)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");return null==e&&(e={}),e.fromTFHub&&null==t.load&&(t.endsWith("/")||(t+="/"),t=""+t+Vw+zw),[4,(n=new Bw(t,e)).load()];case 1:return r.sent(),[2,n]}}))}))}var Uw=function(t,e){return(Uw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Ww(t,e){function n(){this.constructor=t}Uw(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function Hw(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{l(r.next(t))}catch(t){a(t)}}function s(t){try{l(r.throw(t))}catch(t){a(t)}}function l(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(o,s)}l((r=r.apply(t,e||[])).next())}))}function qw(t,e){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(t){a=[6,t],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function Gw(t,e){return t(e={exports:{}},e.exports),e.exports}"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var $w=Gw((function(t){!function(t,e,n){function r(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function i(t,e){var n=new function(t){var e,n=this,r=(e=4022871197,function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)});n.next=function(){var t=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=t-(n.c=0|t)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(t),n.s0<0&&(n.s0+=1),n.s1-=r(t),n.s1<0&&(n.s1+=1),n.s2-=r(t),n.s2<0&&(n.s2+=1),r=null}(t),i=e&&e.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,i&&("object"==typeof i&&r(i,n),a.state=function(){return r(n,{})}),a}e&&e.exports?e.exports=i:this.alea=i}(0,t)})),Kw=Gw((function(t){!function(t,e,n){function r(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function i(t,e){var n=new function(t){var e=this,n="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),e.next()}(t),i=e&&e.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},a.int32=n.next,a.quick=a,i&&("object"==typeof i&&r(i,n),a.state=function(){return r(n,{})}),a}e&&e.exports?e.exports=i:this.xor128=i}(0,t)})),Xw=Gw((function(t){!function(t,e,n){function r(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function i(t,e){var n=new function(t){var e=this,n="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),r==n.length&&(e.d=e.x<<10^e.x>>>4),e.next()}(t),i=e&&e.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},a.int32=n.next,a.quick=a,i&&("object"==typeof i&&r(i,n),a.state=function(){return r(n,{})}),a}e&&e.exports?e.exports=i:this.xorwow=i}(0,t)})),Yw=Gw((function(t){!function(t,e,n){function r(t,e){return e.x=t.x.slice(),e.i=t.i,e}function i(t,e){null==t&&(t=+new Date);var n=new function(t){var e=this;e.next=function(){var t,n,r=e.x,i=e.i;return t=r[i],n=(t^=t>>>7)^t<<24,n^=(t=r[i+1&7])^t>>>10,n^=(t=r[i+3&7])^t>>>3,n^=(t=r[i+4&7])^t<<7,t=r[i+7&7],n^=(t^=t<<13)^t<<9,r[i]=n,e.i=i+1&7,n},function(t,e){var n,r=[];if(e===(0|e))r[0]=e;else for(e=""+e,n=0;n<e.length;++n)r[7&n]=r[7&n]<<15^e.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n&&(r[7]=-1),t.x=r,t.i=0,n=256;n>0;--n)t.next()}(e,t)}(t),i=e&&e.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},a.int32=n.next,a.quick=a,i&&(i.x&&r(i,n),a.state=function(){return r(n,{})}),a}e&&e.exports?e.exports=i:this.xorshift7=i}(0,t)})),Zw=Gw((function(t){!function(t,e,n){function r(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function i(t,e){null==t&&(t=+new Date);var n=new function(t){var e=this;e.next=function(){var t,n,r=e.w,i=e.X,a=e.i;return e.w=r=r+1640531527|0,n=i[a+34&127],t=i[a=a+1&127],n^=n<<13,t^=t<<17,n=i[a]=(n^=n>>>15)^(t^=t>>>12),e.i=a,n+(r^r>>>16)|0},function(t,e){var n,r,i,a,o,s=[],l=128;for(e===(0|e)?(r=e,e=null):(e+="\0",r=0,l=Math.max(l,e.length)),i=0,a=-32;a<l;++a)e&&(r^=e.charCodeAt((a+32)%e.length)),0===a&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,a>=0&&(i=0==(n=s[127&a]^=r+(o=o+1640531527|0))?i+1:0);for(i>=128&&(s[127&(e&&e.length||0)]=-1),i=127,a=512;a>0;--a)r=s[i+34&127],n=s[i=i+1&127],r^=r<<13,n^=n<<17,s[i]=(r^=r>>>15)^(n^=n>>>12);t.w=o,t.X=s,t.i=i}(e,t)}(t),i=e&&e.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},a.int32=n.next,a.quick=a,i&&(i.X&&r(i,n),a.state=function(){return r(n,{})}),a}e&&e.exports?e.exports=i:this.xor4096=i}(0,t)})),Qw=Gw((function(t){!function(t,e,n){function r(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function i(t,e){var n=new function(t){var e=this,n="";e.next=function(){var t=e.b,n=e.c,r=e.d,i=e.a;return t=t<<25^t>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-t|0,e.b=t=t<<20^t>>>12^n,e.c=n=n-r|0,e.d=r<<16^n>>>16^i,e.a=i-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):n+=t;for(var r=0;r<n.length+20;r++)e.b^=0|n.charCodeAt(r),e.next()}(t),i=e&&e.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},a.int32=n.next,a.quick=a,i&&("object"==typeof i&&r(i,n),a.state=function(){return r(n,{})}),a}e&&e.exports?e.exports=i:this.tychei=i}(0,t)})),Jw=Gw((function(t){!function(e,r){var i,a=this,o=256,s=6,l="random",u=r.pow(o,s),c=r.pow(2,52),h=2*c,d=o-1;function p(t,n,p){var y=[],v=m(function t(e,n){var r,i=[],a=typeof e;if(n&&"object"==a)for(r in e)try{i.push(t(e[r],n-1))}catch(t){}return i.length?i:"string"==a?e:e+"\0"}((n=1==n?{entropy:!0}:n||{}).entropy?[t,g(e)]:null==t?function(){try{var t;return i&&(t=i.randomBytes)?t=t(o):(t=new Uint8Array(o),(a.crypto||a.msCrypto).getRandomValues(t)),g(t)}catch(t){var n=a.navigator,r=n&&n.plugins;return[+new Date,a,r,a.screen,g(e)]}}():t,3),y),b=new function(t){var e,n=t.length,r=this,i=0,a=r.i=r.j=0,s=r.S=[];for(n||(t=[n++]);i<o;)s[i]=i++;for(i=0;i<o;i++)s[i]=s[a=d&a+t[i%n]+(e=s[i])],s[a]=e;(r.g=function(t){for(var e,n=0,i=r.i,a=r.j,s=r.S;t--;)e=s[i=d&i+1],n=n*o+s[d&(s[i]=s[a=d&a+e])+(s[a]=e)];return r.i=i,r.j=a,n})(o)}(y),w=function(){for(var t=b.g(s),e=u,n=0;t<c;)t=(t+n)*o,e*=o,n=b.g(1);for(;t>=h;)t/=2,e/=2,n>>>=1;return(t+n)/e};return w.int32=function(){return 0|b.g(4)},w.quick=function(){return b.g(4)/4294967296},w.double=w,m(g(b.S),e),(n.pass||p||function(t,e,n,i){return i&&(i.S&&f(i,b),t.state=function(){return f(b,{})}),n?(r[l]=t,e):t})(w,v,"global"in n?n.global:this==r,n.state)}function f(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function m(t,e){for(var n,r=t+"",i=0;i<r.length;)e[d&i]=d&(n^=19*e[d&i])+r.charCodeAt(i++);return g(e)}function g(t){return String.fromCharCode.apply(0,t)}if(r["seed"+l]=p,m(r.random(),e),t.exports){t.exports=p;try{i=n(4)}catch(t){}}}([],Math)}));Jw.alea=$w,Jw.xor128=Kw,Jw.xorwow=Xw,Jw.xorshift7=Yw,Jw.xor4096=Zw,Jw.tychei=Qw;var t_=Jw.alea;function e_(t,e,n,r){if(void 0===n&&(n=new Map),void 0===r&&(r=new Set),null==t)return null;if(r.has(t))throw new Error("Circular references are not supported.");if(n.has(t))return n.get(t);var i=e(t);if(i.recurse&&null!==i.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(i.recurse){if(i_(t)){var a=Array.isArray(t)?[]:{};for(var o in r.add(t),t){var s=e_(t[o],e,n,r);a[o]=s}return r.delete(t),a}throw new Error("Can't recurse into non-iterable type: "+t)}return n.set(t,i.value),i.value}function n_(t){return null===t?null:i_(t[0])?{value:null,recurse:!0}:{value:t,recurse:!1}}function r_(t,e){return Hw(this,void 0,void 0,(function(){var n,r,i,a,o,s;return qw(this,(function(l){switch(l.label){case 0:n=new Map,e_(t,e,n),r=0,i=Array.from(n.keys()),l.label=1;case 1:return r<i.length?(o=n.get(a=i[r]))instanceof Promise?[4,o]:[3,3]:[3,4];case 2:s=l.sent(),n.set(a,s),l.label=3;case 3:return r++,[3,1];case 4:return[2,e_(t,e,n)]}}))}))}function i_(t){return null!=t&&!ArrayBuffer.isView(t)&&(Array.isArray(t)||"object"==typeof t&&!(t instanceof xt))}function a_(t){return function(t,e){return e_(t,e)}(t,o_)}function o_(t){return t instanceof xt?{value:t.clone(),recurse:!1}:i_(t)?{value:null,recurse:!0}:{value:t,recurse:!1}}var s_=function(){function t(t){if(this.capacity=t,this.begin=0,this.end=0,null==t)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(t<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(t),this.doubledCapacity=2*t}return t.prototype.wrap=function(t){for(;t<0;)t+=this.doubledCapacity;return t%this.doubledCapacity},t.prototype.get=function(t){if(t<0)throw new RangeError("Can't get item at a negative index.");return this.data[t%this.capacity]},t.prototype.set=function(t,e){if(t<0)throw new RangeError("Can't set item at a negative index.");this.data[t%this.capacity]=e},t.prototype.length=function(){var t=this.end-this.begin;return t<0&&(t=this.doubledCapacity+t),t},t.prototype.isFull=function(){return this.length()===this.capacity},t.prototype.isEmpty=function(){return 0===this.length()},t.prototype.push=function(t){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,t),this.end=this.wrap(this.end+1)},t.prototype.pushAll=function(t){for(var e=0,n=t;e<n.length;e++)this.push(n[e])},t.prototype.pop=function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);var t=this.get(this.end);return this.set(this.end,void 0),t},t.prototype.unshift=function(t){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,t)},t.prototype.shift=function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var t=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),t},t.prototype.shuffleExcise=function(t){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var e=this.wrap(this.begin+t),n=this.get(e);return this.set(e,this.pop()),n},t}(),l_=function(t){function e(){return t.call(this,e.INITIAL_CAPACITY)||this}return Ww(e,t),e.prototype.isFull=function(){return!1},e.prototype.push=function(e){t.prototype.isFull.call(this)&&this.expand(),t.prototype.push.call(this,e)},e.prototype.unshift=function(e){t.prototype.isFull.call(this)&&this.expand(),t.prototype.unshift.call(this,e)},e.prototype.expand=function(){for(var t=2*this.capacity,e=new Array(t),n=this.length(),r=0;r<n;r++)e[r]=this.get(this.wrap(this.begin+r));this.data=e,this.capacity=t,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n},e.INITIAL_CAPACITY=32,e}(s_);function u_(t){return new m_(t)}function c_(t){return new g_(t)}function h_(t,e){return new I_(t,e)}function d_(t,e){return void 0===e&&(e=p_.FAIL),new A_(t,e)}var p_,f_=function(){function t(){}return t.prototype.toArray=function(){return Hw(this,void 0,void 0,(function(){var t,e;return qw(this,(function(n){switch(n.label){case 0:return t=[],[4,this.next()];case 1:e=n.sent(),n.label=2;case 2:return e.done?[3,4]:(t.push(e.value),[4,this.next()]);case 3:return e=n.sent(),[3,2];case 4:return[2,t]}}))}))},t.prototype.toArrayForTest=function(){return Hw(this,void 0,void 0,(function(){var t,e,n;return qw(this,(function(r){switch(r.label){case 0:return t=this.prefetch(100),e=[],[4,t.next()];case 1:n=r.sent(),r.label=2;case 2:return n.done?[3,4]:(e.push(n.value),[4,t.next()]);case 3:return n=r.sent(),[3,2];case 4:return[2,e]}}))}))},t.prototype.resolveFully=function(){return Hw(this,void 0,void 0,(function(){var t;return qw(this,(function(e){switch(e.label){case 0:return[4,this.next()];case 1:t=e.sent(),e.label=2;case 2:return t.done?[3,4]:[4,this.next()];case 3:return t=e.sent(),[3,2];case 4:return[2]}}))}))},t.prototype.resolveWhile=function(t){return Hw(this,void 0,void 0,(function(){var e,n;return qw(this,(function(r){switch(r.label){case 0:return[4,this.next()];case 1:e=r.sent(),n=t(e.value),r.label=2;case 2:return e.done||!n?[3,4]:[4,this.next()];case 3:return e=r.sent(),n=t(e.value),[3,2];case 4:return[2]}}))}))},t.prototype.handleErrors=function(t){return new C_(this,t)},t.prototype.filter=function(t){return new __(this,t)},t.prototype.map=function(t){return new x_(this,t)},t.prototype.mapAsync=function(t){return new S_(this,t)},t.prototype.serialMapAsync=function(t){return new S_(this,t).serial()},t.prototype.flatmap=function(t){return new E_(this,t)},t.prototype.forEachAsync=function(t){return Hw(this,void 0,void 0,(function(){return qw(this,(function(e){return[2,this.map(t).resolveFully()]}))}))},t.prototype.serialForEach=function(t){return Hw(this,void 0,void 0,(function(){return qw(this,(function(e){return[2,this.serialMapAsync(t).resolveWhile((function(t){return!0===t}))]}))}))},t.prototype.rowMajorBatch=function(t,e){return void 0===e&&(e=!0),new w_(this,t,e)},t.prototype.columnMajorBatch=function(t,e,n){return void 0===e&&(e=!0),void 0===n&&(n=n_),this.rowMajorBatch(t,e).map((function(t){return function(t,e){return void 0===e&&(e=n_),function t(e,n,r){void 0===r&&(r=new Set);var i=e[0];if(r.has(i))throw new Error("Circular references are not supported.");var a=n(e);if(a.recurse&&null!==a.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(a.recurse){if(i_(i)){var o=Array.isArray(i)?[]:{};r.add(i);var s=function(i){var a=t(e.map((function(t){return t[i]})),n,r);o[i]=a};for(var l in i)s(l);return r.delete(i),o}throw new Error("Can't recurse into non-iterable type: "+i)}return a.value}(t,e)}(t,n)}))},t.prototype.concatenate=function(t,e){return new I_(u_([this,t]),e)},t.prototype.take=function(t){return t<0||null==t?this:new b_(this,t)},t.prototype.skip=function(t){return t<0||null==t?this:new v_(this,t)},t.prototype.prefetch=function(t){return new D_(this,t)},t.prototype.shuffle=function(t,e){return new T_(this,t,e)},t.prototype.serial=function(){return new y_(this)},t}(),m_=function(t){function e(e){var n=t.call(this)||this;return n.items=e,n.trav=0,n}return Ww(e,t),e.prototype.summary=function(){return"Array of "+this.items.length+" items"},e.prototype.next=function(){return Hw(this,void 0,void 0,(function(){var t;return qw(this,(function(e){return this.trav>=this.items.length?[2,{value:null,done:!0}]:(t=this.items[this.trav],this.trav++,[2,{value:a_(t),done:!1}])}))}))},e}(f_),g_=function(t){function e(e){var n=t.call(this)||this;return n.nextFn=e,n}return Ww(e,t),e.prototype.summary=function(){return"Function call"},e.prototype.next=function(){return Hw(this,void 0,void 0,(function(){return qw(this,(function(t){try{return[2,this.nextFn()]}catch(t){throw t.message="Error thrown while iterating through a dataset: "+t.message,t}return[2]}))}))},e}(f_),y_=function(t){function e(e){var n=t.call(this)||this;return n.upstream=e,n.lastRead=Promise.resolve({value:null,done:!1}),n}return Ww(e,t),e.prototype.summary=function(){return this.upstream.summary()+" -> Serial"},e.prototype.next=function(){return Hw(this,void 0,void 0,(function(){var t=this;return qw(this,(function(e){return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),[2,this.lastRead]}))}))},e.prototype.serialNext=function(){return Hw(this,void 0,void 0,(function(){return qw(this,(function(t){return[2,this.upstream.next()]}))}))},e}(f_),v_=function(t){function e(e,n){var r=t.call(this)||this;return r.upstream=e,r.maxCount=n,r.count=0,r.lastRead=Promise.resolve({value:null,done:!1}),r}return Ww(e,t),e.prototype.summary=function(){return this.upstream.summary()+" -> Skip"},e.prototype.next=function(){return Hw(this,void 0,void 0,(function(){var t=this;return qw(this,(function(e){return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),[2,this.lastRead]}))}))},e.prototype.serialNext=function(){return Hw(this,void 0,void 0,(function(){var t;return qw(this,(function(e){switch(e.label){case 0:return this.count++<this.maxCount?[4,this.upstream.next()]:[3,2];case 1:return(t=e.sent()).done?[2,t]:(nn(t.value),[3,0]);case 2:return[2,this.upstream.next()]}}))}))},e}(f_),b_=function(t){function e(e,n){var r=t.call(this)||this;return r.upstream=e,r.maxCount=n,r.count=0,r}return Ww(e,t),e.prototype.summary=function(){return this.upstream.summary()+" -> Take"},e.prototype.next=function(){return Hw(this,void 0,void 0,(function(){return qw(this,(function(t){return this.count++>=this.maxCount?[2,{value:null,done:!0}]:[2,this.upstream.next()]}))}))},e}(f_),w_=function(t){function e(e,n,r){void 0===r&&(r=!0);var i=t.call(this)||this;return i.upstream=e,i.batchSize=n,i.enableSmallLastBatch=r,i.lastRead=Promise.resolve({value:null,done:!1}),i}return Ww(e,t),e.prototype.summary=function(){return this.upstream.summary()+" -> RowMajorBatch"},e.prototype.next=function(){return Hw(this,void 0,void 0,(function(){var t=this;return qw(this,(function(e){return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),[2,this.lastRead]}))}))},e.prototype.serialNext=function(){return Hw(this,void 0,void 0,(function(){var t,e;return qw(this,(function(n){switch(n.label){case 0:t=[],n.label=1;case 1:return t.length<this.batchSize?[4,this.upstream.next()]:[3,3];case 2:return(e=n.sent()).done?this.enableSmallLastBatch&&t.length>0?[2,{value:t,done:!1}]:[2,{value:null,done:!0}]:(t.push(e.value),[3,1]);case 3:return[2,{value:t,done:!1}]}}))}))},e}(f_),__=function(t){function e(e,n){var r=t.call(this)||this;return r.upstream=e,r.predicate=n,r.lastRead=Promise.resolve({value:null,done:!1}),r}return Ww(e,t),e.prototype.summary=function(){return this.upstream.summary()+" -> Filter"},e.prototype.next=function(){return Hw(this,void 0,void 0,(function(){var t=this;return qw(this,(function(e){return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),[2,this.lastRead]}))}))},e.prototype.serialNext=function(){return Hw(this,void 0,void 0,(function(){var t;return qw(this,(function(e){switch(e.label){case 0:return[4,this.upstream.next()];case 1:return(t=e.sent()).done||this.predicate(t.value)?[2,t]:(nn(t.value),[3,0]);case 2:return[2]}}))}))},e}(f_),x_=function(t){function e(e,n){var r=t.call(this)||this;return r.upstream=e,r.transform=n,r}return Ww(e,t),e.prototype.summary=function(){return this.upstream.summary()+" -> Map"},e.prototype.next=function(){return Hw(this,void 0,void 0,(function(){var t,e,n,r,i,a,o;return qw(this,(function(s){switch(s.label){case 0:return[4,this.upstream.next()];case 1:if((t=s.sent()).done)return[2,{value:null,done:!0}];for(e=Lt.getTensorsInContainer(t.value),n=this.transform(t.value),r=Lt.getTensorsInContainer(n),i=0,a=e;i<a.length;i++)Lt.isTensorInList(o=a[i],r)||o.dispose();return[2,{value:n,done:!1}]}}))}))},e}(f_),C_=function(t){function e(e,n){var r=t.call(this)||this;return r.upstream=e,r.handler=n,r.count=0,r.lastRead=Promise.resolve({value:null,done:!1}),r}return Ww(e,t),e.prototype.summary=function(){return this.upstream.summary()+" -> handleErrors"},e.prototype.next=function(){return Hw(this,void 0,void 0,(function(){var t=this;return qw(this,(function(e){return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),[2,this.lastRead]}))}))},e.prototype.serialNext=function(){return Hw(this,void 0,void 0,(function(){var t;return qw(this,(function(e){switch(e.label){case 0:e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.upstream.next()];case 2:return[2,e.sent()];case 3:return t=e.sent(),this.handler(t)?[3,4]:[2,{value:null,done:!0}];case 4:return[3,0];case 5:return[2]}}))}))},e}(f_),S_=function(t){function e(e,n){var r=t.call(this)||this;return r.upstream=e,r.transform=n,r}return Ww(e,t),e.prototype.summary=function(){return this.upstream.summary()+" -> AsyncMap"},e.prototype.next=function(){return Hw(this,void 0,void 0,(function(){var t,e,n,r,i,a,o;return qw(this,(function(s){switch(s.label){case 0:return[4,this.upstream.next()];case 1:return(t=s.sent()).done?[2,{value:null,done:!0}]:(e=Lt.getTensorsInContainer(t.value),[4,this.transform(t.value)]);case 2:for(n=s.sent(),r=Lt.getTensorsInContainer(n),i=0,a=e;i<a.length;i++)Lt.isTensorInList(o=a[i],r)||o.dispose();return[2,{value:n,done:!1}]}}))}))},e}(f_),k_=function(t){function e(){var e=t.call(this)||this;return e.outputQueue=new l_,e.lastRead=Promise.resolve({value:null,done:!1}),e}return Ww(e,t),e.prototype.next=function(){return Hw(this,void 0,void 0,(function(){var t=this;return qw(this,(function(e){return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),[2,this.lastRead]}))}))},e.prototype.serialNext=function(){return Hw(this,void 0,void 0,(function(){return qw(this,(function(t){switch(t.label){case 0:return 0!==this.outputQueue.length()?[3,2]:[4,this.pump()];case 1:return t.sent()?[3,0]:[2,{value:null,done:!0}];case 2:return[2,{value:this.outputQueue.shift(),done:!1}]}}))}))},e}(f_),E_=function(t){function e(e,n){var r=t.call(this)||this;return r.upstream=e,r.transform=n,r}return Ww(e,t),e.prototype.summary=function(){return this.upstream.summary()+" -> Flatmap"},e.prototype.pump=function(){return Hw(this,void 0,void 0,(function(){var t,e,n,r,i,a,o;return qw(this,(function(s){switch(s.label){case 0:return[4,this.upstream.next()];case 1:if((t=s.sent()).done)return[2,!1];for(e=Lt.getTensorsInContainer(t.value),n=this.transform(t.value),r=Lt.getTensorsInContainer(n),this.outputQueue.pushAll(n),i=0,a=e;i<a.length;i++)Lt.isTensorInList(o=a[i],r)||o.dispose();return[2,!0]}}))}))},e}(k_),I_=function(t){function e(e,n){var r=t.call(this)||this;return r.baseErrorHandler=n,r.lastRead=null,r.iterator=null,r.moreIterators=e,r}return Ww(e,t),e.prototype.summary=function(){return"TODO: fill in upstream of chained summaries -> Chained"},e.prototype.next=function(){return Hw(this,void 0,void 0,(function(){return qw(this,(function(t){return this.lastRead=this.readFromChain(this.lastRead),[2,this.lastRead]}))}))},e.prototype.readFromChain=function(t){return Hw(this,void 0,void 0,(function(){var e,n;return qw(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return r.sent(),null!=this.iterator?[3,3]:[4,this.moreIterators.next()];case 2:if((e=r.sent()).done)return[2,{value:null,done:!0}];this.iterator=e.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler)),r.label=3;case 3:return[4,this.iterator.next()];case 4:return(n=r.sent()).done?(this.iterator=null,[2,this.readFromChain(t)]):[2,n]}}))}))},e}(f_);!function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"}(p_||(p_={}));var A_=function(t){function e(e,n){void 0===n&&(n=p_.FAIL);var r=t.call(this)||this;return r.iterators=e,r.mismatchMode=n,r.count=0,r.currentPromise=null,r}return Ww(e,t),e.prototype.summary=function(){return"{TODO: fill in upstream of zip summaries} -> Zip"},e.prototype.nextState=function(t){return Hw(this,void 0,void 0,(function(){function e(t){return t instanceof f_?{value:t.next().then((function(t){return n++,t.done&&r++,t.value})),recurse:!1}:{value:null,recurse:!0}}var n,r,i;return qw(this,(function(a){switch(a.label){case 0:return[4,t];case 1:return a.sent(),n=0,r=0,[4,r_(this.iterators,e)];case 2:if(i=a.sent(),n===r)return[2,{value:null,done:!0}];if(r>0)switch(this.mismatchMode){case p_.FAIL:throw new Error("Zipped streams should have the same length. Mismatched at element "+this.count+".");case p_.SHORTEST:return[2,{value:null,done:!0}]}return this.count++,[2,{value:i,done:!1}]}}))}))},e.prototype.next=function(){return Hw(this,void 0,void 0,(function(){return qw(this,(function(t){return this.currentPromise=this.nextState(this.currentPromise),[2,this.currentPromise]}))}))},e}(f_),D_=function(t){function e(e,n){var r=t.call(this)||this;return r.upstream=e,r.bufferSize=n,r.buffer=new s_(n),r}return Ww(e,t),e.prototype.summary=function(){return this.upstream.summary()+" -> Prefetch"},e.prototype.refill=function(){for(;!this.buffer.isFull();){var t=this.upstream.next();this.buffer.push(t)}},e.prototype.next=function(){return this.refill(),this.buffer.shift()},e}(f_),T_=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.upstream=e,i.windowSize=n,i.upstreamExhausted=!1,i.random=t_(r||ht.now().toString()),i.lastRead=Promise.resolve({value:null,done:!1}),i}return Ww(e,t),e.prototype.next=function(){return Hw(this,void 0,void 0,(function(){var t=this;return qw(this,(function(e){return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),[2,this.lastRead]}))}))},e.prototype.randomInt=function(t){return Math.floor(this.random()*t)},e.prototype.chooseIndex=function(){return this.randomInt(this.buffer.length())},e.prototype.serialNext=function(){return Hw(this,void 0,void 0,(function(){var t,e;return qw(this,(function(n){switch(n.label){case 0:this.upstreamExhausted||this.refill(),n.label=1;case 1:return this.buffer.isEmpty()?[3,3]:(t=this.chooseIndex(),[4,this.buffer.shuffleExcise(t)]);case 2:return(e=n.sent()).done?(this.upstreamExhausted=!0,[3,1]):(this.refill(),[2,e]);case 3:return[2,{value:null,done:!0}]}}))}))},e}(D_),N_=function(){function t(){this.size=null}return t.prototype.batch=function(t,e){var n=this;void 0===e&&(e=!0);var r=this;return ht.assert(t>0,(function(){return"batchSize needs to be positive, but it is\n      "+t})),R_((function(){return Hw(n,void 0,void 0,(function(){return qw(this,(function(n){switch(n.label){case 0:return[4,r.iterator()];case 1:return[2,n.sent().columnMajorBatch(t,e,M_)]}}))}))}),this.size===1/0||null==this.size?this.size:e?Math.ceil(this.size/t):Math.floor(this.size/t))},t.prototype.concatenate=function(t){var e=this,n=this;return R_((function(){return Hw(e,void 0,void 0,(function(){var e,r;return qw(this,(function(i){switch(i.label){case 0:return[4,n.iterator()];case 1:return r=(e=i.sent()).concatenate,[4,t.iterator()];case 2:return[2,r.apply(e,[i.sent()])]}}))}))}),this.size===1/0||t.size===1/0?1/0:null!=this.size&&null!=t.size?this.size+t.size:null)},t.prototype.filter=function(t){var e=this,n=this;return R_((function(){return Hw(e,void 0,void 0,(function(){return qw(this,(function(e){switch(e.label){case 0:return[4,n.iterator()];case 1:return[2,e.sent().filter((function(e){return en((function(){return t(e)}))}))]}}))}))}),this.size===1/0?1/0:null)},t.prototype.forEachAsync=function(t){return Hw(this,void 0,void 0,(function(){return qw(this,(function(e){switch(e.label){case 0:return[4,this.iterator()];case 1:return[2,e.sent().forEachAsync(t)]}}))}))},t.prototype.forEach=function(t){return Hw(this,void 0,void 0,(function(){return qw(this,(function(e){return Ye("dataset.forEach() is deprecated and will be removed. Please use dataset.forEachAsync() instead"),[2,this.forEachAsync(t)]}))}))},t.prototype.map=function(t){var e=this,n=this;return R_((function(){return Hw(e,void 0,void 0,(function(){return qw(this,(function(e){switch(e.label){case 0:return[4,n.iterator()];case 1:return[2,e.sent().map((function(e){return en((function(){return t(e)}))}))]}}))}))}),this.size)},t.prototype.mapAsync=function(t){var e=this,n=this;return R_((function(){return Hw(e,void 0,void 0,(function(){return qw(this,(function(e){switch(e.label){case 0:return[4,n.iterator()];case 1:return[2,e.sent().mapAsync(t)]}}))}))}),this.size)},t.prototype.prefetch=function(t){var e=this;if(null==t)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");var n=this;return R_((function(){return Hw(e,void 0,void 0,(function(){return qw(this,(function(e){switch(e.label){case 0:return[4,n.iterator()];case 1:return[2,e.sent().prefetch(t)]}}))}))}),this.size)},t.prototype.repeat=function(t){var e=this,n=this;return R_((function(){return Hw(e,void 0,void 0,(function(){var e=this;return qw(this,(function(r){return[2,h_(c_((function(){return Hw(e,void 0,void 0,(function(){var t;return qw(this,(function(e){switch(e.label){case 0:return t={},[4,n.iterator()];case 1:return[2,(t.value=e.sent(),t.done=!1,t)]}}))}))})).take(t))]}))}))}),null!=this.size&&t>0?this.size*t:0===t?0:null!=this.size&&(void 0===t||t<0)?1/0:null)},t.prototype.skip=function(t){var e=this,n=this;return R_((function(){return Hw(e,void 0,void 0,(function(){return qw(this,(function(e){switch(e.label){case 0:return[4,n.iterator()];case 1:return[2,e.sent().skip(t)]}}))}))}),null!=this.size&&t>=0&&this.size>=t?this.size-t:null!=this.size&&(this.size<t||void 0===t||t<0)?0:null)},t.prototype.shuffle=function(t,e,n){var r=this;if(void 0===n&&(n=!0),null==t||t<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting bufferSize to the dataset size ("+this.size+" elements)");var i=this,a=t_(e||ht.now().toString());return R_((function(){return Hw(r,void 0,void 0,(function(){var e;return qw(this,(function(r){switch(r.label){case 0:return e=a.int32(),n&&(e+=a.int32()),[4,i.iterator()];case 1:return[2,r.sent().shuffle(t,e.toString())]}}))}))}),this.size)},t.prototype.take=function(t){var e=this,n=this;return R_((function(){return Hw(e,void 0,void 0,(function(){return qw(this,(function(e){switch(e.label){case 0:return[4,n.iterator()];case 1:return[2,e.sent().take(t)]}}))}))}),null!=this.size&&this.size>t?t:null!=this.size&&this.size<=t?this.size:null)},t.prototype.toArray=function(){return Hw(this,void 0,void 0,(function(){return qw(this,(function(t){switch(t.label){case 0:if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return[4,this.iterator()];case 1:return[2,t.sent().toArray()]}}))}))},t.prototype.toArrayForTest=function(){return Hw(this,void 0,void 0,(function(){return qw(this,(function(t){switch(t.label){case 0:if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return[4,this.iterator()];case 1:return[2,t.sent().toArrayForTest()]}}))}))},t.MAX_BUFFER_SIZE=1e4,t}();function R_(t,e){return void 0===e&&(e=null),new(function(n){function r(){var t=null!==n&&n.apply(this,arguments)||this;return t.size=e,t}return Ww(r,n),r.prototype.iterator=function(){return Hw(this,void 0,void 0,(function(){return qw(this,(function(e){return[2,t()]}))}))},r}(N_))}function O_(t){var e=this;return R_((function(){return Hw(e,void 0,void 0,(function(){return qw(this,(function(e){return[2,u_(t)]}))}))}),t.length)}function F_(t){var e,n=this;if(!i_(t))throw new Error("The argument to zip() must be an object or array.");if(Array.isArray(t))for(var r=0;r<t.length;r++)e=null==e?t[r].size:Math.min(e,t[r].size);else if(t instanceof Object)for(var i in t)e=null==e?t[i].size:Math.min(e,t[i].size);return R_((function(){return Hw(n,void 0,void 0,(function(){return qw(this,(function(e){switch(e.label){case 0:return[4,r_(t,(function(t){if(t instanceof N_)return{value:t.iterator(),recurse:!1};if(i_(t))return{value:null,recurse:!0};throw new Error("Leaves of the structure passed to zip() must be Datasets, not primitives.")}))];case 1:return[2,d_(e.sent(),p_.SHORTEST)]}}))}))}),e)}function M_(t){return null===t?null:function(t){return null==t||function(t){return null===t||"object"!=typeof t&&"function"!=typeof t}(t)||Array.isArray(t)||"object"==typeof t&&t instanceof xt||ht.isTypedArray(t)}(t[0])?{value:P_(t),recurse:!1}:{value:null,recurse:!0}}function P_(t){if(0===t.length)throw new Error("Can't make a batch of zero elements.");return t[0]instanceof xt?pr(t):Fn(t)}var L_=function(t){function e(e){var n=t.call(this)||this;return n.input=e,n}return Ww(e,t),e.prototype.iterator=function(){return Hw(this,void 0,void 0,(function(){return qw(this,(function(t){switch(t.label){case 0:return[4,this.input.iterator()];case 1:return[2,t.sent().decodeUTF8().split("\n").map((function(t){return t.endsWith("\r")&&(t=t.slice(0,-1)),t}))]}}))}))},e}(N_),z_=Symbol("out"),V_=Symbol("field"),B_=Symbol("quote"),j_=Symbol("quoteafterquote"),U_=Symbol("quoteinquote"),W_=function(t){function e(e,n){var r=t.call(this)||this;return r.input=e,r.hasHeader=!0,r.fullColumnNames=null,r.columnNamesValidated=!1,r.columnConfigs=null,r.configuredColumnsOnly=!1,r.delimiter=",",r.delimWhitespace=!1,r.base=new L_(e),n||(n={}),r.hasHeader=!1!==n.hasHeader,r.fullColumnNames=n.columnNames,r.columnConfigs=n.columnConfigs,r.configuredColumnsOnly=n.configuredColumnsOnly,n.delimWhitespace?(ht.assert(null==n.delimiter,(function(){return"Delimiter should not be provided when delimWhitespace is true."})),r.delimWhitespace=!0,r.delimiter=" "):r.delimiter=n.delimiter?n.delimiter:",",r}return Ww(e,t),e.prototype.columnNames=function(){return Hw(this,void 0,void 0,(function(){return qw(this,(function(t){switch(t.label){case 0:return this.columnNamesValidated?[3,2]:[4,this.setColumnNames()];case 1:t.sent(),t.label=2;case 2:return[2,this.configuredColumnsOnly?Object.keys(this.columnConfigs):this.fullColumnNames]}}))}))},e.prototype.setColumnNames=function(){return Hw(this,void 0,void 0,(function(){var t,e,n,r,i,a,o=this;return qw(this,(function(s){switch(s.label){case 0:return[4,this.maybeReadHeaderLine()];case 1:if(t=s.sent(),!this.fullColumnNames&&!t)throw new Error("Column names must be provided if there is no header line.");if(this.fullColumnNames&&t&&ht.assert(t.length===this.fullColumnNames.length,(function(){return"The length of provided columnNames ("+o.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+t.length.toString()+")."})),this.fullColumnNames||(this.fullColumnNames=t),e=this.fullColumnNames.reduce((function(t,e){return t[e]=t[e]+1||1,t}),{}),n=Object.keys(e).filter((function(t){return e[t]>1})),ht.assert(0===n.length,(function(){return"Duplicate column names found: "+n.toString()})),this.columnConfigs)for(r=0,i=Object.keys(this.columnConfigs);r<i.length;r++)if(-1===this.fullColumnNames.indexOf(a=i[r]))throw new Error('The key "'+a+'" provided in columnConfigs does not match any of the column names ('+this.fullColumnNames.toString()+").");return this.columnNamesValidated=!0,[2]}}))}))},e.prototype.maybeReadHeaderLine=function(){return Hw(this,void 0,void 0,(function(){var t;return qw(this,(function(e){switch(e.label){case 0:return this.hasHeader?[4,this.base.iterator()]:[3,3];case 1:return[4,e.sent().next()];case 2:if((t=e.sent()).done)throw new Error("No data was found for CSV parsing.");return[2,this.parseRow(t.value,!1)];case 3:return[2,null]}}))}))},e.prototype.iterator=function(){return Hw(this,void 0,void 0,(function(){var t,e=this;return qw(this,(function(n){switch(n.label){case 0:return this.columnNamesValidated?[3,2]:[4,this.setColumnNames()];case 1:n.sent(),n.label=2;case 2:return[4,this.base.iterator()];case 3:return t=n.sent(),this.hasHeader&&(t=t.skip(1)),[2,t.map((function(t){return e.makeDataElement(t)}))]}}))}))},e.prototype.makeDataElement=function(t){for(var e=this.parseRow(t),n={},r={},i=0;i<this.fullColumnNames.length;i++){var a=this.fullColumnNames[i],o=this.columnConfigs?this.columnConfigs[a]:null;if(!this.configuredColumnsOnly||o){var s=e[i],l=null;if(""===s)if(o&&void 0!==o.default)l=o.default;else{if(o&&(o.required||o.isLabel))throw new Error("Required column "+a+" is empty in this line: "+t);l=void 0}else{var u=Number(s);if(isNaN(u))l=o&&"bool"===o.dtype?this.getBoolean(s):s;else if(o&&o.dtype)switch(o.dtype){case"float32":l=u;break;case"int32":l=Math.floor(u);break;case"bool":l=this.getBoolean(s);break;default:l=u}else l=u}o&&o.isLabel?r[a]=l:n[a]=l}}return 0===Object.keys(r).length?n:{xs:n,ys:r}},e.prototype.getBoolean=function(t){return"1"===t||"true"===t.toLowerCase()?1:0},e.prototype.parseRow=function(t,e){void 0===e&&(e=!0);for(var n=[],r=0,i=t.length,a=z_,o=0;o<i;o++)switch(a){case z_:switch(t.charAt(o)){case'"':r=o+1,a=B_;break;case this.delimiter:if(r=o+1," "===this.delimiter&&this.delimWhitespace)break;n.push(""),a=z_;break;default:a=V_,r=o}break;case V_:switch(t.charAt(o)){case this.delimiter:n.push(t.substring(r,o)),a=z_,r=o+1}break;case B_:switch(t.charAt(o)){case'"':a=j_}break;case j_:switch(t.charAt(o)){case this.delimiter:n.push(t.substring(r,o-1)),a=z_,r=o+1;break;case'"':a=B_;break;default:a=U_}break;case U_:switch(t.charAt(o)){case'"':a=B_}}if(n.push(a===j_?t.substring(r,i-1):t.substring(r)),e&&n.length!==this.fullColumnNames.length)throw new Error("Invalid row in csv file. Should have "+this.fullColumnNames.length+" elements in a row, but got "+n);return n},e}(N_),H_=function(t){function e(e){var n=t.call(this)||this;n.microphoneConfig=e,n.isClosed=!1,n.fftSize=e.fftSize||1024;var r=Math.log2(n.fftSize);if(n.fftSize<0||r<4||r>14||!Number.isInteger(r))throw new Error("Invalid fftSize: it must be a power of 2 between 2 to 4 and 2 to 14, but got "+n.fftSize);if(n.numFrames=e.numFramesPerSpectrogram||43,n.sampleRateHz=e.sampleRateHz,n.columnTruncateLength=e.columnTruncateLength||n.fftSize,n.audioTrackConstraints=e.audioTrackConstraints,n.smoothingTimeConstant=e.smoothingTimeConstant||0,n.includeSpectrogram=!1!==e.includeSpectrogram,n.includeWaveform=!0===e.includeWaveform,!n.includeSpectrogram&&!n.includeWaveform)throw new Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.");return n}return Ww(e,t),e.prototype.summary=function(){return"microphone"},e.create=function(t){return void 0===t&&(t={}),Hw(this,void 0,void 0,(function(){var n;return qw(this,(function(r){switch(r.label){case 0:if(c().get("IS_NODE"))throw new Error("microphone API is only supported in browser environment.");return[4,(n=new e(t)).start()];case 1:return r.sent(),[2,n]}}))}))},e.prototype.start=function(){return Hw(this,void 0,void 0,(function(){var t,e,n,r;return qw(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),t=this,[4,navigator.mediaDevices.getUserMedia({audio:null==this.audioTrackConstraints||this.audioTrackConstraints,video:!1})];case 1:return t.stream=i.sent(),[3,3];case 2:throw e=i.sent(),new Error("Error thrown while initializing video stream: "+e.message);case 3:if(!this.stream)throw new Error("Could not obtain audio from microphone.");if(n=window.AudioContext||window.webkitAudioContext,this.audioContext=new n,this.sampleRateHz){if(this.audioContext.sampleRate!==this.sampleRateHz)throw new Error("Mismatch in sampling rate: Expected: "+this.sampleRateHz+"; Actual: "+this.audioContext.sampleRate)}else this.sampleRateHz=this.audioContext.sampleRate;return r=this.audioContext.createMediaStreamSource(this.stream),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2*this.fftSize,this.analyser.smoothingTimeConstant=this.smoothingTimeConstant,r.connect(this.analyser),this.freqData=new Float32Array(this.fftSize),this.timeData=new Float32Array(this.fftSize),[2]}}))}))},e.prototype.next=function(){return Hw(this,void 0,void 0,(function(){var t,e,n,r,i;return qw(this,(function(a){switch(a.label){case 0:return this.isClosed?[2,{value:null,done:!0}]:[4,this.getAudioData()];case 1:return n=a.sent(),this.includeSpectrogram&&(r=this.flattenQueue(n.freqDataQueue),t=this.getTensorFromAudioDataArray(r,[this.numFrames,this.columnTruncateLength,1])),this.includeWaveform&&(i=this.flattenQueue(n.timeDataQueue),e=this.getTensorFromAudioDataArray(i,[this.numFrames*this.fftSize,1])),[2,{value:{spectrogram:t,waveform:e},done:!1}]}}))}))},e.prototype.capture=function(){return Hw(this,void 0,void 0,(function(){return qw(this,(function(t){switch(t.label){case 0:return[4,this.next()];case 1:return[2,t.sent().value]}}))}))},e.prototype.getAudioData=function(){return Hw(this,void 0,void 0,(function(){var t,e,n,r=this;return qw(this,(function(i){return t=[],e=[],n=0,[2,new Promise((function(i){var a=setInterval((function(){r.includeSpectrogram&&(r.analyser.getFloatFrequencyData(r.freqData),r.freqData[0]===-1/0&&i({freqDataQueue:t,timeDataQueue:e}),t.push(r.freqData.slice(0,r.columnTruncateLength))),r.includeWaveform&&(r.analyser.getFloatTimeDomainData(r.timeData),e.push(r.timeData.slice())),++n===r.numFrames&&(clearInterval(a),i({freqDataQueue:t,timeDataQueue:e}))}),r.fftSize/r.sampleRateHz*1e3)}))]}))}))},e.prototype.stop=function(){this.isClosed||(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),null!=this.stream&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())},e.prototype.toArray=function(){throw new Error("Can not convert infinite audio stream to array.")},e.prototype.getSampleRate=function(){return this.sampleRateHz},e.prototype.flattenQueue=function(t){var e=t[0].length,n=new Float32Array(t.length*e);return t.forEach((function(t,r){return n.set(t,r*e)})),n},e.prototype.getTensorFromAudioDataArray=function(t,e){var n=new Float32Array(ht.sizeFromShape(e));return n.set(t,n.length-t.length),Fn(n,e)},e}(f_),q_=function(t){function e(e,n){var r=t.call(this)||this;if(r.webcamVideoElement=e,r.webcamConfig=n,r.isClosed=!0,r.resize=!1,r.needToResize())if(r.resize=!0,r.cropSize=[r.webcamConfig.resizeHeight,r.webcamConfig.resizeWidth],r.cropBoxInd=Ln([0],"int32"),r.webcamConfig.centerCrop){var i=1*r.webcamConfig.resizeWidth/r.webcamVideoElement.width,a=1*r.webcamConfig.resizeHeight/r.webcamVideoElement.height,o=(1-i)/2,s=(1-a)/2;r.cropBox=zn([s,o,a+s,o+i],[1,4])}else r.cropBox=zn([0,0,1,1],[1,4]);return r}return Ww(e,t),e.prototype.summary=function(){return"webcam"},e.create=function(t,n){return void 0===n&&(n={}),Hw(this,void 0,void 0,(function(){var r;return qw(this,(function(i){switch(i.label){case 0:if(c().get("IS_NODE"))throw new Error("tf.data.webcam is only supported in browser environment.");if(!t){if(t=document.createElement("video"),!n.resizeWidth||!n.resizeHeight)throw new Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");t.width=n.resizeWidth,t.height=n.resizeHeight}return[4,(r=new e(t,n)).start()];case 1:return i.sent(),[2,r]}}))}))},e.prototype.start=function(){return Hw(this,void 0,void 0,(function(){var t,e,n=this;return qw(this,(function(r){switch(r.label){case 0:this.webcamConfig.facingMode&&ht.assert("user"===this.webcamConfig.facingMode||"environment"===this.webcamConfig.facingMode,(function(){return"Invalid webcam facing mode: "+n.webcamConfig.facingMode+". Please provide 'user' or 'environment'"})),r.label=1;case 1:return r.trys.push([1,3,,4]),t=this,[4,navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}})];case 2:return t.stream=r.sent(),[3,4];case 3:throw(e=r.sent()).message="Error thrown while initializing video stream: "+e.message,e;case 4:if(!this.stream)throw new Error("Could not obtain video from webcam.");try{this.webcamVideoElement.srcObject=this.stream}catch(t){console.log(t),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return this.webcamVideoElement.play(),this.isClosed=!1,[2,new Promise((function(t){n.webcamVideoElement.onloadedmetadata=function(){t()}}))]}}))}))},e.prototype.next=function(){return Hw(this,void 0,void 0,(function(){var t;return qw(this,(function(e){if(this.isClosed)return[2,{value:null,done:!0}];try{t=sp.fromPixels(this.webcamVideoElement)}catch(t){throw new Error("Error thrown converting video to pixels: "+JSON.stringify(t))}if(!this.resize)return[2,{value:t,done:!1}];try{return[2,{value:this.cropAndResizeFrame(t),done:!1}]}catch(t){throw new Error("Error thrown cropping the video: "+t.message)}finally{t.dispose()}return[2]}))}))},e.prototype.needToResize=function(){return!(!this.webcamConfig.resizeWidth||!this.webcamConfig.resizeHeight||this.webcamVideoElement.width===this.webcamConfig.resizeWidth&&this.webcamVideoElement.height===this.webcamConfig.resizeHeight)},e.prototype.cropAndResizeFrame=function(t){var e=this;return en((function(){var n,r=t.toFloat().expandDims(0),i=(n=Sh.cropAndResize(r,e.cropBox,e.cropBoxInd,e.cropSize,"bilinear")).shape;return n.reshape(i.slice(1))}))},e.prototype.capture=function(){return Hw(this,void 0,void 0,(function(){return qw(this,(function(t){switch(t.label){case 0:return[4,this.next()];case 1:return[2,t.sent().value]}}))}))},e.prototype.stop=function(){this.stream.getTracks().forEach((function(t){return t.stop()}));try{this.webcamVideoElement.srcObject=null}catch(t){console.log(t),this.webcamVideoElement.src=null}this.isClosed=!0},e.prototype.toArray=function(){throw new Error("Can not convert infinite video stream to array.")},e}(f_),G_=function(){},$_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ww(e,t),e.prototype.split=function(t){return new K_(this,t)},e}(f_),K_=function(t){function e(e,n){var r=t.call(this)||this;return r.upstream=e,r.impl=new X_(e,n),r}return Ww(e,t),e.prototype.summary=function(){return this.impl.summary()},e.prototype.next=function(){return Hw(this,void 0,void 0,(function(){return qw(this,(function(t){return[2,this.impl.next()]}))}))},e}($_),X_=function(t){function e(e,n){var r=t.call(this)||this;return r.upstream=e,r.separator=n,r.carryover="",r}return Ww(e,t),e.prototype.summary=function(){return this.upstream.summary()+" -> Split('"+this.separator+"')"},e.prototype.pump=function(){return Hw(this,void 0,void 0,(function(){var t,e,n,r;return qw(this,(function(i){switch(i.label){case 0:return[4,this.upstream.next()];case 1:if((t=i.sent()).done)return""===this.carryover?[2,!1]:(this.outputQueue.push(this.carryover),this.carryover="",[2,!0]);for((e=t.value.split(this.separator))[0]=this.carryover+e[0],n=0,r=e.slice(0,-1);n<r.length;n++)this.outputQueue.push(r[n]);return this.carryover=e[e.length-1],[2,!0]}}))}))},e}(k_),Y_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ww(e,t),e.prototype.decodeUTF8=function(){return new Z_(this)},e}(f_),Z_=function(t){function e(e){var n=t.call(this)||this;return n.upstream=e,n.impl=new Q_(e),n}return Ww(e,t),e.prototype.summary=function(){return this.impl.summary()},e.prototype.next=function(){return Hw(this,void 0,void 0,(function(){return qw(this,(function(t){return[2,this.impl.next()]}))}))},e}($_),Q_=function(t){function e(e){var r=t.call(this)||this;if(r.upstream=e,c().get("IS_BROWSER"))r.decoder=new TextDecoder("utf-8");else{var i=n(5).StringDecoder;r.decoder=new i("utf8")}return r}return Ww(e,t),e.prototype.summary=function(){return this.upstream.summary()+" -> Utf8"},e.prototype.pump=function(){return Hw(this,void 0,void 0,(function(){var t,e,n;return qw(this,(function(r){switch(r.label){case 0:return[4,this.upstream.next()];case 1:return(t=r.sent()).done?[2,!1]:(e=t.value,n=c().get("IS_BROWSER")?this.decoder.decode(e,{stream:!0}):this.decoder.write(Buffer.from(e.buffer)),this.outputQueue.push(n),[2,!0])}}))}))},e}(k_),J_=function(t){function e(e,n){void 0===n&&(n={});var r=t.call(this)||this;return r.file=e,r.options=n,ht.assert(e instanceof Uint8Array||!!c().get("IS_BROWSER")&&(e instanceof File||e instanceof Blob),(function(){return"FileChunkIterator only supports File, Blob and Uint8Array right now."})),r.offset=n.offset||0,r.chunkSize=n.chunkSize||1048576,r}return Ww(e,t),e.prototype.summary=function(){return"FileChunks "+this.file},e.prototype.next=function(){return Hw(this,void 0,void 0,(function(){var t,e,n=this;return qw(this,(function(r){switch(r.label){case 0:return this.offset>=(this.file instanceof Uint8Array?this.file.byteLength:this.file.size)?[2,{value:null,done:!0}]:(t=new Promise((function(t,e){var r=n.offset+n.chunkSize;if(n.file instanceof Uint8Array)t(new Uint8Array(n.file.slice(n.offset,r)));else{var i=new FileReader;i.onload=function(n){var r=i.result;if(r instanceof ArrayBuffer&&(r=new Uint8Array(r)),!(r instanceof Uint8Array))return e(new TypeError("FileReader returned unknown type."));t(r)},i.onabort=function(t){return e(new Error("Aborted"))},i.onerror=function(t){return e(new Error(t.type))};var a=n.file.slice(n.offset,r);i.readAsArrayBuffer(a)}n.offset=r})),e={},[4,t]);case 1:return[2,(e.value=r.sent(),e.done=!1,e)]}}))}))},e}(Y_);function tx(t,e){return void 0===e&&(e={}),Hw(this,void 0,void 0,(function(){var n,r,i,a,o;return qw(this,(function(s){switch(s.label){case 0:return"string"==typeof t?n=t:(n=t.url,r=ex(t)),[4,ht.fetch(n,r)];case 1:return(i=s.sent()).ok?(o=Uint8Array.bind,[4,i.arrayBuffer()]):[3,3];case 2:return a=new(o.apply(Uint8Array,[void 0,s.sent()])),[2,new J_(a,e)];case 3:throw new Error(i.statusText)}}))}))}var ex=function(t){return{method:t.method,headers:t.headers,body:t.body,mode:t.mode,credentials:t.credentials,cache:t.cache,redirect:t.redirect,referrer:t.referrer,integrity:t.integrity}};function nx(t){return"string"==typeof t&&"file://"===t.substr(0,7)}var rx=function(t){function e(e,n){void 0===n&&(n={});var r=t.call(this)||this;return r.input=e,r.options=n,r}return Ww(e,t),e.prototype.iterator=function(){return Hw(this,void 0,void 0,(function(){var t;return qw(this,(function(e){return nx(this.input)&&c().get("IS_NODE")&&(t=n(6),this.input=t.readFileSync(this.input.substr(7))),[2,new J_(this.input,this.options)]}))}))},e}(G_),ix=function(t){function e(e,n){void 0===n&&(n={});var r=t.call(this)||this;return r.url=e,r.fileOptions=n,r}return Ww(e,t),e.prototype.iterator=function(){return Hw(this,void 0,void 0,(function(){return qw(this,(function(t){return nx(this.url)?[2,new rx(this.url,this.fileOptions).iterator()]:[2,tx(this.url,this.fileOptions)]}))}))},e}(G_);function ax(t,e){return void 0===e&&(e={}),new W_(new ix(t),e)}function ox(t){var e=this,n=c_(t);return R_((function(){return Hw(e,void 0,void 0,(function(){return qw(this,(function(t){return[2,n]}))}))}))}function sx(t){var e=this;return R_((function(){return Hw(e,void 0,void 0,(function(){var e;return qw(this,(function(n){switch(n.label){case 0:return[4,t()];case 1:return e=n.sent(),[2,c_((function(){return e.next()}))]}}))}))}))}function lx(t,e){return Hw(this,void 0,void 0,(function(){return qw(this,(function(n){return[2,q_.create(t,e)]}))}))}function ux(t){return Hw(this,void 0,void 0,(function(){return qw(this,(function(e){return[2,H_.create(t)]}))}))}var cx="1.7.4";n.d(e,"version",(function(){return hx})),n.d(e,"AdadeltaOptimizer",(function(){return fp})),n.d(e,"AdagradOptimizer",(function(){return mp})),n.d(e,"AdamOptimizer",(function(){return gp})),n.d(e,"AdamaxOptimizer",(function(){return yp})),n.d(e,"Add",(function(){return"Add"})),n.d(e,"AddN",(function(){return"AddN"})),n.d(e,"BroadcastTo",(function(){return Cr})),n.d(e,"DataStorage",(function(){return na})),n.d(e,"Div",(function(){return _r})),n.d(e,"ENV",(function(){return h})),n.d(e,"Environment",(function(){return l})),n.d(e,"FromPixels",(function(){return"FromPixels"})),n.d(e,"FusedBatchNorm",(function(){return"FusedBatchNorm"})),n.d(e,"Identity",(function(){return kr})),n.d(e,"KernelBackend",(function(){return ra})),n.d(e,"MaxPoolWithArgmax",(function(){return"MaxPoolWithArgmax"})),n.d(e,"MomentumOptimizer",(function(){return bp})),n.d(e,"NonMaxSuppressionV5",(function(){return"NonMaxSuppressionV5"})),n.d(e,"OneHot",(function(){return Sr})),n.d(e,"Optimizer",(function(){return pp})),n.d(e,"PadV2",(function(){return Ir})),n.d(e,"RMSPropOptimizer",(function(){return wp})),n.d(e,"Rank",(function(){return Ct})),n.d(e,"Reduction",(function(){return Yc})),n.d(e,"SGDOptimizer",(function(){return vp})),n.d(e,"Square",(function(){return"Square"})),n.d(e,"SquaredDifference",(function(){return xr})),n.d(e,"Tensor",(function(){return xt})),n.d(e,"TensorBuffer",(function(){return vt})),n.d(e,"Tile",(function(){return Er})),n.d(e,"Transpose",(function(){return"Transpose"})),n.d(e,"Variable",(function(){return Dt})),n.d(e,"abs",(function(){return Rr})),n.d(e,"acos",(function(){return Or})),n.d(e,"acosh",(function(){return Fr})),n.d(e,"add",(function(){return Ar})),n.d(e,"addN",(function(){return wl})),n.d(e,"addStrict",(function(){return di})),n.d(e,"all",(function(){return mc})),n.d(e,"any",(function(){return gc})),n.d(e,"argMax",(function(){return yc})),n.d(e,"argMin",(function(){return vc})),n.d(e,"asin",(function(){return Mr})),n.d(e,"asinh",(function(){return Pr})),n.d(e,"atan",(function(){return Lr})),n.d(e,"atan2",(function(){return pi})),n.d(e,"atanh",(function(){return zr})),n.d(e,"avgPool",(function(){return ic})),n.d(e,"avgPool3d",(function(){return sc})),n.d(e,"backend",(function(){return pn})),n.d(e,"backend_util",(function(){return wa})),n.d(e,"basicLSTMCell",(function(){return Fc})),n.d(e,"batchNorm",(function(){return El})),n.d(e,"batchNorm2d",(function(){return Dl})),n.d(e,"batchNorm3d",(function(){return Rl})),n.d(e,"batchNorm4d",(function(){return Ml})),n.d(e,"batchNormalization",(function(){return kl})),n.d(e,"batchNormalization2d",(function(){return Al})),n.d(e,"batchNormalization3d",(function(){return Nl})),n.d(e,"batchNormalization4d",(function(){return Fl})),n.d(e,"batchToSpaceND",(function(){return ar})),n.d(e,"booleanMaskAsync",(function(){return Ru})),n.d(e,"broadcastTo",(function(){return Pl})),n.d(e,"browser",(function(){return sp})),n.d(e,"buffer",(function(){return rr})),n.d(e,"cast",(function(){return or})),n.d(e,"ceil",(function(){return Vr})),n.d(e,"clipByValue",(function(){return Br})),n.d(e,"clone",(function(){return Ll})),n.d(e,"complex",(function(){return Nn})),n.d(e,"concat",(function(){return Zn})),n.d(e,"concat1d",(function(){return Qn})),n.d(e,"concat2d",(function(){return Jn})),n.d(e,"concat3d",(function(){return tr})),n.d(e,"concat4d",(function(){return er})),n.d(e,"conv1d",(function(){return Pu})),n.d(e,"conv2d",(function(){return Lu})),n.d(e,"conv2dTranspose",(function(){return qu})),n.d(e,"conv3d",(function(){return zu})),n.d(e,"conv3dTranspose",(function(){return Gu})),n.d(e,"cos",(function(){return jr})),n.d(e,"cosh",(function(){return Ur})),n.d(e,"cumsum",(function(){return sr})),n.d(e,"customGrad",(function(){return Zi})),n.d(e,"deprecationWarn",(function(){return Ye})),n.d(e,"depthToSpace",(function(){return lr})),n.d(e,"depthwiseConv2d",(function(){return ju})),n.d(e,"diag",(function(){return $c})),n.d(e,"disableDeprecationWarnings",(function(){return Xe})),n.d(e,"dispose",(function(){return nn})),n.d(e,"disposeVariables",(function(){return Ze})),n.d(e,"div",(function(){return Di})),n.d(e,"divNoNan",(function(){return Hl})),n.d(e,"divStrict",(function(){return fi})),n.d(e,"dot",(function(){return Ku})),n.d(e,"dropout",(function(){return Kc})),n.d(e,"elu",(function(){return Ec})),n.d(e,"enableDebugMode",(function(){return Ke})),n.d(e,"enableProdMode",(function(){return $e})),n.d(e,"engine",(function(){return Qe})),n.d(e,"env",(function(){return c})),n.d(e,"equal",(function(){return gu})),n.d(e,"equalStrict",(function(){return yu})),n.d(e,"erf",(function(){return Wr})),n.d(e,"exp",(function(){return Hr})),n.d(e,"expandDims",(function(){return ur})),n.d(e,"expm1",(function(){return qr})),n.d(e,"eye",(function(){return Gl})),n.d(e,"fft",(function(){return Bc})),n.d(e,"fill",(function(){return Gn})),n.d(e,"findBackend",(function(){return cn})),n.d(e,"findBackendFactory",(function(){return hn})),n.d(e,"floor",(function(){return Gr})),n.d(e,"floorDiv",(function(){return mi})),n.d(e,"frame",(function(){return Jc})),n.d(e,"fused",(function(){return Rh})),n.d(e,"gather",(function(){return Tu})),n.d(e,"gatherND",(function(){return Gc})),n.d(e,"gather_util",(function(){return Ni})),n.d(e,"getBackend",(function(){return ln})),n.d(e,"getGradient",(function(){return m})),n.d(e,"getKernel",(function(){return f})),n.d(e,"getKernelsForBackend",(function(){return g})),n.d(e,"grad",(function(){return Gi})),n.d(e,"grads",(function(){return $i})),n.d(e,"greater",(function(){return vu})),n.d(e,"greaterEqual",(function(){return bu})),n.d(e,"greaterEqualStrict",(function(){return wu})),n.d(e,"greaterStrict",(function(){return _u})),n.d(e,"hammingWindow",(function(){return Qc})),n.d(e,"hannWindow",(function(){return Zc})),n.d(e,"ifft",(function(){return jc})),n.d(e,"imag",(function(){return On})),n.d(e,"image",(function(){return Sh})),n.d(e,"inTopKAsync",(function(){return nh})),n.d(e,"io",(function(){return rp})),n.d(e,"irfft",(function(){return Wc})),n.d(e,"isFinite",(function(){return ii})),n.d(e,"isInf",(function(){return ri})),n.d(e,"isNaN",(function(){return ni})),n.d(e,"keep",(function(){return rn})),n.d(e,"leakyRelu",(function(){return Ic})),n.d(e,"less",(function(){return xu})),n.d(e,"lessEqual",(function(){return Cu})),n.d(e,"lessEqualStrict",(function(){return Su})),n.d(e,"lessStrict",(function(){return ku})),n.d(e,"linalg",(function(){return yh})),n.d(e,"linspace",(function(){return $n})),n.d(e,"localResponseNormalization",(function(){return Rc})),n.d(e,"log",(function(){return $r})),n.d(e,"log1p",(function(){return Kr})),n.d(e,"logSigmoid",(function(){return Xr})),n.d(e,"logSoftmax",(function(){return ta})),n.d(e,"logSumExp",(function(){return bc})),n.d(e,"logicalAnd",(function(){return zl})),n.d(e,"logicalNot",(function(){return Vl})),n.d(e,"logicalOr",(function(){return Bl})),n.d(e,"logicalXor",(function(){return jl})),n.d(e,"losses",(function(){return dh})),n.d(e,"matMul",(function(){return $u})),n.d(e,"math",(function(){return ap})),n.d(e,"max",(function(){return wc})),n.d(e,"maxPool",(function(){return rc})),n.d(e,"maxPool3d",(function(){return oc})),n.d(e,"maxPoolWithArgmax",(function(){return lc})),n.d(e,"maximum",(function(){return gi})),n.d(e,"maximumStrict",(function(){return yi})),n.d(e,"mean",(function(){return _c})),n.d(e,"memory",(function(){return Je})),n.d(e,"min",(function(){return xc})),n.d(e,"minimum",(function(){return vi})),n.d(e,"minimumStrict",(function(){return bi})),n.d(e,"mod",(function(){return wi})),n.d(e,"modStrict",(function(){return _i})),n.d(e,"moments",(function(){return Cc})),n.d(e,"movingAverage",(function(){return Pc})),n.d(e,"mul",(function(){return xi})),n.d(e,"mulStrict",(function(){return Ci})),n.d(e,"multiRNNCell",(function(){return Mc})),n.d(e,"multinomial",(function(){return $l})),n.d(e,"neg",(function(){return Yr})),n.d(e,"nextFrame",(function(){return Sp})),n.d(e,"norm",(function(){return Oc})),n.d(e,"notEqual",(function(){return Eu})),n.d(e,"notEqualStrict",(function(){return Iu})),n.d(e,"oneHot",(function(){return Kl})),n.d(e,"ones",(function(){return Hn})),n.d(e,"onesLike",(function(){return Xn})),n.d(e,"op",(function(){return Tn})),n.d(e,"outerProduct",(function(){return Xu})),n.d(e,"pad",(function(){return Xl})),n.d(e,"pad1d",(function(){return Yl})),n.d(e,"pad2d",(function(){return Zl})),n.d(e,"pad3d",(function(){return Ql})),n.d(e,"pad4d",(function(){return Jl})),n.d(e,"pool",(function(){return ac})),n.d(e,"pow",(function(){return Si})),n.d(e,"powStrict",(function(){return ki})),n.d(e,"prelu",(function(){return Ac})),n.d(e,"print",(function(){return ir})),n.d(e,"prod",(function(){return kc})),n.d(e,"profile",(function(){return tn})),n.d(e,"rand",(function(){return tu})),n.d(e,"randomGamma",(function(){return cu})),n.d(e,"randomNormal",(function(){return hu})),n.d(e,"randomUniform",(function(){return du})),n.d(e,"range",(function(){return Kn})),n.d(e,"ready",(function(){return sn})),n.d(e,"real",(function(){return Rn})),n.d(e,"reciprocal",(function(){return Zr})),n.d(e,"registerBackend",(function(){return dn})),n.d(e,"registerGradient",(function(){return v})),n.d(e,"registerKernel",(function(){return y})),n.d(e,"relu",(function(){return Dc})),n.d(e,"relu6",(function(){return Tc})),n.d(e,"removeBackend",(function(){return un})),n.d(e,"reshape",(function(){return cr})),n.d(e,"reverse",(function(){return Yu})),n.d(e,"reverse1d",(function(){return Zu})),n.d(e,"reverse2d",(function(){return Qu})),n.d(e,"reverse3d",(function(){return Ju})),n.d(e,"reverse4d",(function(){return tc})),n.d(e,"rfft",(function(){return Uc})),n.d(e,"round",(function(){return Qr})),n.d(e,"rsqrt",(function(){return Jr})),n.d(e,"scalar",(function(){return Pn})),n.d(e,"scatterND",(function(){return Vc})),n.d(e,"scatter_util",(function(){return Li})),n.d(e,"selu",(function(){return Nc})),n.d(e,"separableConv2d",(function(){return Hu})),n.d(e,"serialization",(function(){return hp})),n.d(e,"setBackend",(function(){return on})),n.d(e,"setPlatform",(function(){return fn})),n.d(e,"setdiff1dAsync",(function(){return mr})),n.d(e,"sigmoid",(function(){return ti})),n.d(e,"sign",(function(){return ei})),n.d(e,"signal",(function(){return eh})),n.d(e,"sin",(function(){return ai})),n.d(e,"sinh",(function(){return oi})),n.d(e,"slice",(function(){return uc})),n.d(e,"slice1d",(function(){return cc})),n.d(e,"slice2d",(function(){return hc})),n.d(e,"slice3d",(function(){return dc})),n.d(e,"slice4d",(function(){return pc})),n.d(e,"slice_util",(function(){return qi})),n.d(e,"softmax",(function(){return Ji})),n.d(e,"softplus",(function(){return si})),n.d(e,"spaceToBatchND",(function(){return hr})),n.d(e,"sparseToDense",(function(){return qc})),n.d(e,"spectral",(function(){return Hc})),n.d(e,"split",(function(){return nr})),n.d(e,"sqrt",(function(){return li})),n.d(e,"square",(function(){return pu})),n.d(e,"squaredDifference",(function(){return fu})),n.d(e,"squaredDifferenceStrict",(function(){return Ei})),n.d(e,"squeeze",(function(){return dr})),n.d(e,"stack",(function(){return pr})),n.d(e,"step",(function(){return ui})),n.d(e,"stft",(function(){return th})),n.d(e,"stridedSlice",(function(){return Lc})),n.d(e,"sub",(function(){return Ii})),n.d(e,"subStrict",(function(){return Ai})),n.d(e,"sum",(function(){return Sc})),n.d(e,"sumOutType",(function(){return Rt})),n.d(e,"tan",(function(){return ci})),n.d(e,"tanh",(function(){return hi})),n.d(e,"tensor",(function(){return Fn})),n.d(e,"tensor1d",(function(){return Ln})),n.d(e,"tensor2d",(function(){return zn})),n.d(e,"tensor3d",(function(){return Vn})),n.d(e,"tensor4d",(function(){return Bn})),n.d(e,"tensor5d",(function(){return jn})),n.d(e,"tensor6d",(function(){return Un})),n.d(e,"tensor_util",(function(){return Lt})),n.d(e,"test_util",(function(){return ou})),n.d(e,"tidy",(function(){return en})),n.d(e,"tile",(function(){return ql})),n.d(e,"time",(function(){return an})),n.d(e,"topk",(function(){return zc})),n.d(e,"train",(function(){return xp})),n.d(e,"transpose",(function(){return ea})),n.d(e,"truncatedNormal",(function(){return mu})),n.d(e,"unregisterGradient",(function(){return w})),n.d(e,"unregisterKernel",(function(){return b})),n.d(e,"unsortedSegmentSum",(function(){return Nu})),n.d(e,"unstack",(function(){return fr})),n.d(e,"util",(function(){return ht})),n.d(e,"valueAndGrad",(function(){return Ki})),n.d(e,"valueAndGrads",(function(){return Xi})),n.d(e,"variable",(function(){return Wn})),n.d(e,"variableGrads",(function(){return Yi})),n.d(e,"version_core",(function(){return"1.7.4"})),n.d(e,"webgl",(function(){return dp})),n.d(e,"where",(function(){return Ul})),n.d(e,"whereAsync",(function(){return Wl})),n.d(e,"zeros",(function(){return qn})),n.d(e,"zerosLike",(function(){return Yn})),n.d(e,"constraints",(function(){return hf})),n.d(e,"initializers",(function(){return ym})),n.d(e,"layers",(function(){return db})),n.d(e,"metrics",(function(){return pb})),n.d(e,"models",(function(){return fb})),n.d(e,"regularizers",(function(){return mb})),n.d(e,"CallbackList",(function(){return qm})),n.d(e,"CustomCallback",(function(){return Km})),n.d(e,"History",(function(){return $m})),n.d(e,"Callback",(function(){return gb})),n.d(e,"callbacks",(function(){return xb})),n.d(e,"EarlyStopping",(function(){return _b})),n.d(e,"InputSpec",(function(){return Om})),n.d(e,"SymbolicTensor",(function(){return Fm})),n.d(e,"LayersModel",(function(){return ey})),n.d(e,"input",(function(){return sy})),n.d(e,"loadLayersModel",(function(){return oy})),n.d(e,"model",(function(){return iy})),n.d(e,"registerCallbackConstructor",(function(){return ly})),n.d(e,"sequential",(function(){return ay})),n.d(e,"RNN",(function(){return qv})),n.d(e,"Sequential",(function(){return ry})),n.d(e,"LayerVariable",(function(){return Am})),n.d(e,"version_layers",(function(){return"1.7.4"})),n.d(e,"GraphModel",(function(){return Bw})),n.d(e,"loadGraphModel",(function(){return jw})),n.d(e,"deregisterOp",(function(){return Db})),n.d(e,"registerOp",(function(){return Ib})),n.d(e,"version_converter",(function(){return"1.7.4"})),n.d(e,"data",(function(){return r}));var hx={"tfjs-core":"1.7.4","tfjs-data":cx,"tfjs-layers":"1.7.4","tfjs-converter":"1.7.4",tfjs:"1.7.4"}},vdEC:function(t,e,n){var r=n("e+GP");function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}t.exports=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=i();if(e&&e.has(t))return e.get(t);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=a?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}},wcNg:function(t,e,n){var r=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(N){l=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var i=Object.create((e&&e.prototype instanceof g?e:g).prototype),a=new A(r||[]);return i._invoke=function(t,e,n){var r=h;return function(i,a){if(r===p)throw new Error("Generator is already running");if(r===f){if("throw"===i)throw a;return T()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=k(o,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var l=c(t,e,n);if("normal"===l.type){if(r=n.done?f:d,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r=f,n.method="throw",n.arg=l.arg)}}}(t,n,a),i}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(N){return{type:"throw",arg:N}}}t.wrap=u;var h="suspendedStart",d="suspendedYield",p="executing",f="completed",m={};function g(){}function y(){}function v(){}var b={};b[a]=function(){return this};var w=Object.getPrototypeOf,_=w&&w(w(D([])));_&&_!==n&&r.call(_,a)&&(b=_);var x=v.prototype=g.prototype=Object.create(b);function C(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){var n;this._invoke=function(i,a){function o(){return new e((function(n,o){!function n(i,a,o,s){var l=c(t[i],t,a);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==typeof h&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,o,s)}),(function(t){n("throw",t,o,s)})):e.resolve(h).then((function(t){u.value=t,o(u)}),(function(t){return n("throw",t,o,s)}))}s(l.arg)}(i,a,n,o)}))}return n=n?n.then(o,o):o()}}function k(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=c(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function D(t){if(t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}return{next:T}}function T(){return{value:e,done:!0}}return y.prototype=x.constructor=v,v.constructor=y,y.displayName=l(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,l(t,s,"GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},C(S.prototype),S.prototype[o]=function(){return this},t.AsyncIterator=S,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new S(u(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},C(x),l(x,s,"Generator"),x[a]=function(){return this},x.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=D,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),I(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:D(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}(t.exports);try{regeneratorRuntime=r}catch(i){Function("r","regeneratorRuntime = r")(r)}},yLV6:function(t,e,n){var r;!function(i,a,o,s){"use strict";var l,u=["","webkit","Moz","MS","ms","o"],c=a.createElement("div"),h="function",d=Math.round,p=Math.abs,f=Date.now;function m(t,e,n){return setTimeout(x(t,n),e)}function g(t,e,n){return!!Array.isArray(t)&&(y(t,n[e],n),!0)}function y(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==s)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function v(t,e,n){var r="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",a=i.console&&(i.console.warn||i.console.log);return a&&a.call(i.console,r,n),t.apply(this,arguments)}}l="function"!=typeof Object.assign?function(t){if(t===s||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==s&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}:Object.assign;var b=v((function(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;)(!n||n&&t[r[i]]===s)&&(t[r[i]]=e[r[i]]),i++;return t}),"extend","Use `assign`."),w=v((function(t,e){return b(t,e,!0)}),"merge","Use `assign`.");function _(t,e,n){var r,i=e.prototype;(r=t.prototype=Object.create(i)).constructor=t,r._super=i,n&&l(r,n)}function x(t,e){return function(){return t.apply(e,arguments)}}function C(t,e){return typeof t==h?t.apply(e&&e[0]||s,e):t}function S(t,e){return t===s?e:t}function k(t,e,n){y(D(e),(function(e){t.addEventListener(e,n,!1)}))}function E(t,e,n){y(D(e),(function(e){t.removeEventListener(e,n,!1)}))}function I(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function A(t,e){return t.indexOf(e)>-1}function D(t){return t.trim().split(/\s+/g)}function T(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}function N(t){return Array.prototype.slice.call(t,0)}function R(t,e,n){for(var r=[],i=[],a=0;a<t.length;){var o=e?t[a][e]:t[a];T(i,o)<0&&r.push(t[a]),i[a]=o,a++}return n&&(r=e?r.sort((function(t,n){return t[e]>n[e]})):r.sort()),r}function O(t,e){for(var n,r,i=e[0].toUpperCase()+e.slice(1),a=0;a<u.length;){if((r=(n=u[a])?n+i:e)in t)return r;a++}return s}var F=1;function M(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||i}var P="ontouchstart"in i,L=O(i,"PointerEvent")!==s,z=P&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),V=25,B=1,j=2,U=4,W=8,H=1,q=2,G=4,$=8,K=16,X=q|G,Y=$|K,Z=X|Y,Q=["x","y"],J=["clientX","clientY"];function tt(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){C(t.options.enable,[t])&&n.handler(e)},this.init()}function et(t,e,n){var r=n.pointers.length,i=n.changedPointers.length,a=e&B&&r-i==0,o=e&(U|W)&&r-i==0;n.isFirst=!!a,n.isFinal=!!o,a&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,r=e.pointers,i=r.length;n.firstInput||(n.firstInput=nt(e)),i>1&&!n.firstMultiple?n.firstMultiple=nt(e):1===i&&(n.firstMultiple=!1);var a=n.firstInput,o=n.firstMultiple,l=o?o.center:a.center,u=e.center=rt(r);e.timeStamp=f(),e.deltaTime=e.timeStamp-a.timeStamp,e.angle=st(l,u),e.distance=ot(l,u),function(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},a=t.prevInput||{};e.eventType!==B&&a.eventType!==U||(i=t.prevDelta={x:a.deltaX||0,y:a.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)}(n,e),e.offsetDirection=at(e.deltaX,e.deltaY);var c,h,d=it(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=d.x,e.overallVelocityY=d.y,e.overallVelocity=p(d.x)>p(d.y)?d.x:d.y,e.scale=o?(c=o.pointers,ot((h=r)[0],h[1],J)/ot(c[0],c[1],J)):1,e.rotation=o?function(t,e){return st(e[1],e[0],J)+st(t[1],t[0],J)}(o.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,r,i,a,o=t.lastInterval||e,l=e.timeStamp-o.timeStamp;if(e.eventType!=W&&(l>V||o.velocity===s)){var u=e.deltaX-o.deltaX,c=e.deltaY-o.deltaY,h=it(l,u,c);r=h.x,i=h.y,n=p(h.x)>p(h.y)?h.x:h.y,a=at(u,c),t.lastInterval=e}else n=o.velocity,r=o.velocityX,i=o.velocityY,a=o.direction;e.velocity=n,e.velocityX=r,e.velocityY=i,e.direction=a}(n,e);var m=t.element;I(e.srcEvent.target,m)&&(m=e.srcEvent.target),e.target=m}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function nt(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:d(t.pointers[n].clientX),clientY:d(t.pointers[n].clientY)},n++;return{timeStamp:f(),pointers:e,center:rt(e),deltaX:t.deltaX,deltaY:t.deltaY}}function rt(t){var e=t.length;if(1===e)return{x:d(t[0].clientX),y:d(t[0].clientY)};for(var n=0,r=0,i=0;i<e;)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:d(n/e),y:d(r/e)}}function it(t,e,n){return{x:e/t||0,y:n/t||0}}function at(t,e){return t===e?H:p(t)>=p(e)?t<0?q:G:e<0?$:K}function ot(t,e,n){n||(n=Q);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)}function st(t,e,n){return n||(n=Q),180*Math.atan2(e[n[1]]-t[n[1]],e[n[0]]-t[n[0]])/Math.PI}tt.prototype={handler:function(){},init:function(){this.evEl&&k(this.element,this.evEl,this.domHandler),this.evTarget&&k(this.target,this.evTarget,this.domHandler),this.evWin&&k(M(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&E(this.element,this.evEl,this.domHandler),this.evTarget&&E(this.target,this.evTarget,this.domHandler),this.evWin&&E(M(this.element),this.evWin,this.domHandler)}};var lt={mousedown:B,mousemove:j,mouseup:U},ut="mousedown",ct="mousemove mouseup";function ht(){this.evEl=ut,this.evWin=ct,this.pressed=!1,tt.apply(this,arguments)}_(ht,tt,{handler:function(t){var e=lt[t.type];e&B&&0===t.button&&(this.pressed=!0),e&j&&1!==t.which&&(e=U),this.pressed&&(e&U&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var dt={pointerdown:B,pointermove:j,pointerup:U,pointercancel:W,pointerout:W},pt={2:"touch",3:"pen",4:"mouse",5:"kinect"},ft="pointerdown",mt="pointermove pointerup pointercancel";function gt(){this.evEl=ft,this.evWin=mt,tt.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}i.MSPointerEvent&&!i.PointerEvent&&(ft="MSPointerDown",mt="MSPointerMove MSPointerUp MSPointerCancel"),_(gt,tt,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=dt[r],a=pt[t.pointerType]||t.pointerType,o="touch"==a,s=T(e,t.pointerId,"pointerId");i&B&&(0===t.button||o)?s<0&&(e.push(t),s=e.length-1):i&(U|W)&&(n=!0),s<0||(e[s]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:a,srcEvent:t}),n&&e.splice(s,1))}});var yt={touchstart:B,touchmove:j,touchend:U,touchcancel:W},vt="touchstart",bt="touchstart touchmove touchend touchcancel";function wt(){this.evTarget=vt,this.evWin=bt,this.started=!1,tt.apply(this,arguments)}function _t(t,e){var n=N(t.touches),r=N(t.changedTouches);return e&(U|W)&&(n=R(n.concat(r),"identifier",!0)),[n,r]}_(wt,tt,{handler:function(t){var e=yt[t.type];if(e===B&&(this.started=!0),this.started){var n=_t.call(this,t,e);e&(U|W)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}}});var xt={touchstart:B,touchmove:j,touchend:U,touchcancel:W},Ct="touchstart touchmove touchend touchcancel";function St(){this.evTarget=Ct,this.targetIds={},tt.apply(this,arguments)}function kt(t,e){var n=N(t.touches),r=this.targetIds;if(e&(B|j)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,a,o=N(t.changedTouches),s=[],l=this.target;if(a=n.filter((function(t){return I(t.target,l)})),e===B)for(i=0;i<a.length;)r[a[i].identifier]=!0,i++;for(i=0;i<o.length;)r[o[i].identifier]&&s.push(o[i]),e&(U|W)&&delete r[o[i].identifier],i++;return s.length?[R(a.concat(s),"identifier",!0),s]:void 0}_(St,tt,{handler:function(t){var e=xt[t.type],n=kt.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}});var Et=2500,It=25;function At(){tt.apply(this,arguments);var t=x(this.handler,this);this.touch=new St(this.manager,t),this.mouse=new ht(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function Dt(t,e){t&B?(this.primaryTouch=e.changedPointers[0].identifier,Tt.call(this,e)):t&(U|W)&&Tt.call(this,e)}function Tt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout((function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)}),Et)}}function Nt(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],a=Math.abs(e-i.x),o=Math.abs(n-i.y);if(a<=It&&o<=It)return!0}return!1}_(At,tt,{handler:function(t,e,n){var r="mouse"==n.pointerType;if(!(r&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if("touch"==n.pointerType)Dt.call(this,e,n);else if(r&&Nt.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Rt=O(c.style,"touchAction"),Ot=Rt!==s,Ft=function(){if(!Ot)return!1;var t={},e=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){t[n]=!e||i.CSS.supports("touch-action",n)})),t}();function Mt(t,e){this.manager=t,this.set(e)}Mt.prototype={set:function(t){"compute"==t&&(t=this.compute()),Ot&&this.manager.element.style&&Ft[t]&&(this.manager.element.style[Rt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return y(this.manager.recognizers,(function(e){C(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(A(t,"none"))return"none";var e=A(t,"pan-x"),n=A(t,"pan-y");return e&&n?"none":e||n?e?"pan-x":"pan-y":A(t,"manipulation")?"manipulation":"auto"}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var r=this.actions,i=A(r,"none")&&!Ft.none,a=A(r,"pan-y")&&!Ft["pan-y"],o=A(r,"pan-x")&&!Ft["pan-x"];if(i&&1===t.pointers.length&&t.distance<2&&t.deltaTime<250)return;if(!o||!a)return i||a&&n&X||o&&n&Y?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Pt=1,Lt=2,zt=4,Vt=8,Bt=Vt,jt=16;function Ut(t){this.options=l({},this.defaults,t||{}),this.id=F++,this.manager=null,this.options.enable=S(this.options.enable,!0),this.state=Pt,this.simultaneous={},this.requireFail=[]}function Wt(t){return t&jt?"cancel":t&Vt?"end":t&zt?"move":t&Lt?"start":""}function Ht(t){return t==K?"down":t==$?"up":t==q?"left":t==G?"right":""}function qt(t,e){var n=e.manager;return n?n.get(t):t}function Gt(){Ut.apply(this,arguments)}function $t(){Gt.apply(this,arguments),this.pX=null,this.pY=null}function Kt(){Gt.apply(this,arguments)}function Xt(){Ut.apply(this,arguments),this._timer=null,this._input=null}function Yt(){Gt.apply(this,arguments)}function Zt(){Gt.apply(this,arguments)}function Qt(){Ut.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Jt(t,e){return(e=e||{}).recognizers=S(e.recognizers,Jt.defaults.preset),new te(t,e)}function te(t,e){var n;this.options=l({},Jt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((n=this).options.inputClass||(L?gt:z?St:P?At:ht))(n,et),this.touchAction=new Mt(this,this.options.touchAction),ee(this,!0),y(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function ee(t,e){var n,r=t.element;r.style&&(y(t.options.cssProps,(function(i,a){n=O(r.style,a),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""})),e||(t.oldCssProps={}))}Ut.prototype={defaults:{},set:function(t){return l(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(g(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=qt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return g(t,"dropRecognizeWith",this)?this:(t=qt(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(g(t,"requireFailure",this))return this;var e=this.requireFail;return-1===T(e,t=qt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(g(t,"dropRequireFailure",this))return this;t=qt(t,this);var e=T(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function r(n){e.manager.emit(n,t)}n<Vt&&r(e.options.event+Wt(n)),r(e.options.event),t.additionalEvent&&r(t.additionalEvent),n>=Vt&&r(e.options.event+Wt(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|Pt)))return!1;t++}return!0},recognize:function(t){var e=l({},t);if(!C(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(Bt|jt|32)&&(this.state=Pt),this.state=this.process(e),this.state&(Lt|zt|Vt|jt)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},_(Gt,Ut,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=e&(Lt|zt),i=this.attrTest(t);return r&&(n&W||!i)?e|jt:r||i?n&U?e|Vt:e&Lt?e|zt:Lt:32}}),_($t,Gt,{defaults:{event:"pan",threshold:10,pointers:1,direction:Z},getTouchAction:function(){var t=this.options.direction,e=[];return t&X&&e.push("pan-y"),t&Y&&e.push("pan-x"),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,a=t.deltaX,o=t.deltaY;return i&e.direction||(e.direction&X?(i=0===a?H:a<0?q:G,n=a!=this.pX,r=Math.abs(t.deltaX)):(i=0===o?H:o<0?$:K,n=o!=this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},attrTest:function(t){return Gt.prototype.attrTest.call(this,t)&&(this.state&Lt||!(this.state&Lt)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Ht(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),_(Kt,Gt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&Lt)},emit:function(t){1!==t.scale&&(t.additionalEvent=this.options.event+(t.scale<1?"in":"out")),this._super.emit.call(this,t)}}),_(Xt,Ut,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime>e.time;if(this._input=t,!r||!n||t.eventType&(U|W)&&!i)this.reset();else if(t.eventType&B)this.reset(),this._timer=m((function(){this.state=Bt,this.tryEmit()}),e.time,this);else if(t.eventType&U)return Bt;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===Bt&&(t&&t.eventType&U?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=f(),this.manager.emit(this.options.event,this._input)))}}),_(Yt,Gt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&Lt)}}),_(Zt,Gt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:X|Y,pointers:1},getTouchAction:function(){return $t.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(X|Y)?e=t.overallVelocity:n&X?e=t.overallVelocityX:n&Y&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&p(e)>this.options.velocity&&t.eventType&U},emit:function(t){var e=Ht(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),_(Qt,Ut,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return["manipulation"]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime<e.time;if(this.reset(),t.eventType&B&&0===this.count)return this.failTimeout();if(r&&i&&n){if(t.eventType!=U)return this.failTimeout();var a=!this.pTime||t.timeStamp-this.pTime<e.interval,o=!this.pCenter||ot(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,o&&a?this.count+=1:this.count=1,this._input=t,0==this.count%e.taps)return this.hasRequireFailures()?(this._timer=m((function(){this.state=Bt,this.tryEmit()}),e.interval,this),Lt):Bt}return 32},failTimeout:function(){return this._timer=m((function(){this.state=32}),this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Bt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Jt.VERSION="2.0.7",Jt.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[Yt,{enable:!1}],[Kt,{enable:!1},["rotate"]],[Zt,{direction:X}],[$t,{direction:X},["swipe"]],[Qt],[Qt,{event:"doubletap",taps:2},["tap"]],[Xt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},te.prototype={set:function(t){return l(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var r=this.recognizers,i=e.curRecognizer;(!i||i&&i.state&Bt)&&(i=e.curRecognizer=null);for(var a=0;a<r.length;)n=r[a],2===e.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&n.state&(Lt|zt|Vt)&&(i=e.curRecognizer=n),a++}},get:function(t){if(t instanceof Ut)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(g(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(g(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=T(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==s&&e!==s){var n=this.handlers;return y(D(t),(function(t){n[t]=n[t]||[],n[t].push(e)})),this}},off:function(t,e){if(t!==s){var n=this.handlers;return y(D(t),(function(t){e?n[t]&&n[t].splice(T(n[t],e),1):delete n[t]})),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var n=a.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](e),r++}},destroy:function(){this.element&&ee(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},l(Jt,{INPUT_START:B,INPUT_MOVE:j,INPUT_END:U,INPUT_CANCEL:W,STATE_POSSIBLE:Pt,STATE_BEGAN:Lt,STATE_CHANGED:zt,STATE_ENDED:Vt,STATE_RECOGNIZED:Bt,STATE_CANCELLED:jt,STATE_FAILED:32,DIRECTION_NONE:H,DIRECTION_LEFT:q,DIRECTION_RIGHT:G,DIRECTION_UP:$,DIRECTION_DOWN:K,DIRECTION_HORIZONTAL:X,DIRECTION_VERTICAL:Y,DIRECTION_ALL:Z,Manager:te,Input:tt,TouchAction:Mt,TouchInput:St,MouseInput:ht,PointerEventInput:gt,TouchMouseInput:At,SingleTouchInput:wt,Recognizer:Ut,AttrRecognizer:Gt,Tap:Qt,Pan:$t,Swipe:Zt,Pinch:Kt,Rotate:Yt,Press:Xt,on:k,off:E,each:y,merge:w,extend:b,assign:l,inherit:_,bindFn:x,prefixed:O}),(void 0!==i?i:"undefined"!=typeof self?self:{}).Hammer=Jt,(r=(function(){return Jt}).call(e,n,e,t))===s||(t.exports=r)}(window,document)},zUCq:function(t,e,n){"use strict";var r=n("vdEC"),i=n("63Ad");Object.defineProperty(e,"__esModule",{value:!0}),e.ClassificationModel=e.ObjectDetectionModel=void 0;var a=i(n("nxTg")),o=i(n("K4DB")),s=i(n("+IV6")),l=i(n("eef+")),u=i(n("NthX")),c=i(n("fFdx")),h=i(n("SDJZ")),d=i(n("NToG")),p=r(n("oRHb")),f=function(){function t(){(0,h.default)(this,t)}var e,n;return(0,d.default)(t,[{key:"loadModelAsync",value:(n=(0,c.default)(u.default.mark((function t(e){var n,r=arguments;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:null,t.next=3,p.loadGraphModel(e,n);case 3:this.model=t.sent;case 4:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"dispose",value:function(){this.model.dispose()}},{key:"executeAsync",value:(e=(0,c.default)(u.default.mark((function t(e){var n,r;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e instanceof p.Tensor?e:this._preprocess(p.browser.fromPixels(e,3)),r=this.model.execute(n),t.t0=this,t.next=5,r.array();case 5:return t.t1=t.sent,t.next=8,t.t0._postprocess.call(t.t0,t.t1);case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]),t}();e.ObjectDetectionModel=function(t){function e(){var t;return(0,h.default)(this,e),(t=(0,o.default)(this,(0,s.default)(e).call(this))).ANCHORS=[.573,.677,1.87,2.06,3.34,5.47,7.88,3.53,9.77,9.17],t.INPUT_SIZE=416,t}var n;return(0,l.default)(e,t),(0,d.default)(e,[{key:"_preprocess",value:function(t){return p.image.resizeBilinear(t.expandDims().toFloat(),[this.INPUT_SIZE,this.INPUT_SIZE]).reverse(-1)}},{key:"_postprocess",value:(n=(0,c.default)(u.default.mark((function t(e){var n,r,i,a,o,s,l,c,h,d,f,m,g,y,v,b,w,_,x;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=e[0].length,i=e[0][0].length,a=e[0][0][0].length/(n=this.ANCHORS.length/2)-5,o=[],s=[],l=[],c=0;c<r;c++)for(h=0;h<i;h++)for(d=0,f=0;f<n;f++)m=(this._logistic(e[0][c][h][d++])+h)/i,g=(this._logistic(e[0][c][h][d++])+c)/r,y=Math.exp(e[0][c][h][d++])*this.ANCHORS[2*f]/i,v=Math.exp(e[0][c][h][d++])*this.ANCHORS[2*f+1]/r,b=p.scalar(this._logistic(e[0][c][h][d++])),w=p.tensor1d(e[0][c][h].slice(d,d+a)).softmax(),d+=a,w=w.mul(b),_=w.argMax(),o.push([m-y/2,g-v/2,m+y/2,g+v/2]),s.push(w.max().dataSync()[0]),l.push(_.dataSync()[0]);return o=p.tensor2d(o),s=p.tensor1d(s),l=p.tensor1d(l),t.next=14,p.image.nonMaxSuppressionAsync(o,s,10);case 14:return x=t.sent,t.next=17,o.gather(x).array();case 17:return t.t0=t.sent,t.next=20,s.gather(x).array();case 20:return t.t1=t.sent,t.next=23,l.gather(x).array();case 23:return t.t2=t.sent,t.abrupt("return",[t.t0,t.t1,t.t2]);case 25:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"_logistic",value:function(t){if(t>0)return 1/(1+Math.exp(-t));var e=Math.exp(t);return e/(1+e)}}]),e}(f),e.ClassificationModel=function(t){function e(){var t;return(0,h.default)(this,e),(t=(0,o.default)(this,(0,s.default)(e).call(this))).INPUT_SIZE=224,t}var n;return(0,l.default)(e,t),(0,d.default)(e,[{key:"_postprocess",value:(n=(0,c.default)(u.default.mark((function t(e){return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e);case 1:case"end":return t.stop()}}),t)}))),function(t){return n.apply(this,arguments)})},{key:"_preprocess",value:function(t){var e=t.shape.slice(0,2),n=(0,a.default)(e,2),r=n[0],i=n[1],o=r>i?(r-i)/2:0,s=r>i?0:(i-r)/2,l=Math.min(r,i);return p.image.cropAndResize(t.expandDims().toFloat(),[[o/r,s/i,(o+l)/r,(s+l)/i]],[0],[this.INPUT_SIZE,this.INPUT_SIZE]).reverse(-1)}}]),e}(f)},zUnb:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.r(e),n("yLV6");let i=!1;const a={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=t},get useDeprecatedSynchronousErrorHandling(){return i}};function o(t){setTimeout(()=>{throw t})}const s={closed:!0,next(t){},error(t){if(a.useDeprecatedSynchronousErrorHandling)throw t;o(t)},complete(){}},l=Array.isArray||(t=>t&&"number"==typeof t.length);function u(t){return null!==t&&"object"==typeof t}function c(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}c.prototype=Object.create(Error.prototype);const h=c;let d=(()=>{class t{constructor(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}unsubscribe(){let t,e=!1;if(this.closed)return;let{_parent:n,_parents:i,_unsubscribe:a,_subscriptions:o}=this;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;let s=-1,c=i?i.length:0;for(;n;)n.remove(this),n=++s<c&&i[s]||null;if(r(a))try{a.call(this)}catch(d){e=!0,t=d instanceof h?p(d.errors):[d]}if(l(o))for(s=-1,c=o.length;++s<c;){const n=o[s];if(u(n))try{n.unsubscribe()}catch(d){e=!0,t=t||[],d instanceof h?t=t.concat(p(d.errors)):t.push(d)}}if(e)throw new h(t)}add(e){let n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;(n=new t)._subscriptions=[e]}break;default:if(!e)return t.EMPTY;throw new Error("unrecognized teardown "+e+" added to Subscription.")}if(n._addParent(this)){const t=this._subscriptions;t?t.push(n):this._subscriptions=[n]}return n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}_addParent(t){let{_parent:e,_parents:n}=this;return e!==t&&(e?n?-1===n.indexOf(t)&&(n.push(t),!0):(this._parents=[t],!0):(this._parent=t,!0))}}return t.EMPTY=function(t){return t.closed=!0,t}(new t),t})();function p(t){return t.reduce((t,e)=>t.concat(e instanceof h?e.errors:e),[])}const f="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class m extends d{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=s;break;case 1:if(!t){this.destination=s;break}if("object"==typeof t){t instanceof m?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new g(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new g(this,t,e,n)}}[f](){return this}static create(t,e,n){const r=new m(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parent:t,_parents:e}=this;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this}}class g extends m{constructor(t,e,n,i){let a;super(),this._parentSubscriber=t;let o=this;r(e)?a=e:e&&(a=e.next,n=e.error,i=e.complete,e!==s&&(r((o=Object.create(e)).unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=a,this._error=n,this._complete=i}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):o(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;o(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.useDeprecatedSynchronousErrorHandling)throw n;o(n)}}__tryOrSetError(t,e,n){if(!a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(o(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const y="function"==typeof Symbol&&Symbol.observable||"@@observable";function v(){}function b(...t){return w(t)}function w(t){return t?1===t.length?t[0]:function(e){return t.reduce((t,e)=>e(t),e)}:v}let _=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:r}=this,i=function(t,e,n){if(t){if(t instanceof m)return t;if(t[f])return t[f]()}return t||e||n?new m(t,e,n):new m(s)}(t,e,n);if(i.add(r?r.call(i,this.source):this.source||a.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),a.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}_trySubscribe(t){try{return this._subscribe(t)}catch(e){a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:r}=t;if(e||r)return!1;t=n&&n instanceof m?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=x(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[y](){return this}pipe(...t){return 0===t.length?this:w(t)(this)}toPromise(t){return new(t=x(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function x(t){if(t||(t=a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}function C(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}C.prototype=Object.create(Error.prototype);const S=C;class k extends d{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}class E extends m{constructor(t){super(t),this.destination=t}}let I=(()=>{class t extends _{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[f](){return new E(this)}lift(t){const e=new A(this,this);return e.operator=t,e}next(t){if(this.closed)throw new S;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new S;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new S;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new S;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new S;return this.hasError?(t.error(this.thrownError),d.EMPTY):this.isStopped?(t.complete(),d.EMPTY):(this.observers.push(t),new k(this,t))}asObservable(){const t=new _;return t.source=this,t}}return t.create=(t,e)=>new A(t,e),t})();class A extends I{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):d.EMPTY}}function D(t){return t&&"function"==typeof t.schedule}class T extends m{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}const N=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.closed||e.complete()},R=t=>e=>(t.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,o),e);function O(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const F=O(),M=t=>e=>{const n=t[F]();for(;;){const t=n.next();if(t.done){e.complete();break}if(e.next(t.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e},P=t=>e=>{const n=t[y]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)},L=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function z(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const V=t=>{if(t instanceof _)return e=>t._isScalar?(e.next(t.value),void e.complete()):t.subscribe(e);if(t&&"function"==typeof t[y])return P(t);if(L(t))return N(t);if(z(t))return R(t);if(t&&"function"==typeof t[F])return M(t);{const e=u(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected.`+" You can provide an Observable, Promise, Array, or Iterable.")}};function B(t,e,n,r,i=new T(t,n,r)){if(!i.closed)return V(e)(i)}class j extends m{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}function U(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new W(t,e))}}class W{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new H(t,this.project,this.thisArg))}}class H extends m{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}function q(t,e){return new _(e?n=>{const r=new d;let i=0;return r.add(e.schedule((function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()}))),r}:N(t))}function G(t,e){if(!e)return t instanceof _?t:new _(V(t));if(null!=t){if(function(t){return t&&"function"==typeof t[y]}(t))return function(t,e){return new _(e?n=>{const r=new d;return r.add(e.schedule(()=>{const i=t[y]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r}:P(t))}(t,e);if(z(t))return function(t,e){return new _(e?n=>{const r=new d;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r}:R(t))}(t,e);if(L(t))return q(t,e);if(function(t){return t&&"function"==typeof t[F]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new _(e?n=>{const r=new d;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[F](),r.add(e.schedule((function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())})))})),r}:M(t))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}function $(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe($((n,r)=>G(t(n,r)).pipe(U((t,i)=>e(n,t,r,i))),n)):("number"==typeof e&&(n=e),e=>e.lift(new K(t,n)))}class K{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new X(t,this.project,this.concurrent))}}class X extends j{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e,t,n)}_innerSub(t,e,n){const r=new T(this,void 0,void 0);this.destination.add(r),B(this,t,e,n,r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t,e,n,r,i){this.destination.next(e)}notifyComplete(t){const e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function Y(t){return t}function Z(t=Number.POSITIVE_INFINITY){return $(Y,t)}function Q(...t){let e=Number.POSITIVE_INFINITY,n=null,r=t[t.length-1];return D(r)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof r&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof _?t[0]:Z(e)(q(t,n))}function J(){return function(t){return t.lift(new tt(t))}}class tt{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new et(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class et extends m{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}const nt=class extends _{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new d).add(this.source.subscribe(new it(this.getSubject(),this))),t.closed?(this._connection=null,t=d.EMPTY):this._connection=t),t}refCount(){return J()(this)}}.prototype,rt={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:nt._subscribe},_isComplete:{value:nt._isComplete,writable:!0},getSubject:{value:nt.getSubject},connect:{value:nt.connect},refCount:{value:nt.refCount}};class it extends E{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function at(){return new I}const ot="__parameters__";function st(t,e,n){const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(ot)?t[ot]:Object.defineProperty(t,ot,{value:[]})[ot];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i}const lt=st("Inject",t=>({token:t})),ut=st("Optional"),ct=st("Self"),ht=st("SkipSelf");var dt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function pt(t){for(let e in t)if(t[e]===pt)return e;throw Error("Could not find renamed property on target object.")}function ft(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function mt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}const gt=mt;function yt(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function vt(t){const e=t[wt];return e&&e.token===t?e:null}function bt(t){return t&&t.hasOwnProperty(_t)?t[_t]:null}const wt=pt({ngInjectableDef:pt}),_t=pt({ngInjectorDef:pt});function xt(t){if("string"==typeof t)return t;if(t instanceof Array)return"["+t.map(xt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}const Ct=pt({__forward_ref__:pt});function St(t){return t.__forward_ref__=St,t.toString=function(){return xt(this())},t}function kt(t){const e=t;return"function"==typeof e&&e.hasOwnProperty(Ct)&&e.__forward_ref__===St?e():t}const Et="undefined"!=typeof globalThis&&globalThis,It="undefined"!=typeof window&&window,At="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Dt="undefined"!=typeof global&&global,Tt=Et||Dt||It||At;class Nt{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.ngInjectableDef=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.ngInjectableDef=mt({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Rt=new Nt("INJECTOR",-1),Ot=new Object,Ft="ngTempTokenPath",Mt="ngTokenPath",Pt=/\n/gm,Lt="\u0275",zt="__source",Vt=pt({provide:String,useValue:pt});let Bt,jt=void 0;function Ut(t){const e=jt;return jt=t,e}function Wt(t){const e=Bt;return Bt=t,e}function Ht(t,e=dt.Default){if(void 0===jt)throw new Error("inject() must be called from an injection context");return null===jt?$t(t,void 0,e):jt.get(t,e&dt.Optional?null:void 0,e)}function qt(t,e=dt.Default){return(Bt||Ht)(t,e)}const Gt=qt;function $t(t,e,n){const r=vt(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&dt.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${xt(t)}]`)}function Kt(t){const e=[];for(let n=0;n<t.length;n++){const r=kt(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t=void 0,n=dt.Default;for(let e=0;e<r.length;e++){const i=r[e];i instanceof ut||"Optional"===i.ngMetadataName||i===ut?n|=dt.Optional:i instanceof ht||"SkipSelf"===i.ngMetadataName||i===ht?n|=dt.SkipSelf:i instanceof ct||"Self"===i.ngMetadataName||i===ct?n|=dt.Self:t=i instanceof lt||i===lt?i.token:i}e.push(qt(t,n))}else e.push(qt(r))}return e}class Xt{get(t,e=Ot){if(e===Ot){const e=new Error(`NullInjectorError: No provider for ${xt(t)}!`);throw e.name="NullInjectorError",e}return e}}class Yt{}class Zt{}function Qt(t,e){t.forEach(t=>Array.isArray(t)?Qt(t,e):e(t))}function Jt(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function te(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}const ee=function(){var t={OnPush:0,Default:1};return t[t.OnPush]="OnPush",t[t.Default]="Default",t}(),ne=function(){var t={Emulated:0,Native:1,None:2,ShadowDom:3};return t[t.Emulated]="Emulated",t[t.Native]="Native",t[t.None]="None",t[t.ShadowDom]="ShadowDom",t}(),re={},ie=[],ae=pt({ngComponentDef:pt}),oe=pt({ngDirectiveDef:pt}),se=pt({ngPipeDef:pt}),le=pt({ngModuleDef:pt}),ue=pt({ngLocaleIdDef:pt}),ce=pt({__NG_ELEMENT_ID__:pt});let he=0;function de(t){const e=t.type,n=e.prototype,r={},i={type:e,providersResolver:null,consts:t.consts,vars:t.vars,factory:t.factory,template:t.template||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:t.exportAs||null,onChanges:null,onInit:n.ngOnInit||null,doCheck:n.ngDoCheck||null,afterContentInit:n.ngAfterContentInit||null,afterContentChecked:n.ngAfterContentChecked||null,afterViewInit:n.ngAfterViewInit||null,afterViewChecked:n.ngAfterViewChecked||null,onDestroy:n.ngOnDestroy||null,onPush:t.changeDetection===ee.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||ne.Emulated,id:"c",styles:t.styles||ie,_:null,setInput:null,schemas:t.schemas||null,tView:null};return i._=""+{toString:()=>{const n=t.directives,a=t.features,o=t.pipes;i.id+=he++,i.inputs=ge(t.inputs,r),i.outputs=ge(t.outputs),a&&a.forEach(t=>t(i)),i.directiveDefs=n?()=>("function"==typeof n?n():n).map(pe):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(fe):null,e.hasOwnProperty(wt)||(e[wt]=mt({token:e,factory:t.factory}))}},i}function pe(t){return be(t)||we(t)}function fe(t){return _e(t)}function me(t){return{type:t.type,bootstrap:t.bootstrap||ie,declarations:t.declarations||ie,imports:t.imports||ie,exports:t.exports||ie,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}}function ge(t,e){if(null==t)return re;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],a=i;Array.isArray(i)&&(a=i[1],i=i[0]),n[i]=r,e&&(e[i]=a)}return n}const ye=de;function ve(t){return{name:t.name,factory:t.factory,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function be(t){return t[ae]||null}function we(t){return t[oe]||null}function _e(t){return t[se]||null}function xe(t,e){const n=t[le]||null;if(!n&&!0===e)throw new Error(`Type ${xt(t)} does not have 'ngModuleDef' property.`);return n}const Ce=0,Se=1,ke=2,Ee=3,Ie=4,Ae=5,De=6,Te=7,Ne=8,Re=9,Oe=10,Fe=11,Me=12,Pe=13,Le=14,ze=15,Ve=16,Be=17,je=18,Ue=19,We=1,He=2,qe=5,Ge=7,$e=8,Ke=9;function Xe(t){return Array.isArray(t)&&"object"==typeof t[We]}function Ye(t){return Array.isArray(t)&&!0===t[We]}function Ze(t){return 0!=(4&t.flags)}function Qe(t){return 1==(1&t.flags)}function Je(t){return null!==t.template}function tn(t){return 0!=(512&t[ke])}const en=8,nn=8,rn=9,an=-1;class on{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function sn(t,e,n,r,i,a){const{onChanges:o,onInit:s,doCheck:l}=e;i>=0&&(!n.preOrderHooks||i===n.preOrderHooks.length)&&(o||s||l)&&(n.preOrderHooks||(n.preOrderHooks=[])).push(r),a>=0&&(!n.preOrderCheckHooks||a===n.preOrderCheckHooks.length)&&(o||l)&&(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(r),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o)),s&&(n.preOrderHooks||(n.preOrderHooks=[])).push(-t,s),l&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,l),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,l))}function ln(t,e){if(t.firstTemplatePass)for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n];e.afterContentInit&&(t.contentHooks||(t.contentHooks=[])).push(-n,e.afterContentInit),e.afterContentChecked&&((t.contentHooks||(t.contentHooks=[])).push(n,e.afterContentChecked),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,e.afterContentChecked)),e.afterViewInit&&(t.viewHooks||(t.viewHooks=[])).push(-n,e.afterViewInit),e.afterViewChecked&&((t.viewHooks||(t.viewHooks=[])).push(n,e.afterViewChecked),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,e.afterViewChecked)),null!=e.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(n,e.onDestroy)}}function un(t,e,n,r){n||cn(t,e.preOrderHooks,e.preOrderCheckHooks,n,0,void 0!==r?r:null)}function cn(t,e,n,r,i,a){if(r)return;const o=(3&t[ke])===i?e:n;o&&function(t,e,n,r){const i=null!=r?r:-1;let a=0;for(let o=void 0!==r?65535&t[je]:0;o<e.length;o++)if("number"==typeof e[o+1]){if(a=e[o],null!=r&&a>=r)break}else e[o]<0&&(t[je]+=65536),(a<i||-1==i)&&(hn(t,n,e,o),t[je]=(4294901760&t[je])+o+2),o++}(t,o,i,a),null==a&&(3&t[ke])===i&&3!==i&&(t[ke]&=1023,t[ke]+=1)}function hn(t,e,n,r){const i=n[r]<0,a=n[r+1],o=t[i?-n[r]:n[r]];i?t[ke]>>10<t[je]>>16&&(3&t[ke])===e&&(t[ke]+=1024,a.call(o)):a.call(o)}let dn=null;const pn=new Map;let fn=null;const mn=1,gn=0;function yn(t,e){return fn&&t===fn||(fn=t,e&&(dn=pn.get(t)||null),dn=dn||{classesBitMask:gn,classesIndex:mn,stylesBitMask:gn,stylesIndex:mn}),dn}function vn(){dn=null,fn=null}const bn="__ngContext__";function wn(t){for(;Array.isArray(t);)t=t[Ce];return t}function _n(t,e){return wn(e[t+Ue])}function xn(t,e){return wn(e[t.index])}function Cn(t,e){const n=t.index;return-1==n?null:wn(e[n])}function Sn(t,e){return e[Se].data[t+Ue]}function kn(t,e){const n=e[t];return Xe(n)?n:n[Ce]}function En(t){return t[bn]}function In(t){const e=En(t);return e?Array.isArray(e)?e:e.lView:null}function An(t){t[je]=0}let Dn,Tn,Nn=null;function Rn(t){Nn=t}function On(){return Tn}function Fn(){return zn}const Mn=1;let Pn,Ln,zn,Vn=Mn,Bn=0,jn=0;function Un(t=null){ur!==t&&(hr(null==t?-1:t),Vn=null==t?0:Mn,Bn=0,jn=0)}function Wn(){Vn+=1+jn,Bn=0,jn=0}function Hn(t){Bn+=t,jn=Math.max(jn,Bn)}function qn(t){Qn=t}function Gn(){return Pn}function $n(t,e){Pn=t,Ln=e}function Kn(t,e){Pn=t,zn=e}function Xn(){return Ln}function Yn(){Ln=!1}function Zn(t=zn){return 4==(4&t[ke])}let Qn=null,Jn=!1;function tr(){return Jn}function er(t){Jn=t}let nr=-1;function rr(t){nr=t}let ir=0;function ar(){return ir}function or(t){ir=t}function sr(t,e){const n=zn;return t&&(nr=t[Se].bindingStartIndex),Pn=e,Ln=!0,zn=Qn=t,n}function lr(t,e){const n=zn[Se];if(Zn(zn))zn[ke]&=-5;else try{An(zn),e&&cn(zn,n.viewHooks,n.viewCheckHooks,Jn,2,void 0)}finally{zn[ke]&=-73,zn[Te]=n.bindingStartIndex}sr(t,null)}let ur=-1;function cr(){return ur}function hr(t){ur=t,vn()}let dr,pr=null;function fr(){pr=null}function mr(t){dr=t}function gr(){return dr}function yr(t,e){return!(t!=t&&e!=e)&&t!==e}function vr(t){return"string"==typeof t?t:null==t?"":""+t}function br(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():vr(t)}const wr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Tt))(),_r="\ufffd";function xr(t){return t.indexOf(_r)>=0}function Cr(t){return t instanceof Function?t():t}const Sr="--MAP--",kr=0;function Er(t,e){e===kr?t[2]>kr&&function(t){Ar(t,2|Ir(t))}(t):t[2]=e}function Ir(t){return t[1]}function Ar(t,e){t[1]=e}function Dr(t,e){return t[e+2]}function Tr(t,e){return 1&t[e+0]}function Nr(t,e){return(1&Tr(t,e))>0}function Rr(t,e){return t[e+0]>>1}function Or(t,e,n){const r=Tr(t,e);t[e+0]=r|n<<1}function Fr(t,e){return t[e+1]}function Mr(t,e,n){return t[e+3+n]}function Pr(t,e){return!(!t||e!==t[2])}function Lr(t){return(1&Ir(t))>0}function zr(t){return(2&Ir(t))>0}function Vr(t){return 6+t[4]}function Br(t,e){let n=Array.isArray(t)?t[0]:t,r=Array.isArray(e)?e[0]:e;return n instanceof String&&(n=n.toString()),r instanceof String&&(r=r.toString()),yr(n,r)}function jr(t){return null!=t&&""!==t}function Ur(t,e,n=" "){return t+(e.length&&t.length?n:"")+e}function Wr(t){return t.replace(/[a-z][A-Z]/g,t=>t.charAt(0)+"-"+t.charAt(1)).toLowerCase()}function Hr(t){return qr(t)?t[0]:t}function qr(t){return Array.isArray(t)&&t.length>=6&&"string"!=typeof t[1]}function Gr(t){const e=Hr(t);return e&&e[0]||""}function $r(t){return 0!=(8&t.flags)}function Kr(t){return 0!=(16&t.flags)}function Xr(t,e){return t[e+0]}function Yr(t,e,n){t[e+1]=n}function Zr(t,e){return t[e+1]}const Qr=function(){var t={Important:1,DashCase:2};return t[t.Important]="Important",t[t.DashCase]="DashCase",t}();function Jr(t){return!!t.listen}const ti={createRenderer:(t,e)=>document};function ei(t,e){const n=Fn()[Me],r=Jr(n);let i=0;for(;i<e.length;){const a=e[i];if("number"==typeof a){if(0!==a)break;i++;const o=e[i++],s=e[i++],l=e[i++];r?n.setAttribute(t,s,l,o):t.setAttributeNS(o,s,l)}else{const o=a,s=e[++i];ii(o)?r&&n.setProperty(t,o,s):r?n.setAttribute(t,o,s):t.setAttribute(o,s),i++}}return i}function ni(t){return 3===t||4===t||6===t}const ri="@";function ii(t){return t[0]===ri}function ai(t){return t!==an}function oi(t){return 32767&t}function si(t){return t>>16}function li(t,e){let n=si(t),r=e;for(;n>0;)r=r[Ve],n--;return r}function ui(t){const e=t[Ee];return Ye(e)?e[Ee]:e}function ci(t){let e=t[De];for(;null!==e&&2===e.type;)e=(t=t[Ve])[De];return t}let hi=!0;function di(t){const e=hi;return hi=t,e}const pi=255;let fi=0;function mi(t,e){const n=yi(t,e);if(-1!==n)return n;const r=e[Se];r.firstTemplatePass&&(t.injectorIndex=e.length,gi(r.data,t),gi(e,null),gi(r.blueprint,null));const i=vi(t,e),a=oi(i),o=li(i,e),s=t.injectorIndex;if(ai(i)){const t=o[Se].data;for(let n=0;n<8;n++)e[s+n]=o[a+n]|t[a+n]}return e[s+nn]=i,s}function gi(t,e){t.push(0,0,0,0,0,0,0,0,e)}function yi(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null==e[t.injectorIndex+nn]?-1:t.injectorIndex}function vi(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=e[De],r=1;for(;n&&-1===n.injectorIndex;)n=(e=e[Ve])?e[De]:null,r++;return n?n.injectorIndex|r<<16:-1}function bi(t,e,n){!function(t,e,n){let r="string"!=typeof n?n[ce]:n.charCodeAt(0)||0;null==r&&(r=n[ce]=fi++);const i=r&pi,a=1<<i,o=64&i,s=32&i,l=e.data;128&i?o?s?l[t+7]|=a:l[t+6]|=a:s?l[t+5]|=a:l[t+4]|=a:o?s?l[t+3]|=a:l[t+2]|=a:s?l[t+1]|=a:l[t]|=a}(t,e,n)}function wi(t,e,n,r=dt.Default,i){if(t){const i=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t[ce];return"number"==typeof e&&e>0?e&pi:e}(n);if("function"==typeof i){const a=Gn(),o=Fn();Kn(t,e);try{const t=i();if(null!=t||r&dt.Optional)return t;throw new Error(`No provider for ${br(n)}!`)}finally{Kn(a,o)}}else if("number"==typeof i){if(-1===i)return new Ii(t,e);let a=null,o=yi(t,e),s=an,l=r&dt.Host?ci(e)[De]:null;for((-1===o||r&dt.SkipSelf)&&(s=-1===o?vi(t,e):e[o+nn],Ei(r,!1)?(a=e[Se],o=oi(s),e=li(s,e)):o=-1);-1!==o;){s=e[o+nn];const t=e[Se];if(ki(i,o,t.data)){const t=xi(o,e,n,a,r,l);if(t!==_i)return t}Ei(r,e[Se].data[o+en]===l)&&ki(i,o,e)?(a=t,o=oi(s),e=li(s,e)):o=-1}}}if(r&dt.Optional&&void 0===i&&(i=null),0==(r&(dt.Self|dt.Host))){const t=e[Oe],a=Wt(void 0);try{return t?t.get(n,i,r&dt.Optional):$t(n,i,r&dt.Optional)}finally{Wt(a)}}if(r&dt.Optional)return i;throw new Error(`NodeInjector: NOT_FOUND [${br(n)}]`)}const _i={};function xi(t,e,n,r,i,a){const o=e[Se],s=o.data[t+en],l=Ci(s,o,n,null==r?Qe(s)&&hi:r!=o&&3===s.type,i&dt.Host&&a===s);return null!==l?Si(o.data,e,l,s):_i}function Ci(t,e,n,r,i){const a=t.providerIndexes,o=e.data,s=65535&a,l=t.directiveStart,u=a>>16,c=i?s+u:t.directiveEnd;for(let h=r?s:s+u;h<c;h++){const t=o[h];if(h<l&&n===t||h>=l&&t.type===n)return h}if(i){const t=o[l];if(t&&Je(t)&&t.type===n)return l}return null}function Si(t,e,n,r){let i=e[n];if(null!==(a=i)&&"object"==typeof a&&Object.getPrototypeOf(a)==on.prototype){const a=i;if(a.resolving)throw new Error(`Circular dep for ${br(t[n])}`);const o=di(a.canSeeViewProviders);let s;a.resolving=!0,a.injectImpl&&(s=Wt(a.injectImpl));const l=Gn(),u=Fn();Kn(r,e);try{i=e[n]=a.factory(void 0,t,e,r)}finally{a.injectImpl&&Wt(s),di(o),a.resolving=!1,Kn(l,u)}}var a;return i}function ki(t,e,n){const r=64&t,i=32&t;let a;return!!((a=128&t?r?i?n[e+7]:n[e+6]:i?n[e+5]:n[e+4]:r?i?n[e+3]:n[e+2]:i?n[e+1]:n[e])&1<<t)}function Ei(t,e){return!(t&dt.Self||t&dt.Host&&e)}class Ii{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return wi(this._tNode,this._lView,t,void 0,e)}}function Ai(t){const e=function(t){const e=t,n=be(e)||we(e)||_e(e)||vt(e)||bt(e);return n&&void 0!==n.factory?n.factory:null}(Object.getPrototypeOf(t.prototype).constructor);return null!==e?e:t=>new t}const Di="ngDebugContext",Ti="ngOriginalError",Ni="ngErrorLogger";function Ri(t){return t[Di]}function Oi(t){return t[Ti]}function Fi(t,...e){t.error(...e)}class Mi{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t[Ni]||Fi}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?Ri(t)?Ri(t):this._findContext(Oi(t)):null}_findOriginalError(t){let e=Oi(t);for(;e&&Oi(e);)e=Oi(e);return e}}let Pi=!0,Li=!1;function zi(){return Li=!0,Pi}class Vi{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t),this.inertBodyElement=this.inertDocument.createElement("body"),t.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(t){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}getInertBodyElement_XHR(t){t="<body><remove></remove>"+t+"</body>";try{t=encodeURI(t)}catch(r){return null}const e=new XMLHttpRequest;e.responseType="document",e.open("GET","data:text/html;charset=utf-8,"+t,!1),e.send(void 0);const n=e.response.body;return n.removeChild(n.firstChild),n}getInertBodyElement_DOMParser(t){t="<body><remove></remove>"+t+"</body>";try{const e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(e){return null}}getInertBodyElement_InertDocument(t){const e=this.inertDocument.createElement("template");return"content"in e?(e.innerHTML=t,e):(this.inertBodyElement.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Bi=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,ji=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Ui(t){return(t=String(t)).match(Bi)||t.match(ji)?t:(zi()&&console.warn(`WARNING: sanitizing unsafe URL value ${t} (see http://g.co/ng/security#xss)`),"unsafe:"+t)}function Wi(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Hi(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const qi=Wi("area,br,col,hr,img,wbr"),Gi=Wi("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),$i=Wi("rp,rt"),Ki=Hi($i,Gi),Xi=Hi(qi,Hi(Gi,Wi("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Hi($i,Wi("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ki),Yi=Wi("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Zi=Wi("srcset"),Qi=Hi(Yi,Zi,Wi("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Wi("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Ji=Wi("script,style,template");class ta{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Xi.hasOwnProperty(e))return this.sanitizedSomething=!0,!Ji.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,a=e.toLowerCase();if(!Qi.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let o=t.value;Yi[a]&&(o=Ui(o)),Zi[a]&&(r=o,o=(r=String(r)).split(",").map(t=>Ui(t.trim())).join(", ")),this.buf.push(" ",e,'="',ra(o),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Xi.hasOwnProperty(e)&&!qi.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(ra(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const ea=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,na=/([^\#-~ |!])/g;function ra(t){return t.replace(/&/g,"&amp;").replace(ea,(function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"})).replace(na,(function(t){return"&#"+t.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ia;function aa(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}const oa=function(){var t={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return t[t.NONE]="NONE",t[t.HTML]="HTML",t[t.STYLE]="STYLE",t[t.SCRIPT]="SCRIPT",t[t.URL]="URL",t[t.RESOURCE_URL]="RESOURCE_URL",t}();class sa{}const la=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|Z|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),ua=/^url\(([^)]+)\)$/,ca=/([A-Z])/g;function ha(t){try{return null!=t?t.toString().slice(0,30):t}catch(e){return"[ERROR] Exception while trying to serialize the value"}}function da(t,e,n){return{lView:t,nodeIndex:e,native:n,component:void 0,directives:void 0,localRefs:void 0}}function pa(t,e){t[bn]=e}function fa(t,e){let n=t[Se].firstChild;for(;n;){if(Cn(n,t)===e)return n.index;n=ma(n)}return-1}function ma(t){if(t.child)return t.child;if(t.next)return t.next;for(;t.parent&&!t.parent.next;)t=t.parent;return t.parent&&t.parent.next}function ga(t){throw new Error(`Multiple components match node with tagname ${t.tagName}`)}function ya(){throw new Error("Cannot mix multi providers and regular providers")}const va="ng-template";function ba(t,e){const n=t.length,r=t.indexOf(e),i=r+e.length;return!(-1===r||r>0&&" "!==t[r-1]||i<n&&" "!==t[i])}function wa(t,e,n){return e===(0!==t.type||n?t.tagName:va)}function _a(t,e,n){let r=4;const i=t.attrs||[],a=function(t){for(let e=0;e<t.length;e++)if(ni(t[e]))return e;return t.length}(i);let o=!1;for(let s=0;s<e.length;s++){const l=e[s];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!wa(t,l,n)||""===l&&1===e.length){if(xa(r))return!1;o=!0}}else{const u=8&r?l:e[++s];if(8&r&&t.classes){if(!ba(Gr(t.classes),u)){if(xa(r))return!1;o=!0}continue}const c=Ca(8&r?"class":l,i,0==t.type&&t.tagName!==va,n);if(-1===c){if(xa(r))return!1;o=!0;continue}if(""!==u){let t;t=c>a?"":i[c+1];const e=8&r?t:null;if(e&&!ba(e,u)||2&r&&u!==t){if(xa(r))return!1;o=!0}}}}else{if(!o&&!xa(r)&&!xa(l))return!1;if(o&&xa(l))continue;o=!1,r=l|1&r}}return xa(r)||o}function xa(t){return 0==(1&t)}function Ca(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){if(t[n]===e)return n;n++}return-1}(e,t)}function Sa(t,e,n=!1){for(let r=0;r<e.length;r++)if(_a(t,e[r],n))return!0;return!1}function ka(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}const Ea=1,Ia=0,Aa=null,Da=1;let Ta=[];function Na(t,e,n,r,i,a,o,s){const l=!r,u=yn(n,zr(t)),c=l?Ia:u.classesIndex++;return!(!Oa(t,e,c,r,i,a,o,s,!1)&&!s||(u.classesBitMask|=1<<c,0))}function Ra(t,e,n,r,i,a,o,s,l){const u=!r,c=yn(n,zr(t)),h=u?Ia:c.stylesIndex++;return!(!Oa(t,e,h,r,i,a,s,l,!!u||!!o&&o(r,null,1))&&!l||(c.stylesBitMask|=1<<h,0))}function Oa(t,e,n,r,i,a,o,s,l){Lr(t)||(o?function(t,e,n,r,i){Ta.unshift(t,e,n,r,i)}(t,n,r,i,l):(Ta.length&&Fa(),Ma(t,n,r,i,l)));const u=s||Br(e[i],a);return u&&(e[i]=a),u}function Fa(){let t=0;for(;t<Ta.length;)Ma(Ta[t++],Ta[t++],Ta[t++],Ta[t++],Ta[t++]);Ta.length=0}function Ma(t,e,n,r,i){let a=!1;if(n){let o=!1,s=Vr(t);for(;s<t.length;){const a=Fr(t,s),l=Dr(t,s);if(o=n<=l){n<l&&Pa(t,s,n,i),La(t,!1,s,r,e);break}s+=3+a}o||(Pa(t,t.length,n,i),La(t,!1,s,r,e),a=!0)}else La(t,!0,3,r,e),a=!0;return a}function Pa(t,e,n,r){t.splice(e,0,r?1:0,Da,n,Aa),Or(t,e,Ea)}function La(t,e,n,r,i){const a=n+3;let o=a+Fr(t,n);if(e||o--,"number"==typeof r){for(let e=a;e<=o;e++)if(t[e]===r)return;t.splice(o,0,r),t[n+1]++,Or(t,n,Rr(t,n)|1<<i)}else null!==r&&null==t[o]&&(t[o]=r)}function za(t,e,n,r,i,a,o,s){return i&&r&&(function(t){if(!Lr(t)){const e=Hr(t);e&&function(t,e){for(let n=1;n<e.length;n+=2){const r=Zr(e,n);r&&Ma(t,-1,Xr(e,n),r,!1)}}(t,e),function(t){Ar(t,1|Ir(t))}(t)}}(r),function(t,e){return t&&e>gn}(r,a))?(Va(r,t,e,n,a,o,s),!0):i}function Va(t,e,n,r,i,a,o){const s=!0===(l=i)?-1:!1===l?0:l;var l;const u=Ba,c=(s&Rr(t,3))>0?1:0;let h=Vr(t);for(;h<t.length;){const i=Fr(t,h);if(s&Rr(t,h)){let s=!1;const l=Dr(t,h),d=i-1,p=Mr(t,h,d);for(let i=0;i<d;i++){const u=Mr(t,h,i),c=r[u];if(jr(c)){a(e,n,l,o&&Nr(t,h)?o(l,c,2):c,u),s=!0;break}}if(u){const i=u(t,e,n,r,a,o,c|(s?4:2),l,p);s=s||i}s||a(e,n,l,p)}h+=3+i}u&&u(t,e,n,r,a,o,c)}let Ba=null;const ja=(t,e,n,r)=>{const i=e.style;r?(r=r.toString(),t&&Jr(t)?t.setStyle(e,n,r,Qr.DashCase):i&&i.setProperty(n,r)):t&&Jr(t)?t.removeStyle(e,n,Qr.DashCase):i&&i.removeProperty(n)},Ua=(t,e,n,r)=>{if(""!==n){const i=e.classList;r?t&&Jr(t)?t.addClass(e,n):i&&i.add(n):t&&Jr(t)?t.removeClass(e,n):i&&i.remove(n)}};function Wa(t,e,n,r){const i=Hr(n);if(i)for(let a=1;a<i.length;a+=2){const n=Xr(i,a),o=Zr(i,a);r?Ua(t,e,n,o,null):ja(t,e,n,o,null)}}const Ha={},qa=(t,e,n,r,i,a,o,s,l)=>{let u=!1;if(Fr(t,3)){let c=!0;const h=!s;h&&-2&o&&(c=!1,u=!0),c&&(u=function t(e,n,r,i,a,o,s,l,u,c){let h=!1;if(u<Fr(e,3)){const p=Mr(e,3,u),f=i[p];let m=((d=u)>=Xa.length&&Xa.push(1),Xa[d]);for(;m<f.length;){const d=Xr(f,m),g=l&&d>l,y=!g&&d===l,v=Zr(f,m),b=jr(v);let w=t(e,n,r,i,a,o,g?s:$a(s,b,y),g?l:d,u+1,c);if(g){h||(h=w);break}if(!w&&Ka(s,y)){const t=y&&!b,e=t?c:v,i=t?p:null;a(n,r,d,o?o(d,e,3):e,i),w=!0}h=w&&y,m+=2}if(Xa[u]=m,1===f.length||!l)return t(e,n,r,i,a,o,s,l,u+1,c)}var d;return h}(t,e,n,r,i,a,o,s||null,0,l||null)),h&&function(){for(let t=0;t<Xa.length;t++)Xa[t]=1}()}return u};function Ga(){Ba=qa}function $a(t,e,n){let r=t;return e||4&t||!(n||1&t)?(r|=4,r&=-3):(r|=2,r&=-5),r}function Ka(t,e){let n=(1&t)>0;return n?4&t&&e&&(n=!1):2&t&&(n=e),n}const Xa=[];function Ya(t,e,n,r){for(let i=1;i<t.length;i+=2){const a=Xr(t,i);if(e<=a){let o=!1;if(a===e){const e=t[i];!r&&jr(e)||(o=!0,Yr(t,i,n))}else o=!0,t.splice(i,0,e,n);return o}}return t.push(e,n),!0}function Za(t,e){let n="";for(let r=1;r<t.length;r+=2){const i=Xr(t,r),a=Zr(t,r),o=Ur(i,e?"":a,":");n=Ur(n,o,e?" ":"; ")}return n}function Qa(t){let e={};if(t)for(let n=1;n<t.length;n+=2){const r=Xr(t,n),i=Zr(t,n);e[r]=i}return e}class Ja{constructor(t,e,n){this.context=t,this._data=e,this._isClassBased=n,this._sanitizer=null}overrideSanitizer(t){this._sanitizer=t}get summary(){const t={};return this._mapValues((e,n,r)=>{t[e]={prop:e,value:n,bindingIndex:r}}),t}get values(){const t={};return this._mapValues((e,n)=>{t[e]=n}),t}_mapValues(t){Fr(this.context,3)>0&&Ga();const e=this._isClassBased?null:this._sanitizer||gr();Va(this.context,null,{},this._data,!0,(e,n,r,i,a)=>{t(r,i,a||null)},e)}}function to(t){eo(Fn(),t)}function eo(t,e){un(t,t[Se],tr(),e),hr(e)}function no(t){const e=t[Se],n=Zn(t);if(e.firstTemplatePass=!1,t[Te]=e.bindingStartIndex,!n){const n=tr();un(t,e,n,void 0),function(t){for(let e=t[Le];null!==e;e=e[Ie])if(-1===e[He]&&Ye(e))for(let t=Ke;t<e.length;t++){const n=e[t];lo(n,n[Se],n[Re])}}(t),ro(e,t),An(t),cn(t,e.contentHooks,e.contentCheckHooks,n,1,void 0),function(t,e){const n=cr();try{if(t.expandoInstructions){let n=e[Te]=t.expandoStartIndex;rr(n);let r=-1,i=-1;for(let a=0;a<t.expandoInstructions.length;a++){const o=t.expandoInstructions[a];if("number"==typeof o){if(o<=0){Un(i=-o);const e=t.expandoInstructions[++a];r=n+=rn+e}else n+=o;rr(n)}else null!==o&&(e[Te]=n,o(2,wn(e[r]),i),Wn()),r++}}}finally{Un(n)}}(e,t)}n&&e.staticContentQueries&&ro(e,t),n&&!e.staticViewQueries||Vo(2,e,t[Re]),function(t,e){if(null!=e)for(let n=0;n<e.length;n++)Ro(t,e[n])}(t,e.components)}function ro(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],a=n[r+1];if(-1!==a){const n=t.data[a];or(i),n.contentQueries(2,e[a],a)}}}function io(t,e){const n=e||Fn()[Me],r=pr;return Jr(n)?n.createElement(t,r):null===r?n.createElement(t):n.createElementNS(r,t)}function ao(t,e,n,r,i,a,o,s,l,u){const c=e.blueprint.slice();return c[Ce]=i,c[ke]=140|r,An(c),c[Ee]=c[Ve]=t,c[Re]=n,c[Fe]=o||t&&t[Fe],c[Me]=s||t&&t[Me],c[Pe]=l||t&&t[Pe]||null,c[Oe]=u||t&&t[Oe]||null,c[De]=a,c}function oo(t,e,n,r,i,a){const o=n+Ue,s=t.data[o]||function(t,e,n,r,i,a,o){const s=Gn(),l=Xn(),u=l?s:s&&s.parent,c=t.data[n]=yo(0,u&&u!==e?u:null,r,n,i,a);return 0!==o&&t.firstChild||(t.firstChild=c),s&&(!l||null!=s.child||null===c.parent&&2!==s.type?l||(s.next=c):s.child=c),c}(t,e,o,r,i,a,n);return $n(s,!0),s}function so(t,e,n,r){let i=t.node;return null==i&&(t.node=i=yo(0,e,2,n,null,null)),r[De]=i}function lo(t,e,n){const r=Xn(),i=Gn();let a;if(512&t[ke])Mo(function(t){let e=Xe(t)?t:In(t);for(;e&&!(512&e[ke]);)e=ui(e);return e}(t)[Re]);else{let o=!1;try{$n(null,!0),a=sr(t,t[De]),An(t),co(t,e.template,ho(t),n),e.firstTemplatePass=!1,no(t),o=!0}finally{lr(a,o),$n(i,r)}}}function uo(t,e,n){const r=t[Fe],i=sr(t,t[De]),a=!tr(),o=Zn(t);let s=!1;try{a&&!o&&r.begin&&r.begin(),o&&(n&&co(t,n,1,e),no(t),t[ke]&=-5),An(t),n&&co(t,n,2,e),no(t),s=!0}finally{a&&!o&&r.end&&r.end(),lr(i,s)}}function co(t,e,n,r){fr();const i=cr();try{Un(null),2&n&&eo(t,0),e(n,r)}finally{hr(i)}}function ho(t){return Zn(t)?1:2}function po(t,e,n){if(Ze(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}function fo(t,e,n,r=xn){On()&&(function(t,e,n){const r=n.directiveStart,i=n.directiveEnd;!t.firstTemplatePass&&r<i&&mi(n,e);for(let a=r;a<i;a++){const r=t.data[a];Je(r)&&To(e,n,r),So(e,Si(t.data,e,a,n),r,a)}}(t,e,n),function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,a=t.expandoInstructions,o=t.firstTemplatePass,s=n.index-Ue,l=cr();try{Un(s);for(let s=r;s<i;s++){const r=t.data[s],i=e[s];r.hostBindings?(xo(r,a,i,n,o),Wn()):o&&a.push(null)}}finally{Un(l)}}(t,e,n),function(t,e,n){const r=e.localNames;if(r){let i=e.index+1;for(let a=0;a<r.length;a+=2){const o=r[a+1],s=-1===o?n(e,t):t[o];t[i++]=s}}}(e,n,r),Un(null))}function mo(t){return t.tView||(t.tView=go(-1,t.template,t.consts,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas))}function go(t,e,n,r,i,a,o,s){const l=Ue+n,u=l+r,c=function(t,e){const n=new Array(e).fill(null,0,t).fill(Ha,t);return n[Te]=t,n}(l,u);return c[Se]={id:t,blueprint:c,template:e,queries:null,viewQuery:o,node:null,data:c.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:u,expandoInstructions:null,firstTemplatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof i?i():i,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:s}}function yo(t,e,n,r,i,a){return{type:n,index:r,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,propertyMetadataStartIndex:-1,propertyMetadataEndIndex:-1,flags:0,providerIndexes:0,tagName:i,attrs:a,localNames:null,initialInputs:void 0,inputs:void 0,outputs:void 0,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,classes:null}}function vo(t,e){const n=Fn()[Se];let r=null;const i=t.directiveStart,a=t.directiveEnd;if(a>i){const t=0===e,o=n.data;for(let e=i;e<a;e++){const n=o[e],i=t?n.inputs:n.outputs;for(let t in i)if(i.hasOwnProperty(t)){const n=i[t];(r=r||{}).hasOwnProperty(t)?r[t].push(e,t,n):r[t]=[e,t,n]}}}return r}const bo={class:"className",for:"htmlFor",formaction:"formAction",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"};function wo(t,e,n,r,i,a){const o=Fn(),s=_n(t,o),l=Sn(t,o);let u,c;if(!i&&(u=Uo(l))&&(c=u[e]))$o(o,c,n),Qe(l)&&function(t,e){const n=kn(e,t);16&n[ke]||(n[ke]|=64)}(o,t+Ue);else if(3===l.type){!function(t,e,n,r,i){const a=e[Te]-1,o=r[a];o[0]==_r&&(r[a]=n+o,i||(-1==t.propertyMetadataStartIndex&&(t.propertyMetadataStartIndex=a),t.propertyMetadataEndIndex=a+1))}(l,o,e=bo[e]||e,o[Se].data,i);const t=a?a(l,o):o[Me];n=null!=r?r(n,l.tagName||"",e):n,Jr(t)?t.setProperty(s,e,n):ii(e)||(s.setProperty?s.setProperty(e,n):s[e]=n)}}function _o(t,e,n,r){if(!On())return;const i=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let a=0;a<r.length;a++){const o=r[a];Sa(n,o.selectors,!1)&&(i||(i=[]),bi(mi(n,e),t,o.type),Je(o)?(1&n.flags&&ga(n),n.flags=1,i.unshift(o)):i.push(o))}return i}(t,e,n),a=r?{"":-1}:null;if(i){Ao(n,t.data.length,i.length);for(let t=0;t<i.length;t++){const e=i[t];e.providersResolver&&e.providersResolver(e)}Co(t,n,i.length);const r=t.preOrderHooks&&t.preOrderHooks.length||0,o=t.preOrderCheckHooks&&t.preOrderCheckHooks.length||0,s=n.index-Ue;for(let n=0;n<i.length;n++){const l=i[n],u=t.data.length;Do(t,e,l,l.factory),Io(t.data.length-1,l,a),sn(u,l,t,s,r,o)}}a&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new Error(`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,a)}function xo(t,e,n,r,i){const a=e.length;Rn(t),t.hostBindings(1,n,r.index-Ue),Rn(null),a===e.length&&i&&e.push(t.hostBindings)}function Co(t,e,n){const r=-(e.index-Ue),i=t.data.length-(65535&e.providerIndexes);(t.expandoInstructions||(t.expandoInstructions=[])).push(r,i,n)}function So(t,e,n,r){const i=Gn();ko(t,i,e),i&&i.attrs&&function(t,e,n,r){let i=r.initialInputs;(void 0===i||t>=i.length)&&(i=function(t,e,n){const r=n.initialInputs||(n.initialInputs=[]);for(let o=r.length;o<=t;o++)r.push(null);const i=n.attrs;let a=0;for(;a<i.length;){const n=i[a];if(0===n){a+=4;continue}if(5===n){a+=2;continue}if("number"==typeof n)break;const o=e[n],s=i[a+1];void 0!==o&&(r[t]||(r[t]=[])).push(n,o,s),a+=2}return r}(t,n.inputs,r));const a=i[t];if(a){const t=n.setInput;for(let r=0;r<a.length;){const i=a[r++],o=a[r++],s=a[r++];t?n.setInput(e,s,i,o):e[o]=s}}}(r,e,n,i),t[Se].firstTemplatePass&&n.contentQueries&&(i.flags|=4),Je(n)&&(kn(i.index,t)[Re]=e)}function ko(t,e,n){const r=xn(e,t);pa(n,t),r&&pa(r,t)}function Eo(t){const e=Fn()[Se];(e.components||(e.components=[])).push(t.index)}function Io(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;e.template&&(n[""]=t)}}function Ao(t,e,n){t.flags=1&t.flags,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Do(t,e,n,r){t.data.push(n);const i=new on(r,Je(n),null);t.blueprint.push(i),e.push(i)}function To(t,e,n){const r=xn(e,t),i=mo(n),a=t[Fe],o=Oo(t,ao(t,i,null,n.onPush?64:16,t[e.index],e,a,a.createRenderer(r,n)));o[De]=e,t[e.index]=o,t[Se].firstTemplatePass&&Eo(e)}function No(t,e,n,r,i){return new Array(t,!0,i?-1:0,e,null,null,r,n,null)}function Ro(t,e){const n=kn(e,t);(128==(128&n[ke])||Zn(t))&&80&n[ke]&&(function(t){const e=t[Se];for(let n=t.length;n<e.blueprint.length;n++)t[n]=e.blueprint[n]}(n),zo(n,n[Re]))}function Oo(t,e){return t[Le]?t[ze][Ie]=e:t[Le]=e,t[ze]=e,e}function Fo(t){for(;t;){t[ke]|=64;const e=ui(t);if(tn(t)&&!e)return t;t=e}return null}function Mo(t){for(let e=0;e<t.components.length;e++){const n=t.components[e];uo(In(n),n)}}function Po(t,e){const n=t[Fe];n.begin&&n.begin();try{Zn(t)&&zo(t,e),zo(t,e)}catch(r){throw Go(t,r),r}finally{n.end&&n.end()}}function Lo(t){Mo(t[Re])}function zo(t,e){const n=t[Se],r=sr(t,t[De]),i=n.template,a=Zn(t);let o=!1;try{An(t),a&&Vo(1,n,e),co(t,i,ho(t),e),no(t),o=!0}finally{lr(r,o)}}function Vo(t,e,n){const r=e.viewQuery;null!==r&&(or(0),r(t,n))}function Bo(t,e="",n=""){const r=t[Se].data,i=t[Te]-1;return null==r[i]?r[i]=_r+e+_r+n:null}const jo=(()=>Promise.resolve(null))();function Uo(t){return void 0===t.inputs&&(t.inputs=vo(t,0)),t.inputs}function Wo(t){return t[Ne]||(t[Ne]=[])}function Ho(t){return t[Se].cleanup||(t[Se].cleanup=[])}function qo(t,e){return e[t.index][Me]}function Go(t,e){const n=t[Oe],r=n?n.get(Mi,null):null;r&&r.handleError(e)}function $o(t,e,n){const r=t[Se];for(let i=0;i<e.length;){const a=e[i++],o=e[i++],s=e[i++],l=t[a],u=r.data[a];u.setInput?u.setInput(l,n,o,s):l[s]=n}}function Ko(t,e,n){Wa(t,e,n.classes,!0),Wa(t,e,n.styles,!1)}function Xo(t,e){const n=e[Ee];return-1===t.index?Ye(n)?n:null:n}function Yo(t,e){const n=Xo(t,e);return n?os(e[Me],n[Ge]):null}function Zo(t,e,n,r,i){if(null!=r){let a,o=!1;Ye(r)?a=r:Xe(r)&&(o=!0,r=r[Ce]);const s=wn(r);0===t?is(e,n,s,i||null):1===t?function(t,e,n){const r=os(t,e);r&&function(t,e,n,r){Jr(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,s,o):2===t&&e.destroyNode(s),null!=a&&function(t,e,n,r,i){const a=n[Ge];a!==wn(n)&&Zo(e,t,r,a,i);for(let o=Ke;o<n.length;o++)hs(t,e,n[o],r,a)}(e,t,a,n,i)}}function Qo(t,e,n){const r=Yo(t[Se].node,t);r&&hs(t[Me],e?0:1,t,r,n)}function Jo(t,e){const n=t[qe],r=n.indexOf(e);n.splice(r,1)}function ts(t,e){if(t.length<=Ke)return;const n=Ke+e,r=t[n];if(r){const i=r[Be];null!==i&&i!==t&&Jo(i,r),e>0&&(t[n-1][Ie]=r[Ie]);const a=te(t,Ke+e);Qo(r,!1);const o=a[Ae];null!==o&&o.detachView(a[Se]),r[Ee]=null,r[Ie]=null,r[ke]&=-129}return r}function es(t){if(!(256&t[ke])){const e=t[Me];Jr(e)&&e.destroyNode&&hs(e,2,t,null,null),function(t){let e=t[Le];if(!e)return rs(t);for(;e;){let n=null;if(Xe(e))n=e[Le];else{const t=e[Ke];t&&(n=t)}if(!n){for(;e&&!e[Ie]&&e!==t;)rs(e),e=ns(e,t);rs(e||t),n=e&&e[Ie]}e=n}}(t)}}function ns(t,e){let n;return Xe(t)&&(n=t[De])&&2===n.type?Xo(n,t):t[Ee]===e?null:t[Ee]}function rs(t){if(Xe(t)&&!(256&t[ke])){t[ke]&=-129,t[ke]|=256,function(t){const e=t[Se];let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const e=t[n[r]];e instanceof on||n[r+1].call(e)}}(t),function(t){const e=t[Se].cleanup;if(null!==e){const n=t[Ne];for(let r=0;r<e.length-1;r+=2)if("string"==typeof e[r]){const i=e[r+1],a="function"==typeof i?i(t):wn(t[i]),o=n[e[r+2]],s=e[r+3];"boolean"==typeof s?a.removeEventListener(e[r],o,s):s>=0?n[s]():n[-s].unsubscribe(),r+=2}else e[r].call(n[e[r+1]]);t[Ne]=null}}(t);const e=t[De];e&&3===e.type&&Jr(t[Me])&&t[Me].destroy();const n=t[Be];if(null!==n&&Ye(t[Ee])){n!==t[Ee]&&Jo(n,t);const e=t[Ae];null!==e&&e.detachView(t[Se])}}}function is(t,e,n,r){Jr(t)?t.insertBefore(e,n,r):e.insertBefore(n,r,!0)}function as(t,e,n,r){null!==r?is(t,e,n,r):function(t,e,n){Jr(t)?t.appendChild(e,n):e.appendChild(n)}(t,e,n)}function os(t,e){return Jr(t)?t.parentNode(e):e.parentNode}function ss(t,e,n){const r=function(t,e){if(tn(e))return os(e[Me],xn(t,e));const n=function(t){for(;null!=t.parent&&(4===t.parent.type||5===t.parent.type);)t=t.parent;return t}(t),r=n.parent;if(null==r){const t=e[De];return 2===t.type?Yo(t,e):function(t){const e=t[De];return e&&3===e.type?xn(e,ui(t)):null}(e)}{const t=n&&5===n.type;if(t&&2&n.flags)return xn(n,e).parentNode;if(1&r.flags&&!t){const t=e[Se].data,n=t[t[r.index].directiveStart].encapsulation;if(n!==ne.ShadowDom&&n!==ne.Native)return null}return xn(r,e)}}(e,n);if(null!=r){const i=n[Me],a=function(t,e){if(2===t.type){const n=Xo(t,e);return ls(n.indexOf(e,Ke)-Ke,n)}return 4===t.type||5===t.type?xn(t,e):null}(e.parent||n[De],n);if(Array.isArray(t))for(let e of t)as(i,r,e,a);else as(i,r,t,a)}}function ls(t,e){const n=Ke+t+1;if(n<e.length){const t=e[n],r=t[De].child;return null!==r?Cn(r,t):e[Ge]}return e[Ge]}function us(t,e,n,r){for(;t;)cs(t,e,n,r),t=t.next}function cs(t,e,n,r){const i=xn(t,r);ss(i,e,n),pa(i,r);const a=r[t.index];if(0===t.type)for(let o=Ke;o<a.length;o++)Qo(a[o],!0,a[Ge]);else if(5===t.type){let e=t.child;us(e,e,r,r)}else 4===t.type&&us(t.child,e,n,r),Ye(a)&&ss(a[Ge],e,n)}function hs(t,e,n,r,i){let a=n[Se].node.child;for(;null!==a;)ds(t,e,n,a,r,i),a=a.next}function ds(t,e,n,r,i,a){const o=r.type;32&r.flags||(4===o||5===o?function(t,e,n,r,i,a){Zo(e,t,i,n[r.index],a);let o=r.child;for(;o;)ds(t,e,n,o,i,a),o=o.next}(t,e,n,r,i,a):1===o?function(t,e,n,r,i,a){const o=ci(n),s=o[De].projection[r.projection];if(void 0!==s)if(Array.isArray(s))for(let l=0;l<s.length;l++)Zo(e,t,i,s[l],a);else{let n=s;const r=o[Ee];for(;null!==n;)ds(t,e,r,n,i,a),n=n.projectionNext}}(t,e,n,r,i,a):Zo(e,t,i,n[r.index],a))}class ps{constructor(t,e,n){this._context=e,this._componentIndex=n,this._appRef=null,this._viewContainerRef=null,this._tViewNode=null,this._lView=t}get rootNodes(){return null==this._lView[Ce]?function t(e,n,r){let i=n.child;for(;i;){const n=Cn(i,e);if(n&&r.push(n),4===i.type)t(e,i,r);else if(1===i.type){const t=ci(e),n=t[De],a=ui(t);let o=n.projection[i.projection];for(;o&&a;)r.push(xn(o,a)),o=o.next}i=i.next}return r}(this._lView,this._lView[De],[]):[]}get context(){return this._context?this._context:this._lookUpContext()}get destroyed(){return 256==(256&this._lView[ke])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const t=this._viewContainerRef.indexOf(this);t>-1&&this._viewContainerRef.detach(t),this._viewContainerRef=null}es(this._lView)}onDestroy(t){var e,n;n=t,Wo(e=this._lView).push(n),e[Se].firstTemplatePass&&Ho(e).push(e[Ne].length-1,null)}markForCheck(){Fo(this._lView)}detach(){this._lView[ke]&=-129}reattach(){this._lView[ke]|=128}detectChanges(){Po(this._lView,this.context)}checkNoChanges(){!function(t,e){er(!0);try{Po(t,e)}finally{er(!1)}}(this._lView,this.context)}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}detachFromAppRef(){this._appRef=null,function(t){hs(t[Me],1,t,null,null)}(this._lView)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}_lookUpContext(){return this._context=ui(this._lView)[this._componentIndex]}}class fs extends ps{constructor(t){super(t,null,-1),this._view=t}detectChanges(){Lo(this._view)}checkNoChanges(){!function(t){er(!0);try{Lo(t)}finally{er(!1)}}(this._view)}get context(){return null}}let ms,gs,ys;function vs(t,e,n){return ms||(ms=class extends t{}),new ms(xn(e,n))}function bs(t,e,n,r){return gs||(gs=class extends t{constructor(t,e,n){super(),this._declarationView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=function(t,e,n,r){const i=Xn(),a=Gn();$n(null,!0);const o=ao(n,t,e,16,null,null);return o[Ve]=n,so(t,null,-1,o),t.firstTemplatePass&&(t.node.injectorIndex=r),$n(a,i),o}(e,t,this._declarationView,this._declarationTContainer.injectorIndex);n[Be]=this._declarationView[this._declarationTContainer.index];const r=this._declarationView[Ae];null!==r&&(n[Ae]=r.createEmbeddedView(e)),lo(n,e,t);const i=new ps(n,t,-1);return i._tViewNode=n[De],i}}),0===n.type?new gs(r,n,vs(e,n,r)):null}function ws(t,e,n,r){let i;ys||(ys=class extends t{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostView=n}get element(){return vs(e,this._hostTNode,this._hostView)}get injector(){return new Ii(this._hostTNode,this._hostView)}get parentInjector(){const t=vi(this._hostTNode,this._hostView),e=li(t,this._hostView),n=function(t,e,n){if(n.parent&&-1!==n.parent.injectorIndex){const t=n.parent.injectorIndex;let e=n.parent;for(;null!=e.parent&&t==e.injectorIndex;)e=e.parent;return e}let r=si(t),i=e,a=e[De];for(;r>1;)a=(i=i[Ve])[De],r--;return a}(t,this._hostView,this._hostTNode);return ai(t)&&null!=n?new Ii(n,e):new Ii(null,this._hostView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){return null!==this._lContainer[$e]&&this._lContainer[$e][t]||null}get length(){return this._lContainer.length-Ke}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const a=n||this.parentInjector;!i&&null==t.ngModule&&a&&(i=a.get(Yt,null));const o=t.create(a,r,void 0,i);return this.insert(o.hostView,e),o}insert(t,e){if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");this.allocateContainerIfNeeded();const n=t._lView,r=this._adjustIndex(e);return Ye(n[Ee])?this.move(t,r):(function(t,e,n){const r=Ke+n,i=e.length;n>0&&(e[r-1][Ie]=t),n<i-Ke?(t[Ie]=e[r],Jt(e,Ke+n,t)):(e.push(t),t[Ie]=null),t[Ee]=e;const a=t[Be];null!==a&&e!==a&&function(t,e){const n=t[qe];null===n?t[qe]=[e]:n.push(e)}(a,t);const o=t[Ae];null!==o&&o.insertView(t[Se]),t[ke]|=128}(n,this._lContainer,r),Qo(n,!0,ls(r,this._lContainer)),t.attachToViewContainerRef(this),Jt(this._lContainer[$e],r,t),t)}move(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");const n=this.indexOf(t);return-1!==n&&this.detach(n),this.insert(t,e),t}indexOf(t){return null!==this._lContainer[$e]?this._lContainer[$e].indexOf(t):0}remove(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1);(function(t,e){const n=ts(t,e);n&&es(n)})(this._lContainer,e),te(this._lContainer[$e],e)}detach(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),n=ts(this._lContainer,e);return n&&null!=te(this._lContainer[$e],e)?new ps(n,n[Re],-1):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}allocateContainerIfNeeded(){null===this._lContainer[$e]&&(this._lContainer[$e]=[])}});const a=r[n.index];if(Ye(a))(i=a)[He]=-1;else{let t;if(t=4===n.type?wn(a):r[Me].createComment(""),tn(r)){const e=r[Me],i=xn(n,r);is(e,os(e,i),t,function(t,e){return Jr(t)?t.nextSibling(e):e.nextSibling}(e,i))}else ss(t,n,r);r[n.index]=i=No(a,r,t,n,!0),Oo(r,i)}return new ys(i,n,r)}let _s=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>xs(),t})();const xs=function(t=!1){return function(t,e,n){if(Qe(t)&&!n){const n=t.directiveStart,r=kn(t.index,e);return new ps(r,null,n)}if(3===t.type||0===t.type||4===t.type){const t=ci(e);return new ps(t,t[Re],-1)}return null}(Gn(),Fn(),t)},Cs=new Nt("The presence of this token marks an injector as being the root injector."),Ss={},ks={},Es=[];let Is=void 0;function As(){return void 0===Is&&(Is=new Xt),Is}function Ds(t,e=null,n=null,r){return e=e||As(),new Ts(t,n,e,r)}class Ts{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];Qt([t],t=>this.processInjectorType(t,[],i)),e&&Qt(e,n=>this.processProvider(n,t,e)),this.records.set(Rt,Os(void 0,this)),this.isRootInjector=this.records.has(Cs),this.injectorDefTypes.forEach(t=>this.get(t)),this.source=r||("object"==typeof t?null:xt(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=Ot,n=dt.Default){this.assertNotDestroyed();const r=Ut(this);try{if(!(n&dt.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof Nt)&&vt(t);n&&this.injectableDefInScope(n)&&(e=Os(Ns(t),Ss),this.records.set(t,e))}if(void 0!==e)return this.hydrate(t,e)}return(n&dt.Self?As():this.parent).get(t,n&dt.Optional?null:e)}catch(a){if("NullInjectorError"===a.name){if((a[Ft]=a[Ft]||[]).unshift(xt(t)),r)throw a;return function(t,e,n,r){const i=t[Ft];throw e[zt]&&i.unshift(e[zt]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&t.charAt(1)==Lt?t.substr(2):t;let i=xt(e);if(e instanceof Array)i=e.map(xt).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):xt(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Pt,"\n  ")}`}("\n"+t.message,i,n,r),t[Mt]=i,t[Ft]=null,t}(a,t,"R3InjectorError",this.source)}throw a}finally{Ut(r)}var i}toString(){const t=[];return this.records.forEach((e,n)=>t.push(xt(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=kt(t)))return!1;let r=bt(t);const i=null==r&&t.ngModule||void 0,a=void 0===i?t:i,o=-1!==n.indexOf(a);if(void 0!==i&&(r=bt(i)),null==r)return!1;if(this.injectorDefTypes.add(a),this.records.set(a,Os(r.factory,Ss)),null!=r.imports&&!o){let t;n.push(a);try{Qt(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];Qt(r,t=>this.processProvider(t,n,r||Es))}}const s=r.providers;if(null!=s&&!o){const e=t;Qt(s,t=>this.processProvider(t,e,s))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=Ms(t=kt(t))?t:kt(t&&t.provide);const i=function(t,e,n){let r=Rs(t,e,n);return Fs(t)?Os(void 0,t.useValue):Os(r,Ss)}(t,e,n);if(Ms(t)||!0!==t.multi){const t=this.records.get(r);t&&void 0!==t.multi&&ya()}else{let e=this.records.get(r);e?void 0===e.multi&&ya():((e=Os(void 0,Ss,!0)).factory=()=>Kt(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===ks?function(t){throw new Error(`Cannot instantiate cyclic dependency! ${t}`)}(xt(t)):e.value===Ss&&(e.value=ks,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||"root"===t.providedIn&&this.isRootInjector:this.injectorDefTypes.has(t.providedIn))}}function Ns(t){const e=vt(t);if(null!==e)return e.factory;const n=bt(t);if(null!==n)return n.factory;if(t instanceof Nt)throw new Error(`Token ${xt(t)} is missing an ngInjectableDef definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=new Array(e).fill("?");throw new Error(`Can't resolve all parameters for ${xt(t)}: (${n.join(", ")}).`)}const n=(r=t)&&r[wt]?(console.warn(`DEPRECATED: DI is instantiating a token "${r.name}" that inherits its @Injectable decorator but does not provide one itself.\n`+`This will become an error in v10. Please add @Injectable() to the "${r.name}" class.`),r[wt]):null;var r;return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function Rs(t,e,n){let r=void 0;if(Ms(t))return Ns(kt(t));if(Fs(t))r=()=>kt(t.useValue);else if((i=t)&&i.useExisting)r=()=>qt(kt(t.useExisting));else if(function(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...Kt(t.deps||[]));else{const i=kt(t&&(t.useClass||t.provide));if(i||function(t,e,n){let r="";throw t&&e&&(r=` - only instances of Provider and Type are allowed, got: [${e.map(t=>t==n?"?"+n+"?":"...").join(", ")}]`),new Error(`Invalid provider for the NgModule '${xt(t)}'`+r)}(e,n,t),!function(t){return!!t.deps}(t))return Ns(i);r=()=>new i(...Kt(t.deps))}var i;return r}function Os(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Fs(t){return null!==t&&"object"==typeof t&&Vt in t}function Ms(t){return"function"==typeof t}const Ps=function(t,e,n){return Ds({name:n},e,t,n)};let Ls=(()=>{class t{static create(t,e){return Array.isArray(t)?Ps(t,e,""):Ps(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=Ot,t.NULL=new Xt,t.ngInjectableDef=mt({token:t,providedIn:"any",factory:()=>qt(Rt)}),t.__NG_ELEMENT_ID__=-1,t})();const zs=new Nt("AnalyzeForEntryComponents");let Vs=new Map;const Bs=new Set;function js(t){return"string"==typeof t?t:t.text()}function Us(t){const e=Fn(),n=e[Se];n.firstTemplatePass&&(function(t,e,n){const r=t.expandoInstructions,i=r.length;i>=2&&r[i-2]===e.hostBindings?r[i-1]=r[i-1]+n:r.push(e.hostBindings,n)}(n,Nn,t),function(t,e,n){for(let r=0;r<n;r++)e.push(Ha),t.blueprint.push(Ha),t.data.push(null)}(n,e,t))}let Ws=null;function Hs(){if(!Ws){const t=Tt.Symbol;if(t&&t.iterator)Ws=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Ws=n)}}}return Ws}function qs(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}function Gs(t,e){const n=Ks(t),r=Ks(e);if(n&&r)return function(t,e,n){const r=t[Hs()](),i=e[Hs()]();for(;;){const t=r.next(),e=i.next();if(t.done&&e.done)return!0;if(t.done||e.done)return!1;if(!n(t.value,e.value))return!1}}(t,e,Gs);{const i=t&&("object"==typeof t||"function"==typeof t),a=e&&("object"==typeof e||"function"==typeof e);return!(n||!i||r||!a)||qs(t,e)}}class $s{constructor(t){this.wrapped=t}static wrap(t){return new $s(t)}static unwrap(t){return $s.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof $s}}function Ks(t){return!!Xs(t)&&(Array.isArray(t)||!(t instanceof Map)&&Hs()in t)}function Xs(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Ys(t,e,n){return!!yr(t[e],n)&&(t[e]=n,!0)}function Zs(t,e,n){const r=cr(),i=Qs(Fn(),e);return i!==Ha&&wo(r,t,i,n),Zs}function Qs(t,e){const n=t[Te]++;return Bo(t),Ys(t,n,e)?e:Ha}function Js(t,e,n,r){const i=cr(),a=Fn(),o=Qs(a,e);return o!==Ha&&function(t,e,n,r,i,a){const o=_n(t,r),s=r[Me];if(null==n)Jr(s)?s.removeAttribute(o,e,a):o.removeAttribute(e);else{const l=Sn(t,r),u=null==i?vr(n):i(n,l.tagName||"",e);Jr(s)?s.setAttribute(o,e,u,a):a?o.setAttributeNS(a,e,u):o.setAttribute(e,u)}}(i,t,o,a,n,r),Js}function tl(t,e,n,r){const i=Ys(t,t[Te]++,n);return Bo(t,e,r),i?e+vr(n)+r:Ha}function el(t,e,n,r,i,a,o,s){const l=Fn(),u=l[Se],c=function(t,e,n,r){const i=e+Ue,a=t[i]=t[Me].createComment(""),o=oo(t[Se],t[De],e,0,n,r),s=t[i]=No(a,t,a,o);return ss(a,o,t),Oo(t,s),o}(l,t,i||null,a||null);if(u.firstTemplatePass){_o(u,l,c,o||null);const t=c.tViews=go(-1,e,n,r,u.directiveRegistry,u.pipeRegistry,null,null);null!==u.queries&&(u.queries.template(u,c),t.queries=u.queries.embeddedTView(c))}fo(u,l,c,s),pa(xn(c,l),l),ln(u,c),Yn()}function nl(t){return function(t,e){return t[e+Ue]}(Qn,t)}function rl(t,e=dt.Default){t=kt(t);const n=Fn();return null==n?qt(t,e):wi(Gn(),n,t,e)}function il(t){return function(t,e){if("class"===e)return Gr(t.classes);if("style"===e)return Gr(t.styles);const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(ni(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Gn(),t)}function al(){var t,e;Fn()[Se].firstTemplatePass&&(t=Gn(),e=ml(),Er(yl(t),e),Er(gl(t),e))}function ol(t,e,n){!function(t,e,n,r){ll(t,Fn()[Te]++,e,function(t,e){if(t===Ha)return t;let n=null;return null!==t&&(n=e?vr(t)+e:t),n}(n,r),!1,bl())}(cr(),t,e,n)}function sl(t,e){const n=Fn()[Te]++;ll(cr(),n,t,e,!0,bl())}function ll(t,e,n,r,i,a){const o=Fn(),s=Sn(t,o),l=xn(s,o);let u=!1;if(r!==Ha)if(i)u=Na(yl(s),o,l,n,e,r,a,!1);else{const t=gr();u=Ra(gl(s),o,l,n,e,r,t,a,!1)}return u}function ul(t,e){const n=Fn(),r=Sn(t,n),i=yl(r),a=ml(),o=n[Te]++;!a&&$r(r)&&e!==Ha&&(hl(i,n,r,o,e,!0),e=Ha),cl(t,i,o,e,!0,bl())}function cl(t,e,n,r,i,a){Ga();const o=Fn();let s=!1;if(r!==Ha){const l=xn(Sn(t,o),o),u=o[n];s=Br(u,r);const c=function(t,e,n){const r=Array.isArray(t)?t:[null];r[0]=e||null;for(let s=1;s<r.length;s+=2)Yr(r,s,null);let i,a=null,o=!1;if("string"==typeof e?e.length&&(a=e.split(/\s+/),o=!0):(a=e?Object.keys(e):null,i=e),a)for(let s=0;s<a.length;s++){const t=a[s];Ya(r,n?Wr(t):t,!!o||i[t],!0)}return r}(u,r,!i);i?Na(e,o,l,null,n,c,a,s):Ra(e,o,l,null,n,c,gr(),a,s)}return s}function hl(t,e,n,r,i,a){e[r]!==i&&((i||Lr(t))&&$o(e,n.inputs[a?"class":"style"],function(t,e,n){let r=e;var i;return t.length>0&&(r=n?Ur(t,((i=e)&&"string"!=typeof i&&(i=Object.keys(i).join(" ")),i||"")):Ur(t,function(t){let e="";if(t){const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r];e=Ur(e,`${i}:${t[i]}`,";")}}return e}(e),";")),r}(Gr(t),i,a)),e[r]=i)}function dl(){const t=cr(),e=Fn(),n=Sn(t,e),r=function(t,e){return 3===t.type?e[Me]:null}(n,e),i=xn(n,e),a=ml(),o=gr();(function(t,e,n,r,i,a,o){const s=n?zr(n):!!r&&zr(r),l=Pr(n,a),u=Pr(r,a);Ta.length&&(l||u)&&Fa();const c=yn(i,s),h=za(t,i,e,n,l,c.classesBitMask,Ua,null),d=za(t,i,e,r,u,c.stylesBitMask,ja,o);h&&d?(vn(),s&&function(t){pn.delete(t)}(i)):s&&function(t,e){pn.set(t,e)}(i,c)})(r,e,yl(n),gl(n),i,a,o),mr(null)}function pl(t,e,n){let r=!1,i=Hr(t.styles),a=Hr(t.classes),o=-1;for(let s=n;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?(Ya(a=a||[""],t,!0),r=!0):2==o&&(Ya(i=i||[""],t,e[++s]),r=!0)}return a&&a.length>1&&(t.classes||(t.classes=a),fl(t.classes,Za(a,!0))),i&&i.length>1&&(t.styles||(t.styles=i),fl(t.styles,Za(i,!1))),r}function fl(t,e){Hr(t)[0]=e}function ml(){return Vn+Bn}function gl(t){return vl(t,!1)}function yl(t){return vl(t,!0)}function vl(t,e){let n=e?t.classes:t.styles;return qr(n)||(n=[n||[""],0,kr,1,0,Sr],e?t.classes=n:t.styles=n),n}function bl(){return jn>0}function wl(t,e,n,r){const i=Fn(),a=i[Se],o=i[t+Ue]=io(e),s=i[Me],l=oo(a,i[De],t,3,e,n||null);if(null!=n){const t=ei(o,n);a.firstTemplatePass&&pl(l,n,t)}if(Ko(s,o,l),ss(o,l,i),0===Dn&&pa(o,i),Dn++,a.firstTemplatePass){_o(a,i,l,r||null);const t=Uo(l);t&&t.hasOwnProperty("class")&&(l.flags|=8),t&&t.hasOwnProperty("style")&&(l.flags|=16),null!==a.queries&&a.queries.elementStart(a,l)}fo(a,i,l),po(a,l,i)}function _l(){let t=Gn();Xn()?Yn():$n(t=t.parent,!1);const e=t,n=Fn(),r=n[Se];ln(r,t),Dn--,r.firstTemplatePass&&null!==r.queries&&Ze(t)&&r.queries.elementEnd(t),$r(e)&&e.classes&&Sl(e.classes,n,e.inputs.class),Kr(e)&&e.styles&&Sl(e.styles,n,e.inputs.style)}function xl(t,e,n,r){wl(t,e,n,r),_l()}function Cl(t){const e=cr(),n=Fn(),r=n[Se],i=Sn(e,n);if(3===i.type){const e=xn(i,n),a=ei(e,t);r.firstTemplatePass&&pl(i,t,a)&&Ko(n[Me],e,i)}}function Sl(t,e,n){$o(e,n,Gr(t)||null)}function kl(t,e,n){const r=Fn(),i=r[Se],a=r[t+Ue]=r[Me].createComment(""),o=oo(i,r[De],t,4,"ng-container",e||null);e&&i.firstTemplatePass&&pl(o,e,0),ss(a,o,r),i.firstTemplatePass&&(_o(i,r,o,n||null),i.queries&&i.queries.elementStart(i,o)),fo(i,r,o),pa(a,r),po(i,o,r)}function El(){let t=Gn();const e=Fn()[Se];Xn()?Yn():$n(t=t.parent,!1),ln(e,t),e.firstTemplatePass&&null!==e.queries&&Ze(t)&&e.queries.elementEnd(t)}function Il(){return Fn()}function Al(t){return!!t&&"function"==typeof t.then}function Dl(t){return!!t&&"function"==typeof t.subscribe}function Tl(t,e,n=!1,r){Rl(t,e,n,r)}function Nl(t,e,n=!1,r){Rl(t,e,n,r,qo)}function Rl(t,e,n=!1,r,i){const a=Fn(),o=Gn(),s=a[Se],l=s.firstTemplatePass&&(s.cleanup||(s.cleanup=[]));let u=!0;if(3===o.type){const s=xn(o,a),c=r?r(s):re,h=c.target||s,d=i?i(o,a):a[Me],p=Wo(a),f=p.length,m=r?t=>r(wn(t[o.index])).target:o.index;if(Jr(d)){let n=null;if(!r&&function(t){return t.directiveEnd>t.directiveStart}(o)&&(n=function(t,e,n){const r=t[Se].cleanup;if(null!=r)for(let i=0;i<r.length-1;i+=2){const a=r[i];if(a===e&&r[i+1]===n){const e=t[Ne],n=r[i+2];return e.length>n?e[n]:null}"string"==typeof a&&(i+=2)}return null}(a,t,o.index)),null!==n)e.__ngNextListenerFn__=n.__ngNextListenerFn__,n.__ngNextListenerFn__=e,u=!1;else{e=Fl(o,a,e,!1);const n=d.listen(c.name||h,t,e);p.push(e,n),l&&l.push(t,m,f,f+1)}}else e=Fl(o,a,e,!0),h.addEventListener(t,e,n),p.push(e),l&&l.push(t,m,f,n)}void 0===o.outputs&&(o.outputs=vo(o,1));const c=o.outputs;let h;if(u&&c&&(h=c[t])){const n=h.length;if(n){const r=Wo(a);for(let i=0;i<n;i+=3){const n=a[h[i]][h[i+2]].subscribe(e),s=r.length;r.push(e,n),l&&l.push(t,o.index,s,-(s+1))}}}}function Ol(t,e,n){try{return!1!==e(n)}catch(r){return Go(t,r),!1}}function Fl(t,e,n,r){return function i(a){const o=1&t.flags?kn(t.index,e):e;0==(32&e[ke])&&Fo(o);let s=Ol(e,n,a),l=i.__ngNextListenerFn__;for(;l;)s=Ol(e,l,a)&&s,l=l.__ngNextListenerFn__;return r&&!1===s&&(a.preventDefault(),a.returnValue=!1),s}}function Ml(t=1){return function(t=1){return(Qn=function(t,e){for(;t>0;)e=e[Ve],t--;return e}(t,Qn))[Re]}(t)}function Pl(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const a=e[i];if("*"!==a){if(null===r?Sa(t,a,!0):ka(r,a))return i}else n=i}return n}function Ll(t){const e=ci(Fn())[De];if(!e.projection){const n=e.projection=new Array(t?t.length:1).fill(null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?Pl(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}let zl=!1;function Vl(t,e=0,n){const r=Fn(),i=oo(r[Se],r[De],t,1,null,n||null);null===i.projection&&(i.projection=e),Yn(),zl||function t(e,n,r,i){const a=i[Ee];let o=i[De].projection[r];if(Array.isArray(o))ss(o,n,e);else for(;o;)32&o.flags||(1===o.type?t(e,n,o.projection,ci(a)):(o.flags|=2,cs(o,n,e,a))),o=o.projectionNext}(r,i,e,ci(r))}function Bl(t,e){const n=Fn(),r=n[t+Ue]=function(t,e){return Jr(e)?e.createText(vr(t)):e.createTextNode(vr(t))}(e,n[Me]),i=oo(n[Se],n[De],t,3,null,null);Yn(),ss(r,i,n)}function jl(t){return Ul("",t,""),jl}function Ul(t,e,n){const r=cr(),i=Fn(),a=tl(i,t,e,n);return a!==Ha&&function(t,e,n){const r=_n(e,t),i=t[Me];Jr(i)?i.setValue(r,n):r.textContent=n}(i,r,a),Ul}function Wl(t,e,n){const r=cr(),i=Qs(Fn(),e);return i!==Ha&&wo(r,t,i,n,!0),Wl}function Hl(t,e,n){const r=cr(),i=Qs(Fn(),e);return i!==Ha&&wo(r,t,i,n,!0,qo),Hl}function ql(t){const e=$l(t);return void 0===e.component&&(e.component=function(t,e){const n=e[Se].data[t];return 1&n.flags?e[n.directiveStart]:null}(e.nodeIndex,e.lView)),e.component}function Gl(t,e=!0){const n=function(t){let e=En(t);if(e){if(Array.isArray(e)){const r=e;let i,a=void 0,o=void 0;if((n=t)&&n.constructor&&n.constructor.ngComponentDef){if(-1==(i=function(t,e){const n=t[Se].components;if(n)for(let r=0;r<n.length;r++){const i=n[r];if(kn(i,t)[Re]===e)return i}else if(kn(Ue,t)[Re]===e)return Ue;return-1}(r,t)))throw new Error("The provided component was not found in the application");a=t}else if(function(t){return t&&t.constructor&&t.constructor.ngDirectiveDef}(t)){if(-1==(i=function(t,e){let n=t[Se].firstChild;for(;n;){const r=n.directiveEnd;for(let i=n.directiveStart;i<r;i++)if(t[i]===e)return n.index;n=ma(n)}return-1}(r,t)))throw new Error("The provided directive was not found in the application");o=function(t,e,n){const r=e[Se].data[t];let i=r.directiveStart;return 0==i?ie:(1&r.flags&&i++,e.slice(i,r.directiveEnd))}(i,r)}else if(-1==(i=fa(r,t)))return null;const s=wn(r[i]),l=En(s),u=l&&!Array.isArray(l)?l:da(r,i,s);if(a&&void 0===u.component&&(u.component=a,pa(u.component,u)),o&&void 0===u.directives){u.directives=o;for(let t=0;t<o.length;t++)pa(o[t],u)}pa(u.native,u),e=u}}else{const n=t;let r=n;for(;r=r.parentNode;){const t=En(r);if(t){let r;if(!(r=Array.isArray(t)?t:t.lView))return null;const i=fa(r,n);if(i>=0){const t=wn(r[i]),n=da(r,i,t);pa(t,n),e=n;break}}}}var n;return e||null}(t);if(!n&&e)throw new Error("Invalid ng target");return n}function $l(t){if(!(t instanceof Node))throw new Error("Expecting instance of DOM Node");return Gl(t)}function Kl(t){return"boolean"==typeof t.useCapture}function Xl(t,e){return t.name==e.name?0:t.name<e.name?-1:1}function Yl(t,e){const n=In(t)[Se],r=n.data.length-1;sn(r,e,n,-1,-1,-1),ln(n,{directiveStart:r,directiveEnd:r+1})}class Zl{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function Ql(){return Jl.ngInherit=!0,Jl}function Jl(t){t.type.prototype.ngOnChanges&&(t.setInput=tu,t.onChanges=function(){const t=nu(this),e=t&&t.current;if(e){const n=t.previous;if(n===re)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}})}function tu(t,e,n,r){const i=nu(t)||function(t,e){return t[eu]=e}(t,{previous:re,current:null}),a=i.current||(i.current={}),o=i.previous,s=this.declaredInputs[n],l=o[s];a[s]=new Zl(l&&l.currentValue,e,o===re),t[r]=e}const eu="__ngSimpleChanges__";function nu(t){return t[eu]||null}function ru(t){let e=Object.getPrototypeOf(t.type.prototype).constructor;for(;e;){let n=void 0;if(Je(t))n=e.ngComponentDef||e.ngDirectiveDef;else{if(e.ngComponentDef)throw new Error("Directives cannot inherit Components");n=e.ngDirectiveDef}const r=e.ngBaseDef;if(r||n){const e=t;e.inputs=iu(t.inputs),e.declaredInputs=iu(t.declaredInputs),e.outputs=iu(t.outputs)}if(r){const e=r.viewQuery,n=r.contentQueries,i=r.hostBindings;i&&su(t,i),e&&au(t,e),n&&ou(t,n),ft(t.inputs,r.inputs),ft(t.declaredInputs,r.declaredInputs),ft(t.outputs,r.outputs)}if(n){const e=n.hostBindings;e&&su(t,e);const r=n.viewQuery,i=n.contentQueries;r&&au(t,r),i&&ou(t,i),ft(t.inputs,n.inputs),ft(t.declaredInputs,n.declaredInputs),ft(t.outputs,n.outputs),t.afterContentChecked=t.afterContentChecked||n.afterContentChecked,t.afterContentInit=t.afterContentInit||n.afterContentInit,t.afterViewChecked=t.afterViewChecked||n.afterViewChecked,t.afterViewInit=t.afterViewInit||n.afterViewInit,t.doCheck=t.doCheck||n.doCheck,t.onDestroy=t.onDestroy||n.onDestroy,t.onInit=t.onInit||n.onInit;const a=n.features;if(a)for(const n of a)n&&n.ngInherit&&n(t)}else{const n=e.prototype;n&&(t.afterContentChecked=t.afterContentChecked||n.ngAfterContentChecked,t.afterContentInit=t.afterContentInit||n.ngAfterContentInit,t.afterViewChecked=t.afterViewChecked||n.ngAfterViewChecked,t.afterViewInit=t.afterViewInit||n.ngAfterViewInit,t.doCheck=t.doCheck||n.ngDoCheck,t.onDestroy=t.onDestroy||n.ngOnDestroy,t.onInit=t.onInit||n.ngOnInit,n.ngOnChanges&&Ql()(t))}e=Object.getPrototypeOf(e)}}function iu(t){return t===re?{}:t===ie?[]:t}function au(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function ou(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function su(t,e){const n=t.hostBindings;e!==n&&(t.hostBindings=n?(t,r,i)=>{Hn(1);try{e(t,r,i)}finally{Hn(-1)}n(t,r,i)}:e)}function lu(t,e,n,r,i){if(t=kt(t),Array.isArray(t))for(let a=0;a<t.length;a++)lu(t[a],e,n,r,i);else{const a=Fn(),o=a[Se];let s=Ms(t)?t:kt(t.provide),l=Rs(t);const u=Gn(),c=65535&u.providerIndexes,h=u.directiveStart,d=u.providerIndexes>>16;if(t.useClass||Ms(t)){const n=(t.useClass||t).prototype.ngOnDestroy;n&&(o.destroyHooks||(o.destroyHooks=[])).push(e.length,n)}if(Ms(t)||!t.multi){const t=new on(l,i,rl),r=cu(s,e,i?c:c+d,h);-1==r?(bi(mi(u,a),o,s),e.push(s),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=65536),n.push(t),a.push(t)):(n[r]=t,a[r]=t)}else{const t=cu(s,e,c+d,h),p=cu(s,e,c,c+d),f=t>=0&&n[t],m=p>=0&&n[p];if(i&&!m||!i&&!f){bi(mi(u,a),o,s);const t=function(t,e,n,r,i){const a=new on(t,n,rl);return a.multi=[],a.index=e,a.componentProviders=0,uu(a,i,r&&!n),a}(i?du:hu,n.length,i,r,l);!i&&m&&(n[p].providerFactory=t),e.push(s),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=65536),n.push(t),a.push(t)}else uu(n[i?p:t],l,!i&&r);!i&&r&&m&&n[p].componentProviders++}}}function uu(t,e,n){t.multi.push(e),n&&t.componentProviders++}function cu(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function hu(t,e,n,r){return pu(this.multi,[])}function du(t,e,n,r){const i=this.multi;let a;if(this.providerFactory){const t=this.providerFactory.componentProviders,o=Si(e,n,this.providerFactory.index,r);pu(i,a=o.slice(0,t));for(let e=t;e<o.length;e++)a.push(o[e])}else pu(i,a=[]);return a}function pu(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function fu(t,e=[]){return n=>{n.providersResolver=(n,r)=>(function(t,e,n){const r=Fn()[Se];if(r.firstTemplatePass){const i=Je(t);lu(n,r.data,r.blueprint,i,!0),lu(e,r.data,r.blueprint,i,!1)}})(n,r?r(t):t,e)}}class mu{}class gu{}function yu(t){const e=Error(`No component factory found for ${xt(t)}. Did you add it to @NgModule.entryComponents?`);return e[vu]=t,e}const vu="ngComponent";class bu{resolveComponentFactory(t){throw yu(t)}}let wu=(()=>{class t{}return t.NULL=new bu,t})();class _u{constructor(t,e,n){this._parent=e,this._ngModule=n,this._factories=new Map;for(let r=0;r<t.length;r++){const e=t[r];this._factories.set(e.componentType,e)}}resolveComponentFactory(t){let e=this._factories.get(t);if(!e&&this._parent&&(e=this._parent.resolveComponentFactory(t)),!e)throw yu(t);return new xu(e,this._ngModule)}}class xu extends gu{constructor(t,e){super(),this.factory=t,this.ngModule=e,this.selector=t.selector,this.componentType=t.componentType,this.ngContentSelectors=t.ngContentSelectors,this.inputs=t.inputs,this.outputs=t.outputs}create(t,e,n,r){return this.factory.create(t,e,n,r||this.ngModule)}}let Cu=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=()=>Su(t),t})();const Su=function(t){return vs(t,Gn(),Fn())};class ku{}class Eu{}const Iu=function(){var t={Important:1,DashCase:2};return t[t.Important]="Important",t[t.DashCase]="DashCase",t}();let Au=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Du(),t})();const Du=function(){const t=Fn(),e=kn(Gn().index,t);return function(t){const e=t[Me];if(Jr(e))return e;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(Xe(e)?e:t)};class Tu{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Nu=new Tu("8.2.10");class Ru{constructor(){}supports(t){return Ks(t)}create(t){return new Fu(t)}}const Ou=(t,e)=>e;class Fu{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Ou}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const a=!n||e&&e.currentIndex<zu(n,r,i)?e:n,o=zu(a,r,i),s=a.currentIndex;if(a===n)r--,n=n._nextRemoved;else if(e=e._next,null==a.previousIndex)r++;else{i||(i=[]);const t=o-r,e=s-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,a=r+n;e<=a&&a<t&&(i[n]=r+1)}i[a.previousIndex]=e-t}}o!==s&&t(a,o,s)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Ks(t))throw new Error(`Error trying to diff '${xt(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,a=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)r=this._trackByFn(e,n=t[e]),null!==i&&qs(i.trackById,r)?(a&&(i=this._verifyReinsertion(i,n,r,e)),qs(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),a=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Hs()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&qs(i.trackById,r)?(a&&(i=this._verifyReinsertion(i,t,r,e)),qs(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),a=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t,e;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(qs(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(qs(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new Mu(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Lu),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e?t:(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t,t)}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Lu),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Mu{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Pu{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&qs(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Lu{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Pu,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function zu(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Vu{constructor(){}supports(t){return t instanceof Map||Xs(t)}create(){return new Bu}}class Bu{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Xs(t)))throw new Error(`Error trying to diff '${xt(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new ju(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){qs(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class ju{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let Uu=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new ht,new ut]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.ngInjectableDef=mt({token:t,providedIn:"root",factory:()=>new t([new Ru])}),t})(),Wu=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new ht,new ut]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.ngInjectableDef=mt({token:t,providedIn:"root",factory:()=>new t([new Vu])}),t})();const Hu=[new Vu],qu=new Uu([new Ru]),Gu=new Wu(Hu);let $u=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Ku(t,Cu),t})();const Ku=function(t,e){return bs(t,e,Gn(),Fn())};let Xu=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Yu(t,Cu),t})();const Yu=function(t,e){return ws(t,e,Gn(),Fn())};function Zu(t,e,n,r){let i=`ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '${e}'. Current value: '${n}'.`;return r&&(i+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(t,e){const n=new Error(t);return Qu(n,e),n}(i,t)}function Qu(t,e){t[Di]=e,t[Ni]=e.logError.bind(e)}function Ju(t){return new Error(`ViewDestroyedError: Attempt to use a destroyed view: ${t}`)}function tc(t,e,n){const r=t.state,i=1792&r;return i===e?(t.state=-1793&r|n,t.initIndex=-1,!0):i===n}function ec(t,e,n){return(1792&t.state)===e&&t.initIndex<=n&&(t.initIndex=n+1,!0)}function nc(t,e){return t.nodes[e]}function rc(t,e){return t.nodes[e]}function ic(t,e){return t.nodes[e]}function ac(t,e){return t.nodes[e]}function oc(t,e){return t.nodes[e]}const sc={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0},lc=()=>{},uc=new Map;function cc(t){let e=uc.get(t);return e||(e=xt(t)+"_"+uc.size,uc.set(t,e)),e}const hc="$$undefined",dc="$$empty";function pc(t){return{id:hc,styles:t.styles,encapsulation:t.encapsulation,data:t.data}}let fc=0;function mc(t,e,n,r){return!(!(2&t.state)&&qs(t.oldValues[e.bindingIndex+n],r))}function gc(t,e,n,r){return!!mc(t,e,n,r)&&(t.oldValues[e.bindingIndex+n]=r,!0)}function yc(t,e,n,r){const i=t.oldValues[e.bindingIndex+n];if(1&t.state||!Gs(i,r)){const a=e.bindings[n].name;throw Zu(sc.createDebugContext(t,e.nodeIndex),`${a}: ${i}`,`${a}: ${r}`,0!=(1&t.state))}}function vc(t){let e=t;for(;e;)2&e.def.flags&&(e.state|=8),e=e.viewContainerParent||e.parent}function bc(t,e){let n=t;for(;n&&n!==e;)n.state|=64,n=n.viewContainerParent||n.parent}function wc(t,e,n,r){try{return vc(33554432&t.def.nodes[e].flags?rc(t,e).componentView:t),sc.handleEvent(t,e,n,r)}catch(i){t.root.errorHandler.handleError(i)}}function _c(t){return t.parent?rc(t.parent,t.parentNodeDef.nodeIndex):null}function xc(t){return t.parent?t.parentNodeDef.parent:null}function Cc(t,e){switch(201347067&e.flags){case 1:return rc(t,e.nodeIndex).renderElement;case 2:return nc(t,e.nodeIndex).renderText}}function Sc(t){return!!t.parent&&!!(32768&t.parentNodeDef.flags)}function kc(t){return!(!t.parent||32768&t.parentNodeDef.flags)}function Ec(t){return 1<<t%32}function Ic(t){const e={};let n=0;const r={};return t&&t.forEach(([t,i])=>{"number"==typeof t?(e[t]=i,n|=Ec(t)):r[t]=i}),{matchedQueries:e,references:r,matchedQueryIds:n}}function Ac(t,e){return t.map(t=>{let n,r;return Array.isArray(t)?[r,n]=t:(r=0,n=t),n&&("function"==typeof n||"object"==typeof n)&&e&&Object.defineProperty(n,zt,{value:e,configurable:!0}),{flags:r,token:n,tokenKey:cc(n)}})}function Dc(t,e,n){let r=n.renderParent;return r?0==(1&r.flags)||0==(33554432&r.flags)||r.element.componentRendererType&&r.element.componentRendererType.encapsulation===ne.Native?rc(t,n.renderParent.nodeIndex).renderElement:void 0:e}const Tc=new WeakMap;function Nc(t){let e=Tc.get(t);return e||((e=t(()=>lc)).factory=t,Tc.set(t,e)),e}function Rc(t,e,n,r,i){3===e&&(n=t.renderer.parentNode(Cc(t,t.def.lastRenderRootNode))),Oc(t,e,0,t.def.nodes.length-1,n,r,i)}function Oc(t,e,n,r,i,a,o){for(let s=n;s<=r;s++){const n=t.def.nodes[s];11&n.flags&&Mc(t,n,e,i,a,o),s+=n.childCount}}function Fc(t,e,n,r,i,a){let o=t;for(;o&&!Sc(o);)o=o.parent;const s=o.parent,l=xc(o),u=l.nodeIndex+l.childCount;for(let c=l.nodeIndex+1;c<=u;c++){const t=s.def.nodes[c];t.ngContentIndex===e&&Mc(s,t,n,r,i,a),c+=t.childCount}if(!s.parent){const o=t.root.projectableNodes[e];if(o)for(let e=0;e<o.length;e++)Pc(t,o[e],n,r,i,a)}}function Mc(t,e,n,r,i,a){if(8&e.flags)Fc(t,e.ngContent.index,n,r,i,a);else{const o=Cc(t,e);if(3===n&&33554432&e.flags&&48&e.bindingFlags?(16&e.bindingFlags&&Pc(t,o,n,r,i,a),32&e.bindingFlags&&Pc(rc(t,e.nodeIndex).componentView,o,n,r,i,a)):Pc(t,o,n,r,i,a),16777216&e.flags){const o=rc(t,e.nodeIndex).viewContainer._embeddedViews;for(let t=0;t<o.length;t++)Rc(o[t],n,r,i,a)}1&e.flags&&!e.element.name&&Oc(t,n,e.nodeIndex+1,e.nodeIndex+e.childCount,r,i,a)}}function Pc(t,e,n,r,i,a){const o=t.renderer;switch(n){case 1:o.appendChild(r,e);break;case 2:o.insertBefore(r,e,i);break;case 3:o.removeChild(r,e);break;case 0:a.push(e)}}const Lc=/^:([^:]+):(.+)$/;function zc(t){if(":"===t[0]){const e=t.match(Lc);return[e[1],e[2]]}return["",t]}function Vc(t){let e=0;for(let n=0;n<t.length;n++)e|=t[n].flags;return e}const Bc=new Object,jc=cc(Ls),Uc=cc(Rt),Wc=cc(Yt);function Hc(t,e,n,r){return n=kt(n),{index:-1,deps:Ac(r,xt(e)),flags:t,token:e,value:n}}function qc(t,e,n=Ls.THROW_IF_NOT_FOUND){const r=Ut(t);try{if(8&e.flags)return e.token;if(2&e.flags&&(n=null),1&e.flags)return t._parent.get(e.token,n);const o=e.tokenKey;switch(o){case jc:case Uc:case Wc:return t}const s=t._def.providersByKey[o];let l;if(s){let e=t._providers[s.index];return void 0===e&&(e=t._providers[s.index]=Gc(t,s)),e===Bc?void 0:e}if((l=vt(e.token))&&(i=t,null!=(a=l).providedIn&&(function(t,e){return t._def.modules.indexOf(e)>-1}(i,a.providedIn)||"root"===a.providedIn&&i._def.isRoot))){const n=t._providers.length;return t._def.providers[n]=t._def.providersByKey[e.tokenKey]={flags:5120,value:l.factory,deps:[],index:n,token:e.token},t._providers[n]=Bc,t._providers[n]=Gc(t,t._def.providersByKey[e.tokenKey])}return 4&e.flags?n:t._parent.get(e.token,n)}finally{Ut(r)}var i,a}function Gc(t,e){let n;switch(201347067&e.flags){case 512:n=function(t,e,n){const r=n.length;switch(r){case 0:return new e;case 1:return new e(qc(t,n[0]));case 2:return new e(qc(t,n[0]),qc(t,n[1]));case 3:return new e(qc(t,n[0]),qc(t,n[1]),qc(t,n[2]));default:const i=new Array(r);for(let e=0;e<r;e++)i[e]=qc(t,n[e]);return new e(...i)}}(t,e.value,e.deps);break;case 1024:n=function(t,e,n){const r=n.length;switch(r){case 0:return e();case 1:return e(qc(t,n[0]));case 2:return e(qc(t,n[0]),qc(t,n[1]));case 3:return e(qc(t,n[0]),qc(t,n[1]),qc(t,n[2]));default:const i=Array(r);for(let e=0;e<r;e++)i[e]=qc(t,n[e]);return e(...i)}}(t,e.value,e.deps);break;case 2048:n=qc(t,e.deps[0]);break;case 256:n=e.value}return n===Bc||null===n||"object"!=typeof n||131072&e.flags||"function"!=typeof n.ngOnDestroy||(e.flags|=131072),void 0===n?Bc:n}function $c(t,e){const n=t.viewContainer._embeddedViews;if((null==e||e>=n.length)&&(e=n.length-1),e<0)return null;const r=n[e];return r.viewContainerParent=null,te(n,e),sc.dirtyParentQueries(r),Xc(r),r}function Kc(t,e,n){const r=e?Cc(e,e.def.lastRenderRootNode):t.renderElement,i=n.renderer.parentNode(r),a=n.renderer.nextSibling(r);Rc(n,2,i,a,void 0)}function Xc(t){Rc(t,3,null,null,void 0)}const Yc=new Object;function Zc(t,e,n,r,i,a){return new Qc(t,e,n,r,i,a)}class Qc extends gu{constructor(t,e,n,r,i,a){super(),this.selector=t,this.componentType=e,this._inputs=r,this._outputs=i,this.ngContentSelectors=a,this.viewDefFactory=n}get inputs(){const t=[],e=this._inputs;for(let n in e)t.push({propName:n,templateName:e[n]});return t}get outputs(){const t=[];for(let e in this._outputs)t.push({propName:e,templateName:this._outputs[e]});return t}create(t,e,n,r){if(!r)throw new Error("ngModule should be provided");const i=Nc(this.viewDefFactory),a=i.nodes[0].element.componentProvider.nodeIndex,o=sc.createRootView(t,e||[],n,i,r,Yc),s=ic(o,a).instance;return n&&o.renderer.setAttribute(rc(o,0).renderElement,"ng-version",Nu.full),new Jc(o,new rh(o),s)}}class Jc extends mu{constructor(t,e,n){super(),this._view=t,this._viewRef=e,this._component=n,this._elDef=this._view.def.nodes[0],this.hostView=e,this.changeDetectorRef=e,this.instance=n}get location(){return new Cu(rc(this._view,this._elDef.nodeIndex).renderElement)}get injector(){return new sh(this._view,this._elDef)}get componentType(){return this._component.constructor}destroy(){this._viewRef.destroy()}onDestroy(t){this._viewRef.onDestroy(t)}}function th(t,e,n){return new eh(t,e,n)}class eh{constructor(t,e,n){this._view=t,this._elDef=e,this._data=n,this._embeddedViews=[]}get element(){return new Cu(this._data.renderElement)}get injector(){return new sh(this._view,this._elDef)}get parentInjector(){let t=this._view,e=this._elDef.parent;for(;!e&&t;)e=xc(t),t=t.parent;return t?new sh(t,e):new sh(this._view,null)}clear(){for(let t=this._embeddedViews.length-1;t>=0;t--){const e=$c(this._data,t);sc.destroyView(e)}}get(t){const e=this._embeddedViews[t];if(e){const t=new rh(e);return t.attachToViewContainerRef(this),t}return null}get length(){return this._embeddedViews.length}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const a=n||this.parentInjector;i||t instanceof xu||(i=a.get(Yt));const o=t.create(a,r,void 0,i);return this.insert(o.hostView,e),o}insert(t,e){if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");const n=t;return function(t,e,n,r){let i=e.viewContainer._embeddedViews;null==n&&(n=i.length),r.viewContainerParent=t,Jt(i,n,r),function(t,e){const n=_c(e);if(!n||n===t||16&e.state)return;e.state|=16;let r=n.template._projectedViews;r||(r=n.template._projectedViews=[]),r.push(e),function(t,e){if(4&e.flags)return;t.nodeFlags|=4,e.flags|=4;let n=e.parent;for(;n;)n.childFlags|=4,n=n.parent}(e.parent.def,e.parentNodeDef)}(e,r),sc.dirtyParentQueries(r),Kc(e,n>0?i[n-1]:null,r)}(this._view,this._data,e,n._view),n.attachToViewContainerRef(this),t}move(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");const n=this._embeddedViews.indexOf(t._view);return function(t,e,n){const r=t.viewContainer._embeddedViews,i=r[e];te(r,e),null==n&&(n=r.length),Jt(r,n,i),sc.dirtyParentQueries(i),Xc(i),Kc(t,n>0?r[n-1]:null,i)}(this._data,n,e),t}indexOf(t){return this._embeddedViews.indexOf(t._view)}remove(t){const e=$c(this._data,t);e&&sc.destroyView(e)}detach(t){const e=$c(this._data,t);return e?new rh(e):null}}function nh(t){return new rh(t)}class rh{constructor(t){this._view=t,this._viewContainerRef=null,this._appRef=null}get rootNodes(){return function(t){const e=[];return Rc(t,0,void 0,void 0,e),e}(this._view)}get context(){return this._view.context}get destroyed(){return 0!=(128&this._view.state)}markForCheck(){vc(this._view)}detach(){this._view.state&=-5}detectChanges(){const t=this._view.root.rendererFactory;t.begin&&t.begin();try{sc.checkAndUpdateView(this._view)}finally{t.end&&t.end()}}checkNoChanges(){sc.checkNoChangesView(this._view)}reattach(){this._view.state|=4}onDestroy(t){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(t)}destroy(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),sc.destroyView(this._view)}detachFromAppRef(){this._appRef=null,Xc(this._view),sc.dirtyParentQueries(this._view)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}}function ih(t,e){return new ah(t,e)}class ah extends $u{constructor(t,e){super(),this._parentView=t,this._def=e}createEmbeddedView(t){return new rh(sc.createEmbeddedView(this._parentView,this._def,this._def.element.template,t))}get elementRef(){return new Cu(rc(this._parentView,this._def.nodeIndex).renderElement)}}function oh(t,e){return new sh(t,e)}class sh{constructor(t,e){this.view=t,this.elDef=e}get(t,e=Ls.THROW_IF_NOT_FOUND){return sc.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:t,tokenKey:cc(t)},e)}}function lh(t,e){const n=t.def.nodes[e];if(1&n.flags){const e=rc(t,n.nodeIndex);return n.element.template?e.template:e.renderElement}if(2&n.flags)return nc(t,n.nodeIndex).renderText;if(20240&n.flags)return ic(t,n.nodeIndex).instance;throw new Error(`Illegal state: read nodeValue for node index ${e}`)}function uh(t){return new ch(t.renderer)}class ch{constructor(t){this.delegate=t}selectRootElement(t){return this.delegate.selectRootElement(t)}createElement(t,e){const[n,r]=zc(e),i=this.delegate.createElement(r,n);return t&&this.delegate.appendChild(t,i),i}createViewRoot(t){return t}createTemplateAnchor(t){const e=this.delegate.createComment("");return t&&this.delegate.appendChild(t,e),e}createText(t,e){const n=this.delegate.createText(e);return t&&this.delegate.appendChild(t,n),n}projectNodes(t,e){for(let n=0;n<e.length;n++)this.delegate.appendChild(t,e[n])}attachViewAfter(t,e){const n=this.delegate.parentNode(t),r=this.delegate.nextSibling(t);for(let i=0;i<e.length;i++)this.delegate.insertBefore(n,e[i],r)}detachView(t){for(let e=0;e<t.length;e++){const n=t[e],r=this.delegate.parentNode(n);this.delegate.removeChild(r,n)}}destroyView(t,e){for(let n=0;n<e.length;n++)this.delegate.destroyNode(e[n])}listen(t,e,n){return this.delegate.listen(t,e,n)}listenGlobal(t,e,n){return this.delegate.listen(t,e,n)}setElementProperty(t,e,n){this.delegate.setProperty(t,e,n)}setElementAttribute(t,e,n){const[r,i]=zc(e);null!=n?this.delegate.setAttribute(t,i,n,r):this.delegate.removeAttribute(t,i,r)}setBindingDebugInfo(t,e,n){}setElementClass(t,e,n){n?this.delegate.addClass(t,e):this.delegate.removeClass(t,e)}setElementStyle(t,e,n){null!=n?this.delegate.setStyle(t,e,n):this.delegate.removeStyle(t,e)}invokeElementMethod(t,e,n){t[e].apply(t,n)}setText(t,e){this.delegate.setValue(t,e)}animate(){throw new Error("Renderer.animate is no longer supported!")}}function hh(t,e,n,r){return new dh(t,e,n,r)}class dh{constructor(t,e,n,r){this._moduleType=t,this._parent=e,this._bootstrapComponents=n,this._def=r,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(t){const e=t._def,n=t._providers=new Array(e.providers.length);for(let r=0;r<e.providers.length;r++){const i=e.providers[r];4096&i.flags||void 0===n[r]&&(n[r]=Gc(t,i))}}(this)}get(t,e=Ls.THROW_IF_NOT_FOUND,n=dt.Default){let r=0;return n&dt.SkipSelf?r|=1:n&dt.Self&&(r|=4),qc(this,{token:t,tokenKey:cc(t),flags:r},e)}get instance(){return this.get(this._moduleType)}get componentFactoryResolver(){return this.get(wu)}destroy(){if(this._destroyed)throw new Error(`The ng module ${xt(this.instance.constructor)} has already been destroyed.`);this._destroyed=!0,function(t,e){const n=t._def,r=new Set;for(let i=0;i<n.providers.length;i++)if(131072&n.providers[i].flags){const e=t._providers[i];if(e&&e!==Bc){const t=e.ngOnDestroy;"function"!=typeof t||r.has(e)||(t.apply(e),r.add(e))}}}(this),this._destroyListeners.forEach(t=>t())}onDestroy(t){this._destroyListeners.push(t)}}const ph=cc(ku),fh=cc(Au),mh=cc(Cu),gh=cc(Xu),yh=cc($u),vh=cc(_s),bh=cc(Ls),wh=cc(Rt);function _h(t,e,n,r,i,a,o,s){const l=[];if(o)for(let c in o){const[t,e]=o[c];l[t]={flags:8,name:c,nonMinifiedName:e,ns:null,securityContext:null,suffix:null}}const u=[];if(s)for(let c in s)u.push({type:1,propName:c,target:null,eventName:s[c]});return Ch(t,e|=16384,n,r,i,i,a,l,u)}function xh(t,e,n,r,i){return Ch(-1,t,e,0,n,r,i)}function Ch(t,e,n,r,i,a,o,s,l){const{matchedQueries:u,references:c,matchedQueryIds:h}=Ic(n);l||(l=[]),s||(s=[]),a=kt(a);const d=Ac(o,xt(i));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:u,matchedQueryIds:h,references:c,ngContentIndex:-1,childCount:r,bindings:s,bindingFlags:Vc(s),outputs:l,element:null,provider:{token:i,value:a,deps:d},text:null,query:null,ngContent:null}}function Sh(t,e){return Ah(t,e)}function kh(t,e){let n=t;for(;n.parent&&!Sc(n);)n=n.parent;return Dh(n.parent,xc(n),!0,e.provider.value,e.provider.deps)}function Eh(t,e){const n=Dh(t,e.parent,(32768&e.flags)>0,e.provider.value,e.provider.deps);if(e.outputs.length)for(let r=0;r<e.outputs.length;r++){const i=e.outputs[r],a=n[i.propName];if(!Dl(a))throw new Error(`@Output ${i.propName} not initialized in '${n.constructor.name}'.`);{const n=a.subscribe(Ih(t,e.parent.nodeIndex,i.eventName));t.disposables[e.outputIndex+r]=n.unsubscribe.bind(n)}}return n}function Ih(t,e,n){return r=>wc(t,e,n,r)}function Ah(t,e){const n=(8192&e.flags)>0,r=e.provider;switch(201347067&e.flags){case 512:return Dh(t,e.parent,n,r.value,r.deps);case 1024:return function(t,e,n,r,i){const a=i.length;switch(a){case 0:return r();case 1:return r(Nh(t,e,n,i[0]));case 2:return r(Nh(t,e,n,i[0]),Nh(t,e,n,i[1]));case 3:return r(Nh(t,e,n,i[0]),Nh(t,e,n,i[1]),Nh(t,e,n,i[2]));default:const o=Array(a);for(let r=0;r<a;r++)o[r]=Nh(t,e,n,i[r]);return r(...o)}}(t,e.parent,n,r.value,r.deps);case 2048:return Nh(t,e.parent,n,r.deps[0]);case 256:return r.value}}function Dh(t,e,n,r,i){const a=i.length;switch(a){case 0:return new r;case 1:return new r(Nh(t,e,n,i[0]));case 2:return new r(Nh(t,e,n,i[0]),Nh(t,e,n,i[1]));case 3:return new r(Nh(t,e,n,i[0]),Nh(t,e,n,i[1]),Nh(t,e,n,i[2]));default:const o=new Array(a);for(let r=0;r<a;r++)o[r]=Nh(t,e,n,i[r]);return new r(...o)}}const Th={};function Nh(t,e,n,r,i=Ls.THROW_IF_NOT_FOUND){if(8&r.flags)return r.token;const a=t;2&r.flags&&(i=null);const o=r.tokenKey;o===vh&&(n=!(!e||!e.element.componentView)),e&&1&r.flags&&(n=!1,e=e.parent);let s=t;for(;s;){if(e)switch(o){case ph:return uh(Rh(s,e,n));case fh:return Rh(s,e,n).renderer;case mh:return new Cu(rc(s,e.nodeIndex).renderElement);case gh:return rc(s,e.nodeIndex).viewContainer;case yh:if(e.element.template)return rc(s,e.nodeIndex).template;break;case vh:return nh(Rh(s,e,n));case bh:case wh:return oh(s,e);default:const t=(n?e.element.allProviders:e.element.publicProviders)[o];if(t){let e=ic(s,t.nodeIndex);return e||(e={instance:Ah(s,t)},s.nodes[t.nodeIndex]=e),e.instance}}n=Sc(s),e=xc(s),s=s.parent,4&r.flags&&(s=null)}const l=a.root.injector.get(r.token,Th);return l!==Th||i===Th?l:a.root.ngModule.injector.get(r.token,i)}function Rh(t,e,n){let r;if(n)r=rc(t,e.nodeIndex).componentView;else for(r=t;r.parent&&!Sc(r);)r=r.parent;return r}function Oh(t,e,n,r,i,a){if(32768&n.flags){const e=rc(t,n.parent.nodeIndex).componentView;2&e.def.flags&&(e.state|=8)}if(e.instance[n.bindings[r].name]=i,524288&n.flags){a=a||{};const e=$s.unwrap(t.oldValues[n.bindingIndex+r]);a[n.bindings[r].nonMinifiedName]=new Zl(e,i,0!=(2&t.state))}return t.oldValues[n.bindingIndex+r]=i,a}function Fh(t,e){if(!(t.def.nodeFlags&e))return;const n=t.def.nodes;let r=0;for(let i=0;i<n.length;i++){const a=n[i];let o=a.parent;for(!o&&a.flags&e&&Ph(t,i,a.flags&e,r++),0==(a.childFlags&e)&&(i+=a.childCount);o&&1&o.flags&&i===o.nodeIndex+o.childCount;)o.directChildFlags&e&&(r=Mh(t,o,e,r)),o=o.parent}}function Mh(t,e,n,r){for(let i=e.nodeIndex+1;i<=e.nodeIndex+e.childCount;i++){const e=t.def.nodes[i];e.flags&n&&Ph(t,i,e.flags&n,r++),i+=e.childCount}return r}function Ph(t,e,n,r){const i=ic(t,e);if(!i)return;const a=i.instance;a&&(sc.setCurrentNode(t,e),1048576&n&&ec(t,512,r)&&a.ngAfterContentInit(),2097152&n&&a.ngAfterContentChecked(),4194304&n&&ec(t,768,r)&&a.ngAfterViewInit(),8388608&n&&a.ngAfterViewChecked(),131072&n&&a.ngOnDestroy())}function Lh(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const zh=new Nt("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>wr});class Vh extends gu{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors[0][0]||"div",this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Lh(this.componentDef.inputs)}get outputs(){return Lh(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const a=t.get(n,Th,i);return a!==Th||r===Th?a:e.get(n,r,i)}}}(t,r.injector):t,a=i.get(Eu,ti),o=i.get(sa,null);fr();const s=n?function(t,e){const n=t.createRenderer(null,null);return"string"==typeof e?Jr(n)?n.selectRootElement(e):n.querySelector(e):e}(a,n):io(this.selector,a.createRenderer(null,this.componentDef)),l=this.componentDef.onPush?576:528,u="string"==typeof n&&/^#root-ng-internal-isolated-\d+/.test(n),c={components:[],scheduler:wr,clean:jo,playerHandler:null,flags:0},h=a.createRenderer(s,this.componentDef);n&&s&&(Jr(h)?h.setAttribute(s,"ng-version",Nu.full):s.setAttribute("ng-version",Nu.full));const d=ao(null,go(-1,null,1,0,null,null,null,null),c,l,null,null,a,h,o,i),p=sr(d,null);let f,m,g=!1;try{const t=function(t,e,n,r,i,a){Ln=!1,Pn=null,Dn=0,Tn=!0,mr(null),vn(),pn.clear();const o=n[Se];n[0+Ue]=t;const s=oo(o,null,0,3,null,null),l=ao(n,mo(e),null,e.onPush?64:16,n[Ue],s,r,i,a);return o.firstTemplatePass&&(bi(mi(s,n),o,e.type),s.flags=1,Ao(s,n.length,1),Eo(s)),n[Ue]=l}(s,this.componentDef,d,a,h);m=Sn(0,d),e&&(m.projection=e.map(t=>Array.from(t))),f=function(t,e,n,r,i){const a=n[Se],o=function(t,e,n){const r=Gn();t.firstTemplatePass&&(n.providersResolver&&n.providersResolver(n),Co(t,r,1),Do(t,e,n,n.factory));const i=Si(t.data,e,e.length-1,r);return ko(e,r,i),i}(a,n,e);r.components.push(o),t[Re]=o,i&&i.forEach(t=>t(o,e)),e.contentQueries&&e.contentQueries(1,o,n.length-1);const s=Gn();return a.firstTemplatePass&&e.hostBindings&&(Un(s.index-Ue),xo(e,a.expandoInstructions,o,s,a.firstTemplatePass),Un(null)),o}(t,this.componentDef,d,c,[Yl]),Oo(d,t),no(d),g=!0}finally{lr(p,g)}const y=new Bh(this.componentType,f,vs(Cu,m,d),d,m);return n&&!u||(y.hostView._tViewNode.child=m),y}}class Bh extends mu{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.destroyCbs=[],this.instance=e,this.hostView=this.changeDetectorRef=new fs(r),this.hostView._tViewNode=so(r[Se],null,-1,r),this.componentType=t}get injector(){return new Ii(this._tNode,this._rootLView)}destroy(){this.destroyCbs&&(this.destroyCbs.forEach(t=>t()),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}onDestroy(t){this.destroyCbs&&this.destroyCbs.push(t)}}const jh={},Uh=function(){var t={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencySymbol:15,CurrencyName:16,Currencies:17,PluralCase:18,ExtraData:19};return t[t.LocaleId]="LocaleId",t[t.DayPeriodsFormat]="DayPeriodsFormat",t[t.DayPeriodsStandalone]="DayPeriodsStandalone",t[t.DaysFormat]="DaysFormat",t[t.DaysStandalone]="DaysStandalone",t[t.MonthsFormat]="MonthsFormat",t[t.MonthsStandalone]="MonthsStandalone",t[t.Eras]="Eras",t[t.FirstDayOfWeek]="FirstDayOfWeek",t[t.WeekendRange]="WeekendRange",t[t.DateFormat]="DateFormat",t[t.TimeFormat]="TimeFormat",t[t.DateTimeFormat]="DateTimeFormat",t[t.NumberSymbols]="NumberSymbols",t[t.NumberFormats]="NumberFormats",t[t.CurrencySymbol]="CurrencySymbol",t[t.CurrencyName]="CurrencyName",t[t.Currencies]="Currencies",t[t.PluralCase]="PluralCase",t[t.ExtraData]="ExtraData",t}(),Wh=void 0;var Hh=["en",[["a","p"],["AM","PM"],Wh],[["AM","PM"],Wh,Wh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Wh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Wh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Wh,"{1} 'at' {0}",Wh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",{},function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];const qh="en-US";let Gh=qh;function $h(t){var e;e="Expected localeId to be defined",null==t&&function(t){throw new Error(`ASSERTION ERROR: ${t}`)}(e),"string"==typeof t&&(Gh=t.toLowerCase().replace(/_/g,"-"))}const Kh=new Map,Xh={provide:wu,useClass:class extends wu{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=be(t);return new Vh(e,this.ngModule)}},deps:[Yt]};class Yh extends Yt{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[];const n=xe(t),r=t[ue]||null;r&&$h(r),this._bootstrapComponents=Cr(n.bootstrap),this._r3Injector=Ds(t,e,[{provide:Yt,useValue:this},Xh],xt(t)),this.instance=this.get(t)}get(t,e=Ls.THROW_IF_NOT_FOUND,n=dt.Default){return t===Ls||t===Yt||t===Rt?this:this._r3Injector.get(t,e,n)}get componentFactoryResolver(){return this.get(wu)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Zh extends Zt{constructor(t){super(),this.moduleType=t,null!==xe(t)&&function t(e){if(null!==e.ngModuleDef.id){const t=e.ngModuleDef.id;(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${xt(e)} vs ${xt(e.name)}`)})(t,Kh.get(t),e),Kh.set(t,e)}let n=e.ngModuleDef.imports;n instanceof Function&&(n=n()),n&&n.forEach(e=>t(e))}(t)}create(t){return new Yh(this.moduleType,t)}}class Qh extends I{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,i=t=>null,a=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(i=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(a=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(i=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(a=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const o=super.subscribe(r,i,a);return t instanceof d&&t.add(o),o}}function Jh(){return this._results[Hs()]()}class td{constructor(){this.dirty=!0,this._results=[],this.changes=new Qh,this.length=0;const t=Hs(),e=td.prototype;e[t]||(e[t]=Jh)}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t){this._results=function t(e,n){void 0===n&&(n=e);for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?(n===e&&(n=e.slice(0,r)),t(i,n)):n!==e&&n.push(i)}return n}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class ed{constructor(t){this.queryList=t,this.matches=null}clone(){return new ed(this.queryList)}setDirty(){this.queryList.setDirty()}}class nd{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=new Array(n);for(let t=0;t<n;t++){const n=e.getByIndex(t);r[t]=this.queries[n.indexInDeclarationView].clone()}return new nd(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==_d(t,e).matches&&this.queries[e].setDirty()}}class rd{constructor(t,e,n,r=null){this.predicate=t,this.descendants=e,this.isStatic=n,this.read=r}}class id{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n of this.queries)n.elementStart(t,e)}elementEnd(t){for(let e of this.queries)e.elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new id(e):null}template(t,e){for(let n of this.queries)n.template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class ad{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new ad(this.metadata)):null}isApplyingToNode(t){return this._appliesToNextNode&&!1===this.metadata.descendants?this._declarationNodeIndex===(t.parent?t.parent.index:-1):this._appliesToNextNode}matchTNode(t,e){if(Array.isArray(this.metadata.predicate)){const n=this.metadata.predicate;for(let r=0;r<n.length;r++)this.matchTNodeWithReadOption(t,e,od(e,n[r]))}else{const n=this.metadata.predicate;n===$u?0===e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Ci(e,t,n,!1,!1))}}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Cu||r===Xu||r===$u&&0===e.type)this.addMatch(e.index,-2);else{const n=Ci(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function od(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function sd(t,e,n,r){return-1===n?function(t,e){return 3===t.type||4===t.type?vs(Cu,t,e):0===t.type?bs($u,Cu,t,e):null}(e,t):-2===n?function(t,e,n){return n===Cu?vs(Cu,e,t):n===$u?bs($u,Cu,e,t):n===Xu?ws(Xu,Cu,e,t):void 0}(t,e,r):Si(t[Se].data,t,n,e)}function ld(t,e,n){const r=t[Ae].queries[n];if(null===r.matches){const n=t[Se].data,i=e.matches,a=new Array(i.length/2);for(let r=0;r<i.length;r+=2){const o=i[r];a[r/2]=o<0?null:sd(t,n[o],i[r+1],e.metadata.read)}r.matches=a}return r.matches}function ud(t){const e=Fn(),n=ar();or(n+1);const r=_d(e[Se],n);if(t.dirty&&Zn()===r.metadata.isStatic){if(null===r.matches)t.reset([]);else{const i=r.crossesNgTemplate?function t(e,n,r){const i=e[Se].queries.getByIndex(n),a=i.matches;if(null!==a){const o=ld(e,i,n);for(let n=0;n<a.length;n+=2){const i=a[n];if(i>0)r.push(o[n/2]);else{const o=a[n+1],s=e[-i];for(let e=Ke;e<s.length;e++){const n=s[e];n[Be]===n[Ee]&&t(n,o,r)}if(null!==s[qe])for(let e of s[qe])t(e,o,r)}}}return r}(e,n,[]):ld(e,r,n);t.reset(i),t.notifyOnChanges()}return!0}return!1}function cd(t,e,n){dd(Fn(),t,e,n,!0)}function hd(t,e,n){dd(Fn(),t,e,n,!1)}function dd(t,e,n,r,i){const a=t[Se];a.firstTemplatePass&&(wd(a,new rd(e,n,i,r),-1),i&&(a.staticViewQueries=!0)),bd(t)}function pd(){return vd(Fn(),ar())}function fd(t,e,n,r){gd(Fn(),e,n,r,!1,Gn(),t)}function md(t,e,n,r){gd(Fn(),e,n,r,!0,Gn(),t)}function gd(t,e,n,r,i,a,o){const s=t[Se];s.firstTemplatePass&&(wd(s,new rd(e,n,i,r),a.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(t.contentQueries.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(s,o),i&&(s.staticContentQueries=!0)),bd(t)}function yd(){return vd(Fn(),ar())}function vd(t,e){return t[Ae].queries[e].queryList}function bd(t){const e=new td;!function(t,e,n){const r=Wo(t);r.push(e),t[Se].firstTemplatePass&&Ho(t).push(n,r.length-1)}(t,e,e.destroy),null===t[Ae]&&(t[Ae]=new nd),t[Ae].queries.push(new ed(e))}function wd(t,e,n){null===t.queries&&(t.queries=new id),t.queries.track(new ad(e,n))}function _d(t,e){return t.queries.getByIndex(e)}const xd=new Nt("Application Initializer");let Cd=(()=>{class t{constructor(t){this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Al(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt(xd,8))},providedIn:null}),t})();const Sd=new Nt("AppId");function kd(){return`${Id()}${Id()}${Id()}`}const Ed={provide:Sd,useFactory:kd,deps:[]};function Id(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ad=new Nt("Platform Initializer"),Dd=new Nt("Platform ID"),Td=new Nt("appBootstrapListener");let Nd=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)},providedIn:null}),t})();const Rd=new Nt("LocaleId"),Od=!0;class Fd{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Md=function(t){return new Zh(t)},Pd=Md,Ld=function(t){return Promise.resolve(Md(t))},zd=function(t){const e=Md(t),n=Cr(xe(t).declarations).reduce((t,e)=>{const n=be(e);return n&&t.push(new Vh(n)),t},[]);return new Fd(e,n)},Vd=zd,Bd=function(t){return Promise.resolve(zd(t))};let jd=(()=>{class t{constructor(){this.compileModuleSync=Pd,this.compileModuleAsync=Ld,this.compileModuleAndAllComponentsSync=Vd,this.compileModuleAndAllComponentsAsync=Bd}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)},providedIn:null}),t})();const Ud=new Nt("compilerOptions");let Wd,Hd;function qd(){const t=Tt.wtf;return!(!t||!(Wd=t.trace)||(Hd=Wd.events,0))}const Gd=qd();function $d(t,e){return null}const Kd=Gd?function(t,e=null){return Hd.createScope(t,e)}:(t,e)=>$d,Xd=Gd?function(t,e){return Wd.leaveScope(t,e),e}:(t,e)=>e,Yd=(()=>Promise.resolve(0))();function Zd(t){"undefined"==typeof Zone?Yd.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Qd{constructor({enableLongStackTrace:t=!1}){if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Qh(!1),this.onMicrotaskEmpty=new Qh(!1),this.onStable=new Qh(!1),this.onError=new Qh(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");var e;Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(e=this)._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,n,r,i,a,o)=>{try{return np(e),t.invokeTask(r,i,a,o)}finally{rp(e)}},onInvoke:(t,n,r,i,a,o,s)=>{try{return np(e),t.invoke(r,i,a,o,s)}finally{rp(e)}},onHasTask:(t,n,r,i)=>{t.hasTask(r,i),n===r&&("microTask"==i.change?(e.hasPendingMicrotasks=i.microTask,ep(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:(t,n,r,i)=>(t.handleError(r,i),e.runOutsideAngular(()=>e.onError.emit(i)),!1)})}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Qd.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Qd.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,a=i.scheduleEventTask("NgZoneEvent: "+r,t,tp,Jd,Jd);try{return i.runTask(a,e,n)}finally{i.cancelTask(a)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}function Jd(){}const tp={};function ep(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function np(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function rp(t){t._nesting--,ep(t)}class ip{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Qh,this.onMicrotaskEmpty=new Qh,this.onStable=new Qh,this.onError=new Qh}run(t){return t()}runGuarded(t){return t()}runOutsideAngular(t){return t()}runTask(t){return t()}}let ap=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Qd.assertNotInAngularZone(),Zd(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Zd(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt(Qd))},providedIn:null}),t})(),op=(()=>{class t{constructor(){this._applications=new Map,up.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return up.findTestabilityInTree(this,t,e)}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)},providedIn:null}),t})();class sp{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}let lp,up=new sp,cp=function(t,e,n){const r=new Zh(n);if(0===Vs.size)return Promise.resolve(r);const i=function(t){const e=[];return t.forEach(t=>t&&e.push(...t)),e}(t.get(Ud,[]).concat(e).map(t=>t.providers));if(0===i.length)return Promise.resolve(r);const a=function(){const t=Tt.ng;if(!t||!t.\u0275compilerFacade)throw new Error("Angular JIT compilation failed: '@angular/compiler' not loaded!\n  - JIT compilation is discouraged for production use-cases! Consider AOT mode instead.\n  - Did you bootstrap using '@angular/platform-browser-dynamic' or '@angular/platform-server'?\n  - Alternatively provide the compiler with 'import \"@angular/compiler\";' before bootstrapping.");return t.\u0275compilerFacade}(),o=Ls.create({providers:i}).get(a.ResourceLoader);return function(t){const e=[],n=new Map;function r(e){let r=n.get(e);if(!r){const i=t(e);n.set(e,r=i.then(js))}return r}return Vs.forEach((t,n)=>{const i=[];t.templateUrl&&i.push(r(t.templateUrl).then(e=>{t.template=e}));const a=t.styleUrls,o=t.styles||(t.styles=[]),s=t.styles.length;a&&a.forEach((e,n)=>{o.push(""),i.push(r(e).then(r=>{o[s+n]=r,a.splice(a.indexOf(e),1),0==a.length&&(t.styleUrls=void 0)}))});const l=Promise.all(i).then(()=>(function(t){Bs.delete(t)})(n));e.push(l)}),Vs=new Map,Promise.all(e).then(()=>void 0)}(t=>Promise.resolve(o.get(t))).then(()=>r)},hp=function(t){return t.isBoundToModule};const dp=new Nt("AllowMultipleToken");class pp{constructor(t,e){this.name=t,this.token=e}}function fp(t,e,n=[]){const r=`Platform: ${e}`,i=new Nt(r);return(e=[])=>{let a=mp();if(!a||a.injector.get(dp,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0});!function(t){if(lp&&!lp.destroyed&&!lp.injector.get(dp,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");lp=t.get(gp);const e=t.get(Ad,null);e&&e.forEach(t=>t())}(Ls.create({providers:t,name:r}))}return function(t){const e=mp();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function mp(){return lp&&!lp.destroyed?lp:null}let gp=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n="noop"===(i=e?e.ngZone:void 0)?new ip:("zone.js"===i?void 0:i)||new Qd({enableLongStackTrace:zi()}),r=[{provide:Qd,useValue:n}];var i;return n.run(()=>{const e=Ls.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),a=i.injector.get(Mi,null);if(!a)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return Od&&$h(i.injector.get(Rd,qh)||qh),i.onDestroy(()=>bp(this._modules,i)),n.runOutsideAngular(()=>n.onError.subscribe({next:t=>{a.handleError(t)}})),function(t,e,n){try{const r=n();return Al(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(a,n,()=>{const t=i.injector.get(Cd);return t.runInitializers(),t.donePromise.then(()=>(this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=yp({},e);return cp(this.injector,n,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(vp);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${xt(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. `+"Please define one of these.");t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt(Ls))},providedIn:null}),t})();function yp(t,e){return Array.isArray(e)?e.reduce(yp,t):Object.assign({},t,e)}let vp=(()=>{class t{constructor(t,e,n,r,i,a){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=a,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=zi(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new _(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),s=new _(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Qd.assertNotInAngularZone(),Zd(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Qd.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Q(o,s.pipe(t=>J()(function(t,e){return function(e){let n;n="function"==typeof t?t:function(){return t};const r=Object.create(e,rt);return r.source=e,r.subjectFactory=n,r}}(at)(t))))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof gu?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=hp(n)?null:this._injector.get(Yt),i=n.create(Ls.NULL,[],e||n.selector,r);i.onDestroy(()=>{this._unloadComponent(i)});const a=i.injector.get(ap,null);return a&&i.injector.get(op).registerApplication(i.location.nativeElement,a),this._loadComponent(i),zi()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");const e=t._tickScope();try{this._runningTick=!0;for(let t of this._views)t.detectChanges();if(this._enforceNoNewChanges)for(let t of this._views)t.checkNoChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1,Xd(e)}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;bp(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Td,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}_unloadComponent(t){this.detachView(t.hostView),bp(this.components,t)}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy())}get viewCount(){return this._views.length}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt(Qd),qt(Nd),qt(Ls),qt(Mi),qt(wu),qt(Cd))},providedIn:null}),t._tickScope=Kd("ApplicationRef#tick()"),t})();function bp(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class wp{}const _p="#",xp="NgFactory";class Cp{}const Sp={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let kp=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Sp}load(t){return!Od&&this._compiler instanceof jd?this.loadFactory(t):this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split(_p);return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>Ep(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split(_p),i=xp;return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Ep(t,e,r))}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt(jd),qt(Cp,8))},providedIn:null}),t})();function Ep(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}class Ip{constructor(t,e){this.name=t,this.callback=e}}class Ap{constructor(t,e,n){this.listeners=[],this.parent=null,this._debugContext=n,this.nativeNode=t,e&&e instanceof Dp&&e.addChild(this)}get injector(){return this._debugContext.injector}get componentInstance(){return this._debugContext.component}get context(){return this._debugContext.context}get references(){return this._debugContext.references}get providerTokens(){return this._debugContext.providerTokens}}class Dp extends Ap{constructor(t,e,n){super(t,e,n),this.properties={},this.attributes={},this.classes={},this.styles={},this.childNodes=[],this.nativeElement=t}addChild(t){t&&(this.childNodes.push(t),t.parent=this)}removeChild(t){const e=this.childNodes.indexOf(t);-1!==e&&(t.parent=null,this.childNodes.splice(e,1))}insertChildrenAfter(t,e){const n=this.childNodes.indexOf(t);-1!==n&&(this.childNodes.splice(n+1,0,...e),e.forEach(e=>{e.parent&&e.parent.removeChild(e),t.parent=this}))}insertBefore(t,e){const n=this.childNodes.indexOf(t);-1===n?this.addChild(e):(e.parent&&e.parent.removeChild(e),e.parent=this,this.childNodes.splice(n,0,e))}query(t){return this.queryAll(t)[0]||null}queryAll(t){const e=[];return function t(e,n,r){e.childNodes.forEach(e=>{e instanceof Dp&&(n(e)&&r.push(e),t(e,n,r))})}(this,t,e),e}queryAllNodes(t){const e=[];return function t(e,n,r){e instanceof Dp&&e.childNodes.forEach(e=>{n(e)&&r.push(e),e instanceof Dp&&t(e,n,r)})}(this,t,e),e}get children(){return this.childNodes.filter(t=>t instanceof Dp)}triggerEventHandler(t,e){this.listeners.forEach(n=>{n.name==t&&n.callback(e)})}}class Tp{constructor(t){this.nativeNode=t}get parent(){const t=this.nativeNode.parentNode;return t?new Np(t):null}get injector(){return function(t){const e=Gl(t);return new Ii(e.lView[Se].data[e.nodeIndex],e.lView)}(this.nativeNode)}get componentInstance(){const t=this.nativeNode;return t&&(ql(t)||function(t){let e,n=Gl(t).lView;for(;null===n[Ce]&&(e=ui(n));)n=e;return 512&n[ke]?null:n[Re]}(t))}get context(){return ql(this.nativeNode)||$l(this.nativeNode).lView[Re]}get listeners(){return function(t){const e=$l(t).lView,n=e[Ne],r=e[Se].cleanup,i=[];if(r&&n)for(let a=0;a<r.length;){const o=r[a++],s=r[a++];if("string"==typeof o){const l=o,u=wn(e[s]),c=n[r[a++]],h=r[a++],d="boolean"==typeof h?h:!(h>=0)&&null;t==u&&i.push({element:t,name:l,callback:c,useCapture:d})}}return i.sort(Xl),i}(this.nativeNode).filter(Kl)}get references(){return function(t){const e=Gl(t);return void 0===e.localRefs&&(e.localRefs=function(t,e){const n=t[Se].data[e];if(n&&n.localNames){const e={};let r=n.index+1;for(let i=0;i<n.localNames.length;i+=2)e[n.localNames[i]]=t[r],r++;return e}return null}(e.lView,e.nodeIndex)),e.localRefs||{}}(this.nativeNode)}get providerTokens(){return function(t){const e=Gl(t,!1);if(!e)return[];const n=e.lView[Se],r=n.data[e.nodeIndex],i=[],a=r.directiveEnd;for(let s=65535&r.providerIndexes;s<a;s++){let t=n.data[s];void 0!==(o=t).type&&void 0!==o.template&&void 0!==o.declaredInputs&&(t=t.type),i.push(t)}var o;return i}(this.nativeNode)}}class Np extends Tp{constructor(t){super(t)}get nativeElement(){return this.nativeNode.nodeType==Node.ELEMENT_NODE?this.nativeNode:null}get name(){return this.nativeElement.nodeName}get properties(){const t=Gl(this.nativeNode),e=t.lView,n=e[Se].data,r=n[t.nodeIndex],i=function(t,e,n){const r={};let i=function(t,e){let n=t-1,r=e[n];for(;"string"==typeof r&&!xr(r);)r=e[--n];return n+1}(t.propertyMetadataStartIndex,n);for(;i<t.propertyMetadataEndIndex;){let t,a=n[i];for(;!xr(a);)t=(t||"")+vr(e[i])+n[i],a=n[++i];t=void 0===t?e[i]:t+=e[i];const o=a.split(_r),s=o[0];s&&(r[s]=o[1]&&o[2]?o[1]+t+o[2]:t),i++}return r}(r,e,n),a=function(t,e,n){const r={};let i=t.directiveEnd,a=n[i];for(;"string"==typeof a;)r[a.split(_r)[0]]=e[i],a=n[++i];return r}(r,e,n),o=function(t){const e=t.classes;let n="";for(const r of Object.keys(e))e[r]&&(n=n?n+` ${r}`:r);return n}(this),s=Object.assign({},i,a);return o&&(s.className=s.className?s.className+` ${o}`:o),s}get attributes(){const t={},e=this.nativeElement;if(!e)return t;const n=Gl(e),r=n.lView[Se].data[n.nodeIndex].attrs,i=[];if(r){let e=0;for(;e<r.length;){const n=r[e];if("string"!=typeof n)break;t[n]=r[e+1],i.push(n.toLowerCase()),e+=2}}const a=e.attributes;for(let o=0;o<a.length;o++){const e=a[o];-1===i.indexOf(e.name)&&(t[e.name]=e.value)}return t}get styles(){return Rp(this.nativeElement,!1)}get classes(){return Rp(this.nativeElement,!0)}get childNodes(){const t=this.nativeNode.childNodes,e=[];for(let n=0;n<t.length;n++)e.push(Vp(t[n]));return e}get children(){const t=this.nativeElement;if(!t)return[];const e=t.children,n=[];for(let r=0;r<e.length;r++)n.push(Vp(e[r]));return n}query(t){return this.queryAll(t)[0]||null}queryAll(t){const e=[];return Op(this,t,e,!0),e}queryAllNodes(t){const e=[];return Op(this,t,e,!1),e}triggerEventHandler(t,e){this.listeners.forEach(n=>{n.name===t&&n.callback(e)})}}function Rp(t,e){if(t){const n=$l(t),r=n.lView,i=r[Se].data[n.nodeIndex];return e?qr(i.classes)?new Ja(i.classes,r,!0).values:Qa(i.classes):qr(i.styles)?new Ja(i.styles,r,!1).values:Qa(i.styles)}return{}}function Op(t,e,n,r){const i=Gl(t.nativeNode);Fp(i.lView[Se].data[i.nodeIndex],i.lView,e,n,r,t.nativeNode)}function Fp(t,e,n,r,i,a){const o=Cn(t,e);if(3===t.type||4===t.type){if(Pp(o,n,r,i,a),Qe(t)){const o=kn(t.index,e);o&&o[Se].firstChild&&Fp(o[Se].firstChild,o,n,r,i,a)}else t.child&&Fp(t.child,e,n,r,i,a),o&&function t(e,n,r,i){const a=e.childNodes,o=a.length;for(let s=0;s<o;s++){const e=a[s],o=Bp(e);o&&(i&&o instanceof Np&&n(o)&&-1===r.indexOf(o)?r.push(o):!i&&n(o)&&-1===r.indexOf(o)&&r.push(o),t(e,n,r,i))}}(o,n,r,i);const s=e[t.index];Ye(s)&&Mp(s,n,r,i,a)}else if(0===t.type){const o=e[t.index];Pp(o[Ge],n,r,i,a),Mp(o,n,r,i,a)}else if(1===t.type){const o=ci(e),s=o[De].projection[t.projection];if(Array.isArray(s))for(let t of s)Pp(t,n,r,i,a);else if(s){const t=o[Ee];Fp(t[Se].data[s.index],t,n,r,i,a)}}else t.child&&Fp(t.child,e,n,r,i,a);if(a!==o){const o=2&t.flags?t.projectionNext:t.next;o&&Fp(o,e,n,r,i,a)}}function Mp(t,e,n,r,i){for(let a=Ke;a<t.length;a++){const o=t[a];Fp(o[Se].node,o,e,n,r,i)}}function Pp(t,e,n,r,i){if(i!==t){const i=Bp(t);if(!i)return;r&&i instanceof Np&&e(i)&&-1===n.indexOf(i)?n.push(i):!r&&e(i)&&-1===n.indexOf(i)&&n.push(i)}}const Lp=new Map,zp="__ng_debug__";function Vp(t){return t instanceof Node?(t.hasOwnProperty(zp)||(t[zp]=t.nodeType==Node.ELEMENT_NODE?new Np(t):new Tp(t)),t[zp]):null}const Bp=Vp;function jp(t){Lp.set(t.nativeNode,t)}const Up=fp(null,"core",[{provide:Dd,useValue:"unknown"},{provide:gp,deps:[Ls]},{provide:op,deps:[]},{provide:Nd,deps:[]}]);function Wp(){return qu}function Hp(){return Gu}function qp(t){return t?(Od&&$h(t),t):qh}const Gp=[{provide:vp,useClass:vp,deps:[Qd,Nd,Ls,Mi,wu,Cd]},{provide:zh,deps:[Qd],useFactory:$p},{provide:Cd,useClass:Cd,deps:[[new ut,xd]]},{provide:jd,useClass:jd,deps:[]},Ed,{provide:Uu,useFactory:Wp,deps:[]},{provide:Wu,useFactory:Hp,deps:[]},{provide:Rd,useFactory:qp,deps:[[new lt(Rd),new ut,new ht]]}];function $p(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}let Kp=(()=>{class t{constructor(t){}}return t.ngModuleDef=me({type:t}),t.ngInjectorDef=yt({factory:function(e){return new(e||t)(qt(vp))},providers:Gp}),t})();function Xp(t,e,n,r,i,a){t|=1;const{matchedQueries:o,references:s,matchedQueryIds:l}=Ic(e);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:t,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:o,matchedQueryIds:l,references:s,ngContentIndex:n,childCount:r,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:a?Nc(a):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:i||lc},provider:null,text:null,query:null,ngContent:null}}function Yp(t,e,n,r,i,a,o=[],s,l,u,c,h){u||(u=lc);const{matchedQueries:d,references:p,matchedQueryIds:f}=Ic(n);let m=null,g=null;a&&([m,g]=zc(a)),s=s||[];const y=new Array(s.length);for(let w=0;w<s.length;w++){const[t,e,n]=s[w],[r,i]=zc(e);let a=void 0,o=void 0;switch(15&t){case 4:o=n;break;case 1:case 8:a=n}y[w]={flags:t,ns:r,name:i,nonMinifiedName:i,securityContext:a,suffix:o}}l=l||[];const v=new Array(l.length);for(let w=0;w<l.length;w++){const[t,e]=l[w];v[w]={type:0,target:t,eventName:e,propName:null}}const b=(o=o||[]).map(([t,e])=>{const[n,r]=zc(t);return[n,r,e]});return h=function(t){if(t&&t.id===hc){const e=null!=t.encapsulation&&t.encapsulation!==ne.None||t.styles.length||Object.keys(t.data).length;t.id=e?`c${fc++}`:dc}return t&&t.id===dc&&(t=null),t||null}(h),c&&(e|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:d,matchedQueryIds:f,references:p,ngContentIndex:r,childCount:i,bindings:y,bindingFlags:Vc(y),outputs:v,element:{ns:m,name:g,attrs:b,template:null,componentProvider:null,componentView:c||null,componentRendererType:h,publicProviders:null,allProviders:null,handleEvent:u||lc},provider:null,text:null,query:null,ngContent:null}}function Zp(t,e,n){const r=n.element,i=t.root.selectorOrNode,a=t.renderer;let o;if(t.parent||!i){o=r.name?a.createElement(r.name,r.ns):a.createComment("");const i=Dc(t,e,n);i&&a.appendChild(i,o)}else o=a.selectRootElement(i,!!r.componentRendererType&&r.componentRendererType.encapsulation===ne.ShadowDom);if(r.attrs)for(let s=0;s<r.attrs.length;s++){const[t,e,n]=r.attrs[s];a.setAttribute(o,e,n,t)}return o}function Qp(t,e,n,r){for(let o=0;o<n.outputs.length;o++){const s=n.outputs[o],l=Jp(t,n.nodeIndex,(a=s.eventName,(i=s.target)?`${i}:${a}`:a));let u=s.target,c=t;"component"===s.target&&(u=null,c=e);const h=c.renderer.listen(u||r,s.eventName,l);t.disposables[n.outputIndex+o]=h}var i,a}function Jp(t,e,n){return r=>wc(t,e,n,r)}function tf(t,e,n,r){if(!gc(t,e,n,r))return!1;const i=e.bindings[n],a=rc(t,e.nodeIndex),o=a.renderElement,s=i.name;switch(15&i.flags){case 1:!function(t,e,n,r,i,a){const o=e.securityContext;let s=o?t.root.sanitizer.sanitize(o,a):a;s=null!=s?s.toString():null;const l=t.renderer;null!=a?l.setAttribute(n,i,s,r):l.removeAttribute(n,i,r)}(t,i,o,i.ns,s,r);break;case 2:!function(t,e,n,r){const i=t.renderer;r?i.addClass(e,n):i.removeClass(e,n)}(t,o,s,r);break;case 4:!function(t,e,n,r,i){let a=t.root.sanitizer.sanitize(oa.STYLE,i);if(null!=a){a=a.toString();const t=e.suffix;null!=t&&(a+=t)}else a=null;const o=t.renderer;null!=a?o.setStyle(n,r,a):o.removeStyle(n,r)}(t,i,o,s,r);break;case 8:!function(t,e,n,r,i){const a=e.securityContext;let o=a?t.root.sanitizer.sanitize(a,i):i;t.renderer.setProperty(n,r,o)}(33554432&e.flags&&32&i.flags?a.componentView:t,i,o,s,r)}return!0}function ef(t,e,n){let r=[];for(let i in n)r.push({propName:i,bindingType:n[i]});return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,ngContentIndex:-1,matchedQueries:{},matchedQueryIds:0,references:{},childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:{id:e,filterId:Ec(e),bindings:r},ngContent:null}}function nf(t){const e=t.def.nodeMatchedQueries;for(;t.parent&&kc(t);){let n=t.parentNodeDef;t=t.parent;const r=n.nodeIndex+n.childCount;for(let i=0;i<=r;i++){const r=t.def.nodes[i];67108864&r.flags&&536870912&r.flags&&(r.query.filterId&e)===r.query.filterId&&oc(t,i).setDirty(),!(1&r.flags&&i+r.childCount<n.nodeIndex)&&67108864&r.childFlags&&536870912&r.childFlags||(i+=r.childCount)}}if(134217728&t.def.nodeFlags)for(let n=0;n<t.def.nodes.length;n++){const e=t.def.nodes[n];134217728&e.flags&&536870912&e.flags&&oc(t,n).setDirty(),n+=e.childCount}}function rf(t,e){const n=oc(t,e.nodeIndex);if(!n.dirty)return;let r,i=void 0;if(67108864&e.flags){const n=e.parent.parent;i=af(t,n.nodeIndex,n.nodeIndex+n.childCount,e.query,[]),r=ic(t,e.parent.nodeIndex).instance}else 134217728&e.flags&&(i=af(t,0,t.def.nodes.length-1,e.query,[]),r=t.component);n.reset(i);const a=e.query.bindings;let o=!1;for(let s=0;s<a.length;s++){const t=a[s];let e;switch(t.bindingType){case 0:e=n.first;break;case 1:e=n,o=!0}r[t.propName]=e}o&&n.notifyOnChanges()}function af(t,e,n,r,i){for(let a=e;a<=n;a++){const e=t.def.nodes[a],n=e.matchedQueries[r.id];if(null!=n&&i.push(of(t,e,n)),1&e.flags&&e.element.template&&(e.element.template.nodeMatchedQueries&r.filterId)===r.filterId){const n=rc(t,a);if((e.childMatchedQueries&r.filterId)===r.filterId&&(af(t,a+1,a+e.childCount,r,i),a+=e.childCount),16777216&e.flags){const t=n.viewContainer._embeddedViews;for(let e=0;e<t.length;e++){const a=t[e],o=_c(a);o&&o===n&&af(a,0,a.def.nodes.length-1,r,i)}}const o=n.template._projectedViews;if(o)for(let t=0;t<o.length;t++){const e=o[t];af(e,0,e.def.nodes.length-1,r,i)}}(e.childMatchedQueries&r.filterId)!==r.filterId&&(a+=e.childCount)}return i}function of(t,e,n){if(null!=n)switch(n){case 1:return rc(t,e.nodeIndex).renderElement;case 0:return new Cu(rc(t,e.nodeIndex).renderElement);case 2:return rc(t,e.nodeIndex).template;case 3:return rc(t,e.nodeIndex).viewContainer;case 4:return ic(t,e.nodeIndex).instance}}function sf(t,e){return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:8,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:t,childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:null,ngContent:{index:e}}}function lf(t,e,n){const r=Dc(t,e,n);r&&Fc(t,n.ngContent.index,1,r,null,void 0)}function uf(t,e){const n=Object.keys(e),r=n.length,i=new Array(r);for(let a=0;a<r;a++){const t=n[a];i[e[t]]=t}return cf(64,t,i)}function cf(t,e,n){const r=new Array(n.length);for(let i=0;i<n.length;i++){const t=n[i];r[i]={flags:8,name:t,ns:null,nonMinifiedName:t,securityContext:null,suffix:null}}return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:-1,childCount:0,bindings:r,bindingFlags:Vc(r),outputs:[],element:null,provider:null,text:null,query:null,ngContent:null}}function hf(t,e,n){const r=new Array(n.length-1);for(let i=1;i<n.length;i++)r[i-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[i]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:e,childCount:0,bindings:r,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function df(t,e,n){let r;const i=t.renderer;r=i.createText(n.text.prefix);const a=Dc(t,e,n);return a&&i.appendChild(a,r),{renderText:r}}function pf(t,e){return(null!=t?t.toString():"")+e.suffix}function ff(t,e,n,r){let i=0,a=0,o=0,s=0,l=0,u=null,c=null,h=!1,d=!1,p=null;for(let f=0;f<e.length;f++){const t=e[f];if(t.nodeIndex=f,t.parent=u,t.bindingIndex=i,t.outputIndex=a,t.renderParent=c,o|=t.flags,l|=t.matchedQueryIds,t.element){const e=t.element;e.publicProviders=u?u.element.publicProviders:Object.create(null),e.allProviders=e.publicProviders,h=!1,d=!1,t.element.template&&(l|=t.element.template.nodeMatchedQueries)}if(gf(u,t,e.length),i+=t.bindings.length,a+=t.outputs.length,!c&&3&t.flags&&(p=t),20224&t.flags){h||(h=!0,u.element.publicProviders=Object.create(u.element.publicProviders),u.element.allProviders=u.element.publicProviders);const e=0!=(32768&t.flags);0==(8192&t.flags)||e?u.element.publicProviders[cc(t.provider.token)]=t:(d||(d=!0,u.element.allProviders=Object.create(u.element.publicProviders)),u.element.allProviders[cc(t.provider.token)]=t),e&&(u.element.componentProvider=t)}if(u?(u.childFlags|=t.flags,u.directChildFlags|=t.flags,u.childMatchedQueries|=t.matchedQueryIds,t.element&&t.element.template&&(u.childMatchedQueries|=t.element.template.nodeMatchedQueries)):s|=t.flags,t.childCount>0)u=t,mf(t)||(c=t);else for(;u&&f===u.nodeIndex+u.childCount;){const t=u.parent;t&&(t.childFlags|=u.childFlags,t.childMatchedQueries|=u.childMatchedQueries),c=(u=t)&&mf(u)?u.renderParent:u}}return{factory:null,nodeFlags:o,rootNodeFlags:s,nodeMatchedQueries:l,flags:t,nodes:e,updateDirectives:n||lc,updateRenderer:r||lc,handleEvent:(t,n,r,i)=>e[n].element.handleEvent(t,r,i),bindingCount:i,outputCount:a,lastRenderRootNode:p}}function mf(t){return 0!=(1&t.flags)&&null===t.element.name}function gf(t,e,n){const r=e.element&&e.element.template;if(r){if(!r.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(r.lastRenderRootNode&&16777216&r.lastRenderRootNode.flags)throw new Error(`Illegal State: Last root node of a template can't have embedded views, at index ${e.nodeIndex}!`)}if(20224&e.flags&&0==(1&(t?t.flags:0)))throw new Error(`Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index ${e.nodeIndex}!`);if(e.query){if(67108864&e.flags&&(!t||0==(16384&t.flags)))throw new Error(`Illegal State: Content Query nodes need to be children of directives, at index ${e.nodeIndex}!`);if(134217728&e.flags&&t)throw new Error(`Illegal State: View Query nodes have to be top level nodes, at index ${e.nodeIndex}!`)}if(e.childCount){const r=t?t.nodeIndex+t.childCount:n-1;if(e.nodeIndex<=r&&e.nodeIndex+e.childCount>r)throw new Error(`Illegal State: childCount of node leads outside of parent, at index ${e.nodeIndex}!`)}}function yf(t,e,n,r){const i=wf(t.root,t.renderer,t,e,n);return _f(i,t.component,r),xf(i),i}function vf(t,e,n){const r=wf(t,t.renderer,null,null,e);return _f(r,n,n),xf(r),r}function bf(t,e,n,r){const i=e.element.componentRendererType;let a;return a=i?t.root.rendererFactory.createRenderer(r,i):t.root.renderer,wf(t.root,a,t,e.element.componentProvider,n)}function wf(t,e,n,r,i){const a=new Array(i.nodes.length),o=i.outputCount?new Array(i.outputCount):null;return{def:i,parent:n,viewContainerParent:null,parentNodeDef:r,context:null,component:null,nodes:a,state:13,root:t,renderer:e,oldValues:new Array(i.bindingCount),disposables:o,initIndex:-1}}function _f(t,e,n){t.component=e,t.context=n}function xf(t){let e;Sc(t)&&(e=rc(t.parent,t.parentNodeDef.parent.nodeIndex).renderElement);const n=t.def,r=t.nodes;for(let i=0;i<n.nodes.length;i++){const a=n.nodes[i];let o;switch(sc.setCurrentNode(t,i),201347067&a.flags){case 1:const n=Zp(t,e,a);let s=void 0;if(33554432&a.flags){const e=Nc(a.element.componentView);s=sc.createComponentView(t,a,e,n)}Qp(t,s,a,n),o={renderElement:n,componentView:s,viewContainer:null,template:a.element.template?ih(t,a):void 0},16777216&a.flags&&(o.viewContainer=th(t,a,o));break;case 2:o=df(t,e,a);break;case 512:case 1024:case 2048:case 256:(o=r[i])||4096&a.flags||(o={instance:Sh(t,a)});break;case 16:o={instance:kh(t,a)};break;case 16384:(o=r[i])||(o={instance:Eh(t,a)}),32768&a.flags&&_f(rc(t,a.parent.nodeIndex).componentView,o.instance,o.instance);break;case 32:case 64:case 128:o={value:void 0};break;case 67108864:case 134217728:o=new td;break;case 8:lf(t,e,a),o=void 0}r[i]=o}Nf(t,Tf.CreateViewNodes),Mf(t,201326592,268435456,0)}function Cf(t){Ef(t),sc.updateDirectives(t,1),Rf(t,Tf.CheckNoChanges),sc.updateRenderer(t,1),Nf(t,Tf.CheckNoChanges),t.state&=-97}function Sf(t){1&t.state?(t.state&=-2,t.state|=2):t.state&=-3,tc(t,0,256),Ef(t),sc.updateDirectives(t,0),Rf(t,Tf.CheckAndUpdate),Mf(t,67108864,536870912,0);let e=tc(t,256,512);Fh(t,2097152|(e?1048576:0)),sc.updateRenderer(t,0),Nf(t,Tf.CheckAndUpdate),Mf(t,134217728,536870912,0),Fh(t,8388608|((e=tc(t,512,768))?4194304:0)),2&t.def.flags&&(t.state&=-9),t.state&=-97,tc(t,768,1024)}function kf(t,e,n,r,i,a,o,s,l,u,c,h,d){return 0===n?function(t,e,n,r,i,a,o,s,l,u,c,h){switch(201347067&e.flags){case 1:return function(t,e,n,r,i,a,o,s,l,u,c,h){const d=e.bindings.length;let p=!1;return d>0&&tf(t,e,0,n)&&(p=!0),d>1&&tf(t,e,1,r)&&(p=!0),d>2&&tf(t,e,2,i)&&(p=!0),d>3&&tf(t,e,3,a)&&(p=!0),d>4&&tf(t,e,4,o)&&(p=!0),d>5&&tf(t,e,5,s)&&(p=!0),d>6&&tf(t,e,6,l)&&(p=!0),d>7&&tf(t,e,7,u)&&(p=!0),d>8&&tf(t,e,8,c)&&(p=!0),d>9&&tf(t,e,9,h)&&(p=!0),p}(t,e,n,r,i,a,o,s,l,u,c,h);case 2:return function(t,e,n,r,i,a,o,s,l,u,c,h){let d=!1;const p=e.bindings,f=p.length;if(f>0&&gc(t,e,0,n)&&(d=!0),f>1&&gc(t,e,1,r)&&(d=!0),f>2&&gc(t,e,2,i)&&(d=!0),f>3&&gc(t,e,3,a)&&(d=!0),f>4&&gc(t,e,4,o)&&(d=!0),f>5&&gc(t,e,5,s)&&(d=!0),f>6&&gc(t,e,6,l)&&(d=!0),f>7&&gc(t,e,7,u)&&(d=!0),f>8&&gc(t,e,8,c)&&(d=!0),f>9&&gc(t,e,9,h)&&(d=!0),d){let d=e.text.prefix;f>0&&(d+=pf(n,p[0])),f>1&&(d+=pf(r,p[1])),f>2&&(d+=pf(i,p[2])),f>3&&(d+=pf(a,p[3])),f>4&&(d+=pf(o,p[4])),f>5&&(d+=pf(s,p[5])),f>6&&(d+=pf(l,p[6])),f>7&&(d+=pf(u,p[7])),f>8&&(d+=pf(c,p[8])),f>9&&(d+=pf(h,p[9]));const m=nc(t,e.nodeIndex).renderText;t.renderer.setValue(m,d)}return d}(t,e,n,r,i,a,o,s,l,u,c,h);case 16384:return function(t,e,n,r,i,a,o,s,l,u,c,h){const d=ic(t,e.nodeIndex),p=d.instance;let f=!1,m=void 0;const g=e.bindings.length;return g>0&&mc(t,e,0,n)&&(f=!0,m=Oh(t,d,e,0,n,m)),g>1&&mc(t,e,1,r)&&(f=!0,m=Oh(t,d,e,1,r,m)),g>2&&mc(t,e,2,i)&&(f=!0,m=Oh(t,d,e,2,i,m)),g>3&&mc(t,e,3,a)&&(f=!0,m=Oh(t,d,e,3,a,m)),g>4&&mc(t,e,4,o)&&(f=!0,m=Oh(t,d,e,4,o,m)),g>5&&mc(t,e,5,s)&&(f=!0,m=Oh(t,d,e,5,s,m)),g>6&&mc(t,e,6,l)&&(f=!0,m=Oh(t,d,e,6,l,m)),g>7&&mc(t,e,7,u)&&(f=!0,m=Oh(t,d,e,7,u,m)),g>8&&mc(t,e,8,c)&&(f=!0,m=Oh(t,d,e,8,c,m)),g>9&&mc(t,e,9,h)&&(f=!0,m=Oh(t,d,e,9,h,m)),m&&p.ngOnChanges(m),65536&e.flags&&ec(t,256,e.nodeIndex)&&p.ngOnInit(),262144&e.flags&&p.ngDoCheck(),f}(t,e,n,r,i,a,o,s,l,u,c,h);case 32:case 64:case 128:return function(t,e,n,r,i,a,o,s,l,u,c,h){const d=e.bindings;let p=!1;const f=d.length;if(f>0&&gc(t,e,0,n)&&(p=!0),f>1&&gc(t,e,1,r)&&(p=!0),f>2&&gc(t,e,2,i)&&(p=!0),f>3&&gc(t,e,3,a)&&(p=!0),f>4&&gc(t,e,4,o)&&(p=!0),f>5&&gc(t,e,5,s)&&(p=!0),f>6&&gc(t,e,6,l)&&(p=!0),f>7&&gc(t,e,7,u)&&(p=!0),f>8&&gc(t,e,8,c)&&(p=!0),f>9&&gc(t,e,9,h)&&(p=!0),p){const p=ac(t,e.nodeIndex);let m;switch(201347067&e.flags){case 32:m=new Array(d.length),f>0&&(m[0]=n),f>1&&(m[1]=r),f>2&&(m[2]=i),f>3&&(m[3]=a),f>4&&(m[4]=o),f>5&&(m[5]=s),f>6&&(m[6]=l),f>7&&(m[7]=u),f>8&&(m[8]=c),f>9&&(m[9]=h);break;case 64:m={},f>0&&(m[d[0].name]=n),f>1&&(m[d[1].name]=r),f>2&&(m[d[2].name]=i),f>3&&(m[d[3].name]=a),f>4&&(m[d[4].name]=o),f>5&&(m[d[5].name]=s),f>6&&(m[d[6].name]=l),f>7&&(m[d[7].name]=u),f>8&&(m[d[8].name]=c),f>9&&(m[d[9].name]=h);break;case 128:const t=n;switch(f){case 1:m=t.transform(n);break;case 2:m=t.transform(r);break;case 3:m=t.transform(r,i);break;case 4:m=t.transform(r,i,a);break;case 5:m=t.transform(r,i,a,o);break;case 6:m=t.transform(r,i,a,o,s);break;case 7:m=t.transform(r,i,a,o,s,l);break;case 8:m=t.transform(r,i,a,o,s,l,u);break;case 9:m=t.transform(r,i,a,o,s,l,u,c);break;case 10:m=t.transform(r,i,a,o,s,l,u,c,h)}}p.value=m}return p}(t,e,n,r,i,a,o,s,l,u,c,h);default:throw"unreachable"}}(t,e,r,i,a,o,s,l,u,c,h,d):function(t,e,n){switch(201347067&e.flags){case 1:return function(t,e,n){let r=!1;for(let i=0;i<n.length;i++)tf(t,e,i,n[i])&&(r=!0);return r}(t,e,n);case 2:return function(t,e,n){const r=e.bindings;let i=!1;for(let a=0;a<n.length;a++)gc(t,e,a,n[a])&&(i=!0);if(i){let i="";for(let t=0;t<n.length;t++)i+=pf(n[t],r[t]);i=e.text.prefix+i;const a=nc(t,e.nodeIndex).renderText;t.renderer.setValue(a,i)}return i}(t,e,n);case 16384:return function(t,e,n){const r=ic(t,e.nodeIndex),i=r.instance;let a=!1,o=void 0;for(let s=0;s<n.length;s++)mc(t,e,s,n[s])&&(a=!0,o=Oh(t,r,e,s,n[s],o));return o&&i.ngOnChanges(o),65536&e.flags&&ec(t,256,e.nodeIndex)&&i.ngOnInit(),262144&e.flags&&i.ngDoCheck(),a}(t,e,n);case 32:case 64:case 128:return function(t,e,n){const r=e.bindings;let i=!1;for(let a=0;a<n.length;a++)gc(t,e,a,n[a])&&(i=!0);if(i){const i=ac(t,e.nodeIndex);let a;switch(201347067&e.flags){case 32:a=n;break;case 64:a={};for(let i=0;i<n.length;i++)a[r[i].name]=n[i];break;case 128:const t=n[0],e=n.slice(1);a=t.transform(...e)}i.value=a}return i}(t,e,n);default:throw"unreachable"}}(t,e,r)}function Ef(t){const e=t.def;if(4&e.nodeFlags)for(let n=0;n<e.nodes.length;n++){const r=e.nodes[n];if(4&r.flags){const e=rc(t,n).template._projectedViews;if(e)for(let n=0;n<e.length;n++){const r=e[n];r.state|=32,bc(r,t)}}else 0==(4&r.childFlags)&&(n+=r.childCount)}}function If(t,e,n,r,i,a,o,s,l,u,c,h,d){return 0===n?function(t,e,n,r,i,a,o,s,l,u,c,h){const d=e.bindings.length;d>0&&yc(t,e,0,n),d>1&&yc(t,e,1,r),d>2&&yc(t,e,2,i),d>3&&yc(t,e,3,a),d>4&&yc(t,e,4,o),d>5&&yc(t,e,5,s),d>6&&yc(t,e,6,l),d>7&&yc(t,e,7,u),d>8&&yc(t,e,8,c),d>9&&yc(t,e,9,h)}(t,e,r,i,a,o,s,l,u,c,h,d):function(t,e,n){for(let r=0;r<n.length;r++)yc(t,e,r,n[r])}(t,e,r),!1}function Af(t,e){if(oc(t,e.nodeIndex).dirty)throw Zu(sc.createDebugContext(t,e.nodeIndex),`Query ${e.query.id} not dirty`,`Query ${e.query.id} dirty`,0!=(1&t.state))}function Df(t){if(!(128&t.state)){if(Rf(t,Tf.Destroy),Nf(t,Tf.Destroy),Fh(t,131072),t.disposables)for(let e=0;e<t.disposables.length;e++)t.disposables[e]();!function(t){if(!(16&t.state))return;const e=_c(t);if(e){const n=e.template._projectedViews;n&&(te(n,n.indexOf(t)),sc.dirtyParentQueries(t))}}(t),t.renderer.destroyNode&&function(t){const e=t.def.nodes.length;for(let n=0;n<e;n++){const e=t.def.nodes[n];1&e.flags?t.renderer.destroyNode(rc(t,n).renderElement):2&e.flags?t.renderer.destroyNode(nc(t,n).renderText):(67108864&e.flags||134217728&e.flags)&&oc(t,n).destroy()}}(t),Sc(t)&&t.renderer.destroy(),t.state|=128}}const Tf=function(){var t={CreateViewNodes:0,CheckNoChanges:1,CheckNoChangesProjectedViews:2,CheckAndUpdate:3,CheckAndUpdateProjectedViews:4,Destroy:5};return t[t.CreateViewNodes]="CreateViewNodes",t[t.CheckNoChanges]="CheckNoChanges",t[t.CheckNoChangesProjectedViews]="CheckNoChangesProjectedViews",t[t.CheckAndUpdate]="CheckAndUpdate",t[t.CheckAndUpdateProjectedViews]="CheckAndUpdateProjectedViews",t[t.Destroy]="Destroy",t}();function Nf(t,e){const n=t.def;if(33554432&n.nodeFlags)for(let r=0;r<n.nodes.length;r++){const i=n.nodes[r];33554432&i.flags?Of(rc(t,r).componentView,e):0==(33554432&i.childFlags)&&(r+=i.childCount)}}function Rf(t,e){const n=t.def;if(16777216&n.nodeFlags)for(let r=0;r<n.nodes.length;r++){const i=n.nodes[r];if(16777216&i.flags){const n=rc(t,r).viewContainer._embeddedViews;for(let t=0;t<n.length;t++)Of(n[t],e)}else 0==(16777216&i.childFlags)&&(r+=i.childCount)}}function Of(t,e){const n=t.state;switch(e){case Tf.CheckNoChanges:0==(128&n)&&(12==(12&n)?Cf(t):64&n&&Ff(t,Tf.CheckNoChangesProjectedViews));break;case Tf.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?Cf(t):64&n&&Ff(t,e));break;case Tf.CheckAndUpdate:0==(128&n)&&(12==(12&n)?Sf(t):64&n&&Ff(t,Tf.CheckAndUpdateProjectedViews));break;case Tf.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?Sf(t):64&n&&Ff(t,e));break;case Tf.Destroy:Df(t);break;case Tf.CreateViewNodes:xf(t)}}function Ff(t,e){Rf(t,e),Nf(t,e)}function Mf(t,e,n,r){if(!(t.def.nodeFlags&e&&t.def.nodeFlags&n))return;const i=t.def.nodes.length;for(let a=0;a<i;a++){const i=t.def.nodes[a];if(i.flags&e&&i.flags&n)switch(sc.setCurrentNode(t,i.nodeIndex),r){case 0:rf(t,i);break;case 1:Af(t,i)}i.childFlags&e&&i.childFlags&n||(a+=i.childCount)}}let Pf=!1;function Lf(t,e,n,r,i,a){const o=i.injector.get(Eu);return vf(Vf(t,i,o,e,n),r,a)}function zf(t,e,n,r,i,a){const o=i.injector.get(Eu),s=Vf(t,i,new ym(o),e,n),l=Xf(r);return mm(em.create,vf,null,[s,l,a])}function Vf(t,e,n,r,i){const a=e.injector.get(sa),o=e.injector.get(Mi),s=n.createRenderer(null,null);return{ngModule:e,injector:t,projectableNodes:r,selectorOrNode:i,sanitizer:a,rendererFactory:n,renderer:s,errorHandler:o}}function Bf(t,e,n,r){const i=Xf(n);return mm(em.create,yf,null,[t,e,i,r])}function jf(t,e,n,r){return n=qf.get(e.element.componentProvider.provider.token)||Xf(n),mm(em.create,bf,null,[t,e,n,r])}function Uf(t,e,n,r){return hh(t,e,n,function(t){const{hasOverrides:e,hasDeprecatedOverrides:n}=function(t){let e=!1,n=!1;return 0===Wf.size?{hasOverrides:e,hasDeprecatedOverrides:n}:(t.providers.forEach(t=>{const r=Wf.get(t.token);3840&t.flags&&r&&(e=!0,n=n||r.deprecatedBehavior)}),t.modules.forEach(t=>{Hf.forEach((r,i)=>{vt(i).providedIn===t&&(e=!0,n=n||r.deprecatedBehavior)})}),{hasOverrides:e,hasDeprecatedOverrides:n})}(t);return e?(function(t){for(let e=0;e<t.providers.length;e++){const r=t.providers[e];n&&(r.flags|=4096);const i=Wf.get(r.token);i&&(r.flags=-3841&r.flags|i.flags,r.deps=Ac(i.deps),r.value=i.value)}if(Hf.size>0){let e=new Set(t.modules);Hf.forEach((r,i)=>{if(e.has(vt(i).providedIn)){let e={token:i,flags:r.flags|(n?4096:0),deps:Ac(r.deps),value:r.value,index:t.providers.length};t.providers.push(e),t.providersByKey[cc(i)]=e}})}}(t=t.factory(()=>lc)),t):t}(r))}const Wf=new Map,Hf=new Map,qf=new Map;function Gf(t){let e;Wf.set(t.token,t),"function"==typeof t.token&&(e=vt(t.token))&&"function"==typeof e.providedIn&&Hf.set(t.token,t)}function $f(t,e){const n=Nc(e.viewDefFactory),r=Nc(n.nodes[0].element.componentView);qf.set(t,r)}function Kf(){Wf.clear(),Hf.clear(),qf.clear()}function Xf(t){if(0===Wf.size)return t;const e=function(t){const e=[];let n=null;for(let r=0;r<t.nodes.length;r++){const i=t.nodes[r];1&i.flags&&(n=i),n&&3840&i.flags&&Wf.has(i.provider.token)&&(e.push(n.nodeIndex),n=null)}return e}(t);if(0===e.length)return t;t=t.factory(()=>lc);for(let r=0;r<e.length;r++)n(t,e[r]);return t;function n(t,e){for(let n=e+1;n<t.nodes.length;n++){const e=t.nodes[n];if(1&e.flags)return;if(3840&e.flags){const t=e.provider,n=Wf.get(t.token);n&&(e.flags=-3841&e.flags|n.flags,t.deps=Ac(n.deps),t.value=n.value)}}}}function Yf(t,e,n,r,i,a,o,s,l,u,c,h,d){const p=t.def.nodes[e];return kf(t,p,n,r,i,a,o,s,l,u,c,h,d),224&p.flags?ac(t,e).value:void 0}function Zf(t,e,n,r,i,a,o,s,l,u,c,h,d){const p=t.def.nodes[e];return If(t,p,n,r,i,a,o,s,l,u,c,h,d),224&p.flags?ac(t,e).value:void 0}function Qf(t){return mm(em.detectChanges,Sf,null,[t])}function Jf(t){return mm(em.checkNoChanges,Cf,null,[t])}function tm(t){return mm(em.destroy,Df,null,[t])}const em=function(){var t={create:0,detectChanges:1,checkNoChanges:2,destroy:3,handleEvent:4};return t[t.create]="create",t[t.detectChanges]="detectChanges",t[t.checkNoChanges]="checkNoChanges",t[t.destroy]="destroy",t[t.handleEvent]="handleEvent",t}();let nm,rm,im;function am(t,e){rm=t,im=e}function om(t,e,n,r){return am(t,e),mm(em.handleEvent,t.def.handleEvent,null,[t,e,n,r])}function sm(t,e){if(128&t.state)throw Ju(em[nm]);return am(t,hm(t,0)),t.def.updateDirectives((function(t,n,r,...i){const a=t.def.nodes[n];return 0===e?um(t,a,r,i):cm(t,a,r,i),16384&a.flags&&am(t,hm(t,n)),224&a.flags?ac(t,a.nodeIndex).value:void 0}),t)}function lm(t,e){if(128&t.state)throw Ju(em[nm]);return am(t,dm(t,0)),t.def.updateRenderer((function(t,n,r,...i){const a=t.def.nodes[n];return 0===e?um(t,a,r,i):cm(t,a,r,i),3&a.flags&&am(t,dm(t,n)),224&a.flags?ac(t,a.nodeIndex).value:void 0}),t)}function um(t,e,n,r){if(kf(t,e,n,...r)){const o=1===n?r[0]:r;if(16384&e.flags){const n={};for(let t=0;t<e.bindings.length;t++){const r=e.bindings[t],s=o[t];8&r.flags&&(n[(i=r.nonMinifiedName,a=void 0,a=i.replace(/[$@]/g,"_"),`ng-reflect-${i=a.replace(ca,(...t)=>"-"+t[1].toLowerCase())}`)]=ha(s))}const r=e.parent,s=rc(t,r.nodeIndex).renderElement;if(r.element.name)for(let e in n){const r=n[e];null!=r?t.renderer.setAttribute(s,e,r):t.renderer.removeAttribute(s,e)}else t.renderer.setValue(s,`bindings=${JSON.stringify(n,null,2)}`)}}var i,a}function cm(t,e,n,r){If(t,e,n,...r)}function hm(t,e){for(let n=e;n<t.def.nodes.length;n++){const e=t.def.nodes[n];if(16384&e.flags&&e.bindings&&e.bindings.length)return n}return null}function dm(t,e){for(let n=e;n<t.def.nodes.length;n++){const e=t.def.nodes[n];if(3&e.flags&&e.bindings&&e.bindings.length)return n}return null}class pm{constructor(t,e){this.view=t,this.nodeIndex=e,null==e&&(this.nodeIndex=e=0),this.nodeDef=t.def.nodes[e];let n=this.nodeDef,r=t;for(;n&&0==(1&n.flags);)n=n.parent;if(!n)for(;!n&&r;)n=xc(r),r=r.parent;this.elDef=n,this.elView=r}get elOrCompView(){return rc(this.elView,this.elDef.nodeIndex).componentView||this.view}get injector(){return oh(this.elView,this.elDef)}get component(){return this.elOrCompView.component}get context(){return this.elOrCompView.context}get providerTokens(){const t=[];if(this.elDef)for(let e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){const n=this.elView.def.nodes[e];20224&n.flags&&t.push(n.provider.token),e+=n.childCount}return t}get references(){const t={};if(this.elDef){fm(this.elView,this.elDef,t);for(let e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){const n=this.elView.def.nodes[e];20224&n.flags&&fm(this.elView,n,t),e+=n.childCount}}return t}get componentRenderElement(){const t=function(t){for(;t&&!Sc(t);)t=t.parent;return t.parent?rc(t.parent,xc(t).nodeIndex):null}(this.elOrCompView);return t?t.renderElement:void 0}get renderNode(){return 2&this.nodeDef.flags?Cc(this.view,this.nodeDef):Cc(this.elView,this.elDef)}logError(t,...e){let n,r;2&this.nodeDef.flags?(n=this.view.def,r=this.nodeDef.nodeIndex):(n=this.elView.def,r=this.elDef.nodeIndex);const i=function(t,e){let n=-1;for(let r=0;r<=e;r++)3&t.nodes[r].flags&&n++;return n}(n,r);let a=-1;n.factory(()=>++a===i?t.error.bind(t,...e):lc),a<i&&(t.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),t.error(...e))}}function fm(t,e,n){for(let r in e.references)n[r]=of(t,e,e.references[r])}function mm(t,e,n,r){const i=nm,a=rm,o=im;try{nm=t;const s=e.apply(n,r);return rm=a,im=o,nm=i,s}catch(u){if(Ri(u)||!rm)throw u;throw s=u,l=gm(),s instanceof Error||(s=new Error(s.toString())),Qu(s,l),s}var s,l}function gm(){return rm?new pm(rm,im):null}class ym{constructor(t){this.delegate=t}createRenderer(t,e){return new vm(this.delegate.createRenderer(t,e))}begin(){this.delegate.begin&&this.delegate.begin()}end(){this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)}}class vm{constructor(t){this.delegate=t,this.debugContextFactory=gm,this.data=this.delegate.data}createDebugContext(t){return this.debugContextFactory(t)}destroyNode(t){const e=Bp(t);!function(t){Lp.delete(t.nativeNode)}(e),e instanceof Ap&&(e.listeners.length=0),this.delegate.destroyNode&&this.delegate.destroyNode(t)}destroy(){this.delegate.destroy()}createElement(t,e){const n=this.delegate.createElement(t,e),r=this.createDebugContext(n);if(r){const e=new Dp(n,null,r);e.name=t,jp(e)}return n}createComment(t){const e=this.delegate.createComment(t),n=this.createDebugContext(e);return n&&jp(new Ap(e,null,n)),e}createText(t){const e=this.delegate.createText(t),n=this.createDebugContext(e);return n&&jp(new Ap(e,null,n)),e}appendChild(t,e){const n=Bp(t),r=Bp(e);n&&r&&n instanceof Dp&&n.addChild(r),this.delegate.appendChild(t,e)}insertBefore(t,e,n){const r=Bp(t),i=Bp(e),a=Bp(n);r&&i&&r instanceof Dp&&r.insertBefore(a,i),this.delegate.insertBefore(t,e,n)}removeChild(t,e){const n=Bp(t),r=Bp(e);n&&r&&n instanceof Dp&&n.removeChild(r),this.delegate.removeChild(t,e)}selectRootElement(t,e){const n=this.delegate.selectRootElement(t,e),r=gm();return r&&jp(new Dp(n,null,r)),n}setAttribute(t,e,n,r){const i=Bp(t);i&&i instanceof Dp&&(i.attributes[r?r+":"+e:e]=n),this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){const r=Bp(t);r&&r instanceof Dp&&(r.attributes[n?n+":"+e:e]=null),this.delegate.removeAttribute(t,e,n)}addClass(t,e){const n=Bp(t);n&&n instanceof Dp&&(n.classes[e]=!0),this.delegate.addClass(t,e)}removeClass(t,e){const n=Bp(t);n&&n instanceof Dp&&(n.classes[e]=!1),this.delegate.removeClass(t,e)}setStyle(t,e,n,r){const i=Bp(t);i&&i instanceof Dp&&(i.styles[e]=n),this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){const r=Bp(t);r&&r instanceof Dp&&(r.styles[e]=null),this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){const r=Bp(t);r&&r instanceof Dp&&(r.properties[e]=n),this.delegate.setProperty(t,e,n)}listen(t,e,n){if("string"!=typeof t){const r=Bp(t);r&&r.listeners.push(new Ip(e,n))}return this.delegate.listen(t,e,n)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setValue(t,e){return this.delegate.setValue(t,e)}}function bm(t,e,n){return new wm(t,e,n)}class wm extends Zt{constructor(t,e,n){super(),this.moduleType=t,this._bootstrapComponents=e,this._ngModuleDefFactory=n}create(t){!function(){if(Pf)return;Pf=!0;const t=zi()?{setCurrentNode:am,createRootView:zf,createEmbeddedView:Bf,createComponentView:jf,createNgModuleRef:Uf,overrideProvider:Gf,overrideComponentView:$f,clearOverrides:Kf,checkAndUpdateView:Qf,checkNoChangesView:Jf,destroyView:tm,createDebugContext:(t,e)=>new pm(t,e),handleEvent:om,updateDirectives:sm,updateRenderer:lm}:{setCurrentNode:()=>{},createRootView:Lf,createEmbeddedView:yf,createComponentView:bf,createNgModuleRef:hh,overrideProvider:lc,overrideComponentView:lc,clearOverrides:lc,checkAndUpdateView:Sf,checkNoChangesView:Cf,destroyView:Df,createDebugContext:(t,e)=>new pm(t,e),handleEvent:(t,e,n,r)=>t.def.handleEvent(t,e,n,r),updateDirectives:(t,e)=>t.def.updateDirectives(0===e?Yf:Zf,t),updateRenderer:(t,e)=>t.def.updateRenderer(0===e?Yf:Zf,t)};sc.setCurrentNode=t.setCurrentNode,sc.createRootView=t.createRootView,sc.createEmbeddedView=t.createEmbeddedView,sc.createComponentView=t.createComponentView,sc.createNgModuleRef=t.createNgModuleRef,sc.overrideProvider=t.overrideProvider,sc.overrideComponentView=t.overrideComponentView,sc.clearOverrides=t.clearOverrides,sc.checkAndUpdateView=t.checkAndUpdateView,sc.checkNoChangesView=t.checkNoChangesView,sc.destroyView=t.destroyView,sc.resolveDep=Nh,sc.createDebugContext=t.createDebugContext,sc.handleEvent=t.handleEvent,sc.updateDirectives=t.updateDirectives,sc.updateRenderer=t.updateRenderer,sc.dirtyParentQueries=nf}();const e=function(t){const e=Array.from(t.providers),n=Array.from(t.modules),r={};for(const i in t.providersByKey)r[i]=t.providersByKey[i];return{factory:t.factory,isRoot:t.isRoot,providers:e,modules:n,providersByKey:r}}(Nc(this._ngModuleDefFactory));return sc.createNgModuleRef(this.moduleType,t||Ls.NULL,this._bootstrapComponents,e)}}class _m{}class xm{constructor(){this.title="customVisionTool"}}class Cm{}const Sm=new Nt("Location Initialized");class km{}const Em=new Nt("appBaseHref");let Im=(()=>{class t{constructor(e,n){this._subject=new Qh,this._urlChangeListeners=[],this._platformStrategy=e;const r=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=t.stripTrailingSlash(Am(r)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,n=""){return this.path()==this.normalize(e+t.normalizeQueryParams(n))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,Am(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(e,n="",r=null){this._platformStrategy.pushState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+t.normalizeQueryParams(n)),r)}replaceState(e,n="",r=null){this._platformStrategy.replaceState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+t.normalizeQueryParams(n)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)})}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}static normalizeQueryParams(t){return t&&"?"!==t[0]?"?"+t:t}static joinWithSlash(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}static stripTrailingSlash(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt(km),qt(Cm))},providedIn:null}),t})();function Am(t){return t.replace(/\/index.html$/,"")}let Dm=(()=>{class t extends km{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=Im.joinWithSlash(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+Im.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+Im.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt(Cm),qt(Em,8))},providedIn:null}),t})(),Tm=(()=>{class t extends km{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Im.joinWithSlash(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+Im.normalizeQueryParams(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+Im.normalizeQueryParams(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+Im.normalizeQueryParams(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt(Cm),qt(Em,8))},providedIn:null}),t})();const Nm=function(){var t={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return t[t.Zero]="Zero",t[t.One]="One",t[t.Two]="Two",t[t.Few]="Few",t[t.Many]="Many",t[t.Other]="Other",t}(),Rm=function(t){return function(t){const e=t.toLowerCase().replace(/_/g,"-");let n=jh[e];if(n)return n;const r=e.split("-")[0];if(n=jh[r])return n;if("en"===r)return Hh;throw new Error(`Missing locale data for the locale "${t}".`)}(t)[Uh.PluralCase]},Om=new Nt("UseV4Plurals");class Fm{}let Mm=(()=>{class t extends Fm{constructor(t,e){super(),this.locale=t,this.deprecatedPluralFn=e}getPluralCategory(t,e){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(e||this.locale,t):Rm(e||this.locale)(t)){case Nm.Zero:return"zero";case Nm.One:return"one";case Nm.Two:return"two";case Nm.Few:return"few";case Nm.Many:return"many";default:return"other"}}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt(Rd),qt(Om,8))},providedIn:null}),t})();function Pm(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}class Lm{constructor(t,e){this._name=t,this._options=e,this.value=null,this._lastSetValue=null,this._lastSetValueType=0,this._lastSetValueIdentityChange=!1}setValue(t){if(Array.isArray(t))this._lastSetValueType=4;else if(t instanceof Set)this._lastSetValueType=8;else if(t&&"string"==typeof t){if(!(4&this._options))throw new Error(this._name+" string values are not allowed");this._lastSetValueType=1}else this._lastSetValueType=t?2:0;this._lastSetValueIdentityChange=!0,this._lastSetValue=t||null}hasValueChanged(){let t=this._lastSetValueIdentityChange;if(!(t||14&this._lastSetValueType))return!1;let e=null;const n=!!(1&this._options),r=!!(8&this._options),i=!!(2&this._options);switch(this._lastSetValueType){case 1:const a=this._lastSetValue.split(/\s+/g);16&this._options?(e={},a.forEach((t,n)=>e[t]=!0)):e=a.reduce((t,e,n)=>t+(n?" ":"")+e);break;case 2:const o=this._lastSetValue,s=Object.keys(o);t||(t=!this.value||function(t,e,n){const r=t;if(!Um(Object.keys(e),r))return!0;for(let i=0;i<r.length;i++){const t=r[i];if(e[t]!==n[t])return!0}return!1}(s,this.value,o)),t&&(e=zm(this._name,n,r,i,o,s));break;case 4:case 8:const l=Array.from(this._lastSetValue);t||(t=!Um(Object.keys(this.value),l)),t&&(e=zm(this._name,n,r,i,l));break;default:e=null}return t&&(this.value=e),t}}function zm(t,e,n,r,i,a){const o={};if(a)for(let s=0;s<a.length;s++){let t=a[s];Bm(o,t=e?t.trim():t,i[t],n,r)}else for(let s=0;s<i.length;s++){let n=i[s];Vm(t,n),Bm(o,n=e?n.trim():n,!0,!1,r)}return o}function Vm(t,e){if("string"!=typeof e)throw new Error(`${t} can only toggle CSS classes expressed as strings, got ${e}`)}function Bm(t,e,n,r,i){if(i&&e.indexOf(" ")>0){const i=e.split(/\s+/g);for(let e=0;e<i.length;e++)jm(t,i[e],n,r)}else jm(t,e,n,r)}function jm(t,e,n,r){if(r){const t=function(t,e){const n=t.indexOf(".");if(n>0){const r=t.substr(n+1);t=t.substring(0,n),null!=e&&(e+=r)}return{key:t,value:e}}(e,n);n=t.value,e=t.key}t[e]=n}function Um(t,e){if(t&&e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(-1===e.indexOf(t[n]))return!1;return!0}return!1}class Wm{}let Hm=(()=>{class t{constructor(t,e,n,r){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=r,this._initialClasses=[]}getValue(){return null}setClass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}setNgClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Ks(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}applyChanges(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${xt(t.item)}`);this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt(Uu),qt(Wu),qt(Cu),qt(Au))},providedIn:null}),t})();const qm={provide:Wm,useClass:(()=>{class t{constructor(){this._value=null,this._ngClassDiffer=new Lm("NgClass",23),this._classStringDiffer=null}getValue(){return this._value}setClass(t){(t||this._classStringDiffer)&&(this._classStringDiffer=this._classStringDiffer||new Lm("class",20),this._classStringDiffer.setValue(t))}setNgClass(t){this._ngClassDiffer.setValue(t)}applyChanges(){const t=!!this._classStringDiffer&&this._classStringDiffer.hasValueChanged(),e=this._ngClassDiffer.hasValueChanged();if(t||e){let t=this._ngClassDiffer.value;if(this._classStringDiffer){let e=this._classStringDiffer.value;e&&(t=t?Object.assign({},e,t):e)}this._value=t}}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)},providedIn:null}),t})()},Gm=ye({type:function(){},selectors:null,factory:()=>{},hostBindings:function(t,e,n){var r;1&t&&(Us(1),al()),2&t&&(r=e.getValue(),ul(cr(),r),dl())}});let $m=(()=>{class t{constructor(t){this._delegate=t}getValue(){return this._delegate.getValue()}}return t.ngDirectiveDef=Gm,t})(),Km=(()=>{class t extends $m{constructor(t){super(t)}set klass(t){this._delegate.setClass(t)}set ngClass(t){this._delegate.setNgClass(t)}ngDoCheck(){this._delegate.applyChanges()}}return t.ngDirectiveDef=ye({type:t,selectors:[["","ngClass",""]],factory:function(e){return new(e||t)(rl(Wm))},inputs:{klass:["class","klass"],ngClass:"ngClass"},features:[fu([qm]),ru]}),t})();class Xm{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ym=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){zi()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(t)}. `+"See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new Xm(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new Zm(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const a=new Zm(t,i);e.push(a)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.ngDirectiveDef=ye({type:t,selectors:[["","ngFor","","ngForOf",""]],factory:function(e){return new(e||t)(rl(Xu),rl($u),rl(Uu))},inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class Zm{constructor(t,e){this.record=t,this.view=e}}let Qm=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new Jm,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){tg("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){tg("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}}return t.ngDirectiveDef=ye({type:t,selectors:[["","ngIf",""]],factory:function(e){return new(e||t)(rl(Xu),rl($u))},inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class Jm{constructor(){this.$implicit=null,this.ngIf=null}}function tg(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${xt(e)}'.`)}class eg{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let ng=(()=>{class t{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const e=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||e,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),e}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let e=0;e<this._defaultViews.length;e++)this._defaultViews[e].enforceState(t)}}}return t.ngDirectiveDef=ye({type:t,selectors:[["","ngSwitch",""]],factory:function(e){return new(e||t)},inputs:{ngSwitch:"ngSwitch"}}),t})(),rg=(()=>{class t{constructor(t,e,n){this.ngSwitch=n,n._addCase(),this._view=new eg(t,e)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return t.ngDirectiveDef=ye({type:t,selectors:[["","ngSwitchCase",""]],factory:function(e){return new(e||t)(rl(Xu),rl($u),rl(ng,1))},inputs:{ngSwitchCase:"ngSwitchCase"}}),t})(),ig=(()=>{class t{constructor(t,e,n){n._addDefault(new eg(t,e))}}return t.ngDirectiveDef=ye({type:t,selectors:[["","ngSwitchDefault",""]],factory:function(e){return new(e||t)(rl(Xu),rl($u),rl(ng,1))}}),t})();class ag{}let og=(()=>{class t{constructor(t,e,n){this._ngEl=t,this._differs=e,this._renderer=n}getValue(){return null}setNgStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}applyChanges(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_applyChanges(t){t.forEachRemovedItem(t=>this._setStyle(t.key,null)),t.forEachAddedItem(t=>this._setStyle(t.key,t.currentValue)),t.forEachChangedItem(t=>this._setStyle(t.key,t.currentValue))}_setStyle(t,e){const[n,r]=t.split(".");null!=(e=null!=e&&r?`${e}${r}`:e)?this._renderer.setStyle(this._ngEl.nativeElement,n,e):this._renderer.removeStyle(this._ngEl.nativeElement,n)}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt(Cu),qt(Wu),qt(Au))},providedIn:null}),t})();const sg={provide:ag,useClass:(()=>{class t{constructor(){this._differ=new Lm("NgStyle",8),this._value=null}getValue(){return this._value}setNgStyle(t){this._differ.setValue(t)}applyChanges(){this._differ.hasValueChanged()&&(this._value=this._differ.value)}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)},providedIn:null}),t})()},lg=ye({type:function(){},selectors:null,factory:()=>{},hostBindings:function(t,e,n){1&t&&al(),2&t&&(function(t){const e=cr(),n=Fn(),r=Sn(e,n),i=gl(r),a=ml(),o=n[Te]++;!a&&Kr(r)&&t!==Ha&&(hl(i,n,r,o,t,!1),t=Ha),cl(e,i,o,t,!1,bl())}(e.getValue()),dl())}});let ug=(()=>{class t{constructor(t){this._delegate=t}getValue(){return this._delegate.getValue()}}return t.ngDirectiveDef=lg,t})(),cg=(()=>{class t extends ug{constructor(t){super(t)}set ngStyle(t){this._delegate.setNgStyle(t)}ngDoCheck(){this._delegate.applyChanges()}}return t.ngDirectiveDef=ye({type:t,selectors:[["","ngStyle",""]],factory:function(e){return new(e||t)(rl(ag))},inputs:{ngStyle:"ngStyle"},features:[fu([sg]),ru]}),t})(),hg=(()=>{class t{transform(e){if(!e)return e;if("string"!=typeof e)throw function(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${xt(t)}'`)}(t,e);return e.toUpperCase()}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)},providedIn:null}),t.ngPipeDef=ve({name:"uppercase",type:t,factory:function(e){return new(e||t)},pure:!0}),t})(),dg=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();dg.ngInjectorDef=yt({factory:function(t){return new(t||dg)},providers:[{provide:Fm,useClass:Mm}]});let pg=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();pg.ngInjectorDef=yt({factory:function(t){return new(t||pg)},providers:[{provide:Om,useValue:function(t,e){"string"==typeof e&&(e=parseInt(e,10));const n=e,r=n.toString().replace(/^[^.]*\.?/,""),i=Math.floor(Math.abs(n)),a=r.length,o=parseInt(r,10),s=parseInt(n.toString().replace(/^[^.]*\.?|0+$/g,""),10)||0;switch(t.split("-")[0].toLowerCase()){case"af":case"asa":case"az":case"bem":case"bez":case"bg":case"brx":case"ce":case"cgg":case"chr":case"ckb":case"ee":case"el":case"eo":case"es":case"eu":case"fo":case"fur":case"gsw":case"ha":case"haw":case"hu":case"jgo":case"jmc":case"ka":case"kk":case"kkj":case"kl":case"ks":case"ksb":case"ky":case"lb":case"lg":case"mas":case"mgo":case"ml":case"mn":case"nb":case"nd":case"ne":case"nn":case"nnh":case"nyn":case"om":case"or":case"os":case"ps":case"rm":case"rof":case"rwk":case"saq":case"seh":case"sn":case"so":case"sq":case"ta":case"te":case"teo":case"tk":case"tr":case"ug":case"uz":case"vo":case"vun":case"wae":case"xog":return 1===n?Nm.One:Nm.Other;case"ak":case"ln":case"mg":case"pa":case"ti":return n===Math.floor(n)&&n>=0&&n<=1?Nm.One:Nm.Other;case"am":case"as":case"bn":case"fa":case"gu":case"hi":case"kn":case"mr":case"zu":return 0===i||1===n?Nm.One:Nm.Other;case"ar":return 0===n?Nm.Zero:1===n?Nm.One:2===n?Nm.Two:n%100===Math.floor(n%100)&&n%100>=3&&n%100<=10?Nm.Few:n%100===Math.floor(n%100)&&n%100>=11&&n%100<=99?Nm.Many:Nm.Other;case"ast":case"ca":case"de":case"en":case"et":case"fi":case"fy":case"gl":case"it":case"nl":case"sv":case"sw":case"ur":case"yi":return 1===i&&0===a?Nm.One:Nm.Other;case"be":return n%10==1&&n%100!=11?Nm.One:n%10===Math.floor(n%10)&&n%10>=2&&n%10<=4&&!(n%100>=12&&n%100<=14)?Nm.Few:n%10==0||n%10===Math.floor(n%10)&&n%10>=5&&n%10<=9||n%100===Math.floor(n%100)&&n%100>=11&&n%100<=14?Nm.Many:Nm.Other;case"br":return n%10==1&&n%100!=11&&n%100!=71&&n%100!=91?Nm.One:n%10==2&&n%100!=12&&n%100!=72&&n%100!=92?Nm.Two:n%10===Math.floor(n%10)&&(n%10>=3&&n%10<=4||n%10==9)&&!(n%100>=10&&n%100<=19||n%100>=70&&n%100<=79||n%100>=90&&n%100<=99)?Nm.Few:0!==n&&n%1e6==0?Nm.Many:Nm.Other;case"bs":case"hr":case"sr":return 0===a&&i%10==1&&i%100!=11||o%10==1&&o%100!=11?Nm.One:0===a&&i%10===Math.floor(i%10)&&i%10>=2&&i%10<=4&&!(i%100>=12&&i%100<=14)||o%10===Math.floor(o%10)&&o%10>=2&&o%10<=4&&!(o%100>=12&&o%100<=14)?Nm.Few:Nm.Other;case"cs":case"sk":return 1===i&&0===a?Nm.One:i===Math.floor(i)&&i>=2&&i<=4&&0===a?Nm.Few:0!==a?Nm.Many:Nm.Other;case"cy":return 0===n?Nm.Zero:1===n?Nm.One:2===n?Nm.Two:3===n?Nm.Few:6===n?Nm.Many:Nm.Other;case"da":return 1===n||0!==s&&(0===i||1===i)?Nm.One:Nm.Other;case"dsb":case"hsb":return 0===a&&i%100==1||o%100==1?Nm.One:0===a&&i%100==2||o%100==2?Nm.Two:0===a&&i%100===Math.floor(i%100)&&i%100>=3&&i%100<=4||o%100===Math.floor(o%100)&&o%100>=3&&o%100<=4?Nm.Few:Nm.Other;case"ff":case"fr":case"hy":case"kab":return 0===i||1===i?Nm.One:Nm.Other;case"fil":return 0===a&&(1===i||2===i||3===i)||0===a&&i%10!=4&&i%10!=6&&i%10!=9||0!==a&&o%10!=4&&o%10!=6&&o%10!=9?Nm.One:Nm.Other;case"ga":return 1===n?Nm.One:2===n?Nm.Two:n===Math.floor(n)&&n>=3&&n<=6?Nm.Few:n===Math.floor(n)&&n>=7&&n<=10?Nm.Many:Nm.Other;case"gd":return 1===n||11===n?Nm.One:2===n||12===n?Nm.Two:n===Math.floor(n)&&(n>=3&&n<=10||n>=13&&n<=19)?Nm.Few:Nm.Other;case"gv":return 0===a&&i%10==1?Nm.One:0===a&&i%10==2?Nm.Two:0!==a||i%100!=0&&i%100!=20&&i%100!=40&&i%100!=60&&i%100!=80?0!==a?Nm.Many:Nm.Other:Nm.Few;case"he":return 1===i&&0===a?Nm.One:2===i&&0===a?Nm.Two:0!==a||n>=0&&n<=10||n%10!=0?Nm.Other:Nm.Many;case"is":return 0===s&&i%10==1&&i%100!=11||0!==s?Nm.One:Nm.Other;case"ksh":return 0===n?Nm.Zero:1===n?Nm.One:Nm.Other;case"kw":case"naq":case"se":case"smn":return 1===n?Nm.One:2===n?Nm.Two:Nm.Other;case"lag":return 0===n?Nm.Zero:0!==i&&1!==i||0===n?Nm.Other:Nm.One;case"lt":return n%10!=1||n%100>=11&&n%100<=19?n%10===Math.floor(n%10)&&n%10>=2&&n%10<=9&&!(n%100>=11&&n%100<=19)?Nm.Few:0!==o?Nm.Many:Nm.Other:Nm.One;case"lv":case"prg":return n%10==0||n%100===Math.floor(n%100)&&n%100>=11&&n%100<=19||2===a&&o%100===Math.floor(o%100)&&o%100>=11&&o%100<=19?Nm.Zero:n%10==1&&n%100!=11||2===a&&o%10==1&&o%100!=11||2!==a&&o%10==1?Nm.One:Nm.Other;case"mk":return 0===a&&i%10==1||o%10==1?Nm.One:Nm.Other;case"mt":return 1===n?Nm.One:0===n||n%100===Math.floor(n%100)&&n%100>=2&&n%100<=10?Nm.Few:n%100===Math.floor(n%100)&&n%100>=11&&n%100<=19?Nm.Many:Nm.Other;case"pl":return 1===i&&0===a?Nm.One:0===a&&i%10===Math.floor(i%10)&&i%10>=2&&i%10<=4&&!(i%100>=12&&i%100<=14)?Nm.Few:0===a&&1!==i&&i%10===Math.floor(i%10)&&i%10>=0&&i%10<=1||0===a&&i%10===Math.floor(i%10)&&i%10>=5&&i%10<=9||0===a&&i%100===Math.floor(i%100)&&i%100>=12&&i%100<=14?Nm.Many:Nm.Other;case"pt":return n===Math.floor(n)&&n>=0&&n<=2&&2!==n?Nm.One:Nm.Other;case"ro":return 1===i&&0===a?Nm.One:0!==a||0===n||1!==n&&n%100===Math.floor(n%100)&&n%100>=1&&n%100<=19?Nm.Few:Nm.Other;case"ru":case"uk":return 0===a&&i%10==1&&i%100!=11?Nm.One:0===a&&i%10===Math.floor(i%10)&&i%10>=2&&i%10<=4&&!(i%100>=12&&i%100<=14)?Nm.Few:0===a&&i%10==0||0===a&&i%10===Math.floor(i%10)&&i%10>=5&&i%10<=9||0===a&&i%100===Math.floor(i%100)&&i%100>=11&&i%100<=14?Nm.Many:Nm.Other;case"shi":return 0===i||1===n?Nm.One:n===Math.floor(n)&&n>=2&&n<=10?Nm.Few:Nm.Other;case"si":return 0===n||1===n||0===i&&1===o?Nm.One:Nm.Other;case"sl":return 0===a&&i%100==1?Nm.One:0===a&&i%100==2?Nm.Two:0===a&&i%100===Math.floor(i%100)&&i%100>=3&&i%100<=4||0!==a?Nm.Few:Nm.Other;case"tzm":return n===Math.floor(n)&&n>=0&&n<=1||n===Math.floor(n)&&n>=11&&n<=99?Nm.One:Nm.Other;default:return Nm.Other}}}]});const fg=new Nt("DocumentToken"),mg="browser",gg="server";let yg=(()=>{class t{}return t.ngInjectableDef=mt({token:t,providedIn:"root",factory:()=>new vg(qt(fg),window,qt(Mi))}),t})();class vg{constructor(t,e,n){this.document=t,this.window=e,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(t){this.supportScrollRestoration()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(this.supportScrollRestoration()){t=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(t):t.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{const e=this.document.querySelector(`#${t}`);if(e)return void this.scrollToElement(e);const n=this.document.querySelector(`[name='${t}']`);if(n)return void this.scrollToElement(n)}catch(e){this.errorHandler.handleError(e)}}}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}supportScrollRestoration(){try{return!!this.window&&!!this.window.scrollTo}catch(t){return!1}}}const bg=new _(t=>t.complete());function wg(t){return t?function(t){return new _(e=>t.schedule(()=>e.complete()))}(t):bg}function _g(t){const e=new _(e=>{e.next(t),e.complete()});return e._isScalar=!0,e.value=t,e}function xg(...t){let e=t[t.length-1];switch(D(e)?t.pop():e=void 0,t.length){case 0:return wg(e);case 1:return e?q(t,e):_g(t[0]);default:return q(t,e)}}class Cg extends I{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new S;return this._value}next(t){super.next(this._value=t)}}function Sg(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}Sg.prototype=Object.create(Error.prototype);const kg=Sg,Eg={};function Ig(...t){let e=null,n=null;return D(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&l(t[0])&&(t=t[0]),q(t,n).lift(new Ag(e))}class Ag{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Dg(t,this.resultSelector))}}class Dg extends j{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Eg),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++){const e=t[n];this.add(B(this,e,e,n))}}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n,r,i){const a=this.values,o=this.toRespond?a[n]===Eg?--this.toRespond:this.toRespond:0;a[n]=e,0===o&&(this.resultSelector?this._tryResultSelector(a):this.destination.next(a.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}function Tg(t){return new _(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?G(n):wg()).subscribe(e)})}function Ng(){return Z(1)}function Rg(t,e){return function(n){return n.lift(new Og(t,e))}}class Og{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Fg(t,this.predicate,this.thisArg))}}class Fg extends m{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}function Mg(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}Mg.prototype=Object.create(Error.prototype);const Pg=Mg;function Lg(t){return function(e){return 0===t?wg():e.lift(new zg(t))}}class zg{constructor(t){if(this.total=t,this.total<0)throw new Pg}call(t,e){return e.subscribe(new Vg(t,this.total))}}class Vg extends m{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function Bg(t,e,n){return function(r){return r.lift(new jg(t,e,n))}}class jg{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new Ug(t,this.nextOrObserver,this.error,this.complete))}}class Ug extends m{constructor(t,e,n,i){super(t),this._tapNext=v,this._tapError=v,this._tapComplete=v,this._tapError=n||v,this._tapComplete=i||v,r(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||v,this._tapError=e.error||v,this._tapComplete=e.complete||v)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}const Wg=(t=Hg)=>Bg({hasValue:!1,next(){this.hasValue=!0},complete(){if(!this.hasValue)throw t()}});function Hg(){return new kg}function qg(t=null){return e=>e.lift(new Gg(t))}class Gg{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new $g(t,this.defaultValue))}}class $g extends m{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Kg(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Rg((e,n)=>t(e,n,r)):Y,Lg(1),n?qg(e):Wg(()=>new kg))}function Xg(t){return function(e){const n=new Yg(t),r=e.lift(n);return n.caught=r}}class Yg{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Zg(t,this.selector,this.caught))}}class Zg extends j{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new T(this,void 0,void 0);this.add(r),B(this,n,void 0,void 0,r)}}}function Qg(t){return e=>0===t?wg():e.lift(new Jg(t))}class Jg{constructor(t){if(this.total=t,this.total<0)throw new Pg}call(t,e){return e.subscribe(new ty(t,this.total))}}class ty extends m{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function ey(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Rg((e,n)=>t(e,n,r)):Y,Qg(1),n?qg(e):Wg(()=>new kg))}class ny{constructor(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}call(t,e){return e.subscribe(new ry(t,this.predicate,this.thisArg,this.source))}}class ry extends m{constructor(t,e,n,r){super(t),this.predicate=e,this.thisArg=n,this.source=r,this.index=0,this.thisArg=n||this}notifyComplete(t){this.destination.next(t),this.destination.complete()}_next(t){let e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}function iy(t,e){return"function"==typeof e?n=>n.pipe(iy((n,r)=>G(t(n,r)).pipe(U((t,i)=>e(n,t,r,i))))):e=>e.lift(new ay(t))}class ay{constructor(t){this.project=t}call(t,e){return e.subscribe(new oy(t,this.project))}}class oy extends j{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e,t,n)}_innerSub(t,e,n){const r=this.innerSubscription;r&&r.unsubscribe();const i=new T(this,void 0,void 0);this.destination.add(i),this.innerSubscription=B(this,t,e,n,i)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(t){this.destination.remove(t),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(t,e,n,r,i){this.destination.next(e)}}function sy(...t){return Ng()(xg(...t))}function ly(...t){return e=>{let n=t[t.length-1];D(n)?t.pop():n=null;const r=t.length;return sy(1!==r||n?r>0?q(t,n):wg(n):_g(t[0]),e)}}function uy(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new cy(t,e,n))}}class cy{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new hy(t,this.accumulator,this.seed,this.hasSeed))}}class hy extends m{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function dy(t,e){return $(t,e,1)}class py{constructor(t){this.callback=t}call(t,e){return e.subscribe(new fy(t,this.callback))}}class fy extends m{constructor(t,e){super(t),this.add(new d(e))}}let my=null;function gy(){return my}class yy{constructor(){this.resourceLoaderType=null}get attrToPropMap(){return this._attrToPropMap}set attrToPropMap(t){this._attrToPropMap=t}}class vy extends yy{constructor(){super(),this._animationPrefix=null,this._transitionEnd=null;try{const t=this.createElement("div",document);if(null!=this.getStyle(t,"animationName"))this._animationPrefix="";else{const e=["Webkit","Moz","O","ms"];for(let n=0;n<e.length;n++)if(null!=this.getStyle(t,e[n]+"AnimationName")){this._animationPrefix="-"+e[n].toLowerCase()+"-";break}}const e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(e).forEach(n=>{null!=this.getStyle(t,n)&&(this._transitionEnd=e[n])})}catch(t){this._animationPrefix=null,this._transitionEnd=null}}getDistributedNodes(t){return t.getDistributedNodes()}resolveAndSetHref(t,e,n){t.href=null==n?e:e+"/../"+n}supportsDOMEvents(){return!0}supportsNativeShadowDOM(){return"function"==typeof document.body.createShadowRoot}getAnimationPrefix(){return this._animationPrefix?this._animationPrefix:""}getTransitionEnd(){return this._transitionEnd?this._transitionEnd:""}supportsAnimation(){return null!=this._animationPrefix&&null!=this._transitionEnd}}const by={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},wy=3,_y={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},xy={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Cy=(()=>{if(Tt.Node)return Tt.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))}})();class Sy extends vy{parse(t){throw new Error("parse not implemented")}static makeCurrent(){var t;t=new Sy,my||(my=t)}hasProperty(t,e){return e in t}setProperty(t,e,n){t[e]=n}getProperty(t,e){return t[e]}invoke(t,e,n){t[e](...n)}logError(t){window.console&&(console.error?console.error(t):console.log(t))}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}get attrToPropMap(){return by}contains(t,e){return Cy.call(t,e)}querySelector(t,e){return t.querySelector(e)}querySelectorAll(t,e){return t.querySelectorAll(e)}on(t,e,n){t.addEventListener(e,n,!1)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}createMouseEvent(t){const e=this.getDefaultDocument().createEvent("MouseEvent");return e.initEvent(t,!0,!0),e}createEvent(t){const e=this.getDefaultDocument().createEvent("Event");return e.initEvent(t,!0,!0),e}preventDefault(t){t.preventDefault(),t.returnValue=!1}isPrevented(t){return t.defaultPrevented||null!=t.returnValue&&!t.returnValue}getInnerHTML(t){return t.innerHTML}getTemplateContent(t){return"content"in t&&this.isTemplateElement(t)?t.content:null}getOuterHTML(t){return t.outerHTML}nodeName(t){return t.nodeName}nodeValue(t){return t.nodeValue}type(t){return t.type}content(t){return this.hasProperty(t,"content")?t.content:t}firstChild(t){return t.firstChild}nextSibling(t){return t.nextSibling}parentElement(t){return t.parentNode}childNodes(t){return t.childNodes}childNodesAsList(t){const e=t.childNodes,n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=e[r];return n}clearNodes(t){for(;t.firstChild;)t.removeChild(t.firstChild)}appendChild(t,e){t.appendChild(e)}removeChild(t,e){t.removeChild(e)}replaceChild(t,e,n){t.replaceChild(e,n)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}insertBefore(t,e,n){t.insertBefore(n,e)}insertAllBefore(t,e,n){n.forEach(n=>t.insertBefore(n,e))}insertAfter(t,e,n){t.insertBefore(n,e.nextSibling)}setInnerHTML(t,e){t.innerHTML=e}getText(t){return t.textContent}setText(t,e){t.textContent=e}getValue(t){return t.value}setValue(t,e){t.value=e}getChecked(t){return t.checked}setChecked(t,e){t.checked=e}createComment(t){return this.getDefaultDocument().createComment(t)}createTemplate(t){const e=this.getDefaultDocument().createElement("template");return e.innerHTML=t,e}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createElementNS(t,e,n){return(n=n||this.getDefaultDocument()).createElementNS(t,e)}createTextNode(t,e){return(e=e||this.getDefaultDocument()).createTextNode(t)}createScriptTag(t,e,n){const r=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return r.setAttribute(t,e),r}createStyleElement(t,e){const n=(e=e||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(t,e)),n}createShadowRoot(t){return t.createShadowRoot()}getShadowRoot(t){return t.shadowRoot}getHost(t){return t.host}clone(t){return t.cloneNode(!0)}getElementsByClassName(t,e){return t.getElementsByClassName(e)}getElementsByTagName(t,e){return t.getElementsByTagName(e)}classList(t){return Array.prototype.slice.call(t.classList,0)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}hasClass(t,e){return t.classList.contains(e)}setStyle(t,e,n){t.style[e]=n}removeStyle(t,e){t.style[e]=""}getStyle(t,e){return t.style[e]}hasStyle(t,e,n){const r=this.getStyle(t,e)||"";return n?r==n:r.length>0}tagName(t){return t.tagName}attributeMap(t){const e=new Map,n=t.attributes;for(let r=0;r<n.length;r++){const t=n.item(r);e.set(t.name,t.value)}return e}hasAttribute(t,e){return t.hasAttribute(e)}hasAttributeNS(t,e,n){return t.hasAttributeNS(e,n)}getAttribute(t,e){return t.getAttribute(e)}getAttributeNS(t,e,n){return t.getAttributeNS(e,n)}setAttribute(t,e,n){t.setAttribute(e,n)}setAttributeNS(t,e,n,r){t.setAttributeNS(e,n,r)}removeAttribute(t,e){t.removeAttribute(e)}removeAttributeNS(t,e,n){t.removeAttributeNS(e,n)}templateAwareRoot(t){return this.isTemplateElement(t)?this.content(t):t}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}getBoundingClientRect(t){try{return t.getBoundingClientRect()}catch(e){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}}getTitle(t){return t.title}setTitle(t,e){t.title=e||""}elementMatches(t,e){return!!this.isElementNode(t)&&(t.matches&&t.matches(e)||t.msMatchesSelector&&t.msMatchesSelector(e)||t.webkitMatchesSelector&&t.webkitMatchesSelector(e))}isTemplateElement(t){return this.isElementNode(t)&&"TEMPLATE"===t.nodeName}isTextNode(t){return t.nodeType===Node.TEXT_NODE}isCommentNode(t){return t.nodeType===Node.COMMENT_NODE}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}hasShadowRoot(t){return null!=t.shadowRoot&&t instanceof HTMLElement}isShadowRoot(t){return t instanceof DocumentFragment}importIntoDoc(t){return document.importNode(this.templateAwareRoot(t),!0)}adoptNode(t){return document.adoptNode(t)}getHref(t){return t.getAttribute("href")}getEventKey(t){let e=t.key;if(null==e){if(null==(e=t.keyIdentifier))return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),t.location===wy&&xy.hasOwnProperty(e)&&(e=xy[e]))}return _y[e]||e}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=Ey||(Ey=document.querySelector("base"))?Ey.getAttribute("href"):null;return null==e?null:(n=e,ky||(ky=document.createElement("a")),ky.setAttribute("href",n),"/"===ky.pathname.charAt(0)?ky.pathname:"/"+ky.pathname);var n}resetBaseElement(){Ey=null}getUserAgent(){return window.navigator.userAgent}setData(t,e,n){this.setAttribute(t,"data-"+e,n)}getData(t,e){return this.getAttribute(t,"data-"+e)}getComputedStyle(t){return getComputedStyle(t)}supportsWebAnimation(){return"function"==typeof Element.prototype.animate}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return Pm(document.cookie,t)}setCookie(t,e){document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)}}let ky,Ey=null;function Iy(){return!!window.history.pushState}let Ay=(()=>{class t extends Cm{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=gy().getLocation(),this._history=gy().getHistory()}getBaseHrefFromDOM(){return gy().getBaseHref(this._doc)}onPopState(t){gy().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){gy().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){Iy()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){Iy()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt(fg))},providedIn:null}),t})();const Dy=new Nt("TRANSITION_ID"),Ty=[{provide:xd,useFactory:function(t,e,n){return()=>{n.get(Cd).donePromise.then(()=>{const n=gy();Array.prototype.slice.apply(n.querySelectorAll(e,"style[ng-transition]")).filter(e=>n.getAttribute(e,"ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[Dy,fg,Ls],multi:!0}];class Ny{static init(){var t;t=new Ny,up=t}addToWindow(t){Tt.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},Tt.getAllAngularTestabilities=()=>t.getAllTestabilities(),Tt.getAllAngularRootElements=()=>t.getAllRootElements(),Tt.frameworkStabilizers||(Tt.frameworkStabilizers=[]),Tt.frameworkStabilizers.push(t=>{const e=Tt.getAllAngularTestabilities();let n=e.length,r=!1;const i=function(e){r=r||e,0==--n&&t(r)};e.forEach((function(t){t.whenStable(i)}))})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?gy().isShadowRoot(e)?this.findTestabilityInTree(t,gy().getHost(e),!0):this.findTestabilityInTree(t,gy().parentElement(e),!0):null}}function Ry(t,e){"undefined"!=typeof COMPILED&&COMPILED||((Tt.ng=Tt.ng||{})[t]=e)}const Oy=(()=>({ApplicationRef:vp,NgZone:Qd}))();function Fy(t){return Bp(t)}const My=new Nt("EventManagerPlugins");let Py=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt(My),qt(Qd))},providedIn:null}),t})();class Ly{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=gy().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let zy=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)},providedIn:null}),t})(),Vy=(()=>{class t extends zy{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>gy().remove(t))}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt(fg))},providedIn:null}),t})();const By={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},jy=/%COMP%/g,Uy="_nghost-%COMP%",Wy="_ngcontent-%COMP%";function Hy(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Hy(t,i,n):(i=i.replace(jy,t),n.push(i))}return n}function qy(t){return e=>{!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let Gy=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new $y(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case ne.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new Yy(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case ne.Native:case ne.ShadowDom:return new Zy(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=Hy(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt(Py),qt(Vy),qt(Sd))},providedIn:null}),t})();class $y{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(By[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=By[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=By[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&Iu.DashCase?t.style.setProperty(e,n,r&Iu.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&Iu.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){Xy(e,"property"),t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return Xy(e,"listener"),"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,qy(n)):this.eventManager.addEventListener(t,e,qy(n))}}const Ky=(()=>"@".charCodeAt(0))();function Xy(t,e){if(t.charCodeAt(0)===Ky)throw new Error(`Found the synthetic ${e} ${t}. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.`)}class Yy extends $y{constructor(t,e,n,r){super(t),this.component=n;const i=Hy(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr=Wy.replace(jy,r+"-"+n.id),this.hostAttr=Uy.replace(jy,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class Zy extends $y{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.component=r,this.shadowRoot=r.encapsulation===ne.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const i=Hy(r.id,r.styles,[]);for(let a=0;a<i.length;a++){const t=document.createElement("style");t.textContent=i[a],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}const Qy=(()=>"undefined"!=typeof Zone&&Zone.__symbol__||function(t){return"__zone_symbol__"+t})(),Jy=Qy("addEventListener"),tv=Qy("removeEventListener"),ev={},nv="FALSE",rv="ANGULAR",iv="addEventListener",av="removeEventListener",ov="__zone_symbol__propagationStopped",sv="__zone_symbol__stopImmediatePropagation",lv=(()=>{const t="undefined"!=typeof Zone&&Zone[Qy("BLACK_LISTED_EVENTS")];if(t){const e={};return t.forEach(t=>{e[t]=t}),e}})(),uv=function(t){return!!lv&&lv.hasOwnProperty(t)},cv=function(t){const e=ev[t.type];if(!e)return;const n=this[e];if(!n)return;const r=[t];if(1===n.length){const t=n[0];return t.zone!==Zone.current?t.zone.run(t.handler,this,r):t.handler.apply(this,r)}{const e=n.slice();for(let n=0;n<e.length&&!0!==t[ov];n++){const t=e[n];t.zone!==Zone.current?t.zone.run(t.handler,this,r):t.handler.apply(this,r)}}};let hv=(()=>{class t extends Ly{constructor(t,e,n){super(t),this.ngZone=e,n&&function(t){return t===gg}(n)||this.patchEvent()}patchEvent(){if("undefined"==typeof Event||!Event||!Event.prototype)return;if(Event.prototype[sv])return;const t=Event.prototype[sv]=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[ov]=!0),t&&t.apply(this,arguments)}}supports(t){return!0}addEventListener(t,e,n){let r=n;if(!t[Jy]||Qd.isInAngularZone()&&!uv(e))t[iv](e,r,!1);else{let n=ev[e];n||(n=ev[e]=Qy(rv+e+nv));let i=t[n];const a=i&&i.length>0;i||(i=t[n]=[]);const o=uv(e)?Zone.root:Zone.current;if(0===i.length)i.push({zone:o,handler:r});else{let t=!1;for(let e=0;e<i.length;e++)if(i[e].handler===r){t=!0;break}t||i.push({zone:o,handler:r})}a||t[Jy](e,cv,!1)}return()=>this.removeEventListener(t,e,r)}removeEventListener(t,e,n){let r=t[tv];if(!r)return t[av].apply(t,[e,n,!1]);let i=ev[e],a=i&&t[i];if(!a)return t[av].apply(t,[e,n,!1]);let o=!1;for(let s=0;s<a.length;s++)if(a[s].handler===n){o=!0,a.splice(s,1);break}o?0===a.length&&r.apply(t,[e,cv,!1]):t[av].apply(t,[e,n,!1])}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt(fg),qt(Qd),qt(Dd,8))},providedIn:null}),t})();const dv={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},pv=new Nt("HammerGestureConfig"),fv=new Nt("HammerLoader");let mv=(()=>{class t{constructor(){this.events=[],this.overrides={}}buildHammer(t){const e=new Hammer(t,this.options);e.get("pinch").set({enable:!0}),e.get("rotate").set({enable:!0});for(const n in this.overrides)e.get(n).set(this.overrides[n]);return e}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)},providedIn:null}),t})(),gv=(()=>{class t extends Ly{constructor(t,e,n,r){super(t),this._config=e,this.console=n,this.loader=r}supports(t){return!(!dv.hasOwnProperty(t.toLowerCase())&&!this.isCustomEvent(t)||!window.Hammer&&!this.loader&&(this.console.warn(`The "${t}" event cannot be bound because Hammer.JS is not `+"loaded and no custom loader has been specified."),1))}addEventListener(t,e,n){const r=this.manager.getZone();if(e=e.toLowerCase(),!window.Hammer&&this.loader){let r=!1,i=()=>{r=!0};return this.loader().then(()=>{if(!window.Hammer)return this.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(i=()=>{});r||(i=this.addEventListener(t,e,n))}).catch(()=>{this.console.warn(`The "${e}" event cannot be bound because the custom `+"Hammer.JS loader failed."),i=()=>{}}),()=>{i()}}return r.runOutsideAngular(()=>{const i=this._config.buildHammer(t),a=function(t){r.runGuarded((function(){n(t)}))};return i.on(e,a),()=>{i.off(e,a),"function"==typeof i.destroy&&i.destroy()}})}isCustomEvent(t){return this._config.events.indexOf(t)>-1}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt(fg),qt(pv),qt(Nd),qt(fv,8))},providedIn:null}),t})();const yv=["alt","control","meta","shift"],vv={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let bv=(()=>{class t extends Ly{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),a=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>gy().onAndCancel(e,i.domEventName,a))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let a="";if(yv.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),a+=t+".")}),a+=i,0!=n.length||0===i.length)return null;const o={};return o.domEventName=r,o.fullKey=a,o}static getEventFullKey(t){let e="",n=gy().getEventKey(t);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),yv.forEach(r=>{r!=n&&(0,vv[r])(t)&&(e+=r+".")}),e+=n}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt(fg))},providedIn:null}),t})();class wv{}let _v=(()=>{class t extends wv{constructor(t){super(),this._doc=t}sanitize(t,e){if(null==e)return null;switch(t){case oa.NONE:return e;case oa.HTML:return e instanceof Cv?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"HTML"),function(t,e){let n=null;try{ia=ia||new Vi(t);let r=e?String(e):"";n=ia.getInertBodyElement(r);let i=5,a=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=a,a=n.innerHTML,n=ia.getInertBodyElement(r)}while(r!==a);const o=new ta,s=o.sanitizeChildren(aa(n)||n);return zi()&&o.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),s}finally{if(n){const t=aa(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}(this._doc,String(e)));case oa.STYLE:return e instanceof Sv?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"Style"),function(t){if(!(t=String(t).trim()))return"";const e=t.match(ua);return e&&Ui(e[1])===e[1]||t.match(la)&&function(t){let e=!0,n=!0;for(let r=0;r<t.length;r++){const i=t.charAt(r);"'"===i&&n?e=!e:'"'===i&&e&&(n=!n)}return e&&n}(t)?t:(zi()&&console.warn(`WARNING: sanitizing unsafe style value ${t} (see http://g.co/ng/security#xss).`),"unsafe")}(e));case oa.SCRIPT:if(e instanceof kv)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"Script"),new Error("unsafe value used in a script context");case oa.URL:return e instanceof Iv||e instanceof Ev?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"URL"),Ui(String(e)));case oa.RESOURCE_URL:if(e instanceof Iv)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see http://g.co/ng/security#xss)`)}}checkNotSafeValue(t,e){if(t instanceof xv)throw new Error(`Required a safe ${e}, got a ${t.getTypeName()} `+"(see http://g.co/ng/security#xss)")}bypassSecurityTrustHtml(t){return new Cv(t)}bypassSecurityTrustStyle(t){return new Sv(t)}bypassSecurityTrustScript(t){return new kv(t)}bypassSecurityTrustUrl(t){return new Ev(t)}bypassSecurityTrustResourceUrl(t){return new Iv(t)}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt(fg))},providedIn:null}),t})();class xv{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity}`+" (see http://g.co/ng/security#xss)"}}class Cv extends xv{getTypeName(){return"HTML"}}class Sv extends xv{getTypeName(){return"Style"}}class kv extends xv{getTypeName(){return"Script"}}class Ev extends xv{getTypeName(){return"URL"}}class Iv extends xv{getTypeName(){return"ResourceURL"}}const Av=[{provide:sa,useExisting:wv},{provide:wv,useClass:_v,deps:[fg]}],Dv=fp(Up,"browser",[{provide:Dd,useValue:mg},{provide:Ad,useValue:function(){Sy.makeCurrent(),Ny.init()},multi:!0},{provide:Cm,useClass:Ay,deps:[fg]},{provide:fg,useFactory:function(){return document},deps:[]}]);function Tv(){return new Mi}const Nv=[Av,{provide:Cs,useValue:!0},{provide:Mi,useFactory:Tv,deps:[]},{provide:My,useClass:hv,multi:!0,deps:[fg,Qd,Dd]},{provide:My,useClass:bv,multi:!0,deps:[fg]},{provide:My,useClass:gv,multi:!0,deps:[fg,pv,Nd,[new ut,fv]]},{provide:pv,useClass:mv,deps:[]},{provide:Gy,useClass:Gy,deps:[Py,Vy,Sd]},{provide:Eu,useExisting:Gy},{provide:zy,useExisting:Vy},{provide:Vy,useClass:Vy,deps:[fg]},{provide:ap,useClass:ap,deps:[Qd]},{provide:Py,useClass:Py,deps:[My,Qd]},[]];let Rv=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:Sd,useValue:e.appId},{provide:Dy,useExisting:Sd},Ty]}}}return t.ngModuleDef=me({type:t}),t})();Rv.ngInjectorDef=yt({factory:function(t){return new(t||Rv)(qt(Rv,12))},providers:Nv,imports:[dg,Kp]}),"undefined"!=typeof window&&window;class Ov{constructor(t,e){this.id=t,this.url=e}}class Fv extends Ov{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Mv extends Ov{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Pv extends Ov{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Lv extends Ov{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class zv extends Ov{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vv extends Ov{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bv extends Ov{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class jv extends Ov{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Uv extends Ov{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wv{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Hv{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class qv{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gv{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $v{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Kv{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xv{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Yv=(()=>{class t{}return t.ngComponentDef=de({type:t,selectors:[["ng-component"]],factory:function(e){return new(e||t)},consts:1,vars:0,template:function(t,e){1&t&&xl(0,"router-outlet")},directives:function(){return[e_]},encapsulation:2}),t})();const Zv="primary";class Qv{constructor(t){this.params=t||{}}has(t){return this.params.hasOwnProperty(t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Jv(t){return new Qv(t)}const tb="ngNavigationCancelingError";function eb(t){const e=Error("NavigationCancelingError: "+t);return e[tb]=!0,e}function nb(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let a=0;a<r.length;a++){const e=r[a],n=t[a];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}class rb{constructor(t,e){this.routes=t,this.module=e}}function ib(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];ab(r,ob(e,r))}}function ab(t,e){if(!t)throw new Error(`\n      Invalid configuration of route '${e}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(t))throw new Error(`Invalid configuration of route '${e}': Array cannot be specified`);if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&t.outlet!==Zv)throw new Error(`Invalid configuration of route '${e}': a componentless route without children or loadChildren cannot have a named outlet set`);if(t.redirectTo&&t.children)throw new Error(`Invalid configuration of route '${e}': redirectTo and children cannot be used together`);if(t.redirectTo&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': redirectTo and loadChildren cannot be used together`);if(t.children&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': children and loadChildren cannot be used together`);if(t.redirectTo&&t.component)throw new Error(`Invalid configuration of route '${e}': redirectTo and component cannot be used together`);if(t.path&&t.matcher)throw new Error(`Invalid configuration of route '${e}': path and matcher cannot be used together`);if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error(`Invalid configuration of route '${e}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===t.path&&void 0===t.matcher)throw new Error(`Invalid configuration of route '${e}': routes must have either a path or a matcher specified`);if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error(`Invalid configuration of route '${e}': path cannot start with a slash`);if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error(`Invalid configuration of route '{path: "${e}", redirectTo: "${t.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error(`Invalid configuration of route '${e}': pathMatch can only be set to 'prefix' or 'full'`);t.children&&ib(t.children,e)}function ob(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function sb(t){const e=t.children&&t.children.map(sb),n=e?Object.assign({},t,{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Zv&&(n.component=Yv),n}function lb(t,e){const n=Object.keys(t),r=Object.keys(e);if(!n||!r||n.length!=r.length)return!1;let i;for(let a=0;a<n.length;a++)if(t[i=n[a]]!==e[i])return!1;return!0}function ub(t){return Array.prototype.concat.apply([],t)}function cb(t){return t.length>0?t[t.length-1]:null}function hb(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function db(t){return Dl(t)?t:Al(t)?G(Promise.resolve(t)):xg(t)}function pb(t,e,n){return n?function(t,e){return lb(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!yb(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children){if(!e.children[r])return!1;if(!t(e.children[r],n.children[r]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>e[n]===t[n])}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,r,i){if(n.segments.length>i.length)return!!yb(n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!yb(n.segments,i))return!1;for(const e in r.children){if(!n.children[e])return!1;if(!t(n.children[e],r.children[e]))return!1}return!0}{const t=i.slice(0,n.segments.length),a=i.slice(n.segments.length);return!!yb(n.segments,t)&&!!n.children[Zv]&&e(n.children[Zv],r,a)}}(e,n,n.segments)}(t.root,e.root)}class fb{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Jv(this.queryParams)),this._queryParamMap}toString(){return _b.serialize(this)}}class mb{constructor(t,e){this.segments=t,this.children=e,this.parent=null,hb(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return xb(this)}}class gb{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Jv(this.parameters)),this._parameterMap}toString(){return Ab(this)}}function yb(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}function vb(t,e){let n=[];return hb(t.children,(t,r)=>{r===Zv&&(n=n.concat(e(t,r)))}),hb(t.children,(t,r)=>{r!==Zv&&(n=n.concat(e(t,r)))}),n}class bb{}class wb{parse(t){const e=new Ob(t);return new fb(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`${`/${function t(e,n){if(!e.hasChildren())return xb(e);if(n){const n=e.children[Zv]?t(e.children[Zv],!1):"",r=[];return hb(e.children,(e,n)=>{n!==Zv&&r.push(`${n}:${t(e,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=vb(e,(n,r)=>r===Zv?[t(e.children[Zv],!1)]:[`${r}:${t(n,!1)}`]);return`${xb(e)}/(${n.join("//")})`}}(t.root,!0)}`}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${Sb(e)}=${Sb(t)}`).join("&"):`${Sb(e)}=${Sb(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const _b=new wb;function xb(t){return t.segments.map(t=>Ab(t)).join("/")}function Cb(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Sb(t){return Cb(t).replace(/%3B/gi,";")}function kb(t){return Cb(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Eb(t){return decodeURIComponent(t)}function Ib(t){return Eb(t.replace(/\+/g,"%20"))}function Ab(t){return`${kb(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${kb(t)}=${kb(e[t])}`).join("")}`;var e}const Db=/^[^\/()?;=#]+/;function Tb(t){const e=t.match(Db);return e?e[0]:""}const Nb=/^[^=?&#]+/,Rb=/^[^?&#]+/;class Ob{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new mb([],{}):new mb([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[Zv]=new mb(t,e)),n}parseSegment(){const t=Tb(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new gb(Eb(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Tb(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Tb(this.remaining);t&&this.capture(n=t)}t[Eb(e)]=Eb(n)}parseQueryParam(t){const e=function(t){const e=t.match(Nb);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Rb);return e?e[0]:""}(this.remaining);t&&this.capture(n=t)}const r=Ib(e),i=Ib(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(t[r]=e=[e]),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Tb(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=Zv);const a=this.parseChildren();e[i]=1===Object.keys(a).length?a[Zv]:new mb([],a),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Fb{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Mb(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Mb(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Pb(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Pb(t,this._root).map(t=>t.value)}}function Mb(t,e){if(t===e.value)return e;for(const n of e.children){const e=Mb(t,n);if(e)return e}return null}function Pb(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Pb(t,n);if(r.length)return r.unshift(e),r}return[]}class Lb{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function zb(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Vb extends Fb{constructor(t,e){super(t),this.snapshot=e,qb(this,t)}toString(){return this.snapshot.toString()}}function Bb(t,e){const n=function(t,e){const n=new Wb([],{},{},"",{},Zv,e,null,t.root,-1,{});return new Hb("",new Lb(n,[]))}(t,e),r=new Cg([new gb("",{})]),i=new Cg({}),a=new Cg({}),o=new Cg({}),s=new Cg(""),l=new jb(r,i,o,s,a,Zv,e,n.root);return l.snapshot=n.root,new Vb(new Lb(l,[]),n)}class jb{constructor(t,e,n,r,i,a,o,s){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=a,this.component=o,this._futureSnapshot=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(U(t=>Jv(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(U(t=>Jv(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ub(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign({},t.params,e.params),data:Object.assign({},t.data,e.data),resolve:Object.assign({},t.resolve,e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Wb{constructor(t,e,n,r,i,a,o,s,l,u,c){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=a,this.component=o,this.routeConfig=s,this._urlSegment=l,this._lastPathIndex=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Jv(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Jv(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Hb extends Fb{constructor(t,e){super(e),this.url=t,qb(this,e)}toString(){return Gb(this._root)}}function qb(t,e){e.value._routerState=t,e.children.forEach(e=>qb(t,e))}function Gb(t){const e=t.children.length>0?` { ${t.children.map(Gb).join(", ")} } `:"";return`${t.value}${e}`}function $b(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,lb(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),lb(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!lb(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),lb(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Kb(t,e){var n,r;return lb(t.params,e.params)&&yb(n=t.url,r=e.url)&&n.every((t,e)=>lb(t.parameters,r[e].parameters))&&!(!t.parent!=!e.parent)&&(!t.parent||Kb(t.parent,e.parent))}function Xb(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Yb(t,e,n,r,i){let a={};return r&&hb(r,(t,e)=>{a[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new fb(n.root===t?e:function t(e,n,r){const i={};return hb(e.children,(e,a)=>{i[a]=e===n?r:t(e,n,r)}),new mb(e.segments,i)}(n.root,t,e),a,i)}class Zb{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Xb(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(t=>"object"==typeof t&&null!=t&&t.outlets);if(r&&r!==cb(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Qb{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Jb(t){return"object"==typeof t&&null!=t&&t.outlets?t.outlets[Zv]:`${t}`}function tw(t,e,n){if(t||(t=new mb([],{})),0===t.segments.length&&t.hasChildren())return ew(t,e,n);const r=function(t,e,n){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return a;const e=t.segments[i],o=Jb(n[r]),s=r<n.length-1?n[r+1]:null;if(i>0&&void 0===o)break;if(o&&s&&"object"==typeof s&&void 0===s.outlets){if(!aw(o,s,e))return a;r+=2}else{if(!aw(o,{},e))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new mb(t.segments.slice(0,r.pathIndex),{});return e.children[Zv]=new mb(t.segments.slice(r.pathIndex),t.children),ew(e,0,i)}return r.match&&0===i.length?new mb(t.segments,{}):r.match&&!t.hasChildren()?nw(t,e,n):r.match?ew(t,0,i):nw(t,e,n)}function ew(t,e,n){if(0===n.length)return new mb(t.segments,{});{const r=function(t){return"object"!=typeof t[0]?{[Zv]:t}:void 0===t[0].outlets?{[Zv]:t}:t[0].outlets}(n),i={};return hb(r,(n,r)=>{null!==n&&(i[r]=tw(t.children[r],e,n))}),hb(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new mb(t.segments,i)}}function nw(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){if("object"==typeof n[i]&&void 0!==n[i].outlets){const t=rw(n[i].outlets);return new mb(r,t)}if(0===i&&Xb(n[0])){r.push(new gb(t.segments[e].path,n[0])),i++;continue}const a=Jb(n[i]),o=i<n.length-1?n[i+1]:null;a&&o&&Xb(o)?(r.push(new gb(a,iw(o))),i+=2):(r.push(new gb(a,{})),i++)}return new mb(r,{})}function rw(t){const e={};return hb(t,(t,n)=>{null!==t&&(e[n]=nw(new mb([],{}),0,t))}),e}function iw(t){const e={};return hb(t,(t,n)=>e[n]=`${t}`),e}function aw(t,e,n){return t==n.path&&lb(e,n.parameters)}const ow=(t,e,n)=>U(r=>(new sw(e,r.targetRouterState,r.currentRouterState,n).activate(t),r));class sw{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),$b(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=zb(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),hb(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet);if(n){const r=zb(t),i=t.value.component?n.children:e;hb(r,(t,e)=>this.deactivateRouteAndItsChildren(t,i)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(t,e,n){const r=zb(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new Kv(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Gv(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if($b(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),lw(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function lw(t){$b(t.value),t.children.forEach(lw)}function uw(t){return"function"==typeof t}function cw(t){return t instanceof fb}class hw{constructor(t){this.segmentGroup=t||null}}class dw{constructor(t){this.urlTree=t}}function pw(t){return new _(e=>e.error(new hw(t)))}function fw(t){return new _(e=>e.error(new dw(t)))}function mw(t){return new _(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class gw{constructor(t,e,n,r,i){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=i,this.allowRedirects=!0,this.ngModule=t.get(Yt)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,Zv).pipe(U(t=>this.createUrlTree(t,this.urlTree.queryParams,this.urlTree.fragment))).pipe(Xg(t=>{if(t instanceof dw)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof hw)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Zv).pipe(U(e=>this.createUrlTree(e,t.queryParams,t.fragment))).pipe(Xg(t=>{if(t instanceof hw)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new mb([],{[Zv]:t}):t;return new fb(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(U(t=>new mb([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){return function(t,e){if(0===Object.keys(t).length)return xg({});const n=[],r=[],i={};return hb(t,(t,a)=>{const o=e(a,t).pipe(U(t=>i[a]=t));a===Zv?n.push(o):r.push(o)}),xg.apply(null,n.concat(r)).pipe(Ng(),Kg(),U(()=>i))}(n.children,(n,r)=>this.expandSegmentGroup(t,e,r,n))}expandSegment(t,e,n,r,i,a){return xg(...n).pipe(U(o=>this.expandSegmentAgainstRoute(t,e,n,o,r,i,a).pipe(Xg(t=>{if(t instanceof hw)return xg(null);throw t}))),Ng(),ey(t=>!!t),Xg((t,n)=>{if(t instanceof kg||"EmptyError"===t.name){if(this.noLeftoversInUrl(e,r,i))return xg(new mb([],{}));throw new hw(e)}throw t}))}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}expandSegmentAgainstRoute(t,e,n,r,i,a,o){return ww(r)!==a?pw(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,a):pw(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,a){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,a):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,a)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?fw(i):this.lineralizeSegments(n,i).pipe($(n=>{const i=new mb(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,a){const{matched:o,consumedSegments:s,lastChild:l,positionalParamSegments:u}=yw(e,r,i);if(!o)return pw(e);const c=this.applyRedirectCommands(s,r.redirectTo,u);return r.redirectTo.startsWith("/")?fw(c):this.lineralizeSegments(r,c).pipe($(r=>this.expandSegment(t,e,n,r.concat(i.slice(l)),a,!1)))}matchSegmentAgainstRoute(t,e,n,r){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(U(t=>(n._loadedConfig=t,new mb(r,{})))):xg(new mb(r,{}));const{matched:i,consumedSegments:a,lastChild:o}=yw(e,n,r);if(!i)return pw(e);const s=r.slice(o);return this.getChildConfig(t,n,r).pipe($(t=>{const n=t.module,r=t.routes,{segmentGroup:i,slicedSegments:o}=function(t,e,n,r){return n.length>0&&function(t,e,n){return n.some(n=>bw(t,e,n)&&ww(n)!==Zv)}(t,n,r)?{segmentGroup:vw(new mb(e,function(t,e){const n={};n[Zv]=e;for(const r of t)""===r.path&&ww(r)!==Zv&&(n[ww(r)]=new mb([],{}));return n}(r,new mb(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return n.some(n=>bw(t,e,n))}(t,n,r)?{segmentGroup:vw(new mb(t.segments,function(t,e,n,r){const i={};for(const a of n)bw(t,e,a)&&!r[ww(a)]&&(i[ww(a)]=new mb([],{}));return Object.assign({},r,i)}(t,n,r,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,a,s,r);return 0===o.length&&i.hasChildren()?this.expandChildren(n,r,i).pipe(U(t=>new mb(a,t))):0===r.length&&0===o.length?xg(new mb(a,{})):this.expandSegment(n,i,r,o,Zv,!0).pipe(U(t=>new mb(a.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?xg(new rb(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?xg(e._loadedConfig):function(t,e,n){const r=e.canLoad;return r&&0!==r.length?G(r).pipe(U(r=>{const i=t.get(r);let a;if(function(t){return t&&uw(t.canLoad)}(i))a=i.canLoad(e,n);else{if(!uw(i))throw new Error("Invalid CanLoad guard");a=i(e,n)}return db(a)})).pipe(Ng(),(i=t=>!0===t,t=>t.lift(new ny(i,void 0,t)))):xg(!0);var i}(t.injector,e,n).pipe($(n=>n?this.configLoader.load(t.injector,e).pipe(U(t=>(e._loadedConfig=t,t))):function(t){return new _(e=>e.error(eb(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):xg(new rb([],t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return xg(n);if(r.numberOfChildren>1||!r.children[Zv])return mw(t.redirectTo);r=r.children[Zv]}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new fb(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return hb(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let a={};return hb(e.children,(e,i)=>{a[i]=this.createSegmentGroup(t,e,n,r)}),new mb(i,a)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function yw(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const r=(e.matcher||nb)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function vw(t){if(1===t.numberOfChildren&&t.children[Zv]){const e=t.children[Zv];return new mb(t.segments.concat(e.segments),e.children)}return t}function bw(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function ww(t){return t.outlet||Zv}class _w{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class xw{constructor(t,e){this.component=t,this.route=e}}function Cw(t,e,n){const r=t._root;return function t(e,n,r,i,a={canDeactivateChecks:[],canActivateChecks:[]}){const o=zb(n);return e.children.forEach(e=>{!function(e,n,r,i,a={canDeactivateChecks:[],canActivateChecks:[]}){const o=e.value,s=n?n.value:null,l=r?r.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!yb(t.url,e.url);case"pathParamsOrQueryParamsChange":return!yb(t.url,e.url)||!lb(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Kb(t,e)||!lb(t.queryParams,e.queryParams);case"paramsChange":default:return!Kb(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?a.canActivateChecks.push(new _w(i)):(o.data=s.data,o._resolvedData=s._resolvedData),t(e,n,o.component?l?l.children:null:r,i,a),u&&a.canDeactivateChecks.push(new xw(l&&l.outlet&&l.outlet.component||null,s))}else s&&kw(n,l,a),a.canActivateChecks.push(new _w(i)),t(e,null,o.component?l?l.children:null:r,i,a)}(e,o[e.value.outlet],r,i.concat([e.value]),a),delete o[e.value.outlet]}),hb(o,(t,e)=>kw(t,r.getContext(e),a)),a}(r,e?e._root:null,n,[r.value])}function Sw(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function kw(t,e,n){const r=zb(t),i=t.value;hb(r,(t,r)=>{kw(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new xw(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}const Ew=Symbol("INITIAL_VALUE");function Iw(){return iy(t=>Ig(...t.map(t=>t.pipe(Qg(1),ly(Ew)))).pipe(uy((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==Ew)return t;if(r===Ew&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||cw(r))return r}return t},t)},Ew),Rg(t=>t!==Ew),U(t=>cw(t)?t:!0===t),Qg(1)))}function Aw(t,e){return null!==t&&e&&e(new $v(t)),xg(!0)}function Dw(t,e){return null!==t&&e&&e(new qv(t)),xg(!0)}function Tw(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;return r&&0!==r.length?xg(r.map(r=>Tg(()=>{const i=Sw(r,e,n);let a;if(function(t){return t&&uw(t.canActivate)}(i))a=db(i.canActivate(e,t));else{if(!uw(i))throw new Error("Invalid CanActivate guard");a=db(i(e,t))}return a.pipe(ey())}))).pipe(Iw()):xg(!0)}function Nw(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>(function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null})(t)).filter(t=>null!==t).map(e=>Tg(()=>xg(e.guards.map(i=>{const a=Sw(i,e.node,n);let o;if(function(t){return t&&uw(t.canActivateChild)}(a))o=db(a.canActivateChild(r,t));else{if(!uw(a))throw new Error("Invalid CanActivateChild guard");o=db(a(r,t))}return o.pipe(ey())})).pipe(Iw())));return xg(i).pipe(Iw())}class Rw{}class Ow{constructor(t,e,n,r,i,a){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=a}recognize(){try{const t=Pw(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Zv),n=new Wb([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Zv,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Lb(n,e),i=new Hb(this.url,r);return this.inheritParamsAndData(i._root),xg(i)}catch(t){return new _(e=>e.error(t))}}inheritParamsAndData(t){const e=t.value,n=Ub(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=vb(e,(e,n)=>this.processSegmentGroup(t,e,n));return function(t){const e={};t.forEach(t=>{const n=e[t.value.outlet];if(n){const e=n.url.map(t=>t.toString()).join("/"),r=t.value.url.map(t=>t.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${e}' and '${r}'.`)}e[t.value.outlet]=t.value})}(n),n.sort((t,e)=>t.value.outlet===Zv?-1:e.value.outlet===Zv?1:t.value.outlet.localeCompare(e.value.outlet)),n}processSegment(t,e,n,r){for(const a of t)try{return this.processSegmentAgainstRoute(a,e,n,r)}catch(i){if(!(i instanceof Rw))throw i}if(this.noLeftoversInUrl(e,n,r))return[];throw new Rw}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo)throw new Rw;if((t.outlet||Zv)!==r)throw new Rw;let i,a=[],o=[];if("**"===t.path){const a=n.length>0?cb(n).parameters:{};i=new Wb(n,a,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Vw(t),r,t.component,t,Fw(e),Mw(e)+n.length,Bw(t))}else{const s=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new Rw;return{consumedSegments:[],lastChild:0,parameters:{}}}const r=(e.matcher||nb)(n,t,e);if(!r)throw new Rw;const i={};hb(r.posParams,(t,e)=>{i[e]=t.path});const a=r.consumed.length>0?Object.assign({},i,r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:a}}(e,t,n);a=s.consumedSegments,o=n.slice(s.lastChild),i=new Wb(a,s.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Vw(t),r,t.component,t,Fw(e),Mw(e)+a.length,Bw(t))}const s=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:l,slicedSegments:u}=Pw(e,a,o,s,this.relativeLinkResolution);if(0===u.length&&l.hasChildren()){const t=this.processChildren(s,l);return[new Lb(i,t)]}if(0===s.length&&0===u.length)return[new Lb(i,[])];const c=this.processSegment(s,l,u,Zv);return[new Lb(i,c)]}}function Fw(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Mw(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)n+=(e=e._sourceSegment)._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Pw(t,e,n,r,i){if(n.length>0&&function(t,e,n){return n.some(n=>Lw(t,e,n)&&zw(n)!==Zv)}(t,n,r)){const i=new mb(e,function(t,e,n,r){const i={};i[Zv]=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const a of n)if(""===a.path&&zw(a)!==Zv){const n=new mb([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[zw(a)]=n}return i}(t,e,r,new mb(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Lw(t,e,n))}(t,n,r)){const a=new mb(t.segments,function(t,e,n,r,i,a){const o={};for(const s of r)if(Lw(t,n,s)&&!i[zw(s)]){const n=new mb([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===a?t.segments.length:e.length,o[zw(s)]=n}return Object.assign({},i,o)}(t,e,n,r,t.children,i));return a._sourceSegment=t,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:n}}const a=new mb(t.segments,t.children);return a._sourceSegment=t,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:n}}function Lw(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function zw(t){return t.outlet||Zv}function Vw(t){return t.data||{}}function Bw(t){return t.resolve||{}}function jw(t,e,n,r){const i=Sw(t,e,r);return db(i.resolve?i.resolve(e,n):i(e,n))}function Uw(t){return function(e){return e.pipe(iy(e=>{const n=t(e);return n?G(n).pipe(U(()=>e)):G([e])}))}}class Ww{}class Hw{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}const qw=new Nt("ROUTES");class Gw{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(U(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new rb(ub(r.injector.get(qw)).map(sb),r)}))}loadModuleFactory(t){return"string"==typeof t?G(this.loader.load(t)):db(t()).pipe($(t=>t instanceof Zt?xg(t):G(this.compiler.compileModuleAsync(t))))}}class $w{}class Kw{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Xw(t){throw t}function Yw(t,e,n){return e.parse("/")}function Zw(t,e){return xg(null)}class Qw{constructor(t,e,n,r,i,a,o,s){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=r,this.config=s,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new I,this.errorHandler=Xw,this.malformedUriErrorHandler=Yw,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Zw,afterPreactivation:Zw},this.urlHandlingStrategy=new Kw,this.routeReuseStrategy=new Hw,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=i.get(Yt),this.console=i.get(Nd);const l=i.get(Qd);this.isNgZoneEnabled=l instanceof Qd,this.resetConfig(s),this.currentUrlTree=new fb(new mb([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Gw(a,o,t=>this.triggerEvent(new Wv(t)),t=>this.triggerEvent(new Hv(t))),this.routerState=Bb(this.currentUrlTree,this.rootComponentType),this.transitions=new Cg({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Rg(t=>0!==t.id),U(t=>Object.assign({},t,{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),iy(t=>{let n=!1,r=!1;return xg(t).pipe(Bg(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign({},this.lastSuccessfulNavigation,{previousNavigation:null}):null}}),iy(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return xg(t).pipe(iy(t=>{const n=this.transitions.getValue();return e.next(new Fv(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?bg:[t]}),iy(t=>Promise.resolve(t)),function(t,e,n,r){return function(i){return i.pipe(iy(i=>(function(t,e,n,r,i){return new gw(t,e,n,r,i).apply()})(t,e,n,i.extractedUrl,r).pipe(U(t=>Object.assign({},i,{urlAfterRedirects:t})))))}}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Bg(t=>{this.currentNavigation=Object.assign({},this.currentNavigation,{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return function(a){return a.pipe($(a=>(function(t,e,n,r,i="emptyOnly",a="legacy"){return new Ow(t,e,n,r,i,a).recognize()})(t,e,a.urlAfterRedirects,n(a.urlAfterRedirects),r,i).pipe(U(t=>Object.assign({},a,{targetSnapshot:t})))))}}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Bg(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),Bg(t=>{const n=new zv(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:a,extras:o}=t,s=new Fv(n,this.serializeUrl(r),i,a);e.next(s);const l=Bb(r,this.rootComponentType).snapshot;return xg(Object.assign({},t,{targetSnapshot:l,urlAfterRedirects:r,extras:Object.assign({},o,{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),bg}),Uw(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:a,replaceUrl:o}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!a,replaceUrl:!!o})}),Bg(t=>{const e=new Vv(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),U(t=>Object.assign({},t,{guards:Cw(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return function(n){return n.pipe($(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:o}}=n;return 0===o.length&&0===a.length?xg(Object.assign({},n,{guardsResult:!0})):function(t,e,n,r){return G(t).pipe($(t=>(function(t,e,n,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?xg(a.map(a=>{const o=Sw(a,e,i);let s;if(function(t){return t&&uw(t.canDeactivate)}(o))s=db(o.canDeactivate(t,e,n,r));else{if(!uw(o))throw new Error("Invalid CanDeactivate guard");s=db(o(t,e,n,r))}return s.pipe(ey())})).pipe(Iw()):xg(!0)})(t.component,t.route,n,e,r)),ey(t=>!0!==t,!0))}(o,r,i,t).pipe($(n=>n&&function(t){return"boolean"==typeof t}(n)?function(t,e,n,r){return G(e).pipe(dy(e=>G([Dw(e.route.parent,r),Aw(e.route,r),Nw(t,e.path,n),Tw(t,e.route,n)]).pipe(Ng(),ey(t=>!0!==t,!0))),ey(t=>!0!==t,!0))}(r,a,t,e):xg(n)),U(t=>Object.assign({},n,{guardsResult:t})))}))}}(this.ngModule.injector,t=>this.triggerEvent(t)),Bg(t=>{if(cw(t.guardsResult)){const e=eb(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}}),Bg(t=>{const e=new Bv(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Rg(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new Pv(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),Uw(t=>{if(t.guards.canActivateChecks.length)return xg(t).pipe(Bg(t=>{const e=new jv(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),function(t,e){return function(n){return n.pipe($(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;return i.length?G(i).pipe(dy(n=>(function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return xg({});if(1===i.length){const a=i[0];return jw(t[a],e,n,r).pipe(U(t=>({[a]:t})))}const a={};return G(i).pipe($(i=>jw(t[i],e,n,r).pipe(U(t=>(a[i]=t,t))))).pipe(Kg(),U(()=>a))}(t._resolve,t,e,r).pipe(U(e=>(t._resolvedData=e,t.data=Object.assign({},t.data,Ub(t,n).resolve),null)))})(n.route,r,t,e)),function(t,e){return arguments.length>=2?function(n){return b(uy(t,e),Lg(1),qg(e))(n)}:function(e){return b(uy((e,n,r)=>t(e,n,r+1)),Lg(1))(e)}}((t,e)=>t),U(t=>n)):xg(n)}))}}(this.paramsInheritanceStrategy,this.ngModule.injector),Bg(t=>{const e=new Uv(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Uw(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:a,replaceUrl:o}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!a,replaceUrl:!!o})}),U(t=>{const e=function(t,e,n){const r=function t(e,n,r){if(r&&e.shouldReuseRoute(n.value,r.value.snapshot)){const i=r.value;i._futureSnapshot=n.value;const a=function(e,n,r){return n.children.map(n=>{for(const i of r.children)if(e.shouldReuseRoute(i.value.snapshot,n.value))return t(e,n,i);return t(e,n)})}(e,n,r);return new Lb(i,a)}{const r=e.retrieve(n.value);if(r){const t=r.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(let r=0;r<e.children.length;++r)t(e.children[r],n.children[r])}(n,t),t}{const r=new jb(new Cg((i=n.value).url),new Cg(i.params),new Cg(i.queryParams),new Cg(i.fragment),new Cg(i.data),i.outlet,i.component,i),a=n.children.map(n=>t(e,n));return new Lb(r,a)}}var i}(t,e._root,n?n._root:void 0);return new Vb(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign({},t,{targetRouterState:e})}),Bg(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),ow(this.rootContexts,this.routeReuseStrategy,t=>this.triggerEvent(t)),Bg({next(){n=!0},complete(){n=!0}}),function(t){return e=>e.lift(new py(t))}(()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new Pv(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null}),Xg(n=>{if(r=!0,function(t){return t&&t[tb]}(n)){const r=cw(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Pv(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),t.resolve(!1),r&&this.navigateByUrl(n.url)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Lv(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(i){t.reject(i)}}return bg}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign({},this.getTransition(),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{let e=this.parseUrl(t.url);const n="popstate"===t.type?"popstate":"hashchange",r=t.state&&t.state.navigationId?t.state:null;setTimeout(()=>{this.scheduleNavigation(e,n,r,{replaceUrl:!0})},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){ib(t),this.config=t.map(sb),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,preserveQueryParams:a,queryParamsHandling:o,preserveFragment:s}=e;zi()&&a&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const l=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;if(o)switch(o){case"merge":c=Object.assign({},this.currentUrlTree.queryParams,r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}else c=a?this.currentUrlTree.queryParams:r||null;return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return Yb(e.root,e.root,e,r,i);const a=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Zb(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return hb(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Zb(n,e,r)}(n);if(a.toRoot())return Yb(e.root,new mb([],{}),e,r,i);const o=function(t,e,n){if(t.isAbsolute)return new Qb(e.root,!0,0);if(-1===n.snapshot._lastPathIndex)return new Qb(n.snapshot._urlSegment,!0,0);const r=Xb(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,a=n;for(;a>i;){if(a-=i,!(r=r.parent))throw new Error("Invalid number of '../'");i=r.segments.length}return new Qb(r,!1,i-a)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(a,e,t),s=o.processChildren?ew(o.segmentGroup,o.index,a.commands):tw(o.segmentGroup,o.index,a.commands);return Yb(o.segmentGroup,s,e,r,i)}(l,this.currentUrlTree,t,c,u)}navigateByUrl(t,e={skipLocationChange:!1}){zi()&&this.isNgZoneEnabled&&!Qd.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const n=cw(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}isActive(t,e){if(cw(t))return pb(this.currentUrlTree,t,e);const n=this.parseUrl(t);return pb(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new Mv(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r){const i=this.getTransition();if(i&&"imperative"!==e&&"imperative"===i.source&&i.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(i&&"hashchange"==e&&"popstate"===i.source&&i.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(i&&"popstate"==e&&"hashchange"===i.source&&i.rawUrl.toString()===t.toString())return Promise.resolve(!0);let a=null,o=null;const s=new Promise((t,e)=>{a=t,o=e}),l=++this.navigationId;return this.setTransition({id:l,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:a,reject:o,promise:s,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),s.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign({},r,{navigationId:n})):this.location.go(i,"",Object.assign({},r,{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}class Jw{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new t_,this.attachRef=null}}class t_{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Jw,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}let e_=(()=>{class t{constructor(t,e,n,r,i){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=i,this.activated=null,this._activatedRoute=null,this.activateEvents=new Qh,this.deactivateEvents=new Qh,this.name=r||Zv,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new n_(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.ngDirectiveDef=ye({type:t,selectors:[["router-outlet"]],factory:function(e){return new(e||t)(rl(t_),rl(Xu),rl(wu),il("name"),rl(_s))},outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class n_{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===jb?this.route:t===t_?this.childContexts:this.parent.get(t,e)}}class r_{}class i_{preload(t,e){return e().pipe(Xg(()=>xg(null)))}}class a_{preload(t,e){return xg(null)}}let o_=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Gw(e,n,e=>t.triggerEvent(new Wv(e)),e=>t.triggerEvent(new Hv(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Rg(t=>t instanceof Mv),dy(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(Yt);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return G(n).pipe(Z(),U(t=>void 0))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe($(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt(Qw),qt(wp),qt(jd),qt(Ls),qt(r_))},providedIn:null}),t})();class s_{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Fv?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Mv&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Xv&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Xv(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}const l_=new Nt("ROUTER_CONFIGURATION"),u_=new Nt("ROUTER_FORROOT_GUARD"),c_=[Im,{provide:bb,useClass:wb},{provide:Qw,useFactory:y_,deps:[vp,bb,t_,Im,Ls,wp,jd,qw,l_,[$w,new ut],[Ww,new ut]]},t_,{provide:jb,useFactory:v_,deps:[Qw]},{provide:wp,useClass:kp},o_,a_,i_,{provide:l_,useValue:{enableTracing:!1}}];function h_(){return new pp("Router",Qw)}let d_=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[c_,g_(e),{provide:u_,useFactory:m_,deps:[[Qw,new ut,new ht]]},{provide:l_,useValue:n||{}},{provide:km,useFactory:f_,deps:[Cm,[new lt(Em),new ut],l_]},{provide:s_,useFactory:p_,deps:[Qw,yg,l_]},{provide:r_,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:a_},{provide:pp,multi:!0,useFactory:h_},[b_,{provide:xd,multi:!0,useFactory:w_,deps:[b_]},{provide:x_,useFactory:__,deps:[b_]},{provide:Td,multi:!0,useExisting:x_}]]}}static forChild(e){return{ngModule:t,providers:[g_(e)]}}}return t.ngModuleDef=me({type:t}),t})();function p_(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new s_(t,e,n)}function f_(t,e,n={}){return n.useHash?new Dm(t,e):new Tm(t,e)}function m_(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function g_(t){return[{provide:zs,multi:!0,useValue:t},{provide:qw,multi:!0,useValue:t}]}function y_(t,e,n,r,i,a,o,s,l={},u,c){const h=new Qw(null,e,n,r,i,a,o,ub(s));if(u&&(h.urlHandlingStrategy=u),c&&(h.routeReuseStrategy=c),l.errorHandler&&(h.errorHandler=l.errorHandler),l.malformedUriErrorHandler&&(h.malformedUriErrorHandler=l.malformedUriErrorHandler),l.enableTracing){const t=gy();h.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return l.onSameUrlNavigation&&(h.onSameUrlNavigation=l.onSameUrlNavigation),l.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=l.paramsInheritanceStrategy),l.urlUpdateStrategy&&(h.urlUpdateStrategy=l.urlUpdateStrategy),l.relativeLinkResolution&&(h.relativeLinkResolution=l.relativeLinkResolution),h}function v_(t){return t.routerState.root}d_.ngInjectorDef=yt({factory:function(t){return new(t||d_)(qt(u_,8),qt(Qw,8))}});let b_=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new I}appInitializer(){return this.injector.get(Sm,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(Qw),r=this.injector.get(l_);if(this.isLegacyDisabled(r)||this.isLegacyEnabled(r))t(!0);else if("disabled"===r.initialNavigation)n.setUpLocationChangeListener(),t(!0);else{if("enabled"!==r.initialNavigation)throw new Error(`Invalid initialNavigation options: '${r.initialNavigation}'`);n.hooks.afterPreactivation=()=>this.initNavigation?xg(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()}return e})}bootstrapListener(t){const e=this.injector.get(l_),n=this.injector.get(o_),r=this.injector.get(s_),i=this.injector.get(Qw),a=this.injector.get(vp);t===a.components[0]&&(this.isLegacyEnabled(e)?i.initialNavigation():this.isLegacyDisabled(e)&&i.setUpLocationChangeListener(),n.setUpPreloading(),r.init(),i.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation}isLegacyDisabled(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt(Ls))},providedIn:null}),t})();function w_(t){return t.appInitializer.bind(t)}function __(t){return t.bootstrapListener.bind(t)}const x_=new Nt("Router Initializer");var C_=pc({encapsulation:2,styles:[],data:{}});function S_(t){return ff(0,[(t()(),Yp(0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),_h(1,212992,null,0,e_,[t_,Xu,wu,[8,null],_s],null,null)],(function(t,e){t(e,1,0)}),null)}function k_(t){return ff(0,[(t()(),Yp(0,0,null,null,1,"ng-component",[],null,null,null,S_,C_)),_h(1,49152,null,0,Yv,[],null,null)],null,null)}var E_=Zc("ng-component",Yv,k_,{},{},[]);function I_(t,e,n,i){return r(n)&&(i=n,n=void 0),i?I_(t,e,n).pipe(U(t=>l(t)?i(...t):i(t))):new _(r=>{!function t(e,n,r,i,a){let o;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){const t=e;e.addEventListener(n,r,a),o=()=>t.removeEventListener(n,r,a)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){const t=e;e.on(n,r),o=()=>t.off(n,r)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){const t=e;e.addListener(n,r),o=()=>t.removeListener(n,r)}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(let o=0,s=e.length;o<s;o++)t(e[o],n,r,i,a)}i.add(o)}(t,e,(function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)}),r,n)})}class A_{}class D_{}const T_="*";function N_(t,e){return{type:7,name:t,definitions:e,options:{}}}function R_(t,e=null){return{type:4,styles:e,timings:t}}function O_(t,e=null){return{type:2,steps:t,options:e}}function F_(t){return{type:6,styles:t,offset:null}}function M_(t,e,n){return{type:0,name:t,styles:e,options:n}}function P_(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}function L_(t=null){return{type:9,options:t}}function z_(t,e,n=null){return{type:11,selector:t,animation:e,options:n}}function V_(t){Promise.resolve(null).then(t)}class B_{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){V_(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){}setPosition(t){}getPosition(){return 0}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class j_{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const i=this.players.length;0==i?V_(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==i&&this._onFinish()}),t.onDestroy(()=>{++n==i&&this._onDestroy()}),t.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){let t=0;return this.players.forEach(e=>{const n=e.getPosition();t=Math.min(n,t)}),t}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}const U_="!";function W_(){return"undefined"!=typeof process}function H_(t){switch(t.length){case 0:return new B_;case 1:return t[0];default:return new j_(t)}}function q_(t,e,n,r,i={},a={}){const o=[],s=[];let l=-1,u=null;if(r.forEach(t=>{const n=t.offset,r=n==l,c=r&&u||{};Object.keys(t).forEach(n=>{let r=n,s=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,o),s){case U_:s=i[n];break;case T_:s=a[n];break;default:s=e.normalizeStyleValue(n,r,s,o)}c[r]=s}),r||s.push(c),u=c,l=n}),o.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${o.join(t)}`)}return s}function G_(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&$_(n,"start",t)));break;case"done":t.onDone(()=>r(n&&$_(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&$_(n,"destroy",t)))}}function $_(t,e,n){const r=n.totalTime,i=K_(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),a=t._data;return null!=a&&(i._data=a),i}function K_(t,e,n,r,i="",a=0,o){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:a,disabled:!!o}}function X_(t,e,n){let r;return t instanceof Map?(r=t.get(e))||t.set(e,r=n):(r=t[e])||(r=t[e]=n),r}function Y_(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let Z_=(t,e)=>!1,Q_=(t,e)=>!1,J_=(t,e,n)=>[];const tx=W_();(tx||"undefined"!=typeof Element)&&(Z_=(t,e)=>t.contains(e),Q_=(()=>{if(tx||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):Q_}})(),J_=(t,e,n)=>{let r=[];if(n)r.push(...t.querySelectorAll(e));else{const n=t.querySelector(e);n&&r.push(n)}return r});let ex=null,nx=!1;function rx(t){ex||(ex=("undefined"!=typeof document?document.body:null)||{},nx=!!ex.style&&"WebkitAppearance"in ex.style);let e=!0;return ex.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&!(e=t in ex.style)&&nx&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in ex.style),e}const ix=Q_,ax=Z_,ox=J_;function sx(t){const e={};return Object.keys(t).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}let lx=(()=>{class t{validateStyleProperty(t){return rx(t)}matchesElement(t,e){return ix(t,e)}containsElement(t,e){return ax(t,e)}query(t,e,n){return ox(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,r,i,a=[],o){return new B_(n,r)}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)},providedIn:null}),t})(),ux=(()=>{class t{}return t.NOOP=new lx,t})();const cx=1e3,hx="{{",dx="ng-enter",px="ng-leave",fx="ng-trigger",mx=".ng-trigger",gx="ng-animating",yx=".ng-animating";function vx(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:bx(parseFloat(e[1]),e[2])}function bx(t,e){switch(e){case"s":return t*cx;default:return t}}function wx(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let r,i=0,a="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};r=bx(parseFloat(n[1]),n[2]);const o=n[3];null!=o&&(i=bx(parseFloat(o),n[4]));const s=n[5];s&&(a=s)}else r=t;if(!n){let n=!1,a=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(a,0,`The provided timing value "${t}" is invalid.`)}return{duration:r,delay:i,easing:a}}(t,e,n)}function _x(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function xx(t,e,n={}){if(e)for(let r in t)n[r]=t[r];else _x(t,n);return n}function Cx(t,e,n){return n?e+":"+n+";":""}function Sx(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style.item(n);e+=Cx(0,r,t.style.getPropertyValue(r))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=Cx(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function kx(t,e,n){t.style&&(Object.keys(e).forEach(r=>{const i=Ox(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),W_()&&Sx(t))}function Ex(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=Ox(e);t.style[n]=""}),W_()&&Sx(t))}function Ix(t){return Array.isArray(t)?1==t.length?t[0]:O_(t):t}const Ax=new RegExp(`${hx}\\s*(.+?)\\s*}}`,"g");function Dx(t){let e=[];if("string"==typeof t){const n=t.toString();let r;for(;r=Ax.exec(n);)e.push(r[1]);Ax.lastIndex=0}return e}function Tx(t,e,n){const r=t.toString(),i=r.replace(Ax,(t,r)=>{let i=e[r];return e.hasOwnProperty(r)||(n.push(`Please provide a value for the animation param ${r}`),i=""),i.toString()});return i==r?t:i}function Nx(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const Rx=/-+([a-z0-9])/g;function Ox(t){return t.replace(Rx,(...t)=>t[1].toUpperCase())}function Fx(t,e){return 0===t||0===e}function Mx(t,e,n){const r=Object.keys(n);if(r.length&&e.length){let a=e[0],o=[];if(r.forEach(t=>{a.hasOwnProperty(t)||o.push(t),a[t]=n[t]}),o.length)for(var i=1;i<e.length;i++){let n=e[i];o.forEach((function(e){n[e]=Lx(t,e)}))}}return e}function Px(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function Lx(t,e){return window.getComputedStyle(t)[e]}const zx="*";function Vx(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>(function(t,e,n){if(":"==t[0]){const r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const i=r[1],a=r[2],o=r[3];e.push(Ux(i,o)),"<"!=a[0]||i==zx&&o==zx||e.push(Ux(o,i))})(t,n,e)):n.push(t),n}const Bx=new Set(["true","1"]),jx=new Set(["false","0"]);function Ux(t,e){const n=Bx.has(t)||jx.has(t),r=Bx.has(e)||jx.has(e);return(i,a)=>{let o=t==zx||t==i,s=e==zx||e==a;return!o&&n&&"boolean"==typeof i&&(o=i?Bx.has(t):jx.has(t)),!s&&r&&"boolean"==typeof a&&(s=a?Bx.has(e):jx.has(e)),o&&s}}const Wx=":self",Hx=new RegExp(`s*${Wx}s*,?`,"g");function qx(t,e,n){return new $x(t).build(e,n)}const Gx="";class $x{constructor(t){this._driver=t}build(t,e){const n=new Kx(e);return this._resetContextStyleTimingState(n),Px(this,Ix(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector=Gx,t.collectedStyles={},t.collectedStyles[Gx]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const i=[],a=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,r=n.name;r.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,i.push(this.visitState(n,e))}),n.name=r}else if(1==t.type){const i=this.visitTransition(t,e);n+=i.queryCount,r+=i.depCount,a.push(i)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:i,transitions:a,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const i=new Set,a=r||{};if(n.styles.forEach(t=>{if(Xx(t)){const e=t;Object.keys(e).forEach(t=>{Dx(e[t]).forEach(t=>{a.hasOwnProperty(t)||i.add(t)})})}}),i.size){const n=Nx(i.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=Px(this,Ix(t.animation),e);return{type:1,matchers:Vx(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:Yx(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>Px(this,t,e)),options:Yx(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const i=t.steps.map(t=>{e.currentTime=n;const i=Px(this,t,e);return r=Math.max(r,e.currentTime),i});return e.currentTime=r,{type:3,steps:i,options:Yx(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return Zx(wx(t,e).duration,0,"");const r=t;if(r.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=Zx(0,0,"");return t.dynamic=!0,t.strValue=r,t}return Zx((n=n||wx(r,e)).duration,n.delay,n.easing)}(t.timings,e.errors);let r;e.currentAnimateTimings=n;let i=t.styles?t.styles:F_({});if(5==i.type)r=this.visitKeyframes(i,e);else{let i=t.styles,a=!1;if(!i){a=!0;const t={};n.easing&&(t.easing=n.easing),i=F_(t)}e.currentTime+=n.duration+n.delay;const o=this.visitStyle(i,e);o.isEmptyStep=a,r=o}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?t==T_?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let r=!1,i=null;return n.forEach(t=>{if(Xx(t)){const e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(let t in e)if(e[t].toString().indexOf(hx)>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,i=e.currentTime;n&&i>0&&(i-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const a=e.collectedStyles[e.currentQuerySelector],o=a[n];let s=!0;o&&(i!=r&&i>=o.startTime&&r<=o.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${o.startTime}ms" and "${o.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),s=!1),i=o.startTime),s&&(a[n]={startTime:i,endTime:r}),e.options&&function(t,e,n){const r=e.params||{},i=Dx(t);i.length&&i.forEach(t=>{r.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let a=!1,o=!1,s=0;const l=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let l=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(Xx(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(Xx(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),u=0;return null!=l&&(r++,u=n.offset=l),o=o||u<0||u>1,a=a||u<s,s=u,i.push(u),n});o&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),a&&e.errors.push("Please ensure that all keyframe offsets are in order");const u=t.steps.length;let c=0;r>0&&r<u?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(c=1/(u-1));const h=u-1,d=e.currentTime,p=e.currentAnimateTimings,f=p.duration;return l.forEach((t,r)=>{const a=c>0?r==h?1:c*r:i[r],o=a*f;e.currentTime=d+p.delay+o,p.duration=o,this._validateStyleAst(t,e),t.offset=a,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:Px(this,Ix(t.animation),e),options:Yx(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Yx(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Yx(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[i,a]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>t==Wx);return e&&(t=t.replace(Hx,"")),[t=t.replace(/@\*/g,mx).replace(/@\w+/g,t=>mx+"-"+t.substr(1)).replace(/:animating/g,yx),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+i:i,X_(e.collectedStyles,e.currentQuerySelector,{});const o=Px(this,Ix(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:a,animation:o,originalSelector:t.selector,options:Yx(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:wx(t.timings,e.errors,!0);return{type:12,animation:Px(this,Ix(t.animation),e),timings:n,options:null}}}class Kx{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Xx(t){return!Array.isArray(t)&&"object"==typeof t}function Yx(t){var e;return t?(t=_x(t)).params&&(t.params=(e=t.params)?_x(e):null):t={},t}function Zx(t,e,n){return{duration:t,delay:e,easing:n}}function Qx(t,e,n,r,i,a,o=null,s=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:a,totalTime:i+a,easing:o,subTimeline:s}}class Jx{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const tC=1,eC=new RegExp(":enter","g"),nC=new RegExp(":leave","g");function rC(t,e,n,r,i,a={},o={},s,l,u=[]){return(new iC).buildKeyframes(t,e,n,r,i,a,o,s,l,u)}class iC{buildKeyframes(t,e,n,r,i,a,o,s,l,u=[]){l=l||new Jx;const c=new oC(t,e,l,r,i,u,[]);c.options=s,c.currentTimeline.setStyles([a],null,c.errors,s),Px(this,n,c);const h=c.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(o).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([o],null,c.errors,s)}return h.length?h.map(t=>t.buildKeyframes()):[Qx(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,a=this._visitSubInstructions(n,r,r.options);i!=a&&e.transformIntoNewTimeline(a)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let r=e.currentTimeline.currentTime;const i=null!=n.duration?vx(n.duration):null,a=null!=n.delay?vx(n.delay):null;return 0!==i&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,i,a);r=Math.max(r,n.duration+n.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),Px(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const i=t.options;if(i&&(i.params||i.delay)&&((r=e.createSubContext(i)).transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=aC);const t=vx(i.delay);r.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>Px(this,t,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const i=t.options&&t.options.delay?vx(t.options.delay):0;t.steps.forEach(a=>{const o=e.createSubContext(t.options);i&&o.delayNextStep(i),Px(this,a,o),r=Math.max(r,o.currentTimeline.currentTime),n.push(o.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return wx(e.params?Tx(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,a=e.createSubContext().currentTimeline;a.easing=n.easing,t.styles.forEach(t=>{a.forwardTime((t.offset||0)*i),a.setStyles(t.styles,t.easing,e.errors,e.options),a.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(a),e.transformIntoNewTimeline(r+i),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},i=r.delay?vx(r.delay):0;i&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=aC);let a=n;const o=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=o.length;let s=null;o.forEach((n,r)=>{e.currentQueryIndex=r;const o=e.createSubContext(t.options,n);i&&o.delayNextStep(i),n===e.element&&(s=o.currentTimeline),Px(this,t.animation,o),o.currentTimeline.applyStylesToKeyframe(),a=Math.max(a,o.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(a),s&&(e.currentTimeline.mergeTimelineCollectedStyles(s),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,i=t.timings,a=Math.abs(i.duration),o=a*(e.currentQueryTotal-1);let s=a*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":s=o-s;break;case"full":s=n.currentStaggerTime}const l=e.currentTimeline;s&&l.delayNextStep(s);const u=l.currentTime;Px(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-u+(r.startTime-n.currentTimeline.startTime)}}const aC={};class oC{constructor(t,e,n,r,i,a,o,s){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=a,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=aC,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=s||new sC(this._driver,e,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=vx(n.duration)),null!=n.delay&&(r.delay=vx(n.delay));const i=n.params;if(i){let t=r.params;t||(t=this.options.params={}),Object.keys(i).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=Tx(i[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,i=new oC(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(t),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(t){return this.previousNode=aC,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new lC(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,i,a){let o=[];if(r&&o.push(this.element),t.length>0){t=(t=t.replace(eC,"."+this._enterClassName)).replace(nC,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),o.push(...e)}return i||0!=o.length||a.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),o}}class sC{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new sC(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=tC,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||T_,this._currentKeyframe[t]=T_}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const i=r&&r.params||{},a=function(t,e){const n={};let r;return t.forEach(t=>{"*"===t?(r=r||Object.keys(e)).forEach(t=>{n[t]=T_}):xx(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(a).forEach(t=>{const e=Tx(a[t],i,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:T_),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,a)=>{const o=xx(i,!0);Object.keys(o).forEach(n=>{const r=o[n];r==U_?t.add(n):r==T_&&e.add(n)}),n||(o.offset=a/this.duration),r.push(o)});const i=t.size?Nx(t.values()):[],a=e.size?Nx(e.values()):[];if(n){const t=r[0],e=_x(t);t.offset=0,e.offset=1,r=[t,e]}return Qx(this.element,r,i,a,this.duration,this.startTime,this.easing,!1)}}class lC extends sC{constructor(t,e,n,r,i,a,o=!1){super(t,e,a.delay),this.element=e,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=o,this.timings={duration:a.duration,delay:a.delay,easing:a.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const i=[],a=n+e,o=e/a,s=xx(t[0],!1);s.offset=0,i.push(s);const l=xx(t[0],!1);l.offset=uC(o),i.push(l);const u=t.length-1;for(let r=1;r<=u;r++){let o=xx(t[r],!1);o.offset=uC((e+o.offset*n)/a),i.push(o)}n=a,e=0,r="",t=i}return Qx(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function uC(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class cC{}class hC extends cC{normalizePropertyName(t,e){return Ox(t)}normalizeStyleValue(t,e,n,r){let i="";const a=n.toString().trim();if(dC[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&r.push(`Please provide a CSS unit value for ${t}:${n}`)}return a+i}}const dC=(()=>(function(t){const e={};return t.forEach(t=>e[t]=!0),e})("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function pC(t,e,n,r,i,a,o,s,l,u,c,h,d){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:a,toState:r,toStyles:o,timelines:s,queriedElements:l,preStyleProps:u,postStyleProps:c,totalTime:h,errors:d}}const fC={};class mC{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function(t,e,n,r,i){return t.some(t=>t(e,n,r,i))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],i=this._stateStyles[t],a=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):a}build(t,e,n,r,i,a,o,s,l,u){const c=[],h=this.ast.options&&this.ast.options.params||fC,d=this.buildStyles(n,o&&o.params||fC,c),p=s&&s.params||fC,f=this.buildStyles(r,p,c),m=new Set,g=new Map,y=new Map,v="void"===r,b={params:Object.assign({},h,p)},w=u?[]:rC(t,e,this.ast.animation,i,a,d,f,b,l,c);let _=0;if(w.forEach(t=>{_=Math.max(t.duration+t.delay,_)}),c.length)return pC(e,this._triggerName,n,r,v,d,f,[],[],g,y,_,c);w.forEach(t=>{const n=t.element,r=X_(g,n,{});t.preStyleProps.forEach(t=>r[t]=!0);const i=X_(y,n,{});t.postStyleProps.forEach(t=>i[t]=!0),n!==e&&m.add(n)});const x=Nx(m.values());return pC(e,this._triggerName,n,r,v,d,f,w,x,g,y,_)}}class gC{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},r=_x(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const i=t;Object.keys(i).forEach(t=>{let a=i[t];a.length>1&&(a=Tx(a,r,e)),n[t]=a})}}),n}}class yC{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new gC(t.style,t.options&&t.options.params||{})}),vC(this.states,"true","1"),vC(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new mC(t,e,this.states))}),this.fallbackTransition=new mC(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(i=>i.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function vC(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const bC=new Jx;class wC{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],r=qx(this._driver,e,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[t]=r}_buildPlayer(t,e,n){const r=t.element,i=q_(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],i=this._animations[t];let a;const o=new Map;if(i?(a=rC(this._driver,e,i,dx,px,{},{},n,bC,r)).forEach(t=>{const e=X_(o,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)}):(r.push("The requested animation doesn't exist or has already been destroyed"),a=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);o.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,T_)})});const s=H_(a.map(t=>{const e=o.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=s,s.onDestroy(()=>this.destroy(t)),this.players.push(s),s}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,n,r){const i=K_(e,"","","");return G_(this._getPlayer(t),n,i,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const _C="ng-animate-queued",xC=".ng-animate-queued",CC="ng-animate-disabled",SC=".ng-animate-disabled",kC="ng-star-inserted",EC=".ng-star-inserted",IC=[],AC={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},DC={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},TC="__ng_removed";class NC{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(r=n?t.value:t)?r:null,n){const e=_x(t);delete e.value,this.options=e}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const RC="void",OC=new NC(RC);class FC{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,UC(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var i;const a=X_(this._elementListeners,t,[]),o={name:e,phase:n,callback:r};a.push(o);const s=X_(this._engine.statesByElement,t,{});return s.hasOwnProperty(e)||(UC(t,fx),UC(t,fx+"-"+e),s[e]=OC),()=>{this._engine.afterFlush(()=>{const t=a.indexOf(o);t>=0&&a.splice(t,1),this._triggers[e]||delete s[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,r=!0){const i=this._getTrigger(e),a=new PC(this.id,e,t);let o=this._engine.statesByElement.get(t);o||(UC(t,fx),UC(t,fx+"-"+e),this._engine.statesByElement.set(t,o={}));let s=o[e];const l=new NC(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&s&&l.absorbOptions(s.options),o[e]=l,s||(s=OC),l.value!==RC&&s.value===l.value){if(!function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!e.hasOwnProperty(r)||t[r]!==e[r])return!1}return!0}(s.params,l.params)){const e=[],n=i.matchStyles(s.value,s.params,e),r=i.matchStyles(l.value,l.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{Ex(t,n),kx(t,r)})}return}const u=X_(this._engine.playersByElement,t,[]);u.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let c=i.matchTransition(s.value,l.value,t,l.params),h=!1;if(!c){if(!r)return;c=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:c,fromState:s,toState:l,player:a,isFallbackTransition:h}),h||(UC(t,_C),a.onStart(()=>{WC(t,_C)})),a.onDone(()=>{let e=this.players.indexOf(a);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(a);t>=0&&n.splice(t,1)}}),this.players.push(a),u.push(a),a}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e,n=!1){this._engine.driver.query(t,mx,!0).forEach(t=>{if(t[TC])return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)})}triggerLeaveAnimation(t,e,n,r){const i=this._engine.statesByElement.get(t);if(i){const a=[];if(Object.keys(i).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,RC,r);n&&a.push(n)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&H_(a).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t);if(e){const n=new Set;e.forEach(e=>{const r=e.name;if(n.has(r))return;n.add(r);const i=this._triggers[r].fallbackTransition,a=this._engine.statesByElement.get(t)[r]||OC,o=new NC(RC),s=new PC(this.id,r,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:r,transition:i,fromState:a,toState:o,player:s,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e,!0),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)r=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){r=!0;break}}}this.prepareLeaveAnimationListeners(t),r?n.markElementAsRemoved(this.id,t,!1,e):(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}insertNode(t,e){UC(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,a=this._elementListeners.get(i);a&&a.forEach(e=>{if(e.name==n.triggerName){const r=K_(i,n.triggerName,n.fromState.value,n.toState.value);r._data=t,G_(n.player,e.phase,r,e.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,r=e.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),!!this._queue.find(e=>e.element===t)||e}}class MC{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new FC(t,e,this);return e.parentNode?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=n[t[r]].namespaceId;if(i){const t=this._fetchNamespace(i);t&&e.add(t)}}}return e}trigger(t,e,n,r){if(LC(e)){const i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!LC(e))return;const i=e[TC];if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const r=this._fetchNamespace(t);r&&r.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),UC(t,CC)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),WC(t,CC))}removeNode(t,e,n,r){if(LC(e)){const i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r){this.collectedLeaveElements.push(e),e[TC]={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,r,i){return LC(e)?this._fetchNamespace(t).listen(e,n,r,i):()=>{}}_buildInstruction(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}destroyInnerAnimations(t){let e=this.driver.query(t,mx,!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,yx,!0)).forEach(t=>this.finishActiveQueriedAnimationOnElement(t))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return H_(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[TC];if(e&&e.setForRemoval){if(t[TC]=AC,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,SC)&&this.markElementAsDisabled(t,!1),this.driver.query(t,SC,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)UC(this.collectedEnterElements[n],kC);if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?H_(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const n=new Jx,r=[],i=new Map,a=[],o=new Map,s=new Map,l=new Map,u=new Set;this.disabledNodes.forEach(t=>{u.add(t);const e=this.driver.query(t,xC,!0);for(let n=0;n<e.length;n++)u.add(e[n])});const c=this.bodyNode,h=Array.from(this.statesByElement.keys()),d=BC(h,this.collectedEnterElements),p=new Map;let f=0;d.forEach((t,e)=>{const n=dx+f++;p.set(e,n),t.forEach(t=>UC(t,n))});const m=[],g=new Set,y=new Set;for(let T=0;T<this.collectedLeaveElements.length;T++){const t=this.collectedLeaveElements[T],e=t[TC];e&&e.setForRemoval&&(m.push(t),g.add(t),e.hasAnimation?this.driver.query(t,EC,!0).forEach(t=>g.add(t)):y.add(t))}const v=new Map,b=BC(h,Array.from(g));b.forEach((t,e)=>{const n=px+f++;v.set(e,n),t.forEach(t=>UC(t,n))}),t.push(()=>{d.forEach((t,e)=>{const n=p.get(e);t.forEach(t=>WC(t,n))}),b.forEach((t,e)=>{const n=v.get(e);t.forEach(t=>WC(t,n))}),m.forEach(t=>{this.processLeaveNode(t)})});const w=[],_=[];for(let T=this._namespaceList.length-1;T>=0;T--)this._namespaceList[T].drainQueuedTransitions(e).forEach(t=>{const e=t.player,i=t.element;if(w.push(e),this.collectedEnterElements.length){const t=i[TC];if(t&&t.setForMove)return void e.destroy()}const u=!c||!this.driver.containsElement(c,i),h=v.get(i),d=p.get(i),f=this._buildInstruction(t,n,d,h,u);if(!f.errors||!f.errors.length)return u?(e.onStart(()=>Ex(i,f.fromStyles)),e.onDestroy(()=>kx(i,f.toStyles)),void r.push(e)):t.isFallbackTransition?(e.onStart(()=>Ex(i,f.fromStyles)),e.onDestroy(()=>kx(i,f.toStyles)),void r.push(e)):(f.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(i,f.timelines),a.push({instruction:f,player:e,element:i}),f.queriedElements.forEach(t=>X_(o,t,[]).push(e)),f.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=s.get(e);t||s.set(e,t=new Set),n.forEach(e=>t.add(e))}}),void f.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let r=l.get(e);r||l.set(e,r=new Set),n.forEach(t=>r.add(t))}));_.push(f)});if(_.length){const t=[];_.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),w.forEach(t=>t.destroy()),this.reportError(t)}const x=new Map,C=new Map;a.forEach(t=>{const e=t.element;n.has(e)&&(C.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,x))}),r.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{X_(x,e,[]).push(t),t.destroy()})});const S=m.filter(t=>qC(t,s,l)),k=new Map;VC(k,this.driver,y,l,T_).forEach(t=>{qC(t,s,l)&&S.push(t)});const E=new Map;d.forEach((t,e)=>{VC(E,this.driver,new Set(t),s,U_)}),S.forEach(t=>{const e=k.get(t),n=E.get(t);k.set(t,Object.assign({},e,n))});const I=[],A=[],D={};a.forEach(t=>{const{element:e,player:a,instruction:o}=t;if(n.has(e)){if(u.has(e))return a.onDestroy(()=>kx(e,o.toStyles)),a.disabled=!0,a.overrideTotalTime(o.totalTime),void r.push(a);let t=D;if(C.size>1){let n=e;const r=[];for(;n=n.parentNode;){const e=C.get(n);if(e){t=e;break}r.push(n)}r.forEach(e=>C.set(e,t))}const n=this._buildAnimation(a.namespaceId,o,x,i,E,k);if(a.setRealPlayer(n),t===D)I.push(a);else{const e=this.playersByElement.get(t);e&&e.length&&(a.parentPlayer=H_(e)),r.push(a)}}else Ex(e,o.fromStyles),a.onDestroy(()=>kx(e,o.toStyles)),A.push(a),u.has(e)&&r.push(a)}),A.forEach(t=>{const e=i.get(t.element);if(e&&e.length){const n=H_(e);t.setRealPlayer(n)}}),r.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let T=0;T<m.length;T++){const t=m[T],e=t[TC];if(WC(t,px),e&&e.hasAnimation)continue;let n=[];if(o.size){let e=o.get(t);e&&e.length&&n.push(...e);let r=this.driver.query(t,yx,!0);for(let t=0;t<r.length;t++){let e=o.get(r[t]);e&&e.length&&n.push(...e)}}const r=n.filter(t=>!t.destroyed);r.length?HC(this,t,r):this.processLeaveNode(t)}return m.length=0,I.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),I}elementContainsData(t,e){let n=!1;const r=e[TC];return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,i){let a=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(a=e)}else{const e=this.playersByElement.get(t);if(e){const t=!i||i==RC;e.forEach(e=>{e.queued||(t||e.triggerName==r)&&a.push(e)})}}return(n||r)&&(a=a.filter(t=>!(n&&n!=t.namespaceId||r&&r!=t.triggerName))),a}_beforeAnimationBuild(t,e,n){const r=e.element,i=e.isRemovalTransition?void 0:t,a=e.isRemovalTransition?void 0:e.triggerName;for(const o of e.timelines){const t=o.element,s=t!==r,l=X_(n,t,[]);this._getPreviousPlayers(t,s,i,a,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),l.push(t)})}Ex(r,e.fromStyles)}_buildAnimation(t,e,n,r,i,a){const o=e.triggerName,s=e.element,l=[],u=new Set,c=new Set,h=e.timelines.map(e=>{const h=e.element;u.add(h);const d=h[TC];if(d&&d.removedBeforeQueried)return new B_(e.duration,e.delay);const p=h!==s,f=function(t){const e=[];return function t(e,n){for(let r=0;r<e.length;r++){const i=e[r];i instanceof j_?t(i.players,n):n.push(i)}}(t,e),e}((n.get(h)||IC).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),m=i.get(h),g=a.get(h),y=q_(0,this._normalizer,0,e.keyframes,m,g),v=this._buildPlayer(e,y,f);if(e.subTimeline&&r&&c.add(h),p){const e=new PC(t,o,h);e.setRealPlayer(v),l.push(e)}return v});l.forEach(t=>{X_(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>(function(t,e,n){let r;if(t instanceof Map){if(r=t.get(e)){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&t.delete(e)}}else if(r=t[e]){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&delete t[e]}return r})(this.playersByQueriedElement,t.element,t))}),u.forEach(t=>UC(t,gx));const d=H_(h);return d.onDestroy(()=>{u.forEach(t=>WC(t,gx)),kx(s,e.toStyles)}),c.forEach(t=>{X_(r,t,[]).push(d)}),d}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new B_(t.duration,t.delay)}}class PC{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new B_,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>G_(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){X_(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function LC(t){return t&&1===t.nodeType}function zC(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function VC(t,e,n,r,i){const a=[];n.forEach(t=>a.push(zC(t)));const o=[];r.forEach((n,r)=>{const a={};n.forEach(t=>{const n=a[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r[TC]=DC,o.push(r))}),t.set(r,a)});let s=0;return n.forEach(t=>zC(t,a[s++])),o}function BC(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const r=new Set(e),i=new Map;return e.forEach(t=>{const e=function t(e){if(!e)return 1;let a=i.get(e);if(a)return a;const o=e.parentNode;return a=n.has(o)?o:r.has(o)?1:t(o),i.set(e,a),a}(t);1!==e&&n.get(e).push(t)}),n}const jC="$$classes";function UC(t,e){if(t.classList)t.classList.add(e);else{let n=t[jC];n||(n=t[jC]={}),n[e]=!0}}function WC(t,e){if(t.classList)t.classList.remove(e);else{let n=t[jC];n&&delete n[e]}}function HC(t,e,n){H_(n).onDone(()=>t.processLeaveNode(e))}function qC(t,e,n){const r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(t=>i.add(t)):e.set(t,r),n.delete(t),!0}class GC{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new MC(t,e,n),this._timelineEngine=new wC(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,r,i){const a=t+"-"+r;let o=this._triggerCache[a];if(!o){const t=[],e=qx(this._driver,i,t);if(t.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);o=function(t,e){return new yC(t,e)}(r,e),this._triggerCache[a]=o}this._transitionEngine.registerTrigger(e,r,o)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[t,i]=Y_(n);this._timelineEngine.command(t,e,i,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,i){if("@"==n.charAt(0)){const[t,r]=Y_(n);return this._timelineEngine.listen(t,e,r,i)}return this._transitionEngine.listen(t,e,n,r,i)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function $C(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=XC(e[0]),e.length>1&&(r=XC(e[e.length-1]))):e&&(n=XC(e)),n||r?new KC(t,n,r):null}let KC=(()=>{class t{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let i=t.initialStylesByElement.get(e);i||t.initialStylesByElement.set(e,i={}),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&kx(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(kx(this._element,this._initialStyles),this._endStyles&&(kx(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(Ex(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ex(this._element,this._endStyles),this._endStyles=null),kx(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function XC(t){let e=null;const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r];YC(i)&&((e=e||{})[i]=t[i])}return e}function YC(t){return"display"===t||"position"===t}const ZC=3,QC="animation",JC="animationend",tS=1e3;class eS{constructor(t,e,n,r,i,a,o){this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=i,this._fillMode=a,this._onDoneFn=o,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=sS(t,"").trim();n.length&&(function(t,e){let n=0;for(let r=0;r<t.length;r++)","===t.charAt(r)&&n++}(n),e=`${n}, ${e}`),oS(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),aS(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){nS(this._element,this._name,"paused")}resume(){nS(this._element,this._name,"running")}setPosition(t){const e=rS(this._element,this._name);this._position=t*this._duration,oS(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=parseFloat(t.elapsedTime.toFixed(ZC))*tS;t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),aS(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=sS(t,"").split(","),r=iS(n,e);r>=0&&(n.splice(r,1),oS(t,"",n.join(",")))}(this._element,this._name))}}function nS(t,e,n){oS(t,"PlayState",n,rS(t,e))}function rS(t,e){const n=sS(t,"");return n.indexOf(",")>0?iS(n.split(","),e):iS([n],e)}function iS(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function aS(t,e,n){n?t.removeEventListener(JC,e):t.addEventListener(JC,e)}function oS(t,e,n,r){const i=QC+e;if(null!=r){const e=t.style[i];if(e.length){const t=e.split(",");t[r]=n,n=t.join(",")}}t.style[i]=n}function sS(t,e){return t.style[QC+e]}const lS="forwards",uS="linear";class cS{constructor(t,e,n,r,i,a,o,s){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=o,this._specialStyles=s,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=a||uS,this.totalTime=r+i,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new eS(this.element,this.animationName,this._duration,this._delay,this.easing,lS,()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:Lx(this.element,n))})}this.currentSnapshot=t}}class hS extends B_{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=sx(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}const dS="gen_css_kf_",pS=" ";class fS{constructor(){this._count=0,this._head=document.querySelector("head"),this._warningIssued=!1}validateStyleProperty(t){return rx(t)}matchesElement(t,e){return ix(t,e)}containsElement(t,e){return ax(t,e)}query(t,e,n){return ox(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>sx(t));let r=`@keyframes ${e} {\n`,i="";n.forEach(t=>{i=pS;const e=parseFloat(t.offset);r+=`${i}${100*e}% {\n`,i+=pS,Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${e}: ${n};\n`)}}),r+=`${i}}\n`}),r+="}\n";const a=document.createElement("style");return a.innerHTML=r,a}animate(t,e,n,r,i,a=[],o){o&&this._notifyFaultyScrubber();const s=a.filter(t=>t instanceof cS),l={};Fx(n,r)&&s.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>l[t]=e[t])});const u=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=Mx(t,e,l));if(0==n)return new hS(t,u);const c=`${dS}${this._count++}`,h=this.buildKeyframeElement(t,c,e);document.querySelector("head").appendChild(h);const d=$C(t,e),p=new cS(t,e,c,n,r,i,u,d);return p.onDestroy(()=>(function(t){t.parentNode.removeChild(t)})(h)),p}_notifyFaultyScrubber(){this._warningIssued||(console.warn("@angular/animations: please load the web-animations.js polyfill to allow programmatic access...\n","  visit http://bit.ly/IWukam to learn more about using the web-animation-js polyfill."),this._warningIssued=!0)}}class mS{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:Lx(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class gS{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(yS().toString()),this._cssKeyframesDriver=new fS}validateStyleProperty(t){return rx(t)}matchesElement(t,e){return ix(t,e)}containsElement(t,e){return ax(t,e)}query(t,e,n){return ox(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,r,i,a=[],o){if(!o&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,a);const s={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(s.easing=i);const l={},u=a.filter(t=>t instanceof mS);Fx(n,r)&&u.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>l[t]=e[t])});const c=$C(t,e=Mx(t,e=e.map(t=>xx(t,!1)),l));return new mS(t,e,s,c)}}function yS(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}let vS=(()=>{class t extends A_{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:ne.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?O_(t):t;return _S(this._renderer,null,e,"register",[n]),new bS(e,this._renderer)}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt(Eu),qt(fg))},providedIn:null}),t})();class bS extends D_{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new wS(this._id,t,e||{},this._renderer)}}class wS{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return _S(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(t){this._command("setPosition",t)}getPosition(){return 0}}function _S(t,e,n,r,i){return t.setProperty(e,`@@${n}:${r}`,i)}const xS="@",CS="@.disabled";let SS=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new kS("",n,this.engine),this._rendererCache.set(n,t)),t}const r=e.id,i=e.id+"-"+this._currentId;return this._currentId++,this.engine.register(i,t),e.data.animation.forEach(e=>this.engine.registerTrigger(r,i,t,e.name,e)),new ES(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt(Eu),qt(GC),qt(Qd))},providedIn:null}),t})();class kS{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,!0)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){e.charAt(0)==xS&&e==CS?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class ES extends kS{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){e.charAt(0)==xS?"."==e.charAt(1)&&e==CS?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if(e.charAt(0)==xS){const r=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let i=e.substr(1),a="";return i.charAt(0)!=xS&&([i,a]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(i)),this.engine.listen(this.namespaceId,r,i,a,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let IS=(()=>{class t extends GC{constructor(t,e,n){super(t.body,e,n)}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt(fg),qt(ux),qt(cC))},providedIn:null}),t})();function AS(){return"function"==typeof yS()?new gS:new fS}function DS(){return new hC}function TS(t,e,n){return new SS(t,e,n)}const NS=new Nt("AnimationModuleType"),RS=[{provide:A_,useClass:vS},{provide:cC,useFactory:DS},{provide:GC,useClass:IS},{provide:Eu,useFactory:TS,deps:[Gy,GC,Qd]}],OS=[{provide:ux,useFactory:AS},{provide:NS,useValue:"BrowserAnimations"},...RS],FS=[{provide:ux,useClass:lx},{provide:NS,useValue:"NoopAnimations"},...RS];let MS=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();MS.ngInjectorDef=yt({factory:function(t){return new(t||MS)},providers:OS,imports:[Rv]});let PS=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();PS.ngInjectorDef=yt({factory:function(t){return new(t||PS)},providers:FS,imports:[Rv]});const LS=new Nt("cdk-dir-doc",{providedIn:"root",factory:function(){return Gt(fg)}});let zS=(()=>{class t{constructor(t){if(this.value="ltr",this.change=new Qh,t){const e=t.documentElement?t.documentElement.dir:null,n=(t.body?t.body.dir:null)||e;this.value="ltr"===n||"rtl"===n?n:"ltr"}}ngOnDestroy(){this.change.complete()}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt(LS,8))},providedIn:"root"}),t.ngInjectableDef=mt({factory:function(){return new t(qt(LS,8))},token:t,providedIn:"root"}),t})(),VS=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();VS.ngInjectorDef=yt({factory:function(t){return new(t||VS)}});const BS=new Tu("8.2.3");function jS(t){return null!=t&&"false"!==`${t}`}function US(t){return Array.isArray(t)?t:[t]}function WS(t){return null==t?"":"string"==typeof t?t:`${t}px`}function HS(t){return t instanceof Cu?t.nativeElement:t}let qS;try{qS="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(Sz){qS=!1}let GS,$S=(()=>{class t{constructor(t){this._platformId=t,this.isBrowser=this._platformId?this._platformId===mg:"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!qS)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt(Dd,8))},providedIn:"root"}),t.ngInjectableDef=mt({factory:function(){return new t(qt(Dd,8))},token:t,providedIn:"root"}),t})(),KS=(()=>{class t{}return t.ngModuleDef=me({type:t}),t.ngInjectorDef=yt({factory:function(e){return new(e||t)}}),t})();const XS=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function YS(){if(GS)return GS;if("object"!=typeof document||!document)return GS=new Set(XS);let t=document.createElement("input");return GS=new Set(XS.filter(e=>(t.setAttribute("type",e),t.type===e)))}let ZS;function QS(t){return function(){if(null==ZS&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>ZS=!0}))}finally{ZS=ZS||!1}return ZS}()?t:!!t.capture}const JS=9,tk=13,ek=27,nk=32,rk=33,ik=34,ak=35,ok=36,sk=37,lk=38,uk=39,ck=40,hk=48,dk=57,pk=65,fk=90;function mk(t,...e){return e.length?e.some(e=>t[e]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}class gk extends d{constructor(t,e){super()}schedule(t,e=0){return this}}class yk extends gk{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}let vk=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class bk extends vk{constructor(t,e=vk.now){super(t,()=>bk.delegate&&bk.delegate!==this?bk.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return bk.delegate&&bk.delegate!==this?bk.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}const wk=new bk(yk);function _k(t,e=wk){return n=>n.lift(new xk(t,e))}class xk{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new Ck(t,this.dueTime,this.scheduler))}}class Ck extends m{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Sk,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function Sk(t){t.debouncedNext()}let kk=(()=>{class t{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)},providedIn:"root"}),t.ngInjectableDef=mt({factory:function(){return new t},token:t,providedIn:"root"}),t})(),Ek=(()=>{class t{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,e)=>this._cleanupObserver(e))}observe(t){const e=HS(t);return new _(t=>{const n=this._observeElement(e).subscribe(t);return()=>{n.unsubscribe(),this._unobserveElement(e)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const e=new I,n=this._mutationObserverFactory.create(t=>e.next(t));n&&n.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:n,stream:e,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:e,stream:n}=this._observedElements.get(t);e&&e.disconnect(),n.complete(),this._observedElements.delete(t)}}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt(kk))},providedIn:"root"}),t.ngInjectableDef=mt({factory:function(){return new t(qt(kk))},token:t,providedIn:"root"}),t})(),Ik=(()=>{class t{constructor(t,e,n){this._contentObserver=t,this._elementRef=e,this._ngZone=n,this.event=new Qh,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=jS(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=function(t,e=0){return function(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):e}(t),this._subscribe()}ngAfterContentInit(){this._currentSubscription||this.disabled||this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(_k(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription&&this._currentSubscription.unsubscribe()}}return t.ngDirectiveDef=ye({type:t,selectors:[["","cdkObserveContent",""]],factory:function(e){return new(e||t)(rl(Ek),rl(Cu),rl(Qd))},inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),t})(),Ak=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();Ak.ngInjectorDef=yt({factory:function(t){return new(t||Ak)},providers:[kk]});class Dk{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new I,this._typeaheadSubscription=d.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new I,this.change=new I,t instanceof td&&t.changes.subscribe(t=>{if(this._activeItem){const e=t.toArray().indexOf(this._activeItem);e>-1&&e!==this._activeItemIndex&&(this._activeItemIndex=e)}})}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){if(this._items.length&&this._items.some(t=>"function"!=typeof t.getLabel))throw Error("ListKeyManager items in typeahead mode must implement the `getLabel` method.");return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(Bg(t=>this._pressedLetters.push(t)),_k(t),Rg(()=>this._pressedLetters.length>0),U(()=>this._pressedLetters.join(""))).subscribe(t=>{const e=this._getItemsArray();for(let n=1;n<e.length+1;n++){const r=(this._activeItemIndex+n)%e.length,i=e[r];if(!this._skipPredicateFn(i)&&0===i.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(r);break}}this._pressedLetters=[]}),this}setActiveItem(t){const e=this._activeItemIndex;this.updateActiveItem(t),this._activeItemIndex!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){const e=t.keyCode,n=["altKey","ctrlKey","metaKey","shiftKey"].every(e=>!t[e]||this._allowedModifierKeys.indexOf(e)>-1);switch(e){case JS:return void this.tabOut.next();case ck:if(this._vertical&&n){this.setNextItemActive();break}return;case lk:if(this._vertical&&n){this.setPreviousItemActive();break}return;case uk:if(this._horizontal&&n){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case sk:if(this._horizontal&&n){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;default:return void((n||mk(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=pk&&e<=fk||e>=hk&&e<=dk)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const e=this._getItemsArray(),n="number"==typeof t?t:e.indexOf(t),r=e[n];this._activeItem=null==r?null:r,this._activeItemIndex=n}updateActiveItemIndex(t){this.updateActiveItem(t)}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const e=this._getItemsArray();for(let n=1;n<=e.length;n++){const r=(this._activeItemIndex+t*n+e.length)%e.length;if(!this._skipPredicateFn(e[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){const n=this._getItemsArray();if(n[t]){for(;this._skipPredicateFn(n[t]);)if(!n[t+=e])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof td?this._items.toArray():this._items}}class Tk extends Dk{setActiveItem(t){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(t),this.activeItem&&this.activeItem.setActiveStyles()}}let Nk=(()=>{class t{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const e=function(t){try{return t.frameElement}catch(Sz){return null}}((n=t).ownerDocument&&n.ownerDocument.defaultView||window);var n;if(e){const t=e&&e.nodeName.toLowerCase();if(-1===Ok(e))return!1;if((this._platform.BLINK||this._platform.WEBKIT)&&"object"===t)return!1;if((this._platform.BLINK||this._platform.WEBKIT)&&!this.isVisible(e))return!1}let r=t.nodeName.toLowerCase(),i=Ok(t);if(t.hasAttribute("contenteditable"))return-1!==i;if("iframe"===r)return!1;if("audio"===r){if(!t.hasAttribute("controls"))return!1;if(this._platform.BLINK)return!0}if("video"===r){if(!t.hasAttribute("controls")&&this._platform.TRIDENT)return!1;if(this._platform.BLINK||this._platform.FIREFOX)return!0}return("object"!==r||!this._platform.BLINK&&!this._platform.WEBKIT)&&!(this._platform.WEBKIT&&this._platform.IOS&&!function(t){let e=t.nodeName.toLowerCase(),n="input"===e&&t.type;return"text"===n||"password"===n||"select"===e||"textarea"===e}(t))&&t.tabIndex>=0}isFocusable(t){return function(t){return!function(t){return function(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function(t){let e=t.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(t)||function(t){return function(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||Rk(t))}(t)&&!this.isDisabled(t)&&this.isVisible(t)}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt($S))},providedIn:"root"}),t.ngInjectableDef=mt({factory:function(){return new t(qt($S))},token:t,providedIn:"root"}),t})();function Rk(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;let e=t.getAttribute("tabindex");return"-32768"!=e&&!(!e||isNaN(parseInt(e,10)))}function Ok(t){if(!Rk(t))return null;const e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class Fk{constructor(t,e,n,r,i=!1){this._element=t,this._checker=e,this._ngZone=n,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,i||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),e&&(e.removeEventListener("focus",this.endAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),this._startAnchor=this._endAnchor=null}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement()))})}focusFirstTabbableElementWhenReady(){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement()))})}focusLastTabbableElementWhenReady(){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement()))})}_getRegionBoundary(t){let e=this._element.querySelectorAll(`[cdk-focus-region-${t}], `+`[cdkFocusRegion${t}], `+`[cdk-focus-${t}]`);for(let n=0;n<e.length;n++)e[n].hasAttribute(`cdk-focus-${t}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${t}', `+`use 'cdkFocusRegion${t}' instead. The deprecated `+"attribute will be removed in 8.0.0.",e[n]):e[n].hasAttribute(`cdk-focus-region-${t}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${t}', `+`use 'cdkFocusRegion${t}' instead. The deprecated attribute `+"will be removed in 8.0.0.",e[n]);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");return t?(t.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",t),zi()&&!this._checker.isFocusable(t)&&console.warn("Element matching '[cdkFocusInitial]' is not focusable.",t),t.focus(),!0):this.focusFirstTabbableElement()}focusFirstTabbableElement(){const t=this._getRegionBoundary("start");return t&&t.focus(),!!t}focusLastTabbableElement(){const t=this._getRegionBoundary("end");return t&&t.focus(),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let n=0;n<e.length;n++){let t=e[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[n]):null;if(t)return t}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let n=e.length-1;n>=0;n--){let t=e[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[n]):null;if(t)return t}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.asObservable().pipe(Qg(1)).subscribe(t)}}let Mk=(()=>{class t{constructor(t,e,n){this._checker=t,this._ngZone=e,this._document=n}create(t,e=!1){return new Fk(t,this._checker,this._ngZone,this._document,e)}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt(Nk),qt(Qd),qt(fg))},providedIn:"root"}),t.ngInjectableDef=mt({factory:function(){return new t(qt(Nk),qt(Qd),qt(fg))},token:t,providedIn:"root"}),t})(),Pk=(()=>{class t{constructor(t,e,n){this._elementRef=t,this._focusTrapFactory=e,this._previouslyFocusedElement=null,this._document=n,this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0)}get enabled(){return this.focusTrap.enabled}set enabled(t){this.focusTrap.enabled=jS(t)}get autoCapture(){return this._autoCapture}set autoCapture(t){this._autoCapture=jS(t)}ngOnDestroy(){this.focusTrap.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap.attachAnchors(),this.autoCapture&&(this._previouslyFocusedElement=this._document.activeElement,this.focusTrap.focusInitialElementWhenReady())}ngDoCheck(){this.focusTrap.hasAttached()||this.focusTrap.attachAnchors()}}return t.ngDirectiveDef=ye({type:t,selectors:[["","cdkTrapFocus",""]],factory:function(e){return new(e||t)(rl(Cu),rl(Mk),rl(fg))},inputs:{enabled:["cdkTrapFocus","enabled"],autoCapture:["cdkTrapFocusAutoCapture","autoCapture"]},exportAs:["cdkTrapFocus"]}),t})();const Lk=new Nt("liveAnnouncerElement",{providedIn:"root",factory:function(){return null}}),zk=new Nt("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let Vk=(()=>{class t{constructor(t,e,n,r){this._ngZone=e,this._defaultOptions=r,this._document=n,this._liveElement=t||this._createLiveElement()}announce(t,...e){const n=this._defaultOptions;let r,i;return 1===e.length&&"number"==typeof e[0]?i=e[0]:[r,i]=e,this.clear(),clearTimeout(this._previousTimeout),r||(r=n&&n.politeness?n.politeness:"polite"),null==i&&n&&(i=n.duration),this._liveElement.setAttribute("aria-live",r),this._ngZone.runOutsideAngular(()=>new Promise(e=>{clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,e(),"number"==typeof i&&(this._previousTimeout=setTimeout(()=>this.clear(),i))},100)}))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement&&this._liveElement.parentNode&&(this._liveElement.parentNode.removeChild(this._liveElement),this._liveElement=null)}_createLiveElement(){const t=this._document.getElementsByClassName("cdk-live-announcer-element"),e=this._document.createElement("div");for(let n=0;n<t.length;n++)t[n].parentNode.removeChild(t[n]);return e.classList.add("cdk-live-announcer-element"),e.classList.add("cdk-visually-hidden"),e.setAttribute("aria-atomic","true"),e.setAttribute("aria-live","polite"),this._document.body.appendChild(e),e}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt(Lk,8),qt(Qd),qt(fg),qt(zk,8))},providedIn:"root"}),t.ngInjectableDef=mt({factory:function(){return new t(qt(Lk,8),qt(Qd),qt(fg),qt(zk,8))},token:t,providedIn:"root"}),t})(),Bk=(()=>{class t{constructor(t,e,n,r){this._elementRef=t,this._liveAnnouncer=e,this._contentObserver=n,this._ngZone=r,this._politeness="off"}get politeness(){return this._politeness}set politeness(t){this._politeness="polite"===t||"assertive"===t?t:"off","off"===this._politeness?this._subscription&&(this._subscription.unsubscribe(),this._subscription=null):this._subscription||(this._subscription=this._ngZone.runOutsideAngular(()=>this._contentObserver.observe(this._elementRef).subscribe(()=>{const t=this._elementRef.nativeElement.textContent;t!==this._previousAnnouncedText&&(this._liveAnnouncer.announce(t,this._politeness),this._previousAnnouncedText=t)})))}ngOnDestroy(){this._subscription&&this._subscription.unsubscribe()}}return t.ngDirectiveDef=ye({type:t,selectors:[["","cdkAriaLive",""]],factory:function(e){return new(e||t)(rl(Cu),rl(Vk),rl(Ek),rl(Qd))},inputs:{politeness:["cdkAriaLive","politeness"]},exportAs:["cdkAriaLive"]}),t})();const jk=650,Uk=QS({passive:!0,capture:!0});let Wk=(()=>{class t{constructor(t,e){this._ngZone=t,this._platform=e,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._documentKeydownListener=()=>{this._lastTouchTarget=null,this._setOriginForCurrentEventQueue("keyboard")},this._documentMousedownListener=()=>{this._lastTouchTarget||this._setOriginForCurrentEventQueue("mouse")},this._documentTouchstartListener=t=>{null!=this._touchTimeoutId&&clearTimeout(this._touchTimeoutId),this._lastTouchTarget=t.composedPath?t.composedPath()[0]:t.target,this._touchTimeoutId=setTimeout(()=>this._lastTouchTarget=null,jk)},this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)}}monitor(t,e=!1){if(!this._platform.isBrowser)return xg(null);const n=HS(t);if(this._elementInfo.has(n)){let t=this._elementInfo.get(n);return t.checkChildren=e,t.subject.asObservable()}let r={unlisten:()=>{},checkChildren:e,subject:new I};this._elementInfo.set(n,r),this._incrementMonitoredElementCount();let i=t=>this._onFocus(t,n),a=t=>this._onBlur(t,n);return this._ngZone.runOutsideAngular(()=>{n.addEventListener("focus",i,!0),n.addEventListener("blur",a,!0)}),r.unlisten=()=>{n.removeEventListener("focus",i,!0),n.removeEventListener("blur",a,!0)},r.subject.asObservable()}stopMonitoring(t){const e=HS(t),n=this._elementInfo.get(e);n&&(n.unlisten(),n.subject.complete(),this._setClasses(e),this._elementInfo.delete(e),this._decrementMonitoredElementCount())}focusVia(t,e,n){const r=HS(t);this._setOriginForCurrentEventQueue(e),"function"==typeof r.focus&&r.focus(n)}ngOnDestroy(){this._elementInfo.forEach((t,e)=>this.stopMonitoring(e))}_toggleClass(t,e,n){n?t.classList.add(e):t.classList.remove(e)}_setClasses(t,e){this._elementInfo.get(t)&&(this._toggleClass(t,"cdk-focused",!!e),this._toggleClass(t,"cdk-touch-focused","touch"===e),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===e),this._toggleClass(t,"cdk-mouse-focused","mouse"===e),this._toggleClass(t,"cdk-program-focused","program"===e))}_setOriginForCurrentEventQueue(t){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originTimeoutId=setTimeout(()=>this._origin=null,1)})}_wasCausedByTouch(t){let e=t.target;return this._lastTouchTarget instanceof Node&&e instanceof Node&&(e===this._lastTouchTarget||e.contains(this._lastTouchTarget))}_onFocus(t,e){const n=this._elementInfo.get(e);if(!n||!n.checkChildren&&e!==t.target)return;let r=this._origin;r||(r=this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:this._wasCausedByTouch(t)?"touch":"program"),this._setClasses(e,r),this._emitOrigin(n.subject,r),this._lastFocusOrigin=r}_onBlur(t,e){const n=this._elementInfo.get(e);!n||n.checkChildren&&t.relatedTarget instanceof Node&&e.contains(t.relatedTarget)||(this._setClasses(e),this._emitOrigin(n.subject,null))}_emitOrigin(t,e){this._ngZone.run(()=>t.next(e))}_incrementMonitoredElementCount(){1==++this._monitoredElementCount&&this._platform.isBrowser&&this._ngZone.runOutsideAngular(()=>{document.addEventListener("keydown",this._documentKeydownListener,Uk),document.addEventListener("mousedown",this._documentMousedownListener,Uk),document.addEventListener("touchstart",this._documentTouchstartListener,Uk),window.addEventListener("focus",this._windowFocusListener)})}_decrementMonitoredElementCount(){--this._monitoredElementCount||(document.removeEventListener("keydown",this._documentKeydownListener,Uk),document.removeEventListener("mousedown",this._documentMousedownListener,Uk),document.removeEventListener("touchstart",this._documentTouchstartListener,Uk),window.removeEventListener("focus",this._windowFocusListener),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._touchTimeoutId),clearTimeout(this._originTimeoutId))}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt(Qd),qt($S))},providedIn:"root"}),t.ngInjectableDef=mt({factory:function(){return new t(qt(Qd),qt($S))},token:t,providedIn:"root"}),t})(),Hk=(()=>{class t{constructor(t,e){this._elementRef=t,this._focusMonitor=e,this.cdkFocusChange=new Qh,this._monitorSubscription=this._focusMonitor.monitor(this._elementRef,this._elementRef.nativeElement.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(t=>this.cdkFocusChange.emit(t))}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription.unsubscribe()}}return t.ngDirectiveDef=ye({type:t,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],factory:function(e){return new(e||t)(rl(Cu),rl(Wk))},outputs:{cdkFocusChange:"cdkFocusChange"}}),t})(),qk=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();qk.ngInjectorDef=yt({factory:function(t){return new(t||qk)},imports:[[dg,KS,Ak]]});const Gk=[1,"mat-ripple"],$k=[1,"mat-pseudo-checkbox"],Kk=["role","group",1,"mat-optgroup"],Xk=[1,"mat-optgroup-label",3,"id"],Yk=["*",[["mat-option"],["ng-container"]]],Zk=["*","mat-option, ng-container"],Qk=["role","option",1,"mat-option"],Jk=["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],tE=[1,"mat-option-text"],eE=["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],nE=[1,"mat-option-pseudo-checkbox",3,"state","disabled"];function rE(t,e){if(1&t&&xl(0,"mat-pseudo-checkbox",nE),2&t){const t=Ml();Zs("state",t.selected?"checked":"")("disabled",t.disabled)}}const iE=["*"];let aE=(()=>{class t{}return t.STANDARD_CURVE="cubic-bezier(0.4,0.0,0.2,1)",t.DECELERATION_CURVE="cubic-bezier(0.0,0.0,0.2,1)",t.ACCELERATION_CURVE="cubic-bezier(0.4,0.0,1,1)",t.SHARP_CURVE="cubic-bezier(0.4,0.0,0.6,1)",t})(),oE=(()=>{class t{}return t.COMPLEX="375ms",t.ENTERING="225ms",t.EXITING="195ms",t})();const sE=new Tu("8.2.3"),lE=new Nt("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let uE=(()=>{class t{constructor(t,e){this._sanityChecksEnabled=t,this._hammerLoader=e,this._hasDoneGlobalChecks=!1,this._hasCheckedHammer=!1,this._document="object"==typeof document&&document?document:null,this._window="object"==typeof window&&window?window:null,this._areChecksEnabled()&&!this._hasDoneGlobalChecks&&(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_areChecksEnabled(){return this._sanityChecksEnabled&&zi()&&!this._isTestEnv()}_isTestEnv(){const t=this._window;return t&&(t.__karma__||t.jasmine)}_checkDoctypeIsDefined(){this._document&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._document||!this._document.body||"function"!=typeof getComputedStyle)return;const t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);const e=getComputedStyle(t);e&&"none"!==e.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}_checkCdkVersionMatch(){sE.full!==BS.full&&console.warn("The Angular Material version ("+sE.full+") does not match the Angular CDK version ("+BS.full+").\nPlease ensure the versions of these two packages exactly match.")}_checkHammerIsAvailable(){!this._hasCheckedHammer&&this._window&&(!this._areChecksEnabled()||this._window.Hammer||this._hammerLoader||console.warn("Could not find HammerJS. Certain Angular Material components may not work correctly."),this._hasCheckedHammer=!0)}}return t.ngModuleDef=me({type:t}),t})();function cE(t){return class extends t{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=jS(t)}}}function hE(t,e){return class extends t{get color(){return this._color}set color(t){const n=t||e;n!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),n&&this._elementRef.nativeElement.classList.add(`mat-${n}`),this._color=n)}constructor(...t){super(...t),this.color=e}}}function dE(t){return class extends t{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=jS(t)}}}function pE(t,e=0){return class extends t{constructor(...t){super(...t),this._tabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?t:e}}}function fE(t){return class extends t{constructor(...t){super(...t),this.errorState=!1,this.stateChanges=new I}updateErrorState(){const t=this.errorState,e=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);e!==t&&(this.errorState=e,this.stateChanges.next())}}}uE.ngInjectorDef=yt({factory:function(t){return new(t||uE)(qt(lE,8),qt(fv,8))},imports:[[VS],VS]});const mE=new Nt("MAT_DATE_LOCALE",{providedIn:"root",factory:function(){return Gt(Rd)}});class gE{constructor(){this._localeChanges=new I}get localeChanges(){return this._localeChanges}deserialize(t){return null==t||this.isDateInstance(t)&&this.isValid(t)?t:this.invalid()}setLocale(t){this.locale=t,this._localeChanges.next()}compareDate(t,e){return this.getYear(t)-this.getYear(e)||this.getMonth(t)-this.getMonth(e)||this.getDate(t)-this.getDate(e)}sameDate(t,e){if(t&&e){let n=this.isValid(t),r=this.isValid(e);return n&&r?!this.compareDate(t,e):n==r}return t==e}clampDate(t,e,n){return e&&this.compareDate(t,e)<0?e:n&&this.compareDate(t,n)>0?n:t}}const yE=new Nt("mat-date-formats");let vE;try{vE="undefined"!=typeof Intl}catch(Sz){vE=!1}const bE={long:["January","February","March","April","May","June","July","August","September","October","November","December"],short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],narrow:["J","F","M","A","M","J","J","A","S","O","N","D"]},wE=CE(31,t=>String(t+1)),_E={long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],narrow:["S","M","T","W","T","F","S"]},xE=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function CE(t,e){const n=Array(t);for(let r=0;r<t;r++)n[r]=e(r);return n}let SE=(()=>{class t extends gE{constructor(t,e){super(),this.useUtcForDisplay=!0,super.setLocale(t),this.useUtcForDisplay=!e.TRIDENT,this._clampDate=e.TRIDENT||e.EDGE}getYear(t){return t.getFullYear()}getMonth(t){return t.getMonth()}getDate(t){return t.getDate()}getDayOfWeek(t){return t.getDay()}getMonthNames(t){if(vE){const e=new Intl.DateTimeFormat(this.locale,{month:t,timeZone:"utc"});return CE(12,t=>this._stripDirectionalityCharacters(this._format(e,new Date(2017,t,1))))}return bE[t]}getDateNames(){if(vE){const t=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return CE(31,e=>this._stripDirectionalityCharacters(this._format(t,new Date(2017,0,e+1))))}return wE}getDayOfWeekNames(t){if(vE){const e=new Intl.DateTimeFormat(this.locale,{weekday:t,timeZone:"utc"});return CE(7,t=>this._stripDirectionalityCharacters(this._format(e,new Date(2017,0,t+1))))}return _E[t]}getYearName(t){if(vE){const e=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._stripDirectionalityCharacters(this._format(e,t))}return String(this.getYear(t))}getFirstDayOfWeek(){return 0}getNumDaysInMonth(t){return this.getDate(this._createDateWithOverflow(this.getYear(t),this.getMonth(t)+1,0))}clone(t){return new Date(t.getTime())}createDate(t,e,n){if(e<0||e>11)throw Error(`Invalid month index "${e}". Month index has to be between 0 and 11.`);if(n<1)throw Error(`Invalid date "${n}". Date has to be greater than 0.`);let r=this._createDateWithOverflow(t,e,n);if(r.getMonth()!=e)throw Error(`Invalid date "${n}" for month with index "${e}".`);return r}today(){return new Date}parse(t){return"number"==typeof t?new Date(t):t?new Date(Date.parse(t)):null}format(t,e){if(!this.isValid(t))throw Error("NativeDateAdapter: Cannot format invalid date.");if(vE){this._clampDate&&(t.getFullYear()<1||t.getFullYear()>9999)&&(t=this.clone(t)).setFullYear(Math.max(1,Math.min(9999,t.getFullYear()))),e=Object.assign({},e,{timeZone:"utc"});const n=new Intl.DateTimeFormat(this.locale,e);return this._stripDirectionalityCharacters(this._format(n,t))}return this._stripDirectionalityCharacters(t.toDateString())}addCalendarYears(t,e){return this.addCalendarMonths(t,12*e)}addCalendarMonths(t,e){let n=this._createDateWithOverflow(this.getYear(t),this.getMonth(t)+e,this.getDate(t));return this.getMonth(n)!=((this.getMonth(t)+e)%12+12)%12&&(n=this._createDateWithOverflow(this.getYear(n),this.getMonth(n),0)),n}addCalendarDays(t,e){return this._createDateWithOverflow(this.getYear(t),this.getMonth(t),this.getDate(t)+e)}toIso8601(t){return[t.getUTCFullYear(),this._2digit(t.getUTCMonth()+1),this._2digit(t.getUTCDate())].join("-")}deserialize(t){if("string"==typeof t){if(!t)return null;if(xE.test(t)){let e=new Date(t);if(this.isValid(e))return e}}return super.deserialize(t)}isDateInstance(t){return t instanceof Date}isValid(t){return!isNaN(t.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(t,e,n){const r=new Date(t,e,n);return t>=0&&t<100&&r.setFullYear(this.getYear(r)-1900),r}_2digit(t){return("00"+t).slice(-2)}_stripDirectionalityCharacters(t){return t.replace(/[\u200e\u200f]/g,"")}_format(t,e){const n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.format(n)}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt(mE,8),qt($S))},providedIn:null}),t})(),kE=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();kE.ngInjectorDef=yt({factory:function(t){return new(t||kE)},providers:[{provide:gE,useClass:SE}],imports:[[KS]]});let EE=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();EE.ngInjectorDef=yt({factory:function(t){return new(t||EE)},providers:[{provide:yE,useValue:{parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}}}],imports:[[kE]]});let IE=(()=>{class t{isErrorState(t,e){return!!(t&&t.invalid&&(t.touched||e&&e.submitted))}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)},providedIn:"root"}),t.ngInjectableDef=mt({factory:function(){return new t},token:t,providedIn:"root"}),t})();const AE=new Nt("MAT_HAMMER_OPTIONS"),DE=["longpress","slide","slidestart","slideend","slideright","slideleft"],TE={on:()=>{},off:()=>{}};let NE=(()=>{class t extends mv{constructor(t,e){super(),this._hammerOptions=t,this.events=DE,e&&e._checkHammerIsAvailable()}buildHammer(t){const e="undefined"!=typeof window?window.Hammer:null;if(!e)return TE;const n=new e(t,this._hammerOptions||void 0),r=new e.Pan,i=new e.Swipe,a=new e.Press,o=this._createRecognizer(r,{event:"slide",threshold:0},i),s=this._createRecognizer(a,{event:"longpress",time:500});return r.recognizeWith(i),s.recognizeWith(o),n.add([i,a,r,o,s]),n}_createRecognizer(t,e,...n){let r=new t.constructor(e);return n.push(t),n.forEach(t=>r.recognizeWith(t)),r}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt(AE,8),qt(uE,8))},providedIn:null}),t})(),RE=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();RE.ngInjectorDef=yt({factory:function(t){return new(t||RE)},imports:[[uE],uE]});const OE=function(){var t={FADING_IN:0,VISIBLE:1,FADING_OUT:2,HIDDEN:3};return t[t.FADING_IN]="FADING_IN",t[t.VISIBLE]="VISIBLE",t[t.FADING_OUT]="FADING_OUT",t[t.HIDDEN]="HIDDEN",t}();class FE{constructor(t,e,n){this._renderer=t,this.element=e,this.config=n,this.state=OE.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}}const ME={enterDuration:450,exitDuration:400},PE=800,LE=QS({passive:!0});class zE{constructor(t,e,n,r){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._triggerEvents=new Map,this._activeRipples=new Set,this._onMousedown=t=>{const e=function(t){return 0===t.buttons}(t),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+PE;this._target.rippleDisabled||e||n||(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))},this._onTouchStart=t=>{if(!this._target.rippleDisabled){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let t=0;t<e.length;t++)this.fadeInRipple(e[t].clientX,e[t].clientY,this._target.rippleConfig)}},this._onPointerUp=()=>{this._isPointerDown&&(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(t.state===OE.VISIBLE||t.config.terminateOnPointerUp&&t.state===OE.FADING_IN)&&t.fadeOut()}))},r.isBrowser&&(this._containerElement=HS(n),this._triggerEvents.set("mousedown",this._onMousedown).set("mouseup",this._onPointerUp).set("mouseleave",this._onPointerUp).set("touchstart",this._onTouchStart).set("touchend",this._onPointerUp).set("touchcancel",this._onPointerUp))}fadeInRipple(t,e,n={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),i=Object.assign({},ME,n.animation);n.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);const a=n.radius||function(t,e,n){const r=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),i=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(r*r+i*i)}(t,e,r),o=t-r.left,s=e-r.top,l=i.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=`${o-a}px`,u.style.top=`${s-a}px`,u.style.height=`${2*a}px`,u.style.width=`${2*a}px`,u.style.backgroundColor=n.color||null,u.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(u),window.getComputedStyle(u).getPropertyValue("opacity"),u.style.transform="scale(1)";const c=new FE(this,u,n);return c.state=OE.FADING_IN,this._activeRipples.add(c),n.persistent||(this._mostRecentTransientRipple=c),this._runTimeoutOutsideZone(()=>{const t=c===this._mostRecentTransientRipple;c.state=OE.VISIBLE,n.persistent||t&&this._isPointerDown||c.fadeOut()},l),c}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const n=t.element,r=Object.assign({},ME,t.config.animation);n.style.transitionDuration=`${r.exitDuration}ms`,n.style.opacity="0",t.state=OE.FADING_OUT,this._runTimeoutOutsideZone(()=>{t.state=OE.HIDDEN,n.parentNode.removeChild(n)},r.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}setupTriggerEvents(t){const e=HS(t);e&&e!==this._triggerElement&&(this._removeTriggerEvents(),this._ngZone.runOutsideAngular(()=>{this._triggerEvents.forEach((t,n)=>{e.addEventListener(n,t,LE)})}),this._triggerElement=e)}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_removeTriggerEvents(){this._triggerElement&&this._triggerEvents.forEach((t,e)=>{this._triggerElement.removeEventListener(e,t,LE)})}}const VE=new Nt("mat-ripple-global-options");let BE=(()=>{class t{constructor(t,e,n,r,i){this._elementRef=t,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=r||{},this._rippleRenderer=new zE(this,e,t,n),"NoopAnimations"===i&&(this._globalOptions.animation={enterDuration:0,exitDuration:0})}get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign({},this._globalOptions.animation,this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,e=0,n){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,e,Object.assign({},this.rippleConfig,n)):this._rippleRenderer.fadeInRipple(0,0,Object.assign({},this.rippleConfig,t))}}return t.ngDirectiveDef=ye({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],factory:function(e){return new(e||t)(rl(Cu),rl(Qd),rl($S),rl(VE,8),rl(NS,8))},hostBindings:function(t,e,n){1&t&&(Us(1),Cl(Gk),al()),2&t&&(sl("mat-ripple-unbounded",e.unbounded),dl())},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),t})(),jE=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();jE.ngInjectorDef=yt({factory:function(t){return new(t||jE)},imports:[[uE,KS],uE]});let UE=(()=>{class t{constructor(t){this._animationMode=t,this.state="unchecked",this.disabled=!1}}return t.ngComponentDef=de({type:t,selectors:[["mat-pseudo-checkbox"]],factory:function(e){return new(e||t)(rl(NS,8))},hostBindings:function(t,e,n){1&t&&(Us(4),Cl($k),al()),2&t&&(sl("mat-pseudo-checkbox-indeterminate","indeterminate"===e.state),sl("mat-pseudo-checkbox-checked","checked"===e.state),sl("mat-pseudo-checkbox-disabled",e.disabled),sl("_mat-animation-noopable","NoopAnimations"===e._animationMode),dl())},inputs:{state:"state",disabled:"disabled"},consts:0,vars:0,template:function(t,e){},styles:[".mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0,0,.2,.1),background-color 90ms cubic-bezier(0,0,.2,.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:'';border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0,0,.2,.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}"],encapsulation:2,changeDetection:0}),t})(),WE=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();WE.ngInjectorDef=yt({factory:function(t){return new(t||WE)}});class HE{}const qE=cE(HE);let GE=0,$E=(()=>{class t extends qE{constructor(){super(...arguments),this._labelId=`mat-optgroup-label-${GE++}`}}return t.ngComponentDef=de({type:t,selectors:[["mat-optgroup"]],factory:function(e){return KE(e||t)},hostBindings:function(t,e,n){1&t&&(Us(3),Cl(Kk),al()),2&t&&(Js("aria-disabled",e.disabled.toString())("aria-labelledby",e._labelId),sl("mat-optgroup-disabled",e.disabled),dl())},inputs:{disabled:"disabled",label:"label"},exportAs:["matOptgroup"],features:[ru],ngContentSelectors:Zk,consts:4,vars:2,template:function(t,e){1&t&&(Ll(Yk),wl(0,"label",Xk),Bl(1),Vl(2),_l(),Vl(3,1)),2&t&&(Zs("id",e._labelId),to(1),jl(e.label))},styles:[".mat-optgroup-label{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-optgroup-label[disabled]{cursor:default}[dir=rtl] .mat-optgroup-label{text-align:right}.mat-optgroup-label .mat-icon{margin-right:16px;vertical-align:middle}.mat-optgroup-label .mat-icon svg{vertical-align:top}[dir=rtl] .mat-optgroup-label .mat-icon{margin-left:16px;margin-right:0}"],encapsulation:2,changeDetection:0}),t})();const KE=Ai($E);let XE=0;class YE{constructor(t,e=!1){this.source=t,this.isUserInput=e}}const ZE=new Nt("MAT_OPTION_PARENT_COMPONENT");let QE=(()=>{class t{constructor(t,e,n,r){this._element=t,this._changeDetectorRef=e,this._parent=n,this.group=r,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id=`mat-option-${XE++}`,this.onSelectionChange=new Qh,this._stateChanges=new I}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(t){this._disabled=jS(t)}get disableRipple(){return this._parent&&this._parent.disableRipple}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(t,e){const n=this._getHostElement();"function"==typeof n.focus&&n.focus(e)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(t){t.keyCode!==tk&&t.keyCode!==nk||mk(t)||(this._selectViaInteraction(),t.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const t=this.viewValue;t!==this._mostRecentViewValue&&(this._mostRecentViewValue=t,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(t=!1){this.onSelectionChange.emit(new YE(this,t))}}return t.ngComponentDef=de({type:t,selectors:[["mat-option"]],factory:function(e){return new(e||t)(rl(Cu),rl(_s),rl(ZE,8),rl($E,8))},hostBindings:function(t,e,n){1&t&&(Us(8),Tl("click",(function(t){return e._selectViaInteraction()})),Tl("keydown",(function(t){return e._handleKeydown(t)})),Cl(Qk),al()),2&t&&(Wl("id",e.id),Js("tabindex",e._getTabIndex())("aria-selected",e._getAriaSelected())("aria-disabled",e.disabled.toString()),sl("mat-selected",e.selected),sl("mat-option-multiple",e.multiple),sl("mat-active",e.active),sl("mat-option-disabled",e.disabled),dl())},inputs:{id:"id",disabled:"disabled",value:"value"},outputs:{onSelectionChange:"onSelectionChange"},exportAs:["matOption"],ngContentSelectors:iE,consts:4,vars:3,template:function(t,e){1&t&&(Ll(),el(0,rE,1,2,"mat-pseudo-checkbox",Jk),wl(1,"span",tE),Vl(2),_l(),xl(3,"div",eE)),2&t&&(Zs("ngIf",e.multiple),to(3),Zs("matRippleTrigger",e._getHostElement())("matRippleDisabled",e.disabled||e.disableRipple))},directives:[Qm,BE,UE],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:0;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}@media (-ms-high-contrast:active){.mat-option{margin:0 1px}.mat-option.mat-active{border:solid 1px currentColor;margin:0}}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}@media (-ms-high-contrast:active){.mat-option .mat-option-ripple{opacity:.5}}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}"],encapsulation:2,changeDetection:0}),t})();function JE(t,e,n){if(n.length){let r=e.toArray(),i=n.toArray(),a=0;for(let e=0;e<t+1;e++)r[e].group&&r[e].group===i[a]&&a++;return a}return 0}let tI=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();tI.ngInjectorDef=yt({factory:function(t){return new(t||tI)},imports:[[jE,dg,WE]]});const eI=new Nt("mat-label-global-options"),nI=["primaryValueBar"],rI=["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"mat-progress-bar"],iI=["width","100%","height","4","focusable","false",1,"mat-progress-bar-background","mat-progress-bar-element"],aI=["x","4","y","0","width","8","height","4","patternUnits","userSpaceOnUse",3,"id"],oI=["cx","2","cy","2","r","2"],sI=["width","100%","height","100%"],lI=[1,"mat-progress-bar-buffer","mat-progress-bar-element",3,"ngStyle"],uI=[1,"mat-progress-bar-primary","mat-progress-bar-fill","mat-progress-bar-element",3,"ngStyle"],cI=["primaryValueBar",""],hI=[1,"mat-progress-bar-secondary","mat-progress-bar-fill","mat-progress-bar-element"];class dI{constructor(t){this._elementRef=t}}const pI=hE(dI,"primary"),fI=new Nt("mat-progress-bar-location",{providedIn:"root",factory:function(){const t=Gt(fg),e=t?t.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}});let mI=0,gI=(()=>{class t extends pI{constructor(t,e,n,r){super(t),this._elementRef=t,this._ngZone=e,this._animationMode=n,this._isNoopAnimation=!1,this._value=0,this._bufferValue=0,this.animationEnd=new Qh,this._animationEndSubscription=d.EMPTY,this.mode="determinate",this.progressbarId=`mat-progress-bar-${mI++}`;const i=r?r.getPathname().split("#")[0]:"";this._rectangleFillValue=`url('${i}#${this.progressbarId}')`,this._isNoopAnimation="NoopAnimations"===n}get value(){return this._value}set value(t){this._value=yI(t||0),this._isNoopAnimation&&this._emitAnimationEnd()}get bufferValue(){return this._bufferValue}set bufferValue(t){this._bufferValue=yI(t||0)}_primaryTransform(){return{transform:`scaleX(${this.value/100})`}}_bufferTransform(){if("buffer"===this.mode)return{transform:`scaleX(${this.bufferValue/100})`}}ngAfterViewInit(){this._isNoopAnimation||this._ngZone.runOutsideAngular(()=>{const t=this._primaryValueBar.nativeElement;this._animationEndSubscription=I_(t,"transitionend").pipe(Rg(e=>e.target===t)).subscribe(()=>this._ngZone.run(()=>this._emitAnimationEnd()))})}ngOnDestroy(){this._animationEndSubscription.unsubscribe()}_emitAnimationEnd(){"determinate"!==this.mode&&"buffer"!==this.mode||this.animationEnd.next({value:this.value})}}return t.ngComponentDef=de({type:t,selectors:[["mat-progress-bar"]],factory:function(e){return new(e||t)(rl(Cu),rl(Qd),rl(NS,8),rl(fI,8))},viewQuery:function(t,e){var n;1&t&&hd(nI,!0),2&t&&ud(n=pd())&&(e._primaryValueBar=n.first)},hostBindings:function(t,e,n){1&t&&(Us(3),Cl(rI),al()),2&t&&(Js("aria-valuenow","indeterminate"===e.mode||"query"===e.mode?null:e.value)("mode",e.mode),sl("_mat-animation-noopable",e._isNoopAnimation),dl())},inputs:{color:"color",mode:"mode",value:"value",bufferValue:"bufferValue"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],features:[ru],consts:9,vars:4,template:function(t,e){1&t&&(pr="http://www.w3.org/2000/svg",wl(0,"svg",iI),wl(1,"defs"),wl(2,"pattern",aI),xl(3,"circle",oI),_l(),_l(),xl(4,"rect",sI),_l(),fr(),xl(5,"div",lI),xl(6,"div",uI,cI),xl(8,"div",hI)),2&t&&(to(2),Zs("id",e.progressbarId),to(4),Js("fill",e._rectangleFillValue),to(5),Zs("ngStyle",e._bufferTransform()),to(6),Zs("ngStyle",e._primaryTransform()))},directives:[cg],styles:[".mat-progress-bar{display:block;height:4px;overflow:hidden;position:relative;transition:opacity 250ms linear;width:100%}._mat-animation-noopable.mat-progress-bar{transition:none;animation:none}.mat-progress-bar .mat-progress-bar-element,.mat-progress-bar .mat-progress-bar-fill::after{height:100%;position:absolute;width:100%}.mat-progress-bar .mat-progress-bar-background{width:calc(100% + 10px)}@media (-ms-high-contrast:active){.mat-progress-bar .mat-progress-bar-background{display:none}}.mat-progress-bar .mat-progress-bar-buffer{transform-origin:top left;transition:transform 250ms ease}@media (-ms-high-contrast:active){.mat-progress-bar .mat-progress-bar-buffer{border-top:solid 5px;opacity:.5}}.mat-progress-bar .mat-progress-bar-secondary{display:none}.mat-progress-bar .mat-progress-bar-fill{animation:none;transform-origin:top left;transition:transform 250ms ease}@media (-ms-high-contrast:active){.mat-progress-bar .mat-progress-bar-fill{border-top:solid 4px}}.mat-progress-bar .mat-progress-bar-fill::after{animation:none;content:'';display:inline-block;left:0}.mat-progress-bar[dir=rtl],[dir=rtl] .mat-progress-bar{transform:rotateY(180deg)}.mat-progress-bar[mode=query]{transform:rotateZ(180deg)}.mat-progress-bar[mode=query][dir=rtl],[dir=rtl] .mat-progress-bar[mode=query]{transform:rotateZ(180deg) rotateY(180deg)}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-fill,.mat-progress-bar[mode=query] .mat-progress-bar-fill{transition:none}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary,.mat-progress-bar[mode=query] .mat-progress-bar-primary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-translate 2s infinite linear;left:-145.166611%}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-primary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-scale 2s infinite linear}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary,.mat-progress-bar[mode=query] .mat-progress-bar-secondary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-translate 2s infinite linear;left:-54.888891%;display:block}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-secondary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-scale 2s infinite linear}.mat-progress-bar[mode=buffer] .mat-progress-bar-background{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-background-scroll 250ms infinite linear;display:block}.mat-progress-bar._mat-animation-noopable .mat-progress-bar-background,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-buffer,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary.mat-progress-bar-fill::after{animation:none;transition:none}@keyframes mat-progress-bar-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(.5,0,.70173,.49582);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(.30244,.38135,.55,.95635);transform:translateX(83.67142%)}100%{transform:translateX(200.61106%)}}@keyframes mat-progress-bar-primary-indeterminate-scale{0%{transform:scaleX(.08)}36.65%{animation-timing-function:cubic-bezier(.33473,.12482,.78584,1);transform:scaleX(.08)}69.15%{animation-timing-function:cubic-bezier(.06,.11,.6,1);transform:scaleX(.66148)}100%{transform:scaleX(.08)}}@keyframes mat-progress-bar-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(.15,0,.51506,.40969);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(.31033,.28406,.8,.73371);transform:translateX(37.65191%)}48.35%{animation-timing-function:cubic-bezier(.4,.62704,.6,.90203);transform:translateX(84.38617%)}100%{transform:translateX(160.27778%)}}@keyframes mat-progress-bar-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(.15,0,.51506,.40969);transform:scaleX(.08)}19.15%{animation-timing-function:cubic-bezier(.31033,.28406,.8,.73371);transform:scaleX(.4571)}44.15%{animation-timing-function:cubic-bezier(.4,.62704,.6,.90203);transform:scaleX(.72796)}100%{transform:scaleX(.08)}}@keyframes mat-progress-bar-background-scroll{to{transform:translateX(-8px)}}"],encapsulation:2,changeDetection:0}),t})();function yI(t,e=0,n=100){return Math.max(e,Math.min(n,t))}let vI=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();vI.ngInjectorDef=yt({factory:function(t){return new(t||vI)},imports:[[dg,uE],uE]});var bI=pc({encapsulation:2,styles:[".mat-progress-bar{display:block;height:4px;overflow:hidden;position:relative;transition:opacity 250ms linear;width:100%}._mat-animation-noopable.mat-progress-bar{transition:none;animation:none}.mat-progress-bar .mat-progress-bar-element,.mat-progress-bar .mat-progress-bar-fill::after{height:100%;position:absolute;width:100%}.mat-progress-bar .mat-progress-bar-background{width:calc(100% + 10px)}@media (-ms-high-contrast:active){.mat-progress-bar .mat-progress-bar-background{display:none}}.mat-progress-bar .mat-progress-bar-buffer{transform-origin:top left;transition:transform 250ms ease}@media (-ms-high-contrast:active){.mat-progress-bar .mat-progress-bar-buffer{border-top:solid 5px;opacity:.5}}.mat-progress-bar .mat-progress-bar-secondary{display:none}.mat-progress-bar .mat-progress-bar-fill{animation:none;transform-origin:top left;transition:transform 250ms ease}@media (-ms-high-contrast:active){.mat-progress-bar .mat-progress-bar-fill{border-top:solid 4px}}.mat-progress-bar .mat-progress-bar-fill::after{animation:none;content:'';display:inline-block;left:0}.mat-progress-bar[dir=rtl],[dir=rtl] .mat-progress-bar{transform:rotateY(180deg)}.mat-progress-bar[mode=query]{transform:rotateZ(180deg)}.mat-progress-bar[mode=query][dir=rtl],[dir=rtl] .mat-progress-bar[mode=query]{transform:rotateZ(180deg) rotateY(180deg)}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-fill,.mat-progress-bar[mode=query] .mat-progress-bar-fill{transition:none}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary,.mat-progress-bar[mode=query] .mat-progress-bar-primary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-translate 2s infinite linear;left:-145.166611%}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-primary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-scale 2s infinite linear}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary,.mat-progress-bar[mode=query] .mat-progress-bar-secondary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-translate 2s infinite linear;left:-54.888891%;display:block}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-secondary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-scale 2s infinite linear}.mat-progress-bar[mode=buffer] .mat-progress-bar-background{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-background-scroll 250ms infinite linear;display:block}.mat-progress-bar._mat-animation-noopable .mat-progress-bar-background,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-buffer,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary.mat-progress-bar-fill::after{animation:none;transition:none}@keyframes mat-progress-bar-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(.5,0,.70173,.49582);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(.30244,.38135,.55,.95635);transform:translateX(83.67142%)}100%{transform:translateX(200.61106%)}}@keyframes mat-progress-bar-primary-indeterminate-scale{0%{transform:scaleX(.08)}36.65%{animation-timing-function:cubic-bezier(.33473,.12482,.78584,1);transform:scaleX(.08)}69.15%{animation-timing-function:cubic-bezier(.06,.11,.6,1);transform:scaleX(.66148)}100%{transform:scaleX(.08)}}@keyframes mat-progress-bar-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(.15,0,.51506,.40969);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(.31033,.28406,.8,.73371);transform:translateX(37.65191%)}48.35%{animation-timing-function:cubic-bezier(.4,.62704,.6,.90203);transform:translateX(84.38617%)}100%{transform:translateX(160.27778%)}}@keyframes mat-progress-bar-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(.15,0,.51506,.40969);transform:scaleX(.08)}19.15%{animation-timing-function:cubic-bezier(.31033,.28406,.8,.73371);transform:scaleX(.4571)}44.15%{animation-timing-function:cubic-bezier(.4,.62704,.6,.90203);transform:scaleX(.72796)}100%{transform:scaleX(.08)}}@keyframes mat-progress-bar-background-scroll{to{transform:translateX(-8px)}}"],data:{}});function wI(t){return ff(2,[ef(671088640,1,{_primaryValueBar:0}),(t()(),Yp(1,0,null,null,4,":svg:svg",[["class","mat-progress-bar-background mat-progress-bar-element"],["focusable","false"],["height","4"],["width","100%"]],null,null,null,null,null)),(t()(),Yp(2,0,null,null,2,":svg:defs",[],null,null,null,null,null)),(t()(),Yp(3,0,null,null,1,":svg:pattern",[["height","4"],["patternUnits","userSpaceOnUse"],["width","8"],["x","4"],["y","0"]],[[8,"id",0]],null,null,null,null)),(t()(),Yp(4,0,null,null,0,":svg:circle",[["cx","2"],["cy","2"],["r","2"]],null,null,null,null,null)),(t()(),Yp(5,0,null,null,0,":svg:rect",[["height","100%"],["width","100%"]],[[1,"fill",0]],null,null,null,null)),(t()(),Yp(6,0,null,null,2,"div",[["class","mat-progress-bar-buffer mat-progress-bar-element"]],null,null,null,null,null)),xh(512,null,ag,og,[Cu,Wu,Au]),_h(8,278528,null,0,cg,[ag],{ngStyle:[0,"ngStyle"]},null),(t()(),Yp(9,0,[[1,0],["primaryValueBar",1]],null,2,"div",[["class","mat-progress-bar-primary mat-progress-bar-fill mat-progress-bar-element"]],null,null,null,null,null)),xh(512,null,ag,og,[Cu,Wu,Au]),_h(11,278528,null,0,cg,[ag],{ngStyle:[0,"ngStyle"]},null),(t()(),Yp(12,0,null,null,0,"div",[["class","mat-progress-bar-secondary mat-progress-bar-fill mat-progress-bar-element"]],null,null,null,null,null))],(function(t,e){var n=e.component;t(e,8,0,n._bufferTransform()),t(e,11,0,n._primaryTransform())}),(function(t,e){var n=e.component;t(e,3,0,n.progressbarId),t(e,5,0,n._rectangleFillValue)}))}const _I=["mat-button",""],xI=[1,"mat-button-wrapper"],CI=["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],SI=[1,"mat-button-focus-overlay"],kI=["*"],EI="accent",II=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"];class AI{constructor(t){this._elementRef=t}}const DI=hE(cE(dE(AI)));let TI=(()=>{class t extends DI{constructor(t,e,n){super(t),this._focusMonitor=e,this._animationMode=n,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const r of II)this._hasHostAttributes(r)&&this._getHostElement().classList.add(r);t.nativeElement.classList.add("mat-button-base"),this._focusMonitor.monitor(this._elementRef,!0),this.isRoundButton&&(this.color=EI)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t="program",e){this._focusMonitor.focusVia(this._getHostElement(),t,e)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(t=>this._getHostElement().hasAttribute(t))}}return t.ngComponentDef=de({type:t,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],factory:function(e){return new(e||t)(rl(Cu),rl(Wk),rl(NS,8))},viewQuery:function(t,e){var n;1&t&&hd(BE,!0),2&t&&ud(n=pd())&&(e.ripple=n.first)},hostBindings:function(t,e,n){1&t&&(Us(2),al()),2&t&&(Js("disabled",e.disabled||null),sl("_mat-animation-noopable","NoopAnimations"===e._animationMode),dl())},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[ru],attrs:_I,ngContentSelectors:kI,consts:4,vars:4,template:function(t,e){1&t&&(Ll(),wl(0,"span",xI),Vl(1),_l(),wl(2,"div",CI),al(),_l(),xl(3,"div",SI)),2&t&&(to(2),sl("mat-button-ripple-round",e.isRoundButton||e.isIconButton),dl(),Zs("matRippleDisabled",e._isRippleDisabled())("matRippleCentered",e.isIconButton)("matRippleTrigger",e._getHostElement()))},directives:[BE],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover .mat-button-focus-overlay,.mat-stroked-button:hover .mat-button-focus-overlay{opacity:.04}@media (hover:none){.mat-button:hover .mat-button-focus-overlay,.mat-stroked-button:hover .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-flat-button,.mat-icon-button,.mat-stroked-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner{border:0}.mat-button[disabled],.mat-flat-button[disabled],.mat-icon-button[disabled],.mat-stroked-button[disabled]{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0,0,0);transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button[disabled]{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-focus-overlay,.mat-stroked-button .mat-button-ripple.mat-ripple{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0,0,0);transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab[disabled]{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0,0,0);transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab[disabled]{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button .mat-icon,.mat-icon-button i{line-height:24px}.mat-button-focus-overlay,.mat-button-ripple.mat-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity .2s cubic-bezier(.35,0,.25,1),background-color .2s cubic-bezier(.35,0,.25,1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}@media (-ms-high-contrast:active){.mat-button-focus-overlay{background-color:#fff}}@media (-ms-high-contrast:black-on-white){.mat-button-focus-overlay{background-color:#000}}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:block;font-size:inherit;width:2.5em;height:2.5em}@media (-ms-high-contrast:active){.mat-button,.mat-fab,.mat-flat-button,.mat-icon-button,.mat-mini-fab,.mat-raised-button{outline:solid 1px}}"],encapsulation:2,changeDetection:0}),t})(),NI=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();NI.ngInjectorDef=yt({factory:function(t){return new(t||NI)},imports:[[dg,jE,uE],uE]});var RI=pc({encapsulation:2,styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover .mat-button-focus-overlay,.mat-stroked-button:hover .mat-button-focus-overlay{opacity:.04}@media (hover:none){.mat-button:hover .mat-button-focus-overlay,.mat-stroked-button:hover .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-flat-button,.mat-icon-button,.mat-stroked-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner{border:0}.mat-button[disabled],.mat-flat-button[disabled],.mat-icon-button[disabled],.mat-stroked-button[disabled]{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0,0,0);transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button[disabled]{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-focus-overlay,.mat-stroked-button .mat-button-ripple.mat-ripple{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0,0,0);transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab[disabled]{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0,0,0);transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab[disabled]{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button .mat-icon,.mat-icon-button i{line-height:24px}.mat-button-focus-overlay,.mat-button-ripple.mat-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity .2s cubic-bezier(.35,0,.25,1),background-color .2s cubic-bezier(.35,0,.25,1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}@media (-ms-high-contrast:active){.mat-button-focus-overlay{background-color:#fff}}@media (-ms-high-contrast:black-on-white){.mat-button-focus-overlay{background-color:#000}}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:block;font-size:inherit;width:2.5em;height:2.5em}@media (-ms-high-contrast:active){.mat-button,.mat-fab,.mat-flat-button,.mat-icon-button,.mat-mini-fab,.mat-raised-button{outline:solid 1px}}"],data:{}});function OI(t){return ff(2,[ef(671088640,1,{ripple:0}),(t()(),Yp(1,0,null,null,1,"span",[["class","mat-button-wrapper"]],null,null,null,null,null)),sf(null,0),(t()(),Yp(3,0,null,null,1,"div",[["class","mat-button-ripple mat-ripple"],["matRipple",""]],[[2,"mat-button-ripple-round",null],[2,"mat-ripple-unbounded",null]],null,null,null,null)),_h(4,212992,[[1,4]],0,BE,[Cu,Qd,$S,[2,VE],[2,NS]],{centered:[0,"centered"],disabled:[1,"disabled"],trigger:[2,"trigger"]},null),(t()(),Yp(5,0,null,null,0,"div",[["class","mat-button-focus-overlay"]],null,null,null,null,null))],(function(t,e){var n=e.component;t(e,4,0,n.isIconButton,n._isRippleDisabled(),n._getHostElement())}),(function(t,e){var n=e.component;t(e,3,0,n.isRoundButton||n.isIconButton,lh(e,4).unbounded)}))}var FI=pc({encapsulation:2,styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:0;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}@media (-ms-high-contrast:active){.mat-option{margin:0 1px}.mat-option.mat-active{border:solid 1px currentColor;margin:0}}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}@media (-ms-high-contrast:active){.mat-option .mat-option-ripple{opacity:.5}}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}"],data:{}});function MI(t){return ff(0,[(t()(),Yp(0,0,null,null,1,"mat-pseudo-checkbox",[["class","mat-option-pseudo-checkbox mat-pseudo-checkbox"]],[[2,"mat-pseudo-checkbox-indeterminate",null],[2,"mat-pseudo-checkbox-checked",null],[2,"mat-pseudo-checkbox-disabled",null],[2,"_mat-animation-noopable",null]],null,null,zI,LI)),_h(1,49152,null,0,UE,[[2,NS]],{state:[0,"state"],disabled:[1,"disabled"]},null)],(function(t,e){var n=e.component;t(e,1,0,n.selected?"checked":"",n.disabled)}),(function(t,e){t(e,0,0,"indeterminate"===lh(e,1).state,"checked"===lh(e,1).state,lh(e,1).disabled,"NoopAnimations"===lh(e,1)._animationMode)}))}function PI(t){return ff(2,[(t()(),Xp(16777216,null,null,1,null,MI)),_h(1,16384,null,0,Qm,[Xu,$u],{ngIf:[0,"ngIf"]},null),(t()(),Yp(2,0,null,null,1,"span",[["class","mat-option-text"]],null,null,null,null,null)),sf(null,0),(t()(),Yp(4,0,null,null,1,"div",[["class","mat-option-ripple mat-ripple"],["mat-ripple",""]],[[2,"mat-ripple-unbounded",null]],null,null,null,null)),_h(5,212992,null,0,BE,[Cu,Qd,$S,[2,VE],[2,NS]],{disabled:[0,"disabled"],trigger:[1,"trigger"]},null)],(function(t,e){var n=e.component;t(e,1,0,n.multiple),t(e,5,0,n.disabled||n.disableRipple,n._getHostElement())}),(function(t,e){t(e,4,0,lh(e,5).unbounded)}))}var LI=pc({encapsulation:2,styles:[".mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0,0,.2,.1),background-color 90ms cubic-bezier(0,0,.2,.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:'';border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0,0,.2,.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}"],data:{}});function zI(t){return ff(2,[],null,null)}function VI(t){return e=>e.lift(new BI(t))}class BI{constructor(t){this.notifier=t}call(t,e){const n=new jI(t),r=B(n,this.notifier);return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n}}class jI extends j{constructor(t){super(t),this.seenValue=!1}notifyNext(t,e,n,r,i){this.seenValue=!0,this.complete()}notifyComplete(){}}const UI=["role","alert",1,"mat-error"],WI=[1,"mat-hint"],HI=["underline"],qI=["connectionContainer"],GI=["inputContainer"],$I=["label"],KI=[1,"mat-form-field"],XI=[1,"mat-form-field-wrapper"],YI=[1,"mat-form-field-flex",3,"click"],ZI=["connectionContainer",""],QI=[4,"ngIf"],JI=["class","mat-form-field-prefix",4,"ngIf"],tA=[1,"mat-form-field-infix"],eA=["inputContainer",""],nA=[1,"mat-form-field-label-wrapper"],rA=["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],iA=["class","mat-form-field-suffix",4,"ngIf"],aA=["class","mat-form-field-underline",4,"ngIf"],oA=[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],sA=[4,"ngSwitchCase"],lA=["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],uA=[1,"mat-form-field-outline"],cA=[1,"mat-form-field-outline-start"],hA=[1,"mat-form-field-outline-gap"],dA=[1,"mat-form-field-outline-end"],pA=[1,"mat-form-field-outline","mat-form-field-outline-thick"];function fA(t,e){1&t&&(kl(0),wl(1,"div",uA),xl(2,"div",cA),xl(3,"div",hA),xl(4,"div",dA),_l(),wl(5,"div",pA),xl(6,"div",cA),xl(7,"div",hA),xl(8,"div",dA),_l(),El())}const mA=[1,"mat-form-field-prefix"];function gA(t,e){1&t&&(wl(0,"div",mA),Vl(1,1),_l())}const yA=[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],vA=["label",""],bA=["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"];function wA(t,e){if(1&t&&(kl(0),Vl(1,2),wl(2,"span"),Bl(3),_l(),El()),2&t){const t=Ml(2);to(3),jl(t._control.placeholder)}}function _A(t,e){1&t&&Vl(0,3,["*ngSwitchCase","true"])}const xA=["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"];function CA(t,e){1&t&&(wl(0,"span",xA),Bl(1," *"),_l())}function SA(t,e){if(1&t){const t=Il();wl(0,"label",yA,vA),al(),Tl("cdkObserveContent",(function(e){return qn(t),Ml().updateOutlineGap()})),el(2,wA,4,1,"ng-container",sA),el(3,_A,1,0,void 0,sA),el(4,CA,2,0,"span",bA),_l()}if(2&t){const t=Ml();sl("mat-empty",t._control.empty&&!t._shouldAlwaysFloat),sl("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat),sl("mat-accent","accent"==t.color),sl("mat-warn","warn"==t.color),dl(),Zs("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),Js("for",t._control.id)("aria-owns",t._control.id),to(2),Zs("ngSwitchCase",!1),to(3),Zs("ngSwitchCase",!0),to(4),Zs("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}const kA=[1,"mat-form-field-suffix"];function EA(t,e){1&t&&(wl(0,"div",kA),Vl(1,4),_l())}const IA=[1,"mat-form-field-underline"],AA=["underline",""],DA=[1,"mat-form-field-ripple"];function TA(t,e){if(1&t&&(wl(0,"div",IA,AA),wl(2,"span",DA),al(),_l(),_l()),2&t){const t=Ml();to(2),sl("mat-accent","accent"==t.color),sl("mat-warn","warn"==t.color),dl()}}function NA(t,e){1&t&&(wl(0,"div"),Vl(1,5),_l()),2&t&&Zs("@transitionMessages",Ml()._subscriptAnimationState)}const RA=[1,"mat-form-field-hint-wrapper"],OA=["class","mat-hint",3,"id",4,"ngIf"],FA=[1,"mat-form-field-hint-spacer"],MA=[1,"mat-hint",3,"id"];function PA(t,e){if(1&t&&(wl(0,"div",MA),Bl(1),_l()),2&t){const t=Ml(2);Zs("id",t._hintLabelId),to(1),jl(t.hintLabel)}}function LA(t,e){if(1&t&&(wl(0,"div",RA),el(1,PA,2,2,"div",OA),Vl(2,6),xl(3,"div",FA),Vl(4,7),_l()),2&t){const t=Ml();Zs("@transitionMessages",t._subscriptAnimationState),to(1),Zs("ngIf",t.hintLabel)}}const zA=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],VA=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"];let BA=0,jA=(()=>{class t{constructor(){this.id=`mat-error-${BA++}`}}return t.ngDirectiveDef=ye({type:t,selectors:[["mat-error"]],factory:function(e){return new(e||t)},hostBindings:function(t,e,n){1&t&&(Us(1),Cl(UI)),2&t&&Js("id",e.id)},inputs:{id:"id"}}),t})();const UA={transitionMessages:N_("transitionMessages",[M_("enter",F_({opacity:1,transform:"translateY(0%)"})),P_("void => enter",[F_({opacity:0,transform:"translateY(-100%)"}),R_("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};class WA{}function HA(t){return Error(`A hint was already declared for 'align="${t}"'.`)}let qA=0,GA=(()=>{class t{constructor(){this.align="start",this.id=`mat-hint-${qA++}`}}return t.ngDirectiveDef=ye({type:t,selectors:[["mat-hint"]],factory:function(e){return new(e||t)},hostBindings:function(t,e,n){1&t&&(Us(3),Cl(WI),al()),2&t&&(Js("id",e.id)("align",null),sl("mat-right","end"==e.align),dl())},inputs:{align:"align",id:"id"}}),t})(),$A=(()=>{class t{}return t.ngDirectiveDef=ye({type:t,selectors:[["mat-label"]],factory:function(e){return new(e||t)}}),t})(),KA=(()=>{class t{}return t.ngDirectiveDef=ye({type:t,selectors:[["mat-placeholder"]],factory:function(e){return new(e||t)}}),t})(),XA=(()=>{class t{}return t.ngDirectiveDef=ye({type:t,selectors:[["","matPrefix",""]],factory:function(e){return new(e||t)}}),t})(),YA=(()=>{class t{}return t.ngDirectiveDef=ye({type:t,selectors:[["","matSuffix",""]],factory:function(e){return new(e||t)}}),t})(),ZA=0;const QA=.75,JA=5;class tD{constructor(t){this._elementRef=t}}const eD=hE(tD,"primary"),nD=new Nt("MAT_FORM_FIELD_DEFAULT_OPTIONS");let rD=(()=>{class t extends eD{constructor(t,e,n,r,i,a,o,s){super(t),this._elementRef=t,this._changeDetectorRef=e,this._dir=r,this._defaults=i,this._platform=a,this._ngZone=o,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new I,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId=`mat-hint-${ZA++}`,this._labelId=`mat-form-field-label-${ZA++}`,this._previousDirection="ltr",this._labelOptions=n||{},this.floatLabel=this._labelOptions.float||"auto",this._animationsEnabled="NoopAnimations"!==s,this.appearance=i&&i.appearance?i.appearance:"legacy",this._hideRequiredMarker=!(!i||null==i.hideRequiredMarker)&&i.hideRequiredMarker}get appearance(){return this._appearance}set appearance(t){const e=this._appearance;this._appearance=t||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&e!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=jS(t)}get _shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}get _canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._labelOptions.float||"auto",this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}get _labelChild(){return this._labelChildNonStatic||this._labelChildStatic}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(ly(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(VI(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.asObservable().pipe(VI(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),Q(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(ly(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(ly(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(VI(this._destroyed)).subscribe(()=>{this.updateOutlineGap(),this._previousDirection=this._dir.value})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const e=this._control?this._control.ngControl:null;return e&&e[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!!this._labelChild}_shouldLabelFloat(){return this._canLabelFloat&&(this._control.shouldLabelFloat||this._shouldAlwaysFloat)}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat&&(this._animationsEnabled&&(this._showAlwaysAnimate=!0,I_(this._label.nativeElement,"transitionend").pipe(Qg(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){if(this._control.placeholder&&this._placeholderChild)throw Error("Placeholder attribute and child element were both specified.")}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){if(this._hintChildren){let t,e;this._hintChildren.forEach(n=>{if("start"===n.align){if(t||this.hintLabel)throw HA("start");t=n}else if("end"===n.align){if(e)throw HA("end");e=n}})}}_syncDescribedByIds(){if(this._control){let t=[];if("hint"===this._getDisplayedMessages()){const e=this._hintChildren?this._hintChildren.find(t=>"start"===t.align):null,n=this._hintChildren?this._hintChildren.find(t=>"end"===t.align):null;e?t.push(e.id):this._hintLabel&&t.push(this._hintLabelId),n&&t.push(n.id)}else this._errorChildren&&(t=this._errorChildren.map(t=>t.id));this._control.setDescribedByIds(t)}}_validateControlChild(){if(!this._control)throw Error("mat-form-field must contain a MatFormFieldControl.")}updateOutlineGap(){const t=this._label?this._label.nativeElement:null;if("outline"!==this.appearance||!t||!t.children.length||!t.textContent.trim())return;if(!this._platform.isBrowser)return;if(!document.documentElement.contains(this._elementRef.nativeElement))return void(this._outlineGapCalculationNeededImmediately=!0);let e=0,n=0;const r=this._connectionContainerRef.nativeElement,i=r.querySelectorAll(".mat-form-field-outline-start"),a=r.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const i=r.getBoundingClientRect();if(0===i.width&&0===i.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const a=this._getStartEnd(i),o=this._getStartEnd(t.children[0].getBoundingClientRect());let s=0;for(const e of t.children)s+=e.offsetWidth;e=o-a-JA,n=s>0?s*QA+2*JA:0}for(let o=0;o<i.length;o++)i.item(o).style.width=`${e}px`;for(let o=0;o<a.length;o++)a.item(o).style.width=`${n}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return"rtl"===this._previousDirection?t.right:t.left}}return t.ngComponentDef=de({type:t,selectors:[["mat-form-field"]],factory:function(e){return new(e||t)(rl(Cu),rl(_s),rl(eI,8),rl(zS,8),rl(nD,8),rl($S),rl(Qd),rl(NS,8))},contentQueries:function(t,e,n){var r;1&t&&(fd(n,WA,!0),md(n,WA,!0),fd(n,$A,!0),md(n,$A,!0),fd(n,KA,!0),fd(n,jA,!1),fd(n,GA,!1),fd(n,XA,!1),fd(n,YA,!1)),2&t&&(ud(r=yd())&&(e._controlNonStatic=r.first),ud(r=yd())&&(e._controlStatic=r.first),ud(r=yd())&&(e._labelChildNonStatic=r.first),ud(r=yd())&&(e._labelChildStatic=r.first),ud(r=yd())&&(e._placeholderChild=r.first),ud(r=yd())&&(e._errorChildren=r),ud(r=yd())&&(e._hintChildren=r),ud(r=yd())&&(e._prefixChildren=r),ud(r=yd())&&(e._suffixChildren=r))},viewQuery:function(t,e){var n;1&t&&(hd(HI,!0),cd(qI,!0),hd(GI,!0),hd($I,!0)),2&t&&(ud(n=pd())&&(e.underlineRef=n.first),ud(n=pd())&&(e._connectionContainerRef=n.first),ud(n=pd())&&(e._inputContainerRef=n.first),ud(n=pd())&&(e._label=n.first))},hostBindings:function(t,e,n){1&t&&(Us(22),Cl(KI),al()),2&t&&(sl("mat-form-field-appearance-standard","standard"==e.appearance),sl("mat-form-field-appearance-fill","fill"==e.appearance),sl("mat-form-field-appearance-outline","outline"==e.appearance),sl("mat-form-field-appearance-legacy","legacy"==e.appearance),sl("mat-form-field-invalid",e._control.errorState),sl("mat-form-field-can-float",e._canLabelFloat),sl("mat-form-field-should-float",e._shouldLabelFloat()),sl("mat-form-field-has-label",e._hasFloatingLabel()),sl("mat-form-field-hide-placeholder",e._hideControlPlaceholder()),sl("mat-form-field-disabled",e._control.disabled),sl("mat-form-field-autofilled",e._control.autofilled),sl("mat-focused",e._control.focused),sl("mat-accent","accent"==e.color),sl("mat-warn","warn"==e.color),sl("ng-untouched",e._shouldForward("untouched")),sl("ng-touched",e._shouldForward("touched")),sl("ng-pristine",e._shouldForward("pristine")),sl("ng-dirty",e._shouldForward("dirty")),sl("ng-valid",e._shouldForward("valid")),sl("ng-invalid",e._shouldForward("invalid")),sl("ng-pending",e._shouldForward("pending")),sl("_mat-animation-noopable",!e._animationsEnabled),dl())},inputs:{color:"color",floatLabel:"floatLabel",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[ru],ngContentSelectors:VA,consts:15,vars:8,template:function(t,e){1&t&&(Ll(zA),wl(0,"div",XI),wl(1,"div",YI,ZI),Tl("click",(function(t){return e._control.onContainerClick&&e._control.onContainerClick(t)})),el(3,fA,9,0,"ng-container",QI),el(4,gA,2,0,"div",JI),wl(5,"div",tA,eA),Vl(7),wl(8,"span",nA),el(9,SA,5,12,"label",rA),_l(),_l(),el(10,EA,2,0,"div",iA),_l(),el(11,TA,3,2,"div",aA),wl(12,"div",oA),el(13,NA,2,1,"div",sA),el(14,LA,5,2,"div",lA),_l(),_l()),2&t&&(to(3),Zs("ngIf","outline"==e.appearance),to(4),Zs("ngIf",e._prefixChildren.length),to(9),Zs("ngIf",e._hasFloatingLabel()),to(10),Zs("ngIf",e._suffixChildren.length),to(11),Zs("ngIf","outline"!=e.appearance),to(12),Zs("ngSwitch",e._getDisplayedMessages()),to(13),Zs("ngSwitchCase","error"),to(14),Zs("ngSwitchCase","hint"))},directives:[Qm,ng,rg,Ik],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}@media (-ms-high-contrast:active){.mat-form-field-infix{border-image:linear-gradient(transparent,transparent)}}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform .4s cubic-bezier(.25,.8,.25,1),color .4s cubic-bezier(.25,.8,.25,1),width .4s cubic-bezier(.25,.8,.25,1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label,.mat-form-field-empty.mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scaleY(1.0001)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(.5);opacity:0;transition:background-color .3s cubic-bezier(.55,0,.55,.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:scaleX(1);transition:transform .3s cubic-bezier(.25,.8,.25,1),opacity .1s cubic-bezier(.25,.8,.25,1),background-color .3s cubic-bezier(.25,.8,.25,1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-label-wrapper .mat-icon,.mat-form-field-subscript-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none} .mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}@media (-ms-high-contrast:active){.mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:'';display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}@media (-ms-high-contrast:active){.mat-form-field-appearance-fill .mat-form-field-ripple{height:0;border-top:solid 2px}}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity .6s cubic-bezier(.25,.8,.25,1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em} .mat-input-element{font:inherit;background:0 0;color:currentColor;border:none;outline:0;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=month]::after,.mat-input-element[type=time]::after,.mat-input-element[type=week]::after{content:' ';white-space:pre;width:1px}.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button,.mat-input-element::-webkit-inner-spin-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-input-element::placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-input-element::-moz-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-input-element::-webkit-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-input-element:-ms-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent!important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent!important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent!important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent!important;-webkit-text-fill-color:transparent;transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-ms-expand{display:none}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}select.mat-input-element::-ms-value{color:inherit;background:0 0}@media (-ms-high-contrast:active){.mat-focused select.mat-input-element::-ms-value{color:inherit}}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:'';width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px} .mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px);-ms-transform:none}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}@media (-ms-high-contrast:active){.mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}@media (-ms-high-contrast:active){.mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}@media (-ms-high-contrast:active){.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px} .mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-start{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start{border-width:2px;transition:border-color .3s cubic-bezier(.25,.8,.25,1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity .1s cubic-bezier(.25,.8,.25,1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity .6s cubic-bezier(.25,.8,.25,1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline{transition:none} .mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}@media (-ms-high-contrast:active){.mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}@media (-ms-high-contrast:active){.mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:2px}}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}@media (-ms-high-contrast:active){.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity .6s cubic-bezier(.25,.8,.25,1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}"],encapsulation:2,data:{animation:[UA.transitionMessages]},changeDetection:0}),t})(),iD=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();iD.ngInjectorDef=yt({factory:function(t){return new(t||iD)},imports:[[dg,Ak]]});var aD=pc({encapsulation:2,styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}@media (-ms-high-contrast:active){.mat-form-field-infix{border-image:linear-gradient(transparent,transparent)}}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform .4s cubic-bezier(.25,.8,.25,1),color .4s cubic-bezier(.25,.8,.25,1),width .4s cubic-bezier(.25,.8,.25,1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label,.mat-form-field-empty.mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scaleY(1.0001)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(.5);opacity:0;transition:background-color .3s cubic-bezier(.55,0,.55,.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:scaleX(1);transition:transform .3s cubic-bezier(.25,.8,.25,1),opacity .1s cubic-bezier(.25,.8,.25,1),background-color .3s cubic-bezier(.25,.8,.25,1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-label-wrapper .mat-icon,.mat-form-field-subscript-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}",".mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}@media (-ms-high-contrast:active){.mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:'';display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}@media (-ms-high-contrast:active){.mat-form-field-appearance-fill .mat-form-field-ripple{height:0;border-top:solid 2px}}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity .6s cubic-bezier(.25,.8,.25,1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}",".mat-input-element{font:inherit;background:0 0;color:currentColor;border:none;outline:0;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=month]::after,.mat-input-element[type=time]::after,.mat-input-element[type=week]::after{content:' ';white-space:pre;width:1px}.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button,.mat-input-element::-webkit-inner-spin-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-input-element::placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-input-element::-moz-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-input-element::-webkit-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-input-element:-ms-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent!important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent!important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent!important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent!important;-webkit-text-fill-color:transparent;transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-ms-expand{display:none}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}select.mat-input-element::-ms-value{color:inherit;background:0 0}@media (-ms-high-contrast:active){.mat-focused select.mat-input-element::-ms-value{color:inherit}}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:'';width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}",".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px);-ms-transform:none}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}@media (-ms-high-contrast:active){.mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}@media (-ms-high-contrast:active){.mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}@media (-ms-high-contrast:active){.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-start{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start{border-width:2px;transition:border-color .3s cubic-bezier(.25,.8,.25,1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity .1s cubic-bezier(.25,.8,.25,1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity .6s cubic-bezier(.25,.8,.25,1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline{transition:none}",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}@media (-ms-high-contrast:active){.mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}@media (-ms-high-contrast:active){.mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:2px}}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}@media (-ms-high-contrast:active){.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity .6s cubic-bezier(.25,.8,.25,1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}"],data:{animation:[{type:7,name:"transitionMessages",definitions:[{type:0,name:"enter",styles:{type:6,styles:{opacity:1,transform:"translateY(0%)"},offset:null},options:void 0},{type:1,expr:"void => enter",animation:[{type:6,styles:{opacity:0,transform:"translateY(-100%)"},offset:null},{type:4,styles:null,timings:"300ms cubic-bezier(0.55, 0, 0.55, 0.2)"}],options:null}],options:{}}]}});function oD(t){return ff(0,[(t()(),Yp(0,0,null,null,8,null,null,null,null,null,null,null)),(t()(),Yp(1,0,null,null,3,"div",[["class","mat-form-field-outline"]],null,null,null,null,null)),(t()(),Yp(2,0,null,null,0,"div",[["class","mat-form-field-outline-start"]],null,null,null,null,null)),(t()(),Yp(3,0,null,null,0,"div",[["class","mat-form-field-outline-gap"]],null,null,null,null,null)),(t()(),Yp(4,0,null,null,0,"div",[["class","mat-form-field-outline-end"]],null,null,null,null,null)),(t()(),Yp(5,0,null,null,3,"div",[["class","mat-form-field-outline mat-form-field-outline-thick"]],null,null,null,null,null)),(t()(),Yp(6,0,null,null,0,"div",[["class","mat-form-field-outline-start"]],null,null,null,null,null)),(t()(),Yp(7,0,null,null,0,"div",[["class","mat-form-field-outline-gap"]],null,null,null,null,null)),(t()(),Yp(8,0,null,null,0,"div",[["class","mat-form-field-outline-end"]],null,null,null,null,null))],null,null)}function sD(t){return ff(0,[(t()(),Yp(0,0,null,null,1,"div",[["class","mat-form-field-prefix"]],null,null,null,null,null)),sf(null,0)],null,null)}function lD(t){return ff(0,[(t()(),Yp(0,0,null,null,3,null,null,null,null,null,null,null)),sf(null,2),(t()(),Yp(2,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),hf(3,null,["",""]))],null,(function(t,e){t(e,3,0,e.component._control.placeholder)}))}function uD(t){return ff(0,[sf(null,3),(t()(),Xp(0,null,null,0))],null,null)}function cD(t){return ff(0,[(t()(),Yp(0,0,null,null,1,"span",[["aria-hidden","true"],["class","mat-placeholder-required mat-form-field-required-marker"]],null,null,null,null,null)),(t()(),hf(-1,null,[" *"]))],null,null)}function hD(t){return ff(0,[(t()(),Yp(0,0,[[4,0],["label",1]],null,8,"label",[["class","mat-form-field-label"]],[[8,"id",0],[1,"for",0],[1,"aria-owns",0],[2,"mat-empty",null],[2,"mat-form-field-empty",null],[2,"mat-accent",null],[2,"mat-warn",null]],[[null,"cdkObserveContent"]],(function(t,e,n){var r=!0;return"cdkObserveContent"===e&&(r=!1!==t.component.updateOutlineGap()&&r),r}),null,null)),_h(1,16384,null,0,ng,[],{ngSwitch:[0,"ngSwitch"]},null),_h(2,1196032,null,0,Ik,[Ek,Cu,Qd],{disabled:[0,"disabled"]},{event:"cdkObserveContent"}),(t()(),Xp(16777216,null,null,1,null,lD)),_h(4,278528,null,0,rg,[Xu,$u,ng],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),Xp(16777216,null,null,1,null,uD)),_h(6,278528,null,0,rg,[Xu,$u,ng],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),Xp(16777216,null,null,1,null,cD)),_h(8,16384,null,0,Qm,[Xu,$u],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,1,0,n._hasLabel()),t(e,2,0,"outline"!=n.appearance),t(e,4,0,!1),t(e,6,0,!0),t(e,8,0,!n.hideRequiredMarker&&n._control.required&&!n._control.disabled)}),(function(t,e){var n=e.component;t(e,0,0,n._labelId,n._control.id,n._control.id,n._control.empty&&!n._shouldAlwaysFloat,n._control.empty&&!n._shouldAlwaysFloat,"accent"==n.color,"warn"==n.color)}))}function dD(t){return ff(0,[(t()(),Yp(0,0,null,null,1,"div",[["class","mat-form-field-suffix"]],null,null,null,null,null)),sf(null,4)],null,null)}function pD(t){return ff(0,[(t()(),Yp(0,0,[[1,0],["underline",1]],null,1,"div",[["class","mat-form-field-underline"]],null,null,null,null,null)),(t()(),Yp(1,0,null,null,0,"span",[["class","mat-form-field-ripple"]],[[2,"mat-accent",null],[2,"mat-warn",null]],null,null,null,null))],null,(function(t,e){var n=e.component;t(e,1,0,"accent"==n.color,"warn"==n.color)}))}function fD(t){return ff(0,[(t()(),Yp(0,0,null,null,1,"div",[],[[24,"@transitionMessages",0]],null,null,null,null)),sf(null,5)],null,(function(t,e){t(e,0,0,e.component._subscriptAnimationState)}))}function mD(t){return ff(0,[(t()(),Yp(0,0,null,null,1,"div",[["class","mat-hint"]],[[8,"id",0]],null,null,null,null)),(t()(),hf(1,null,["",""]))],null,(function(t,e){var n=e.component;t(e,0,0,n._hintLabelId),t(e,1,0,n.hintLabel)}))}function gD(t){return ff(0,[(t()(),Yp(0,0,null,null,5,"div",[["class","mat-form-field-hint-wrapper"]],[[24,"@transitionMessages",0]],null,null,null,null)),(t()(),Xp(16777216,null,null,1,null,mD)),_h(2,16384,null,0,Qm,[Xu,$u],{ngIf:[0,"ngIf"]},null),sf(null,6),(t()(),Yp(4,0,null,null,0,"div",[["class","mat-form-field-hint-spacer"]],null,null,null,null,null)),sf(null,7)],(function(t,e){t(e,2,0,e.component.hintLabel)}),(function(t,e){t(e,0,0,e.component._subscriptAnimationState)}))}function yD(t){return ff(2,[ef(671088640,1,{underlineRef:0}),ef(402653184,2,{_connectionContainerRef:0}),ef(671088640,3,{_inputContainerRef:0}),ef(671088640,4,{_label:0}),(t()(),Yp(4,0,null,null,20,"div",[["class","mat-form-field-wrapper"]],null,null,null,null,null)),(t()(),Yp(5,0,[[2,0],["connectionContainer",1]],null,11,"div",[["class","mat-form-field-flex"]],null,[[null,"click"]],(function(t,e,n){var r=!0,i=t.component;return"click"===e&&(r=!1!==(i._control.onContainerClick&&i._control.onContainerClick(n))&&r),r}),null,null)),(t()(),Xp(16777216,null,null,1,null,oD)),_h(7,16384,null,0,Qm,[Xu,$u],{ngIf:[0,"ngIf"]},null),(t()(),Xp(16777216,null,null,1,null,sD)),_h(9,16384,null,0,Qm,[Xu,$u],{ngIf:[0,"ngIf"]},null),(t()(),Yp(10,0,[[3,0],["inputContainer",1]],null,4,"div",[["class","mat-form-field-infix"]],null,null,null,null,null)),sf(null,1),(t()(),Yp(12,0,null,null,2,"span",[["class","mat-form-field-label-wrapper"]],null,null,null,null,null)),(t()(),Xp(16777216,null,null,1,null,hD)),_h(14,16384,null,0,Qm,[Xu,$u],{ngIf:[0,"ngIf"]},null),(t()(),Xp(16777216,null,null,1,null,dD)),_h(16,16384,null,0,Qm,[Xu,$u],{ngIf:[0,"ngIf"]},null),(t()(),Xp(16777216,null,null,1,null,pD)),_h(18,16384,null,0,Qm,[Xu,$u],{ngIf:[0,"ngIf"]},null),(t()(),Yp(19,0,null,null,5,"div",[["class","mat-form-field-subscript-wrapper"]],null,null,null,null,null)),_h(20,16384,null,0,ng,[],{ngSwitch:[0,"ngSwitch"]},null),(t()(),Xp(16777216,null,null,1,null,fD)),_h(22,278528,null,0,rg,[Xu,$u,ng],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),Xp(16777216,null,null,1,null,gD)),_h(24,278528,null,0,rg,[Xu,$u,ng],{ngSwitchCase:[0,"ngSwitchCase"]},null)],(function(t,e){var n=e.component;t(e,7,0,"outline"==n.appearance),t(e,9,0,n._prefixChildren.length),t(e,14,0,n._hasFloatingLabel()),t(e,16,0,n._suffixChildren.length),t(e,18,0,"outline"!=n.appearance),t(e,20,0,n._getDisplayedMessages()),t(e,22,0,"error"),t(e,24,0,"hint")}),null)}class vD{constructor(t=!1,e,n=!0){this._multiple=t,this._emitChanges=n,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new I,this.onChange=this.changed,e&&e.length&&(t?e.forEach(t=>this._markSelected(t)):this._markSelected(e[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...t){this._verifyValueAssignment(t),t.forEach(t=>this._markSelected(t)),this._emitChangeEvent()}deselect(...t){this._verifyValueAssignment(t),t.forEach(t=>this._unmarkSelected(t)),this._emitChangeEvent()}toggle(t){this.isSelected(t)?this.deselect(t):this.select(t)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(t){return this._selection.has(t)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){this.isSelected(t)||(this._multiple||this._unmarkAll(),this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){if(t.length>1&&!this._multiple)throw Error("Cannot pass multiple values into SelectionModel with single-value mode.")}}class bD{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new wD(t,this.compare,this.keySelector))}}class wD extends m{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}class _D{constructor(t){this.durationSelector=t}call(t,e){return e.subscribe(new xD(t,this.durationSelector))}}class xD extends j{constructor(t,e){super(t),this.durationSelector=e,this.hasValue=!1}_next(t){if(this.value=t,this.hasValue=!0,!this.throttled){let n;try{const{durationSelector:e}=this;n=e(t)}catch(e){return this.destination.error(e)}const r=B(this,n);!r||r.closed?this.clearThrottle():this.add(this.throttled=r)}}clearThrottle(){const{value:t,hasValue:e,throttled:n}=this;n&&(this.remove(n),this.throttled=null,n.unsubscribe()),e&&(this.value=null,this.hasValue=!1,this.destination.next(t))}notifyNext(t,e,n,r){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function CD(t){return!l(t)&&t-parseFloat(t)+1>=0}function SD(t){const{index:e,period:n,subscriber:r}=t;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}function kD(t,e=wk){return n=()=>(function(t=0,e,n){let r=-1;return CD(e)?r=Number(e)<1?1:Number(e):D(e)&&(n=e),D(n)||(n=wk),new _(e=>{const i=CD(t)?t:+t-n.now();return n.schedule(SD,i,{index:0,period:r,subscriber:e})})})(t,e),function(t){return t.lift(new _D(n))};var n}const ED=20;let ID=(()=>{class t{constructor(t,e){this._ngZone=t,this._platform=e,this._scrolled=new I,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const e=this.scrollContainers.get(t);e&&(e.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=ED){return this._platform.isBrowser?new _(e=>{this._globalSubscription||this._addGlobalListener();const n=t>0?this._scrolled.pipe(kD(t)).subscribe(e):this._scrolled.subscribe(e);return this._scrolledCount++,()=>{n.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):xg()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,e)=>this.deregister(e)),this._scrolled.complete()}ancestorScrolled(t,e){const n=this.getAncestorScrollContainers(t);return this.scrolled(e).pipe(Rg(t=>!t||n.indexOf(t)>-1))}getAncestorScrollContainers(t){const e=[];return this.scrollContainers.forEach((n,r)=>{this._scrollableContainsElement(r,t)&&e.push(r)}),e}_scrollableContainsElement(t,e){let n=e.nativeElement,r=t.getElementRef().nativeElement;do{if(n==r)return!0}while(n=n.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>I_(window.document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt(Qd),qt($S))},providedIn:"root"}),t.ngInjectableDef=mt({factory:function(){return new t(qt(Qd),qt($S))},token:t,providedIn:"root"}),t})(),AD=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();AD.ngInjectorDef=yt({factory:function(t){return new(t||AD)},imports:[[VS,KS],VS]});let DD=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();DD.ngInjectorDef=yt({factory:function(t){return new(t||DD)},imports:[[AD],AD]});const TD=20;let ND=(()=>{class t{constructor(t,e){this._platform=t,e.runOutsideAngular(()=>{this._change=t.isBrowser?Q(I_(window,"resize"),I_(window,"orientationchange")):xg(),this._invalidateCache=this.change().subscribe(()=>this._updateViewportSize())})}ngOnDestroy(){this._invalidateCache.unsubscribe()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:e,height:n}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+n,right:t.left+e,height:n,width:e}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=document.documentElement,e=t.getBoundingClientRect();return{top:-e.top||document.body.scrollTop||window.scrollY||t.scrollTop||0,left:-e.left||document.body.scrollLeft||window.scrollX||t.scrollLeft||0}}change(t=TD){return t>0?this._change.pipe(kD(t)):this._change}_updateViewportSize(){this._viewportSize=this._platform.isBrowser?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0}}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt($S),qt(Qd))},providedIn:"root"}),t.ngInjectableDef=mt({factory:function(){return new t(qt($S),qt(Qd))},token:t,providedIn:"root"}),t})();function RD(){throw Error("Host already has a portal attached")}class OD{attach(t){return null==t&&function(){throw Error("Attempting to attach a portal to a null PortalOutlet")}(),t.hasAttached()&&RD(),this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null==t?function(){throw Error("Attempting to detach a portal that is not attached to a host")}():(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class FD extends OD{constructor(t,e,n,r){super(),this.component=t,this.viewContainerRef=e,this.injector=n,this.componentFactoryResolver=r}}class MD extends OD{constructor(t,e,n){super(),this.templateRef=t,this.viewContainerRef=e,this.context=n}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class PD{constructor(){this._isDisposed=!1}hasAttached(){return!!this._attachedPortal}attach(t){return t||function(){throw Error("Must provide a portal to attach")}(),this.hasAttached()&&RD(),this._isDisposed&&function(){throw Error("This PortalOutlet has already been disposed")}(),t instanceof FD?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof MD?(this._attachedPortal=t,this.attachTemplatePortal(t)):void function(){throw Error("Attempting to attach an unknown Portal type. BasePortalOutlet accepts either a ComponentPortal or a TemplatePortal.")}()}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class LD extends PD{constructor(t,e,n,r){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=n,this._defaultInjector=r}attachComponentPortal(t){const e=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let n;return t.viewContainerRef?(n=t.viewContainerRef.createComponent(e,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>n.destroy())):(n=e.create(t.injector||this._defaultInjector),this._appRef.attachView(n.hostView),this.setDisposeFn(()=>{this._appRef.detachView(n.hostView),n.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(n)),n}attachTemplatePortal(t){let e=t.viewContainerRef,n=e.createEmbeddedView(t.templateRef,t.context);return n.detectChanges(),n.rootNodes.forEach(t=>this.outletElement.appendChild(t)),this.setDisposeFn(()=>{let t=e.indexOf(n);-1!==t&&e.remove(t)}),n}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let zD=(()=>{class t extends PD{constructor(t,e){super(),this._componentFactoryResolver=t,this._viewContainerRef=e,this._isInitialized=!1,this.attached=new Qh}get portal(){return this._attachedPortal}set portal(t){(!this.hasAttached()||t||this._isInitialized)&&(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const e=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,n=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),r=e.createComponent(n,e.length,t.injector||e.injector);return super.setDisposeFn(()=>r.destroy()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}attachTemplatePortal(t){t.setAttachedHost(this);const e=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=e,this.attached.emit(e),e}}return t.ngDirectiveDef=ye({type:t,selectors:[["","cdkPortalOutlet",""]],factory:function(e){return new(e||t)(rl(wu),rl(Xu))},inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[ru]}),t})(),VD=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();VD.ngInjectorDef=yt({factory:function(t){return new(t||VD)}});class BD{constructor(t,e){this._parentInjector=t,this._customTokens=e}get(t,e){const n=this._customTokens.get(t);return void 0!==n?n:this._parentInjector.get(t,e)}}class jD{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=WS(-this._previousScrollPosition.left),t.style.top=WS(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,e=t.style,n=this._document.body.style,r=e.scrollBehavior||"",i=n.scrollBehavior||"";this._isEnabled=!1,e.left=this._previousHTMLStyles.left,e.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),e.scrollBehavior=n.scrollBehavior="auto",window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),e.scrollBehavior=r,n.scrollBehavior=i}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,e=this._viewportRuler.getViewportSize();return t.scrollHeight>e.height||t.scrollWidth>e.width}}function UD(){return Error("Scroll strategy has already been attached.")}class WD{constructor(t,e,n,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=n,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){if(this._overlayRef)throw UD();this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class HD{enable(){}disable(){}attach(){}}function qD(t,e){return e.some(e=>t.bottom<e.top||t.top>e.bottom||t.right<e.left||t.left>e.right)}function GD(t,e){return e.some(e=>t.top<e.top||t.bottom>e.bottom||t.left<e.left||t.right>e.right)}class $D{constructor(t,e,n,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this._config=r,this._scrollSubscription=null}attach(t){if(this._overlayRef)throw UD();this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:e,height:n}=this._viewportRuler.getViewportSize();qD(t,[{width:e,height:n,bottom:n,right:e,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let KD=(()=>{class t{constructor(t,e,n,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this.noop=()=>new HD,this.close=t=>new WD(this._scrollDispatcher,this._ngZone,this._viewportRuler,t),this.block=()=>new jD(this._viewportRuler,this._document),this.reposition=t=>new $D(this._scrollDispatcher,this._viewportRuler,this._ngZone,t),this._document=r}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt(ID),qt(ND),qt(Qd),qt(fg))},providedIn:"root"}),t.ngInjectableDef=mt({factory:function(){return new t(qt(ID),qt(ND),qt(Qd),qt(fg))},token:t,providedIn:"root"}),t})();class XD{constructor(t){if(this.scrollStrategy=new HD,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const n of e)void 0!==t[n]&&(this[n]=t[n])}}}class YD{constructor(t,e,n,r,i){this.offsetX=n,this.offsetY=r,this.panelClass=i,this.originX=t.originX,this.originY=t.originY,this.overlayX=e.overlayX,this.overlayY=e.overlayY}}class ZD{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}function QD(t,e){if("top"!==e&&"bottom"!==e&&"center"!==e)throw Error(`ConnectedPosition: Invalid ${t} "${e}". `+'Expected "top", "bottom" or "center".')}function JD(t,e){if("start"!==e&&"end"!==e&&"center"!==e)throw Error(`ConnectedPosition: Invalid ${t} "${e}". `+'Expected "start", "end" or "center".')}let tT=(()=>{class t{constructor(t){this._attachedOverlays=[],this._keydownListener=t=>{const e=this._attachedOverlays;for(let n=e.length-1;n>-1;n--)if(e[n]._keydownEventSubscriptions>0){e[n]._keydownEvents.next(t);break}},this._document=t}ngOnDestroy(){this._detach()}add(t){this.remove(t),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0),this._attachedOverlays.push(t)}remove(t){const e=this._attachedOverlays.indexOf(t);e>-1&&this._attachedOverlays.splice(e,1),0===this._attachedOverlays.length&&this._detach()}_detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt(fg))},providedIn:"root"}),t.ngInjectableDef=mt({factory:function(){return new t(qt(fg))},token:t,providedIn:"root"}),t})(),eT=(()=>{class t{constructor(t){this._document=t}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.getElementsByClassName("cdk-overlay-container");for(let n=0;n<t.length;n++)t[n].parentNode.removeChild(t[n]);const e=this._document.createElement("div");e.classList.add("cdk-overlay-container"),this._document.body.appendChild(e),this._containerElement=e}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt(fg))},providedIn:"root"}),t.ngInjectableDef=mt({factory:function(){return new t(qt(fg))},token:t,providedIn:"root"}),t})();class nT{constructor(t,e,n,r,i,a,o,s){this._portalOutlet=t,this._host=e,this._pane=n,this._config=r,this._ngZone=i,this._keyboardDispatcher=a,this._document=o,this._location=s,this._backdropElement=null,this._backdropClick=new I,this._attachments=new I,this._detachments=new I,this._locationChanges=d.EMPTY,this._backdropClickHandler=t=>this._backdropClick.next(t),this._keydownEventsObservable=new _(t=>{const e=this._keydownEvents.subscribe(t);return this._keydownEventSubscriptions++,()=>{e.unsubscribe(),this._keydownEventSubscriptions--}}),this._keydownEvents=new I,this._keydownEventSubscriptions=0,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){let e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.asObservable().pipe(Qg(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&this._location&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this.detachBackdrop(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick.asObservable()}attachments(){return this._attachments.asObservable()}detachments(){return this._detachments.asObservable()}keydownEvents(){return this._keydownEventsObservable}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=Object.assign({},this._config,t),this._updateElementSize()}setDirection(t){this._config=Object.assign({},this._config,{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=WS(this._config.width),t.height=WS(this._config.height),t.minWidth=WS(this._config.minWidth),t.minHeight=WS(this._config.minHeight),t.maxWidth=WS(this._config.maxWidth),t.maxHeight=WS(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"auto":"none"}_attachBackdrop(){this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add("cdk-overlay-backdrop-showing")})}):this._backdropElement.classList.add("cdk-overlay-backdrop-showing")}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let t,e=this._backdropElement;if(!e)return;let n=()=>{e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",n),e.parentNode&&e.parentNode.removeChild(e)),this._backdropElement==e&&(this._backdropElement=null),this._config.backdropClass&&this._toggleClasses(e,this._config.backdropClass,!1),clearTimeout(t)};e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",n)}),e.style.pointerEvents="none",t=this._ngZone.runOutsideAngular(()=>setTimeout(n,500))}_toggleClasses(t,e,n){const r=t.classList;US(e).forEach(t=>{t&&(n?r.add(t):r.remove(t))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.asObservable().pipe(VI(Q(this._attachments,this._detachments))).subscribe(()=>{this._pane&&this._host&&0!==this._pane.children.length||(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}}const rT="cdk-overlay-connected-position-bounding-box";class iT{constructor(t,e,n,r,i){this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=i,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new I,this._resizeSubscription=d.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges.asObservable(),this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){if(this._overlayRef&&t!==this._overlayRef)throw Error("This position strategy is already attached to an overlay");this._validatePositions(),t.hostElement.classList.add(rT),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const t=this._originRect,e=this._overlayRect,n=this._viewportRect,r=[];let i;for(let a of this._preferredPositions){let o=this._getOriginPoint(t,a),s=this._getOverlayPoint(o,e,a),l=this._getOverlayFit(s,e,n,a);if(l.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,o);this._canFitWithFlexibleDimensions(l,s,n)?r.push({position:a,origin:o,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(o,a)}):(!i||i.overlayFit.visibleArea<l.visibleArea)&&(i={overlayFit:l,overlayPoint:s,originPoint:o,position:a,overlayRect:e})}if(r.length){let t=null,e=-1;for(const n of r){const r=n.boundingBoxRect.width*n.boundingBoxRect.height*(n.position.weight||1);r>e&&(e=r,t=n)}return this._isPushed=!1,void this._applyPosition(t.position,t.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(i.position,i.originPoint);this._applyPosition(i.position,i.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&aT(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(rT),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const t=this._lastPosition||this._preferredPositions[0],e=this._getOriginPoint(this._originRect,t);this._applyPosition(t,e)}}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e){let n,r;if("center"==e.originX)n=t.left+t.width/2;else{const r=this._isRtl()?t.right:t.left,i=this._isRtl()?t.left:t.right;n="start"==e.originX?r:i}return{x:n,y:r="center"==e.originY?t.top+t.height/2:"top"==e.originY?t.top:t.bottom}}_getOverlayPoint(t,e,n){let r,i;return r="center"==n.overlayX?-e.width/2:"start"===n.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,{x:t.x+r,y:t.y+(i="center"==n.overlayY?-e.height/2:"top"==n.overlayY?0:-e.height)}}_getOverlayFit(t,e,n,r){let{x:i,y:a}=t,o=this._getOffset(r,"x"),s=this._getOffset(r,"y");o&&(i+=o),s&&(a+=s);let l=0-a,u=a+e.height-n.height,c=this._subtractOverflows(e.width,0-i,i+e.width-n.width),h=this._subtractOverflows(e.height,l,u),d=c*h;return{visibleArea:d,isCompletelyWithinViewport:e.width*e.height===d,fitsInViewportVertically:h===e.height,fitsInViewportHorizontally:c==e.width}}_canFitWithFlexibleDimensions(t,e,n){if(this._hasFlexibleDimensions){const r=n.bottom-e.y,i=n.right-e.x,a=this._overlayRef.getConfig().minHeight,o=this._overlayRef.getConfig().minWidth,s=t.fitsInViewportHorizontally||null!=o&&o<=i;return(t.fitsInViewportVertically||null!=a&&a<=r)&&s}return!1}_pushOverlayOnScreen(t,e,n){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const r=this._viewportRect,i=Math.max(t.x+e.width-r.right,0),a=Math.max(t.y+e.height-r.bottom,0),o=Math.max(r.top-n.top-t.y,0),s=Math.max(r.left-n.left-t.x,0);let l=0,u=0;return this._previousPushAmount={x:l=e.width<=r.width?s||-i:t.x<this._viewportMargin?r.left-n.left-t.x:0,y:u=e.height<=r.height?o||-a:t.y<this._viewportMargin?r.top-n.top-t.y:0},{x:t.x+l,y:t.y+u}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const e=this._getScrollVisibility(),n=new ZD(t,e);this._positionChanges.next(n)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,r=t.overlayY;n="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let i=0;i<e.length;i++)e[i].style.transformOrigin=`${n} ${r}`}_calculateBoundingBoxRect(t,e){const n=this._viewportRect,r=this._isRtl();let i,a,o,s,l,u;if("top"===e.overlayY)i=n.height-(a=t.y)+this._viewportMargin;else if("bottom"===e.overlayY)i=n.height-(o=n.height-t.y+2*this._viewportMargin)+this._viewportMargin;else{const e=Math.min(n.bottom-t.y+n.top,t.y),r=this._lastBoundingBoxSize.height;a=t.y-e,(i=2*e)>r&&!this._isInitialRender&&!this._growAfterOpen&&(a=t.y-r/2)}if("end"===e.overlayX&&!r||"start"===e.overlayX&&r)u=n.width-t.x+this._viewportMargin,s=t.x-this._viewportMargin;else if("start"===e.overlayX&&!r||"end"===e.overlayX&&r)l=t.x,s=n.right-t.x;else{const e=Math.min(n.right-t.x+n.left,t.x),r=this._lastBoundingBoxSize.width;l=t.x-e,(s=2*e)>r&&!this._isInitialRender&&!this._growAfterOpen&&(l=t.x-r/2)}return{top:a,left:l,bottom:o,right:u,width:s,height:i}}_setBoundingBoxStyles(t,e){const n=this._calculateBoundingBoxRect(t,e);this._isInitialRender||this._growAfterOpen||(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right="",r.width=r.height="100%";else{const t=this._overlayRef.getConfig().maxHeight,i=this._overlayRef.getConfig().maxWidth;r.height=WS(n.height),r.top=WS(n.top),r.bottom=WS(n.bottom),r.width=WS(n.width),r.left=WS(n.left),r.right=WS(n.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",t&&(r.maxHeight=WS(t)),i&&(r.maxWidth=WS(i))}this._lastBoundingBoxSize=n,aT(this._boundingBox.style,r)}_resetBoundingBoxStyles(){aT(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){aT(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const n={};if(this._hasExactPosition()){const r=this._viewportRuler.getViewportScrollPosition();aT(n,this._getExactOverlayY(e,t,r)),aT(n,this._getExactOverlayX(e,t,r))}else n.position="static";let r="",i=this._getOffset(e,"x"),a=this._getOffset(e,"y");i&&(r+=`translateX(${i}px) `),a&&(r+=`translateY(${a}px)`),n.transform=r.trim(),this._hasFlexibleDimensions&&this._overlayRef.getConfig().maxHeight&&(n.maxHeight=""),this._hasFlexibleDimensions&&this._overlayRef.getConfig().maxWidth&&(n.maxWidth=""),aT(this._pane.style,n)}_getExactOverlayY(t,e,n){let r={top:null,bottom:null},i=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(i=this._pushOverlayOnScreen(i,this._overlayRect,n));let a=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return i.y-=a,"bottom"===t.overlayY?r.bottom=`${this._document.documentElement.clientHeight-(i.y+this._overlayRect.height)}px`:r.top=WS(i.y),r}_getExactOverlayX(t,e,n){let r,i={left:null,right:null},a=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(a=this._pushOverlayOnScreen(a,this._overlayRect,n)),"right"==(r=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left")?i.right=`${this._document.documentElement.clientWidth-(a.x+this._overlayRect.width)}px`:i.left=WS(a.x),i}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),n=this._scrollables.map(t=>t.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:GD(t,n),isOriginOutsideView:qD(t,n),isOverlayClipped:GD(e,n),isOverlayOutsideView:qD(e,n)}}_subtractOverflows(t,...e){return e.reduce((t,e)=>t-Math.max(e,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+t-this._viewportMargin,bottom:n.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){if(!this._preferredPositions.length)throw Error("FlexibleConnectedPositionStrategy: At least one position is required.");this._preferredPositions.forEach(t=>{JD("originX",t.originX),QD("originY",t.originY),JD("overlayX",t.overlayX),QD("overlayY",t.overlayY)})}_addPanelClasses(t){this._pane&&US(t).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof Cu)return t.nativeElement.getBoundingClientRect();if(t instanceof HTMLElement)return t.getBoundingClientRect();const e=t.width||0,n=t.height||0;return{top:t.y,bottom:t.y+n,left:t.x,right:t.x+e,height:n,width:e}}}function aT(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}class oT{constructor(t,e,n,r,i,a,o){this._preferredPositions=[],this._positionStrategy=new iT(n,r,i,a,o).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(t,e)}get _isRtl(){return"rtl"===this._overlayRef.getDirection()}get onPositionChange(){return this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(t){this._overlayRef=t,this._positionStrategy.attach(t),this._direction&&(t.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(t){this._positionStrategy.withScrollableContainers(t)}withFallbackPosition(t,e,n,r){const i=new YD(t,e,n,r);return this._preferredPositions.push(i),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(t){return this._overlayRef?this._overlayRef.setDirection(t):this._direction=t,this}withOffsetX(t){return this._positionStrategy.withDefaultOffsetX(t),this}withOffsetY(t){return this._positionStrategy.withDefaultOffsetY(t),this}withLockedPosition(t){return this._positionStrategy.withLockedPosition(t),this}withPositions(t){return this._preferredPositions=t.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(t){return this._positionStrategy.setOrigin(t),this}}const sT="cdk-global-overlay-wrapper";class lT{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(sT),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._justifyContent="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig();t.position=this._cssPosition,t.marginLeft="100%"===n.width?"0":this._leftOffset,t.marginTop="100%"===n.height?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,"100%"===n.width?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems="100%"===n.height?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,n=e.style;e.classList.remove(sT),n.justifyContent=n.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let uT=(()=>{class t{constructor(t,e,n,r){this._viewportRuler=t,this._document=e,this._platform=n,this._overlayContainer=r}global(){return new lT}connectedTo(t,e,n){return new oT(e,n,t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(t){return new iT(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt(ND),qt(fg),qt($S),qt(eT))},providedIn:"root"}),t.ngInjectableDef=mt({factory:function(){return new t(qt(ND),qt(fg),qt($S),qt(eT))},token:t,providedIn:"root"}),t})(),cT=0,hT=(()=>{class t{constructor(t,e,n,r,i,a,o,s,l,u){this.scrollStrategies=t,this._overlayContainer=e,this._componentFactoryResolver=n,this._positionBuilder=r,this._keyboardDispatcher=i,this._injector=a,this._ngZone=o,this._document=s,this._directionality=l,this._location=u}create(t){const e=this._createHostElement(),n=this._createPaneElement(e),r=this._createPortalOutlet(n),i=new XD(t);return i.direction=i.direction||this._directionality.value,new nT(r,e,n,i,this._ngZone,this._keyboardDispatcher,this._document,this._location)}position(){return this._positionBuilder}_createPaneElement(t){const e=this._document.createElement("div");return e.id=`cdk-overlay-${cT++}`,e.classList.add("cdk-overlay-pane"),t.appendChild(e),e}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(vp)),new LD(t,this._componentFactoryResolver,this._appRef,this._injector)}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt(KD),qt(eT),qt(wu),qt(uT),qt(tT),qt(Ls),qt(Qd),qt(fg),qt(zS),qt(Im,8))},providedIn:null}),t})();const dT=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],pT=new Nt("cdk-connected-overlay-scroll-strategy");let fT=(()=>{class t{constructor(t){this.elementRef=t}}return t.ngDirectiveDef=ye({type:t,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],factory:function(e){return new(e||t)(rl(Cu))},exportAs:["cdkOverlayOrigin"]}),t})(),mT=(()=>{class t{constructor(t,e,n,r,i){this._overlay=t,this._dir=i,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=d.EMPTY,this.viewportMargin=0,this.open=!1,this.backdropClick=new Qh,this.positionChange=new Qh,this.attach=new Qh,this.detach=new Qh,this.overlayKeydown=new Qh,this._templatePortal=new MD(e,n),this._scrollStrategyFactory=r,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(t){this._offsetX=t,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(t){this._offsetY=t,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=jS(t)}get lockPosition(){return this._lockPosition}set lockPosition(t){this._lockPosition=jS(t)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(t){this._flexibleDimensions=jS(t)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(t){this._growAfterOpen=jS(t)}get push(){return this._push}set push(t){this._push=jS(t)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._overlayRef&&this._overlayRef.dispose(),this._backdropSubscription.unsubscribe()}ngOnChanges(t){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),t.origin&&this.open&&this._position.apply()),t.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){this.positions&&this.positions.length||(this.positions=dT),this._overlayRef=this._overlay.create(this._buildConfig()),this._overlayRef.keydownEvents().subscribe(t=>{this.overlayKeydown.next(t),t.keyCode!==ek||mk(t)||(t.preventDefault(),this._detachOverlay())})}_buildConfig(){const t=this._position=this._createPositionStrategy(),e=new XD({direction:this._dir,positionStrategy:t,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(e.width=this.width),(this.height||0===this.height)&&(e.height=this.height),(this.minWidth||0===this.minWidth)&&(e.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(e.minHeight=this.minHeight),this.backdropClass&&(e.backdropClass=this.backdropClass),this.panelClass&&(e.panelClass=this.panelClass),e}_updatePositionStrategy(t){const e=this.positions.map(t=>({originX:t.originX,originY:t.originY,overlayX:t.overlayX,overlayY:t.overlayY,offsetX:t.offsetX||this.offsetX,offsetY:t.offsetY||this.offsetY,panelClass:t.panelClass||void 0}));return t.setOrigin(this.origin.elementRef).withPositions(e).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition)}_createPositionStrategy(){const t=this._overlay.position().flexibleConnectedTo(this.origin.elementRef);return this._updatePositionStrategy(t),t.positionChanges.subscribe(t=>this.positionChange.emit(t)),t}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||(this._overlayRef.attach(this._templatePortal),this.attach.emit()),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(t=>{this.backdropClick.emit(t)}):this._backdropSubscription.unsubscribe()}_detachOverlay(){this._overlayRef&&(this._overlayRef.detach(),this.detach.emit()),this._backdropSubscription.unsubscribe()}}return t.ngDirectiveDef=ye({type:t,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],factory:function(e){return new(e||t)(rl(hT),rl($u),rl(Xu),rl(pT),rl(zS,8))},inputs:{viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],open:["cdkConnectedOverlayOpen","open"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"],positions:["cdkConnectedOverlayPositions","positions"],origin:["cdkConnectedOverlayOrigin","origin"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown"},exportAs:["cdkConnectedOverlay"],features:[Ql()]}),t})();function gT(t){return()=>t.scrollStrategies.reposition()}const yT={provide:pT,deps:[hT],useFactory:gT};let vT=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();vT.ngInjectorDef=yt({factory:function(t){return new(t||vT)},providers:[hT,yT],imports:[[VS,VD,AD],AD]});class bT extends j{constructor(t,e){super(t),this.sources=e,this.completed=0,this.haveValues=0;const n=e.length;this.values=new Array(n);for(let r=0;r<n;r++){const t=B(this,e[r],null,r);t&&this.add(t)}}notifyNext(t,e,n,r,i){this.values[n]=e,i._hasValue||(i._hasValue=!0,this.haveValues++)}notifyComplete(t){const{destination:e,haveValues:n,values:r}=this,i=r.length;t._hasValue?(this.completed++,this.completed===i&&(n===i&&e.next(r),e.complete())):e.complete()}}const wT=new Nt("NgValueAccessor"),_T={provide:wT,useExisting:St(()=>xT),multi:!0};let xT=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.ngDirectiveDef=ye({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],factory:function(e){return new(e||t)(rl(Au),rl(Cu))},hostBindings:function(t,e,n){1&t&&(Tl("change",(function(t){return e.onChange(t.target.checked)})),Tl("blur",(function(t){return e.onTouched()})))},features:[fu([_T])]}),t})();const CT={provide:wT,useExisting:St(()=>kT),multi:!0},ST=new Nt("CompositionEventMode");let kT=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=gy()?gy().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.ngDirectiveDef=ye({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],factory:function(e){return new(e||t)(rl(Au),rl(Cu),rl(ST,8))},hostBindings:function(t,e,n){1&t&&(Tl("input",(function(t){return e._handleInput(t.target.value)})),Tl("blur",(function(t){return e.onTouched()})),Tl("compositionstart",(function(t){return e._compositionStart()})),Tl("compositionend",(function(t){return e._compositionEnd(t.target.value)})))},features:[fu([CT])]}),t})();class ET{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class IT extends ET{get formDirective(){return null}get path(){return null}}function AT(){throw new Error("unimplemented")}class DT extends ET{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){return AT()}get asyncValidator(){return AT()}}class TT{constructor(t){this._cd=t}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}let NT=(()=>{class t extends TT{constructor(t){super(t)}}return t.ngDirectiveDef=ye({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],factory:function(e){return new(e||t)(rl(DT,2))},hostBindings:function(t,e,n){1&t&&(Us(7),al()),2&t&&(sl("ng-untouched",e.ngClassUntouched),sl("ng-touched",e.ngClassTouched),sl("ng-pristine",e.ngClassPristine),sl("ng-dirty",e.ngClassDirty),sl("ng-valid",e.ngClassValid),sl("ng-invalid",e.ngClassInvalid),sl("ng-pending",e.ngClassPending),dl())},features:[ru]}),t})();function RT(t){return null==t||0===t.length}const OT=new Nt("NgValidators"),FT=new Nt("NgAsyncValidators"),MT=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class PT{static min(t){return e=>{if(RT(e.value)||RT(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(RT(e.value)||RT(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return RT(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return RT(t.value)?null:MT.test(t.value)?null:{email:!0}}static minLength(t){return e=>{if(RT(e.value))return null;const n=e.value?e.value.length:0;return n<t?{minlength:{requiredLength:t,actualLength:n}}:null}}static maxLength(t){return e=>{const n=e.value?e.value.length:0;return n>t?{maxlength:{requiredLength:t,actualLength:n}}:null}}static pattern(t){if(!t)return PT.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(RT(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(LT);return 0==e.length?null:function(t){return VT(function(t,e){return e.map(e=>e(t))}(t,e))}}static composeAsync(t){if(!t)return null;const e=t.filter(LT);return 0==e.length?null:function(t){return function t(...e){let n;return"function"==typeof e[e.length-1]&&(n=e.pop()),1===e.length&&l(e[0])&&(e=e[0]),0===e.length?bg:n?t(e).pipe(U(t=>n(...t))):new _(t=>new bT(t,e))}(function(t,e){return e.map(e=>e(t))}(t,e).map(zT)).pipe(U(VT))}}}function LT(t){return null!=t}function zT(t){const e=Al(t)?G(t):t;if(!Dl(e))throw new Error("Expected validator to return Promise or Observable.");return e}function VT(t){const e=t.reduce((t,e)=>null!=e?Object.assign({},t,e):t,{});return 0===Object.keys(e).length?null:e}function BT(t){return t.validate?e=>t.validate(e):t}function jT(t){return t.validate?e=>t.validate(e):t}const UT={provide:wT,useExisting:St(()=>WT),multi:!0};let WT=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.ngDirectiveDef=ye({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],factory:function(e){return new(e||t)(rl(Au),rl(Cu))},hostBindings:function(t,e,n){1&t&&(Tl("change",(function(t){return e.onChange(t.target.value)})),Tl("input",(function(t){return e.onChange(t.target.value)})),Tl("blur",(function(t){return e.onTouched()})))},features:[fu([UT])]}),t})();const HT={provide:wT,useExisting:St(()=>GT),multi:!0};let qT=(()=>{class t{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)},providedIn:null}),t})(),GT=(()=>{class t{constructor(t,e,n,r){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(DT),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}_throwNameError(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}return t.ngDirectiveDef=ye({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],factory:function(e){return new(e||t)(rl(Au),rl(Cu),rl(qT),rl(Ls))},hostBindings:function(t,e,n){1&t&&(Tl("change",(function(t){return e.onChange()})),Tl("blur",(function(t){return e.onTouched()})))},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[fu([HT])]}),t})();const $T={provide:wT,useExisting:St(()=>KT),multi:!0};let KT=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.ngDirectiveDef=ye({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],factory:function(e){return new(e||t)(rl(Au),rl(Cu))},hostBindings:function(t,e,n){1&t&&(Tl("change",(function(t){return e.onChange(t.target.value)})),Tl("input",(function(t){return e.onChange(t.target.value)})),Tl("blur",(function(t){return e.onTouched()})))},features:[fu([$T])]}),t})();const XT={formControlName:'\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',formGroupName:'\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',formArrayName:'\n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });',ngModelGroup:'\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',ngModelWithFormGroup:'\n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  '};class YT{static controlParentException(){throw new Error(`formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ${XT.formControlName}`)}static ngModelGroupException(){throw new Error(`formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        ${XT.formGroupName}\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        ${XT.ngModelGroup}`)}static missingFormException(){throw new Error(`formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       ${XT.formControlName}`)}static groupParentException(){throw new Error(`formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ${XT.formGroupName}`)}static arrayParentException(){throw new Error(`formArrayName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        ${XT.formArrayName}`)}static disabledAttrWarning(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")}static ngModelWarning(t){console.warn(`\n    It looks like you're using ngModel on the same form field as ${t}. \n    Support for using the ngModel input property and ngModelChange event with \n    reactive form directives has been deprecated in Angular v6 and will be removed \n    in Angular v7.\n    \n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/${"formControl"===t?"FormControlDirective":"FormControlName"}#use-with-ngmodel\n    `)}}const ZT={provide:wT,useExisting:St(()=>QT),multi:!0};let QT=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=qs}set compareWith(t){if("function"!=typeof t)throw new Error(`compareWith must be a function, but received ${JSON.stringify(t)}`);this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=function(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.ngDirectiveDef=ye({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],factory:function(e){return new(e||t)(rl(Au),rl(Cu))},hostBindings:function(t,e,n){1&t&&(Tl("change",(function(t){return e.onChange(t.target.value)})),Tl("blur",(function(t){return e.onTouched()})))},inputs:{compareWith:"compareWith"},features:[fu([ZT])]}),t})();const JT={provide:wT,useExisting:St(()=>tN),multi:!0};let tN=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=qs}set compareWith(t){if("function"!=typeof t)throw new Error(`compareWith must be a function, but received ${JSON.stringify(t)}`);this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(e.hasOwnProperty("selectedOptions")){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.ngDirectiveDef=ye({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],factory:function(e){return new(e||t)(rl(Au),rl(Cu))},hostBindings:function(t,e,n){1&t&&(Tl("change",(function(t){return e.onChange(t.target)})),Tl("blur",(function(t){return e.onTouched()})))},inputs:{compareWith:"compareWith"},features:[fu([JT])]}),t})();function eN(t,e){return[...e.path,t]}function nN(t,e){t||oN(e,"Cannot find control with"),e.valueAccessor||oN(e,"No value accessor for form control with"),t.validator=PT.compose([t.validator,e.validator]),t.asyncValidator=PT.composeAsync([t.asyncValidator,e.asyncValidator]),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&rN(t,e)})}(t,e),function(t,e){t.registerOnChange((t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&rN(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),e.valueAccessor.setDisabledState&&t.registerOnDisabledChange(t=>{e.valueAccessor.setDisabledState(t)}),e._rawValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())}),e._rawAsyncValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())})}function rN(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function iN(t,e){null==t&&oN(e,"Cannot find control with"),t.validator=PT.compose([t.validator,e.validator]),t.asyncValidator=PT.composeAsync([t.asyncValidator,e.asyncValidator])}function aN(t){return oN(t,"There is no FormControl instance attached to form control element with")}function oN(t,e){let n;throw n=t.path.length>1?`path: '${t.path.join(" -> ")}'`:t.path[0]?`name: '${t.path}'`:"unspecified name attribute",new Error(`${e} ${n}`)}function sN(t){return null!=t?PT.compose(t.map(BT)):null}function lN(t){return null!=t?PT.composeAsync(t.map(jT)):null}const uN=[xT,KT,WT,QT,tN,GT];function cN(t,e){t._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)})}function hN(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const dN="VALID",pN="INVALID",fN="PENDING",mN="DISABLED";function gN(t){const e=vN(t)?t.validators:t;return Array.isArray(e)?sN(e):e||null}function yN(t,e){const n=vN(e)?e.asyncValidators:t;return Array.isArray(n)?lN(n):n||null}function vN(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class bN{constructor(t,e){this.validator=t,this.asyncValidator=e,this._onCollectionChange=()=>{},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}get parent(){return this._parent}get valid(){return this.status===dN}get invalid(){return this.status===pN}get pending(){return this.status==fN}get disabled(){return this.status===mN}get enabled(){return this.status!==mN}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this.validator=gN(t)}setAsyncValidators(t){this.asyncValidator=yN(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=fN,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=mN,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign({},t,{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign({},t,{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=dN,this._forEachChild(e=>{e.enable(Object.assign({},t,{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign({},t,{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==dN&&this.status!==fN||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?mN:dN}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=fN;const e=zT(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>this.setErrors(e,{emitEvent:t}))}}_cancelExistingSubscription(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){return null==e?null:(e instanceof Array||(e=e.split(".")),e instanceof Array&&0===e.length?null:e.reduce((t,e)=>t instanceof _N?t.controls.hasOwnProperty(e)?t.controls[e]:null:t instanceof xN&&t.at(e)||null,t))}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Qh,this.statusChanges=new Qh}_calculateStatus(){return this._allControlsDisabled()?mN:this.errors?pN:this._anyControlsHaveStatus(fN)?fN:this._anyControlsHaveStatus(pN)?pN:dN}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){vN(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}class wN extends bN{constructor(t=null,e,n){super(gN(e),yN(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=()=>{}}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class _N extends bN{constructor(t,e,n){super(gN(e),yN(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof wN?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>t(this.controls[e],e))}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){let e=!1;return this._forEachChild((n,r)=>{e=e||this.contains(r)&&t(n)}),e}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class xN extends bN{constructor(t,e,n){super(gN(e),yN(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof wN?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const CN={provide:IT,useExisting:St(()=>kN)},SN=(()=>Promise.resolve(null))();let kN=(()=>{class t extends IT{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new Qh,this.form=new _N({},sN(t),lN(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){SN.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),nN(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){SN.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),hN(this._directives,t)})}addFormGroup(t){SN.then(()=>{const e=this._findContainer(t.path),n=new _N({});iN(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){SN.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){SN.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,cN(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return t.ngDirectiveDef=ye({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ngForm"],["ng-form"],["","ngForm",""]],factory:function(e){return new(e||t)(rl(OT,10),rl(FT,10))},hostBindings:function(t,e,n){1&t&&(Tl("submit",(function(t){return e.onSubmit(t)})),Tl("reset",(function(t){return e.onReset()})))},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[fu([CN]),ru]}),t})();class EN{static modelParentException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup's partner directive "formControlName" instead.  Example:\n\n      ${XT.formControlName}\n\n      Or, if you'd like to avoid registering this form control, indicate that it's standalone in ngModelOptions:\n\n      Example:\n\n      ${XT.ngModelWithFormGroup}`)}static formGroupNameException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      ${XT.formGroupName}\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      ${XT.ngModelGroup}`)}static missingNameException(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')}static modelGroupParentException(){throw new Error(`\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      ${XT.formGroupName}\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      ${XT.ngModelGroup}`)}static ngFormWarning(){console.warn("\n    It looks like you're using 'ngForm'.\n\n    Support for using the 'ngForm' element selector has been deprecated in Angular v6 and will be removed\n    in Angular v9.\n\n    Use 'ng-form' instead.\n\n    Before:\n    <ngForm #myForm=\"ngForm\">\n\n    After:\n    <ng-form #myForm=\"ngForm\">\n    ")}}const IN=new Nt("NgFormSelectorWarning");class AN extends IT{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return eN(this.name,this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return sN(this._validators)}get asyncValidator(){return lN(this._asyncValidators)}_checkParentType(){}}const DN={provide:IT,useExisting:St(()=>TN)};let TN=(()=>{class t extends AN{constructor(t,e,n){super(),this._parent=t,this._validators=e,this._asyncValidators=n}_checkParentType(){this._parent instanceof t||this._parent instanceof kN||EN.modelGroupParentException()}}return t.ngDirectiveDef=ye({type:t,selectors:[["","ngModelGroup",""]],factory:function(e){return new(e||t)(rl(IT,5),rl(OT,10),rl(FT,10))},inputs:{name:["ngModelGroup","name"]},exportAs:["ngModelGroup"],features:[fu([DN]),ru]}),t})();const NN={provide:DT,useExisting:St(()=>ON)},RN=(()=>Promise.resolve(null))();let ON=(()=>{class t extends DT{constructor(t,e,n,r){super(),this.control=new wN,this._registered=!1,this.update=new Qh,this._parent=t,this._rawValidators=e||[],this._rawAsyncValidators=n||[],this.valueAccessor=function(t,e){if(!e)return null;Array.isArray(e)||oN(t,"Value accessor was not provided as an array for form control with");let n=void 0,r=void 0,i=void 0;return e.forEach(e=>{e.constructor===kT?n=e:function(t){return uN.some(e=>t.constructor===e)}(e)?(r&&oN(t,"More than one built-in value accessor matches form control with"),r=e):(i&&oN(t,"More than one custom value accessor matches form control with"),i=e)}),i||r||n||(oN(t,"No valid value accessor for form control with"),null)}(this,r)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!qs(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?eN(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return sN(this._rawValidators)}get asyncValidator(){return lN(this._rawAsyncValidators)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){nN(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){!(this._parent instanceof TN)&&this._parent instanceof AN?EN.formGroupNameException():this._parent instanceof TN||this._parent instanceof kN||EN.modelParentException()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||EN.missingNameException()}_updateValue(t){RN.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;RN.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.ngDirectiveDef=ye({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],factory:function(e){return new(e||t)(rl(IT,9),rl(OT,10),rl(FT,10),rl(wT,10))},inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[fu([NN]),ru,Ql()]}),t})();const FN=new Nt("NgModelWithFormControlWarning"),MN={provide:IT,useExisting:St(()=>PN)};let PN=(()=>{class t extends IT{constructor(t,e){super(),this._validators=t,this._asyncValidators=e,this.submitted=!1,this.directives=[],this.form=null,this.ngSubmit=new Qh}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return nN(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){hN(this.directives,t)}addFormGroup(t){const e=this.form.get(t.path);iN(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormGroup(t){}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){const e=this.form.get(t.path);iN(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormArray(t){}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,cN(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=this.form.get(t.path);t.control!==e&&(function(t,e){e.valueAccessor.registerOnChange(()=>aN(e)),e.valueAccessor.registerOnTouched(()=>aN(e)),e._rawValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),e._rawAsyncValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),t&&t._clearChangeFns()}(t.control,t),e&&nN(e,t),t.control=e)}),this.form._updateTreeValidity({emitEvent:!1})}_updateRegistrations(){this.form._registerOnCollectionChange(()=>this._updateDomValue()),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{}),this._oldForm=this.form}_updateValidators(){const t=sN(this._validators);this.form.validator=PT.compose([this.form.validator,t]);const e=lN(this._asyncValidators);this.form.asyncValidator=PT.composeAsync([this.form.asyncValidator,e])}_checkFormPresent(){this.form||YT.missingFormException()}}return t.ngDirectiveDef=ye({type:t,selectors:[["","formGroup",""]],factory:function(e){return new(e||t)(rl(OT,10),rl(FT,10))},hostBindings:function(t,e,n){1&t&&(Tl("submit",(function(t){return e.onSubmit(t)})),Tl("reset",(function(t){return e.onReset()})))},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[fu([MN]),ru,Ql()]}),t})(),LN=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();LN.ngInjectorDef=yt({factory:function(t){return new(t||LN)}});let zN=(()=>{class t{group(t,e=null){const n=this._reduceControls(t);let r=null,i=null,a=void 0;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(r=null!=e.validators?e.validators:null,i=null!=e.asyncValidators?e.asyncValidators:null,a=null!=e.updateOn?e.updateOn:void 0):(r=null!=e.validator?e.validator:null,i=null!=e.asyncValidator?e.asyncValidator:null)),new _N(n,{asyncValidators:i,updateOn:a,validators:r})}control(t,e,n){return new wN(t,e,n)}array(t,e,n){const r=t.map(t=>this._createControl(t));return new xN(r,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof wN||t instanceof _N||t instanceof xN?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)},providedIn:null}),t})(),VN=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:IN,useValue:e.warnOnDeprecatedNgFormSelector}]}}}return t.ngModuleDef=me({type:t}),t})();VN.ngInjectorDef=yt({factory:function(t){return new(t||VN)},providers:[qT],imports:[LN]});let BN=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:FN,useValue:e.warnOnNgModelWithFormControl}]}}}return t.ngModuleDef=me({type:t}),t})();BN.ngInjectorDef=yt({factory:function(t){return new(t||BN)},providers:[zN,qT],imports:[LN]});const jN=["trigger"],UN=["panel"],WN=["role","listbox",1,"mat-select"],HN=["cdk-overlay-origin","","aria-hidden","true",1,"mat-select-trigger",3,"click"],qN=["origin","cdkOverlayOrigin","trigger",""],GN=[1,"mat-select-value",3,"ngSwitch"],$N=["class","mat-select-placeholder",4,"ngSwitchCase"],KN=["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],XN=[1,"mat-select-arrow-wrapper"],YN=[1,"mat-select-arrow"],ZN=["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],QN=[1,"mat-select-placeholder"];function JN(t,e){if(1&t&&(wl(0,"span",QN),Bl(1),_l()),2&t){const t=Ml();to(1),jl(t.placeholder||"\xa0")}}const tR=[1,"mat-select-value-text",3,"ngSwitch"],eR=[4,"ngSwitchDefault"],nR=[4,"ngSwitchCase"];function rR(t,e){if(1&t&&(wl(0,"span"),Bl(1),_l()),2&t){const t=Ml(2);to(1),jl(t.triggerValue||"\xa0")}}function iR(t,e){1&t&&Vl(0,0,["*ngSwitchCase","true"])}function aR(t,e){1&t&&(wl(0,"span",tR),el(1,rR,2,1,"span",eR),el(2,iR,1,0,void 0,nR),_l()),2&t&&(Zs("ngSwitch",!!Ml().customTrigger),to(2),Zs("ngSwitchCase",!0))}const oR=[1,"mat-select-panel-wrap"],sR=[3,"ngClass","keydown"],lR=["panel",""];function uR(t,e){if(1&t){const t=Il();wl(0,"div",oR),wl(1,"div",sR,lR),al(),Tl("@transformPanel.done",(function(e){return qn(t),Ml()._panelDoneAnimatingStream.next(e.toState)})),Tl("keydown",(function(e){return qn(t),Ml()._handleKeydown(e)})),Vl(3,1),_l(),_l()}if(2&t){const t=Ml();Zs("@transformPanelWrap",void 0),to(1),function(t,e,n){const r=tl(Fn(),"mat-select-panel ",e,"");ul(cr(),r)}(0,t._getPanelTheme()),ol("transform-origin",t._transformOrigin),ol("font-size",t._triggerFontSize,"px"),dl(),Zs("ngClass",t.panelClass)("@transformPanel",t.multiple?"showing-multiple":"showing")}}const cR=[[["mat-select-trigger"]],"*"],hR=["mat-select-trigger","*"],dR={transformPanelWrap:N_("transformPanelWrap",[P_("* => void",z_("@transformPanel",[L_()],{optional:!0}))]),transformPanel:N_("transformPanel",[M_("void",F_({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),M_("showing",F_({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),M_("showing-multiple",F_({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),P_("void => *",R_("120ms cubic-bezier(0, 0, 0.2, 1)")),P_("* => void",R_("100ms 25ms linear",F_({opacity:0})))]),fadeInContent:N_("fadeInContent",[M_("showing",F_({opacity:1})),P_("void => showing",[F_({opacity:0}),R_("150ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let pR=0;const fR=256,mR=16,gR=2*mR,yR=3,vR=1.5*mR+16,bR=8,wR=new Nt("mat-select-scroll-strategy");function _R(t){return()=>t.scrollStrategies.reposition()}const xR={provide:wR,deps:[hT],useFactory:_R};class CR{constructor(t,e){this.source=t,this.value=e}}class SR{constructor(t,e,n,r,i){this._elementRef=t,this._defaultErrorStateMatcher=e,this._parentForm=n,this._parentFormGroup=r,this.ngControl=i}}const kR=dE(pE(cE(fE(SR))));let ER=(()=>{class t{}return t.ngDirectiveDef=ye({type:t,selectors:[["mat-select-trigger"]],factory:function(e){return new(e||t)}}),t})(),IR=(()=>{class t extends kR{constructor(t,e,n,r,i,a,o,s,l,u,c,h,d){super(i,r,o,s,u),this._viewportRuler=t,this._changeDetectorRef=e,this._ngZone=n,this._dir=a,this._parentFormField=l,this.ngControl=u,this._liveAnnouncer=d,this._panelOpen=!1,this._required=!1,this._scrollTop=0,this._multiple=!1,this._compareWith=(t,e)=>t===e,this._uid=`mat-select-${pR++}`,this._destroy=new I,this._triggerFontSize=0,this._onChange=()=>{},this._onTouched=()=>{},this._optionIds="",this._transformOrigin="top",this._panelDoneAnimatingStream=new I,this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}],this._disableOptionCentering=!1,this._focused=!1,this.controlType="mat-select",this.ariaLabel="",this.optionSelectionChanges=Tg(()=>{const t=this.options;return t?t.changes.pipe(ly(t),iy(()=>Q(...t.map(t=>t.onSelectionChange)))):this._ngZone.onStable.asObservable().pipe(Qg(1),iy(()=>this.optionSelectionChanges))}),this.openedChange=new Qh,this._openedStream=this.openedChange.pipe(Rg(t=>t),U(()=>{})),this._closedStream=this.openedChange.pipe(Rg(t=>!t),U(()=>{})),this.selectionChange=new Qh,this.valueChange=new Qh,this.ngControl&&(this.ngControl.valueAccessor=this),this._scrollStrategyFactory=h,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(c)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}set focused(t){this._focused=t}get placeholder(){return this._placeholder}set placeholder(t){this._placeholder=t,this.stateChanges.next()}get required(){return this._required}set required(t){this._required=jS(t),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(t){if(this._selectionModel)throw Error("Cannot change `multiple` mode of select after initialization.");this._multiple=jS(t)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(t){this._disableOptionCentering=jS(t)}get compareWith(){return this._compareWith}set compareWith(t){if("function"!=typeof t)throw Error("`compareWith` must be a function.");this._compareWith=t,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(t){t!==this._value&&(this.writeValue(t),this._value=t)}get id(){return this._id}set id(t){this._id=t||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new vD(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(t=>t.lift(new bD(void 0,void 0)),VI(this._destroy)).subscribe(()=>{this.panelOpen?(this._scrollTop=0,this.openedChange.emit(!0)):(this.openedChange.emit(!1),this.overlayDir.offsetX=0,this._changeDetectorRef.markForCheck())}),this._viewportRuler.change().pipe(VI(this._destroy)).subscribe(()=>{this._panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.onChange.pipe(VI(this._destroy)).subscribe(t=>{t.added.forEach(t=>t.select()),t.removed.forEach(t=>t.deselect())}),this.options.changes.pipe(ly(null),VI(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){this.ngControl&&this.updateErrorState()}ngOnChanges(t){t.disabled&&this.stateChanges.next(),t.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this.typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){!this.disabled&&this.options&&this.options.length&&!this._panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._calculateOverlayPosition(),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck(),this._ngZone.onStable.asObservable().pipe(Qg(1)).subscribe(()=>{this._triggerFontSize&&this.overlayDir.overlayRef&&this.overlayDir.overlayRef.overlayElement&&(this.overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(t){this.options&&this._setSelectionByValue(t)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel.selected:this._selectionModel.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const t=this._selectionModel.selected.map(t=>t.viewValue);return this._isRtl()&&t.reverse(),t.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(t){this.disabled||(this.panelOpen?this._handleOpenKeydown(t):this._handleClosedKeydown(t))}_handleClosedKeydown(t){const e=t.keyCode,n=e===ck||e===lk||e===sk||e===uk,r=this._keyManager;if((e===tk||e===nk)&&!mk(t)||(this.multiple||t.altKey)&&n)t.preventDefault(),this.open();else if(!this.multiple){const n=this.selected;e===ok||e===ak?(e===ok?r.setFirstItemActive():r.setLastItemActive(),t.preventDefault()):r.onKeydown(t);const i=this.selected;this._liveAnnouncer&&i&&n!==i&&this._liveAnnouncer.announce(i.viewValue,1e4)}}_handleOpenKeydown(t){const e=t.keyCode,n=e===ck||e===lk,r=this._keyManager;if(e===ok||e===ak)t.preventDefault(),e===ok?r.setFirstItemActive():r.setLastItemActive();else if(n&&t.altKey)t.preventDefault(),this.close();else if(e!==tk&&e!==nk||!r.activeItem||mk(t))if(this._multiple&&e===pk&&t.ctrlKey){t.preventDefault();const e=this.options.some(t=>!t.disabled&&!t.selected);this.options.forEach(t=>{t.disabled||(e?t.select():t.deselect())})}else{const e=r.activeItemIndex;r.onKeydown(t),this._multiple&&n&&t.shiftKey&&r.activeItem&&r.activeItemIndex!==e&&r.activeItem._selectViaInteraction()}else t.preventDefault(),r.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this.disabled||this.panelOpen||(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this.overlayDir.positionChange.pipe(Qg(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this._setSelectionByValue(this.ngControl?this.ngControl.value:this._value),this.stateChanges.next()})}_setSelectionByValue(t){if(this.multiple&&t){if(!Array.isArray(t))throw Error("Value must be an array in multiple-selection mode.");this._selectionModel.clear(),t.forEach(t=>this._selectValue(t)),this._sortValues()}else{this._selectionModel.clear();const e=this._selectValue(t);e?this._keyManager.setActiveItem(e):this.panelOpen||this._keyManager.setActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectValue(t){const e=this.options.find(e=>{try{return null!=e.value&&this._compareWith(e.value,t)}catch(n){return zi()&&console.warn(n),!1}});return e&&this._selectionModel.select(e),e}_initKeyManager(){this._keyManager=new Tk(this.options).withTypeAhead(this.typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(VI(this._destroy)).subscribe(()=>{this.focus(),this.close()}),this._keyManager.change.pipe(VI(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollActiveOptionIntoView():this._panelOpen||this.multiple||!this._keyManager.activeItem||this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const t=Q(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(VI(t)).subscribe(t=>{this._onSelect(t.source,t.isUserInput),t.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),Q(...this.options.map(t=>t._stateChanges)).pipe(VI(t)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()}),this._setOptionIds()}_onSelect(t,e){const n=this._selectionModel.isSelected(t);null!=t.value||this._multiple?(n!==t.selected&&(t.selected?this._selectionModel.select(t):this._selectionModel.deselect(t)),e&&this._keyManager.setActiveItem(t),this.multiple&&(this._sortValues(),e&&this.focus())):(t.deselect(),this._selectionModel.clear(),this._propagateChanges(t.value)),n!==this._selectionModel.isSelected(t)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const t=this.options.toArray();this._selectionModel.sort((e,n)=>this.sortComparator?this.sortComparator(e,n,t):t.indexOf(e)-t.indexOf(n)),this.stateChanges.next()}}_propagateChanges(t){let e=null;e=this.multiple?this.selected.map(t=>t.value):this.selected?this.selected.value:t,this._value=e,this.valueChange.emit(e),this._onChange(e),this.selectionChange.emit(new CR(this,e)),this._changeDetectorRef.markForCheck()}_setOptionIds(){this._optionIds=this.options.map(t=>t.id).join(" ")}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_scrollActiveOptionIntoView(){const t=this._keyManager.activeItemIndex||0,e=JE(t,this.options,this.optionGroups);this.panel.nativeElement.scrollTop=function(t,e,n,r){const i=t*e;return i<n?i:i+e>n+r?Math.max(0,i-r+e):n}(t+e,this._getItemHeight(),this.panel.nativeElement.scrollTop,fR)}focus(t){this._elementRef.nativeElement.focus(t)}_getOptionIndex(t){return this.options.reduce((e,n,r)=>void 0===e?t===n?r:void 0:e,void 0)}_calculateOverlayPosition(){const t=this._getItemHeight(),e=this._getItemCount(),n=Math.min(e*t,fR),r=e*t-n;let i=this.empty?0:this._getOptionIndex(this._selectionModel.selected[0]);i+=JE(i,this.options,this.optionGroups);const a=n/2;this._scrollTop=this._calculateOverlayScroll(i,a,r),this._offsetY=this._calculateOverlayOffsetY(i,a,r),this._checkOverlayWithinViewport(r)}_calculateOverlayScroll(t,e,n){const r=this._getItemHeight();return Math.min(Math.max(0,r*t-e+r/2),n)}_getAriaLabel(){return this.ariaLabelledby?null:this.ariaLabel||this.placeholder}_getAriaLabelledby(){return this.ariaLabelledby?this.ariaLabelledby:this._parentFormField&&this._parentFormField._hasFloatingLabel()&&!this._getAriaLabel()&&this._parentFormField._labelId||null}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_calculateOverlayOffsetX(){const t=this.overlayDir.overlayRef.overlayElement.getBoundingClientRect(),e=this._viewportRuler.getViewportSize(),n=this._isRtl(),r=this.multiple?vR+mR:2*mR;let i;if(this.multiple)i=vR;else{let t=this._selectionModel.selected[0]||this.options.first;i=t&&t.group?gR:mR}n||(i*=-1);const a=0-(t.left+i-(n?r:0)),o=t.right+i-e.width+(n?0:r);a>0?i+=a+bR:o>0&&(i-=o+bR),this.overlayDir.offsetX=Math.round(i),this.overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(t,e,n){const r=this._getItemHeight(),i=(r-this._triggerRect.height)/2,a=Math.floor(fR/r);let o;return this._disableOptionCentering?0:(o=0===this._scrollTop?t*r:this._scrollTop===n?(t-(this._getItemCount()-a))*r+(r-(this._getItemCount()*r-fR)%r):e-r/2,Math.round(-1*o-i))}_checkOverlayWithinViewport(t){const e=this._getItemHeight(),n=this._viewportRuler.getViewportSize(),r=this._triggerRect.top-bR,i=n.height-this._triggerRect.bottom-bR,a=Math.abs(this._offsetY),o=Math.min(this._getItemCount()*e,fR)-a-this._triggerRect.height;o>i?this._adjustPanelUp(o,i):a>r?this._adjustPanelDown(a,r,t):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(t,e){const n=Math.round(t-e);this._scrollTop-=n,this._offsetY-=n,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(t,e,n){const r=Math.round(t-e);if(this._scrollTop+=r,this._offsetY+=r,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=n)return this._scrollTop=n,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_getOriginBasedOnOption(){const t=this._getItemHeight(),e=(t-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-e+t/2}px 0px`}_getItemCount(){return this.options.length+this.optionGroups.length}_getItemHeight(){return this._triggerFontSize*yR}setDescribedByIds(t){this._ariaDescribedby=t.join(" ")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty}}return t.ngComponentDef=de({type:t,selectors:[["mat-select"]],factory:function(e){return new(e||t)(rl(ND),rl(_s),rl(Qd),rl(IE),rl(Cu),rl(zS,8),rl(kN,8),rl(PN,8),rl(rD,8),rl(DT,10),il("tabindex"),rl(wR),rl(Vk))},contentQueries:function(t,e,n){var r;1&t&&(fd(n,ER,!0),fd(n,QE,!0),fd(n,$E,!1)),2&t&&(ud(r=yd())&&(e.customTrigger=r.first),ud(r=yd())&&(e.options=r),ud(r=yd())&&(e.optionGroups=r))},viewQuery:function(t,e){var n;1&t&&(hd(jN,!0),hd(UN,!0),hd(mT,!0)),2&t&&(ud(n=pd())&&(e.trigger=n.first),ud(n=pd())&&(e.panel=n.first),ud(n=pd())&&(e.overlayDir=n.first))},hostBindings:function(t,e,n){1&t&&(Us(15),Tl("keydown",(function(t){return e._handleKeydown(t)})),Tl("focus",(function(t){return e._onFocus()})),Tl("blur",(function(t){return e._onBlur()})),Cl(WN),al()),2&t&&(Js("id",e.id)("tabindex",e.tabIndex)("aria-label",e._getAriaLabel())("aria-labelledby",e._getAriaLabelledby())("aria-required",e.required.toString())("aria-disabled",e.disabled.toString())("aria-invalid",e.errorState)("aria-owns",e.panelOpen?e._optionIds:null)("aria-multiselectable",e.multiple)("aria-describedby",e._ariaDescribedby||null)("aria-activedescendant",e._getAriaActiveDescendant()),sl("mat-select-disabled",e.disabled),sl("mat-select-invalid",e.errorState),sl("mat-select-required",e.required),sl("mat-select-empty",e.empty),dl())},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex",ariaLabel:["aria-label","ariaLabel"],id:"id",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",panelClass:"panelClass",ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},exportAs:["matSelect"],features:[fu([{provide:WA,useExisting:t},{provide:ZE,useExisting:t}]),ru,Ql()],ngContentSelectors:hR,consts:9,vars:9,template:function(t,e){if(1&t&&(Ll(cR),wl(0,"div",HN,qN),Tl("click",(function(t){return e.toggle()})),wl(3,"div",GN),el(4,JN,2,1,"span",$N),el(5,aR,3,2,"span",KN),_l(),wl(6,"div",XN),xl(7,"div",YN),_l(),_l(),el(8,uR,4,7,"ng-template",ZN),Tl("backdropClick",(function(t){return e.close()})),Tl("attach",(function(t){return e._onAttached()})),Tl("detach",(function(t){return e.close()}))),2&t){const t=nl(1);to(3),Zs("ngSwitch",e.empty),to(4),Zs("ngSwitchCase",!0),to(5),Zs("ngSwitchCase",!1),to(8),Zs("cdkConnectedOverlayScrollStrategy",e._scrollStrategy)("cdkConnectedOverlayOrigin",t)("cdkConnectedOverlayOpen",e.panelOpen)("cdkConnectedOverlayPositions",e._positions)("cdkConnectedOverlayMinWidth",null==e._triggerRect?null:e._triggerRect.width)("cdkConnectedOverlayOffsetY",e._offsetY)}},directives:[fT,ng,rg,mT,ig,Km],styles:[".mat-select{display:inline-block;width:100%;outline:0}.mat-select-trigger{display:inline-table;cursor:pointer;position:relative;box-sizing:border-box}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-select-value{display:table-cell;max-width:0;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{display:table-cell;vertical-align:middle}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform .4s cubic-bezier(.25,.8,.25,1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px}@media (-ms-high-contrast:active){.mat-select-panel{outline:solid 1px}}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;-webkit-text-fill-color:transparent;transition:none;display:block}"],encapsulation:2,data:{animation:[dR.transformPanelWrap,dR.transformPanel]},changeDetection:0}),t})(),AR=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();AR.ngInjectorDef=yt({factory:function(t){return new(t||AR)},providers:[xR],imports:[[dg,vT,tI,uE],iD,tI,uE]});var DR=pc({encapsulation:2,styles:[".mat-select{display:inline-block;width:100%;outline:0}.mat-select-trigger{display:inline-table;cursor:pointer;position:relative;box-sizing:border-box}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-select-value{display:table-cell;max-width:0;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{display:table-cell;vertical-align:middle}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform .4s cubic-bezier(.25,.8,.25,1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px}@media (-ms-high-contrast:active){.mat-select-panel{outline:solid 1px}}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;-webkit-text-fill-color:transparent;transition:none;display:block}"],data:{animation:[{type:7,name:"transformPanelWrap",definitions:[{type:1,expr:"* => void",animation:{type:11,selector:"@transformPanel",animation:[{type:9,options:null}],options:{optional:!0}},options:null}],options:{}},{type:7,name:"transformPanel",definitions:[{type:0,name:"void",styles:{type:6,styles:{transform:"scaleY(0.8)",minWidth:"100%",opacity:0},offset:null},options:void 0},{type:0,name:"showing",styles:{type:6,styles:{opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"},offset:null},options:void 0},{type:0,name:"showing-multiple",styles:{type:6,styles:{opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"},offset:null},options:void 0},{type:1,expr:"void => *",animation:{type:4,styles:null,timings:"120ms cubic-bezier(0, 0, 0.2, 1)"},options:null},{type:1,expr:"* => void",animation:{type:4,styles:{type:6,styles:{opacity:0},offset:null},timings:"100ms 25ms linear"},options:null}],options:{}}]}});function TR(t){return ff(0,[(t()(),Yp(0,0,null,null,1,"span",[["class","mat-select-placeholder"]],null,null,null,null,null)),(t()(),hf(1,null,["",""]))],null,(function(t,e){t(e,1,0,e.component.placeholder||"\xa0")}))}function NR(t){return ff(0,[(t()(),Yp(0,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),hf(1,null,["",""]))],null,(function(t,e){t(e,1,0,e.component.triggerValue||"\xa0")}))}function RR(t){return ff(0,[sf(null,0),(t()(),Xp(0,null,null,0))],null,null)}function OR(t){return ff(0,[(t()(),Yp(0,0,null,null,5,"span",[["class","mat-select-value-text"]],null,null,null,null,null)),_h(1,16384,null,0,ng,[],{ngSwitch:[0,"ngSwitch"]},null),(t()(),Xp(16777216,null,null,1,null,NR)),_h(3,16384,null,0,ig,[Xu,$u,ng],null,null),(t()(),Xp(16777216,null,null,1,null,RR)),_h(5,278528,null,0,rg,[Xu,$u,ng],{ngSwitchCase:[0,"ngSwitchCase"]},null)],(function(t,e){t(e,1,0,!!e.component.customTrigger),t(e,5,0,!0)}),null)}function FR(t){return ff(0,[(t()(),Yp(0,0,null,null,4,"div",[["class","mat-select-panel-wrap"]],[[24,"@transformPanelWrap",0]],null,null,null,null)),(t()(),Yp(1,0,[[2,0],["panel",1]],null,3,"div",[],[[24,"@transformPanel",0],[4,"transformOrigin",null],[4,"font-size","px"]],[[null,"@transformPanel.done"],[null,"keydown"]],(function(t,e,n){var r=!0,i=t.component;return"@transformPanel.done"===e&&(r=!1!==i._panelDoneAnimatingStream.next(n.toState)&&r),"keydown"===e&&(r=!1!==i._handleKeydown(n)&&r),r}),null,null)),xh(512,null,Wm,Hm,[Uu,Wu,Cu,Au]),_h(3,278528,null,0,Km,[Wm],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),sf(null,1)],(function(t,e){var n,r,i=e.component;t(e,3,0,("mat-select-panel ",n=i._getPanelTheme(),"mat-select-panel "+(null!=(r=n)?r.toString():"")),i.panelClass)}),(function(t,e){var n=e.component;t(e,0,0,void 0),t(e,1,0,n.multiple?"showing-multiple":"showing",n._transformOrigin,n._triggerFontSize)}))}function MR(t){return ff(2,[ef(671088640,1,{trigger:0}),ef(671088640,2,{panel:0}),ef(671088640,3,{overlayDir:0}),(t()(),Yp(3,0,[[1,0],["trigger",1]],null,9,"div",[["aria-hidden","true"],["cdk-overlay-origin",""],["class","mat-select-trigger"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.toggle()&&r),r}),null,null)),_h(4,16384,[["origin",4]],0,fT,[Cu],null,null),(t()(),Yp(5,0,null,null,5,"div",[["class","mat-select-value"]],null,null,null,null,null)),_h(6,16384,null,0,ng,[],{ngSwitch:[0,"ngSwitch"]},null),(t()(),Xp(16777216,null,null,1,null,TR)),_h(8,278528,null,0,rg,[Xu,$u,ng],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),Xp(16777216,null,null,1,null,OR)),_h(10,278528,null,0,rg,[Xu,$u,ng],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),Yp(11,0,null,null,1,"div",[["class","mat-select-arrow-wrapper"]],null,null,null,null,null)),(t()(),Yp(12,0,null,null,0,"div",[["class","mat-select-arrow"]],null,null,null,null,null)),(t()(),Xp(16777216,null,null,1,(function(t,e,n){var r=!0,i=t.component;return"backdropClick"===e&&(r=!1!==i.close()&&r),"attach"===e&&(r=!1!==i._onAttached()&&r),"detach"===e&&(r=!1!==i.close()&&r),r}),FR)),_h(14,671744,[[3,4]],0,mT,[hT,$u,Xu,pT,[2,zS]],{origin:[0,"origin"],positions:[1,"positions"],offsetY:[2,"offsetY"],minWidth:[3,"minWidth"],backdropClass:[4,"backdropClass"],scrollStrategy:[5,"scrollStrategy"],open:[6,"open"],hasBackdrop:[7,"hasBackdrop"],lockPosition:[8,"lockPosition"]},{backdropClick:"backdropClick",attach:"attach",detach:"detach"})],(function(t,e){var n=e.component;t(e,6,0,n.empty),t(e,8,0,!0),t(e,10,0,!1),t(e,14,0,lh(e,4),n._positions,n._offsetY,null==n._triggerRect?null:n._triggerRect.width,"cdk-overlay-transparent-backdrop",n._scrollStrategy,n.panelOpen,"","")}),null)}function PR(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(o,s)}l((r=r.apply(t,e||[])).next())}))}var LR=n("zUCq");class zR{constructor(t,e,n){this.dialog=t,this.predictionService=e,this.http=n,this.selectors=[],this.displayStream="none",this.isLoading=!0,this.alertContainer=!1,this.alertMessage="",this.stateContainer=!1,this.stateMessage="",this.objectsDictionary=[],this.customVisionEndpoint="InsertYourCustomVisionEndpoint",this.customVisionKey="InsertYourCustomVisionKey",this.modelEndpoint="",this.modelLabel="",this.isStoringImage="false",this.isLocal=!1,this.labl=[],this.loadedModel=!1,this.stream=null,this.opencam()}loadModel(){return PR(this,void 0,void 0,(function*(){this.model=new LR.ObjectDetectionModel,yield this.model.loadModelAsync(this.modelEndpoint),this.http.get(this.modelLabel,{responseType:"text"}).subscribe(t=>{this.file=t;for(const e of this.file.split(/[\r\n]+/))this.labl.push(e)}),this.loadedModel=!0}))}ngOnInit(){if(localStorage.getItem("settings")){const t=JSON.parse(localStorage.getItem("settings"));this.customVisionEndpoint=t.customVisionEndpoint,this.customVisionKey=t.customVisionKey,this.isStoringImage=t.isStoringImage,this.isLocal=t.isLocal,this.modelEndpoint=t.modelEndpoint,this.modelLabel=t.modelLabel}this.loadModel(),this.detectId=null,localStorage.getItem("videoSource")&&(this.videoSource=localStorage.getItem("videoSource")),this.alertContainer=!1,this.stateContainer=!1,this.ctx=this.overlay.nativeElement.getContext("2d"),this.refreshRate=3e3,localStorage.getItem("refreshRate")&&(this.refreshRate=Number(localStorage.getItem("refreshRate")),this.refreshRate<250&&(this.refreshRate=3e3))}initStreamDetection(){null===this.stream&&(this.startStream(),null===this.detectId&&(this.detectId=setInterval(()=>{this.stateContainer||null!==this.stream&&this.detectObjects()},1e3)))}detectObjects(){this.clearOverlay(),this.imageCapture(this.video.nativeElement),"none"===this.displayStream&&(this.displayStream="block",this.isLoading=!1)}clearOverlay(){this.ctx.clearRect(0,0,this.overlay.nativeElement.width,this.overlay.nativeElement.height)}drawOverlay(t,e,n,r,i=null){this.ctx.beginPath(),this.ctx.rect(t,e,n,r),null!==i&&(this.ctx.font="20px Arial",this.ctx.fillText(i,t+.05*n,e+r/1.05)),this.ctx.stroke(),this.ctx.closePath()}opencam(){navigator.mediaDevices.enumerateDevices().then(t=>{this.selectors=this.getCaptureDevices(t),this.initStreamDetection()}).catch(this.handleError)}startStream(t=null){return navigator.mediaDevices&&(-1===this.selectors.map(t=>t.id).indexOf(this.videoSource)&&(this.videoSource=null),this.videoSource=t||(this.videoSource?this.videoSource:this.selectors[0].id),localStorage.setItem("videoSource",this.videoSource),navigator.mediaDevices.getUserMedia({audio:!1,video:{deviceId:this.videoSource?{exact:this.videoSource}:void 0}}).then(t=>{this.stream=t,this.alertContainer=!1,this.video.nativeElement.srcObject=t,this.video.nativeElement.play(),this.video.nativeElement.addEventListener("loadedmetadata",()=>{this.overlay.nativeElement.width=this.video.nativeElement.videoWidth,this.overlay.nativeElement.height=this.video.nativeElement.videoHeight})}).catch(t=>{console.log("Camera init failed : "+t.name),this.alertContainer=!0,this.alertMessage="Could not access the camera. Error: "+t.name})),this.video}getCaptureDevices(t){const e=[];for(let n=0;n<t.length;n++)"videoinput"===t[n].kind&&e.push({id:t[n].deviceId,label:t[n].label});return e}imageCapture(t){const e=document.createElement("canvas");e.width=this.overlay.nativeElement.width,e.height=this.overlay.nativeElement.height,e.getContext("2d").drawImage(t,0,0),this.isLocal?this.imageDetectionLocal(e):this.imageDetectionOnline(e)}imageDetectionOnline(t){console.log("Working online"),t.toBlob(t=>{let e;(e=this.isStoringImage?this.predictionService.predictImage(t,this.customVisionEndpoint,this.customVisionKey):this.predictionService.predictImageWithNoStore(t,this.customVisionEndpoint,this.customVisionKey)).subscribe(t=>{t.predictions.forEach(t=>{t.probability>=.6&&(this.drawOverlay(t.boundingBox.left*this.overlay.nativeElement.width,t.boundingBox.top*this.overlay.nativeElement.height,t.boundingBox.width*this.overlay.nativeElement.width,t.boundingBox.height*this.overlay.nativeElement.height,t.tagName),console.log(t.tagName+" "+100*t.probability+" % "))})})})}imageDetectionLocal(t){return PR(this,void 0,void 0,(function*(){if(this.loadedModel){console.log("Working offline");const e=yield this.model.executeAsync(t);for(let t=0;t<e[0].length;t++)e[1][t]>.4&&this.drawOverlay(e[0][t][0]*this.overlay.nativeElement.width,e[0][t][1]*this.overlay.nativeElement.height,e[0][t][2]*this.overlay.nativeElement.width-e[0][t][0]*this.overlay.nativeElement.width,e[0][t][3]*this.overlay.nativeElement.height-e[0][t][1]*this.overlay.nativeElement.height,this.labl[e[2][t]])}}))}stopCaptureStream(){this.stream&&this.stream.getTracks().forEach(t=>{t.stop()})}handleError(t){console.log("navigator.getUserMedia error: ",t)}ngOnDestroy(){this.stopCaptureStream(),clearInterval(this.detectId),this.detectId=null,this.stream=null}}const VR=["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],BR=["cdkPortalOutlet",""];function jR(t,e){}class UR{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus=!0,this.restoreFocus=!0,this.closeOnNavigation=!0}}const WR=[M_("void, exit",F_({opacity:0,transform:"scale(0.7)"})),M_("enter",F_({transform:"none"})),P_("* => enter",R_("150ms cubic-bezier(0, 0, 0.2, 1)",F_({transform:"none",opacity:1}))),P_("* => void, * => exit",R_("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",F_({opacity:0})))],HR={dialogContainer:N_("dialogContainer",WR),slideDialog:N_("slideDialog",WR)};function qR(){throw Error("Attempting to attach dialog content after content is already attached")}let GR=(()=>{class t extends PD{constructor(t,e,n,r,i){super(),this._elementRef=t,this._focusTrapFactory=e,this._changeDetectorRef=n,this._document=r,this._config=i,this._elementFocusedBeforeDialogWasOpened=null,this._state="enter",this._animationStateChanged=new Qh,this._ariaLabelledBy=i.ariaLabelledBy||null}attachComponentPortal(t){return this._portalOutlet.hasAttached()&&qR(),this._savePreviouslyFocusedElement(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._portalOutlet.hasAttached()&&qR(),this._savePreviouslyFocusedElement(),this._portalOutlet.attachTemplatePortal(t)}_trapFocus(){const t=this._elementRef.nativeElement;if(this._focusTrap||(this._focusTrap=this._focusTrapFactory.create(t)),this._config.autoFocus)this._focusTrap.focusInitialElementWhenReady();else{const e=this._document.activeElement;e===t||t.contains(e)||t.focus()}}_restoreFocus(){const t=this._elementFocusedBeforeDialogWasOpened;this._config.restoreFocus&&t&&"function"==typeof t.focus&&t.focus(),this._focusTrap&&this._focusTrap.destroy()}_savePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=this._document.activeElement,this._elementRef.nativeElement.focus&&Promise.resolve().then(()=>this._elementRef.nativeElement.focus()))}_onAnimationDone(t){"enter"===t.toState?this._trapFocus():"exit"===t.toState&&this._restoreFocus(),this._animationStateChanged.emit(t)}_onAnimationStart(t){this._animationStateChanged.emit(t)}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return t.ngComponentDef=de({type:t,selectors:[["mat-dialog-container"]],factory:function(e){return new(e||t)(rl(Cu),rl(Mk),rl(_s),rl(fg,8),rl(UR))},viewQuery:function(t,e){var n;1&t&&cd(zD,!0),2&t&&ud(n=pd())&&(e._portalOutlet=n.first)},hostBindings:function(t,e,n){1&t&&(Us(6),Nl("@dialogContainer.start",(function(t){return e._onAnimationStart(t)})),Nl("@dialogContainer.done",(function(t){return e._onAnimationDone(t)})),Cl(VR)),2&t&&(Js("id",e._id)("role",e._config.role)("aria-labelledby",e._config.ariaLabel?null:e._ariaLabelledBy)("aria-label",e._config.ariaLabel)("aria-describedby",e._config.ariaDescribedBy||null),Hl("@dialogContainer",e._state))},features:[ru],consts:1,vars:0,template:function(t,e){1&t&&el(0,jR,0,0,"ng-template",BR)},directives:[zD],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}@media (-ms-high-contrast:active){.mat-dialog-container{outline:solid 1px}}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base{margin-left:0;margin-right:8px}"],encapsulation:2,data:{animation:[HR.dialogContainer]}}),t})(),$R=0;class KR{constructor(t,e,n,r=`mat-dialog-${$R++}`){this._overlayRef=t,this._containerInstance=e,this.id=r,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new I,this._afterClosed=new I,this._beforeClosed=new I,this._state=0,e._id=r,e._animationStateChanged.pipe(Rg(t=>"done"===t.phaseName&&"enter"===t.toState),Qg(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),e._animationStateChanged.pipe(Rg(t=>"done"===t.phaseName&&"exit"===t.toState),Qg(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._overlayRef.dispose()}),t.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),t.keydownEvents().pipe(Rg(t=>t.keyCode===ek&&!this.disableClose&&!mk(t))).subscribe(t=>{t.preventDefault(),this.close()})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(Rg(t=>"start"===t.phaseName),Qg(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._state=2,this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>{this._overlayRef.dispose()},e.totalTime+100)}),this._containerInstance._startExitAnimation(),this._state=1}afterOpened(){return this._afterOpened.asObservable()}afterClosed(){return this._afterClosed.asObservable()}beforeClosed(){return this._beforeClosed.asObservable()}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(t){let e=this._getPositionStrategy();return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(t="",e=""){return this._getPositionStrategy().width(t).height(e),this._overlayRef.updatePosition(),this}addPanelClass(t){return this._overlayRef.addPanelClass(t),this}removePanelClass(t){return this._overlayRef.removePanelClass(t),this}afterOpen(){return this.afterOpened()}beforeClose(){return this.beforeClosed()}getState(){return this._state}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}const XR=new Nt("MatDialogData"),YR=new Nt("mat-dialog-default-options"),ZR=new Nt("mat-dialog-scroll-strategy");function QR(t){return()=>t.scrollStrategies.block()}const JR={provide:ZR,deps:[hT],useFactory:QR};let tO=(()=>{class t{constructor(t,e,n,r,i,a,o){this._overlay=t,this._injector=e,this._location=n,this._defaultOptions=r,this._parentDialog=a,this._overlayContainer=o,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new I,this._afterOpenedAtThisLevel=new I,this._ariaHiddenElements=new Map,this.afterAllClosed=Tg(()=>this.openDialogs.length?this._afterAllClosed:this._afterAllClosed.pipe(ly(void 0))),this._scrollStrategy=i}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}get afterOpen(){return this.afterOpened}get _afterAllClosed(){const t=this._parentDialog;return t?t._afterAllClosed:this._afterAllClosedAtThisLevel}open(t,e){if((e=function(t,e){return Object.assign({},e,t)}(e,this._defaultOptions||new UR)).id&&this.getDialogById(e.id))throw Error(`Dialog with id "${e.id}" exists already. The dialog id must be unique.`);const n=this._createOverlay(e),r=this._attachDialogContainer(n,e),i=this._attachDialogContent(t,r,n,e);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(i),i.afterClosed().subscribe(()=>this._removeOpenDialog(i)),this.afterOpened.next(i),i}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(e=>e.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(t){const e=this._getOverlayConfig(t);return this._overlay.create(e)}_getOverlayConfig(t){const e=new XD({positionStrategy:this._overlay.position().global(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(e.backdropClass=t.backdropClass),e}_attachDialogContainer(t,e){const n=new BD(e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,new WeakMap([[UR,e]])),r=new FD(GR,e.viewContainerRef,n,e.componentFactoryResolver);return t.attach(r).instance}_attachDialogContent(t,e,n,r){const i=new KR(n,e,this._location,r.id);if(r.hasBackdrop&&n.backdropClick().subscribe(()=>{i.disableClose||i.close()}),t instanceof $u)e.attachTemplatePortal(new MD(t,null,{$implicit:r.data,dialogRef:i}));else{const n=this._createInjector(r,i,e),a=e.attachComponentPortal(new FD(t,void 0,n));i.componentInstance=a.instance}return i.updateSize(r.width,r.height).updatePosition(r.position),i}_createInjector(t,e,n){const r=t&&t.viewContainerRef&&t.viewContainerRef.injector,i=new WeakMap([[GR,n],[XR,t.data],[KR,e]]);return!t.direction||r&&r.get(zS,null)||i.set(zS,{value:t.direction,change:xg()}),new BD(r||this._injector,i)}_removeOpenDialog(t){const e=this.openDialogs.indexOf(t);e>-1&&(this.openDialogs.splice(e,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((t,e)=>{t?e.setAttribute("aria-hidden",t):e.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._afterAllClosed.next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const e=t.parentElement.children;for(let n=e.length-1;n>-1;n--){let r=e[n];r===t||"SCRIPT"===r.nodeName||"STYLE"===r.nodeName||r.hasAttribute("aria-live")||(this._ariaHiddenElements.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}}}_closeDialogs(t){let e=t.length;for(;e--;)t[e].close()}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt(hT),qt(Ls),qt(Im,8),qt(YR,8),qt(ZR),qt(t,12),qt(eT))},providedIn:null}),t})(),eO=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();eO.ngInjectorDef=yt({factory:function(t){return new(t||eO)},providers:[tO,JR],imports:[[dg,vT,VD,uE],uE]});class nO{}class rO{}class iO{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof iO?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new iO;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof iO?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;0===(t=t.filter(t=>-1===i.indexOf(t))).length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class aO{encodeKey(t){return oO(t)}encodeValue(t){return oO(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function oO(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class sO{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new aO,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.split("&").forEach(t=>{const r=t.indexOf("="),[i,a]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],o=n.get(i)||[];o.push(a),n.set(i,o)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).join("&")}clone(t){const e=new sO({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat([t]),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function lO(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function uO(t){return"undefined"!=typeof Blob&&t instanceof Blob}function cO(t){return"undefined"!=typeof FormData&&t instanceof FormData}class hO{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new iO),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new sO,this.urlWithParams=e}serializeBody(){return null===this.body?null:lO(this.body)||uO(this.body)||cO(this.body)||"string"==typeof this.body?this.body:this.body instanceof sO?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body?null:cO(this.body)?null:uO(this.body)?this.body.type||null:lO(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof sO?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,a=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,o=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let s=t.headers||this.headers,l=t.params||this.params;return void 0!==t.setHeaders&&(s=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),s)),t.setParams&&(l=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),l)),new hO(e,n,i,{params:l,headers:s,reportProgress:o,responseType:r,withCredentials:a})}}const dO=function(){var t={Sent:0,UploadProgress:1,ResponseHeader:2,DownloadProgress:3,Response:4,User:5};return t[t.Sent]="Sent",t[t.UploadProgress]="UploadProgress",t[t.ResponseHeader]="ResponseHeader",t[t.DownloadProgress]="DownloadProgress",t[t.Response]="Response",t[t.User]="User",t}();class pO{constructor(t,e=200,n="OK"){this.headers=t.headers||new iO,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class fO extends pO{constructor(t={}){super(t),this.type=dO.ResponseHeader}clone(t={}){return new fO({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class mO extends pO{constructor(t={}){super(t),this.type=dO.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new mO({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class gO extends pO{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function yO(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let vO=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof hO)r=t;else{let i=void 0;i=n.headers instanceof iO?n.headers:new iO(n.headers);let a=void 0;n.params&&(a=n.params instanceof sO?n.params:new sO({fromObject:n.params})),r=new hO(t,e,void 0!==n.body?n.body:null,{headers:i,params:a,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=xg(r).pipe(dy(t=>this.handler.handle(t)));if(t instanceof hO||"events"===n.observe)return i;const a=i.pipe(Rg(t=>t instanceof mO));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return a.pipe(U(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return a.pipe(U(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return a.pipe(U(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return a.pipe(U(t=>t.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new sO).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,yO(n,e))}post(t,e,n={}){return this.request("POST",t,yO(n,e))}put(t,e,n={}){return this.request("PUT",t,yO(n,e))}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt(nO))},providedIn:null}),t})();class bO{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const wO=new Nt("HTTP_INTERCEPTORS");let _O=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)},providedIn:null}),t})();const xO=/^\)\]\}',?\n/;class CO{}let SO=(()=>{class t{constructor(){}build(){return new XMLHttpRequest}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)},providedIn:null}),t})(),kO=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new _(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const a=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",a=new iO(n.getAllResponseHeaders()),o=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new fO({headers:a,status:e,statusText:r,url:o})},o=()=>{let{headers:r,status:i,statusText:o,url:s}=a(),l=null;204!==i&&(l=void 0===n.response?n.responseText:n.response),0===i&&(i=l?200:0);let u=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof l){const t=l;l=l.replace(xO,"");try{l=""!==l?JSON.parse(l):null}catch(c){l=t,u&&(u=!1,l={error:c,text:l})}}u?(e.next(new mO({body:l,headers:r,status:i,statusText:o,url:s||void 0})),e.complete()):e.error(new gO({error:l,headers:r,status:i,statusText:o,url:s||void 0}))},s=t=>{const{url:r}=a(),i=new gO({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let l=!1;const u=r=>{l||(e.next(a()),l=!0);let i={type:dO.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},c=t=>{let n={type:dO.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",o),n.addEventListener("error",s),t.reportProgress&&(n.addEventListener("progress",u),null!==r&&n.upload&&n.upload.addEventListener("progress",c)),n.send(r),e.next({type:dO.Sent}),()=>{n.removeEventListener("error",s),n.removeEventListener("load",o),t.reportProgress&&(n.removeEventListener("progress",u),null!==r&&n.upload&&n.upload.removeEventListener("progress",c)),n.abort()}})}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt(CO))},providedIn:null}),t})();const EO=new Nt("XSRF_COOKIE_NAME"),IO=new Nt("XSRF_HEADER_NAME");class AO{}let DO=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Pm(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt(fg),qt(Dd),qt(EO))},providedIn:null}),t})(),TO=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt(AO),qt(IO))},providedIn:null}),t})(),NO=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(wO,[]);this.chain=t.reduceRight((t,e)=>new bO(t,e),this.backend)}return this.chain.handle(t)}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt(rO),qt(Ls))},providedIn:null}),t})(),RO=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:TO,useClass:_O}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:EO,useValue:e.cookieName}:[],e.headerName?{provide:IO,useValue:e.headerName}:[]]}}}return t.ngModuleDef=me({type:t}),t.ngInjectorDef=yt({factory:function(e){return new(e||t)},providers:[TO,{provide:wO,useExisting:TO,multi:!0},{provide:AO,useClass:DO},{provide:EO,useValue:"XSRF-TOKEN"},{provide:IO,useValue:"X-XSRF-TOKEN"}]}),t})(),OO=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();OO.ngInjectorDef=yt({factory:function(t){return new(t||OO)},providers:[vO,{provide:nO,useClass:NO},kO,{provide:rO,useExisting:kO},SO,{provide:CO,useExisting:SO}],imports:[[RO.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]});let FO=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();FO.ngInjectorDef=yt({factory:function(t){return new(t||FO)},imports:[[]]});let MO=(()=>{class t{constructor(t){this.http=t,this.headers=new iO({"Access-Control-Allow-Origin":"http://localhost:4200","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,OPTIONS","Access-Control-Allow-Headers":"*"})}predictImageWithNoStore(t,e,n){let r,i=this.headers.set("Content-Type","application/octet-stream");return i=i.set("Prediction-Key",n),this.http.post(r=e+"/image/nostore",t,{headers:i})}predictImage(t,e,n){let r,i=this.headers.set("Content-Type","application/octet-stream");return i=i.set("Prediction-Key",n),this.http.post(r=e+"/image",t,{headers:i})}predictImageUrl(t,e,n){let r,i=this.headers.set("Content-Type","application/json");return i=i.set("Prediction-Key",n),this.http.post(r=e+"/url",{Url:t},{headers:i})}predictImageUrlWithNoStore(t,e,n){let r,i=this.headers.set("Content-Type","application/json");return i=this.headers.set("Prediction-Key",n),this.http.post(r=e+"/url/nostore",{Url:t},{headers:i})}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt(vO))},providedIn:"root"}),t.ngInjectableDef=gt({factory:function(){return new t(Gt(vO))},token:t,providedIn:"root"}),t})();var PO=pc({encapsulation:0,styles:[[".content[_ngcontent-%COMP%]{height:95vh;overflow-y:auto}#overlay[_ngcontent-%COMP%], #overlayContainer[_ngcontent-%COMP%]   #stream[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%}#stream[_ngcontent-%COMP%]{border:2px solid #000;height:100%;width:100%;-o-object-fit:cover;object-fit:cover;z-index:-100;right:0;bottom:0;overflow:hidden}#overlay[_ngcontent-%COMP%]{height:100%;width:100%;-o-object-fit:cover;object-fit:cover;z-index:-99;right:0;bottom:0;overflow:hidden}.detections[_ngcontent-%COMP%]{height:10%;width:20%;z-index:0;margin:5%;-webkit-animation:1s forwards pulse;animation:1s forwards pulse}@-webkit-keyframes pulse{0%{opacity:0}100%{opacity:1}}@keyframes pulse{0%{opacity:0}100%{opacity:1}}.center[_ngcontent-%COMP%]{margin:0;width:50%}.preview-card[_ngcontent-%COMP%]{top:80%;width:80%;left:10%;right:10%;text-align:center;position:absolute;float:left;clear:both}"]],data:{}});function LO(t){return ff(0,[(t()(),Yp(0,0,null,null,1,"mat-progress-bar",[["aria-valuemax","100"],["aria-valuemin","0"],["class","mat-progress-bar"],["mode","indeterminate"],["role","progressbar"]],[[1,"aria-valuenow",0],[1,"mode",0],[2,"_mat-animation-noopable",null]],null,null,wI,bI)),_h(1,4374528,null,0,gI,[Cu,Qd,[2,NS],[2,fI]],{mode:[0,"mode"]},null)],(function(t,e){t(e,1,0,"indeterminate")}),(function(t,e){t(e,0,0,"indeterminate"===lh(e,1).mode||"query"===lh(e,1).mode?null:lh(e,1).value,lh(e,1).mode,lh(e,1)._isNoopAnimation)}))}function zO(t){return ff(0,[(t()(),Yp(0,0,null,null,5,"div",[],null,null,null,null,null)),(t()(),Yp(1,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),hf(2,null,["",""])),(t()(),Yp(3,0,null,null,2,"button",[["color","primary"],["mat-raised-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.initStreamDetection()&&r),r}),OI,RI)),_h(4,180224,null,0,TI,[Cu,Wk,[2,NS]],{color:[0,"color"]},null),(t()(),hf(-1,0,["R\xe9essayer"]))],(function(t,e){t(e,4,0,"primary")}),(function(t,e){t(e,2,0,e.component.alertMessage),t(e,3,0,lh(e,4).disabled||null,"NoopAnimations"===lh(e,4)._animationMode)}))}function VO(t){return ff(0,[(t()(),Yp(0,0,null,null,2,"mat-option",[["class","mat-option"],["role","option"]],[[1,"tabindex",0],[2,"mat-selected",null],[2,"mat-option-multiple",null],[2,"mat-active",null],[8,"id",0],[1,"aria-selected",0],[1,"aria-disabled",0],[2,"mat-option-disabled",null]],[[null,"click"],[null,"keydown"]],(function(t,e,n){var r=!0,i=t.component;return"click"===e&&(r=!1!==lh(t,1)._selectViaInteraction()&&r),"keydown"===e&&(r=!1!==lh(t,1)._handleKeydown(n)&&r),"click"===e&&(r=!1!==i.startStream(t.context.$implicit.id)&&r),r}),PI,FI)),_h(1,8568832,[[12,4]],0,QE,[Cu,_s,[2,ZE],[2,$E]],{value:[0,"value"]},null),(t()(),hf(2,0,[" Camera "," "]))],(function(t,e){t(e,1,0,e.context.$implicit.id)}),(function(t,e){t(e,0,0,lh(e,1)._getTabIndex(),lh(e,1).selected,lh(e,1).multiple,lh(e,1).active,lh(e,1).id,lh(e,1)._getAriaSelected(),lh(e,1).disabled.toString(),lh(e,1).disabled),t(e,2,0,e.context.$implicit.label)}))}function BO(t){return ff(0,[(t()(),Yp(0,0,null,null,2,"div",[],null,null,null,null,null)),(t()(),Yp(1,0,null,null,1,"h1",[],null,null,null,null,null)),(t()(),hf(2,null,["",""]))],null,(function(t,e){t(e,2,0,e.component.stateMessage)}))}function jO(t){return ff(0,[ef(402653184,1,{overlay:0}),ef(402653184,2,{video:0}),(t()(),Yp(2,0,null,null,34,"div",[["class","content"]],null,null,null,null,null)),(t()(),Xp(16777216,null,null,1,null,LO)),_h(4,16384,null,0,Qm,[Xu,$u],{ngIf:[0,"ngIf"]},null),(t()(),Yp(5,0,null,null,28,"div",[["style","text-align: center;"]],[[4,"display",null]],null,null,null,null)),(t()(),Xp(16777216,null,null,1,null,zO)),_h(7,16384,null,0,Qm,[Xu,$u],{ngIf:[0,"ngIf"]},null),(t()(),Yp(8,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),Yp(9,0,null,null,19,"mat-form-field",[["class","mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,yD,aD)),_h(10,7520256,null,9,rD,[Cu,_s,[2,eI],[2,zS],[2,nD],$S,Qd,[2,NS]],null,null),ef(603979776,3,{_controlNonStatic:0}),ef(335544320,4,{_controlStatic:0}),ef(603979776,5,{_labelChildNonStatic:0}),ef(335544320,6,{_labelChildStatic:0}),ef(603979776,7,{_placeholderChild:0}),ef(603979776,8,{_errorChildren:1}),ef(603979776,9,{_hintChildren:1}),ef(603979776,10,{_prefixChildren:1}),ef(603979776,11,{_suffixChildren:1}),(t()(),Yp(20,0,null,1,8,"mat-select",[["class","mat-select"],["placeholder","Video capture"],["role","listbox"]],[[1,"id",0],[1,"tabindex",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-required",0],[1,"aria-disabled",0],[1,"aria-invalid",0],[1,"aria-owns",0],[1,"aria-multiselectable",0],[1,"aria-describedby",0],[1,"aria-activedescendant",0],[2,"mat-select-disabled",null],[2,"mat-select-invalid",null],[2,"mat-select-required",null],[2,"mat-select-empty",null]],[[null,"keydown"],[null,"focus"],[null,"blur"]],(function(t,e,n){var r=!0;return"keydown"===e&&(r=!1!==lh(t,22)._handleKeydown(n)&&r),"focus"===e&&(r=!1!==lh(t,22)._onFocus()&&r),"blur"===e&&(r=!1!==lh(t,22)._onBlur()&&r),r}),MR,DR)),xh(6144,null,ZE,null,[IR]),_h(22,2080768,null,3,IR,[ND,_s,Qd,IE,Cu,[2,zS],[2,kN],[2,PN],[2,rD],[8,null],[8,null],wR,Vk],{placeholder:[0,"placeholder"],value:[1,"value"]},null),ef(603979776,12,{options:1}),ef(603979776,13,{optionGroups:1}),ef(603979776,14,{customTrigger:0}),xh(2048,[[3,4],[4,4]],WA,null,[IR]),(t()(),Xp(16777216,null,1,1,null,VO)),_h(28,278528,null,0,Ym,[Xu,$u,Uu],{ngForOf:[0,"ngForOf"]},null),(t()(),Yp(29,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),Yp(30,0,null,null,3,"div",[],[[4,"display",null]],null,null,null,null)),(t()(),Yp(31,0,null,null,2,"div",[["class","center"],["id","overlayContainer"]],null,null,null,null,null)),(t()(),Yp(32,0,[[2,0],["webcam",1]],null,0,"video",[["autoplay",""],["id","stream"]],null,null,null,null,null)),(t()(),Yp(33,0,[[1,0],["overlay",1]],null,0,"canvas",[["id","overlay"]],null,null,null,null,null)),(t()(),Yp(34,0,null,null,2,"div",[["class","preview-card"]],null,null,null,null,null)),(t()(),Xp(16777216,null,null,1,null,BO)),_h(36,16384,null,0,Qm,[Xu,$u],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,4,0,n.isLoading&&!n.stateContainer),t(e,7,0,n.alertContainer),t(e,22,0,"Video capture",n.videoSource),t(e,28,0,n.selectors),t(e,36,0,n.stateContainer)}),(function(t,e){var n=e.component;t(e,5,0,n.stateContainer?"none":"block"),t(e,9,1,["standard"==lh(e,10).appearance,"fill"==lh(e,10).appearance,"outline"==lh(e,10).appearance,"legacy"==lh(e,10).appearance,lh(e,10)._control.errorState,lh(e,10)._canLabelFloat,lh(e,10)._shouldLabelFloat(),lh(e,10)._hasFloatingLabel(),lh(e,10)._hideControlPlaceholder(),lh(e,10)._control.disabled,lh(e,10)._control.autofilled,lh(e,10)._control.focused,"accent"==lh(e,10).color,"warn"==lh(e,10).color,lh(e,10)._shouldForward("untouched"),lh(e,10)._shouldForward("touched"),lh(e,10)._shouldForward("pristine"),lh(e,10)._shouldForward("dirty"),lh(e,10)._shouldForward("valid"),lh(e,10)._shouldForward("invalid"),lh(e,10)._shouldForward("pending"),!lh(e,10)._animationsEnabled]),t(e,20,1,[lh(e,22).id,lh(e,22).tabIndex,lh(e,22)._getAriaLabel(),lh(e,22)._getAriaLabelledby(),lh(e,22).required.toString(),lh(e,22).disabled.toString(),lh(e,22).errorState,lh(e,22).panelOpen?lh(e,22)._optionIds:null,lh(e,22).multiple,lh(e,22)._ariaDescribedby||null,lh(e,22)._getAriaActiveDescendant(),lh(e,22).disabled,lh(e,22).errorState,lh(e,22).required,lh(e,22).empty]),t(e,30,0,n.displayStream)}))}function UO(t){return ff(0,[(t()(),Yp(0,0,null,null,1,"app-detector",[],null,null,null,jO,PO)),_h(1,245760,null,0,zR,[tO,MO,vO],null,null)],(function(t,e){t(e,1,0)}),null)}var WO=Zc("app-detector",zR,UO,{},{},[]);class HO{constructor(){}ngOnInit(){this.launchModel()}launchModel(){return PR(this,void 0,void 0,(function*(){let t=new LR.ObjectDetectionModel;yield t.loadModelAsync("http://localhost:4200/assets/model.json"),console.log(t);const e=document.getElementById("image"),n=yield t.executeAsync(e);console.log(n)}))}}var qO=pc({encapsulation:0,styles:[[""]],data:{}});function GO(t){return ff(0,[(t()(),Yp(0,0,null,null,0,"img",[["crossorigin","anonymous"],["id","image"],["src","https://pbs.twimg.com/media/EelNQwaWoAAxx51?format=jpg"]],null,null,null,null,null))],null,null)}function $O(t){return ff(0,[(t()(),Yp(0,0,null,null,1,"app-test-local",[],null,null,null,GO,qO)),_h(1,114688,null,0,HO,[],null,null)],(function(t,e){t(e,1,0)}),null)}var KO=Zc("app-test-local",HO,$O,{},{},[]);const XO=QS({passive:!0});let YO=(()=>{class t{constructor(t,e){this._platform=t,this._ngZone=e,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return bg;const e=HS(t),n=this._monitoredElements.get(e);if(n)return n.subject.asObservable();const r=new I,i="cdk-text-field-autofilled",a=t=>{"cdk-text-field-autofill-start"!==t.animationName||e.classList.contains(i)?"cdk-text-field-autofill-end"===t.animationName&&e.classList.contains(i)&&(e.classList.remove(i),this._ngZone.run(()=>r.next({target:t.target,isAutofilled:!1}))):(e.classList.add(i),this._ngZone.run(()=>r.next({target:t.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{e.addEventListener("animationstart",a,XO),e.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(e,{subject:r,unlisten:()=>{e.removeEventListener("animationstart",a,XO)}}),r.asObservable()}stopMonitoring(t){const e=HS(t),n=this._monitoredElements.get(e);n&&(n.unlisten(),n.subject.complete(),e.classList.remove("cdk-text-field-autofill-monitored"),e.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(e))}ngOnDestroy(){this._monitoredElements.forEach((t,e)=>this.stopMonitoring(e))}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt($S),qt(Qd))},providedIn:"root"}),t.ngInjectableDef=mt({factory:function(){return new t(qt($S),qt(Qd))},token:t,providedIn:"root"}),t})(),ZO=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();ZO.ngInjectorDef=yt({factory:function(t){return new(t||ZO)},imports:[[KS]]});const QO=[1,"mat-input-element","mat-form-field-autofill-control"],JO=new Nt("MAT_INPUT_VALUE_ACCESSOR"),tF=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let eF=0;class nF{constructor(t,e,n,r){this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=n,this.ngControl=r}}const rF=fE(nF);let iF=(()=>{class t extends rF{constructor(t,e,n,r,i,a,o,s,l){super(a,r,i,n),this._elementRef=t,this._platform=e,this.ngControl=n,this._autofillMonitor=s,this._uid=`mat-input-${eF++}`,this._isServer=!1,this._isNativeSelect=!1,this.focused=!1,this.stateChanges=new I,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._required=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(t=>YS().has(t));const u=this._elementRef.nativeElement;this._inputValueAccessor=o||u,this._previousNativeValue=this.value,this.id=this.id,e.IOS&&l.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",t=>{let e=t.target;e.value||e.selectionStart||e.selectionEnd||(e.setSelectionRange(1,1),e.setSelectionRange(0,0))})}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===u.nodeName.toLowerCase(),this._isNativeSelect&&(this.controlType=u.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=jS(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required}set required(t){this._required=jS(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea()&&YS().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=jS(t)}ngOnInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t===this.focused||this.readonly&&t||(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){if(tF.indexOf(this._type)>-1)throw Error(`Input type "${this._type}" isn't supported by matInput.`)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}_isTextarea(){return"textarea"===this._elementRef.nativeElement.nodeName.toLowerCase()}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,e=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&e&&e.label)}return this.focused||!this.empty}setDescribedByIds(t){this._ariaDescribedby=t.join(" ")}onContainerClick(){this.focused||this.focus()}}return t.ngDirectiveDef=ye({type:t,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],factory:function(e){return new(e||t)(rl(Cu),rl($S),rl(DT,10),rl(kN,8),rl(PN,8),rl(IE),rl(JO,10),rl(YO),rl(Qd))},hostBindings:function(t,e,n){1&t&&(Us(9),Tl("blur",(function(t){return e._focusChanged(!1)})),Tl("focus",(function(t){return e._focusChanged(!0)})),Tl("input",(function(t){return e._onInput()})),Cl(QO),al()),2&t&&(Wl("disabled",e.disabled)("required",e.required),Js("id",e.id)("placeholder",e.placeholder)("readonly",e.readonly&&!e._isNativeSelect||null)("aria-describedby",e._ariaDescribedby||null)("aria-invalid",e.errorState)("aria-required",e.required.toString()),sl("mat-input-server",e._isServer),dl())},inputs:{id:"id",disabled:"disabled",required:"required",type:"type",value:"value",readonly:"readonly",placeholder:"placeholder",errorStateMatcher:"errorStateMatcher"},exportAs:["matInput"],features:[fu([{provide:WA,useExisting:t}]),ru,Ql()]}),t})(),aF=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();aF.ngInjectorDef=yt({factory:function(t){return new(t||aF)},providers:[IE],imports:[[dg,ZO,iD],ZO,iD]});const oF=["thumbContainer"],sF=["toggleBar"],lF=["input"],uF=[1,"mat-slide-toggle"],cF=[1,"mat-slide-toggle-label"],hF=["label",""],dF=[1,"mat-slide-toggle-bar"],pF=["toggleBar",""],fF=["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],mF=["input",""],gF=[1,"mat-slide-toggle-thumb-container",3,"slidestart","slide","slideend"],yF=["thumbContainer",""],vF=[1,"mat-slide-toggle-thumb"],bF=["mat-ripple","",1,"mat-slide-toggle-ripple",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],wF=[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],_F=[1,"mat-slide-toggle-content",3,"cdkObserveContent"],xF=["labelContent",""],CF=[2,"display","none"],SF={enterDuration:150},kF=["*"],EF=new Nt("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1,disableDragValue:!1})});let IF=0;const AF={provide:wT,useExisting:St(()=>RF),multi:!0};class DF{constructor(t,e){this.source=t,this.checked=e}}class TF{constructor(t){this._elementRef=t}}const NF=pE(hE(dE(cE(TF)),"accent"));let RF=(()=>{class t extends NF{constructor(t,e,n,r,i,a,o,s){super(t),this._focusMonitor=e,this._changeDetectorRef=n,this._ngZone=i,this.defaults=a,this._animationMode=o,this._dir=s,this._onChange=t=>{},this._onTouched=()=>{},this._uniqueId=`mat-slide-toggle-${++IF}`,this._required=!1,this._checked=!1,this._dragging=!1,this.name=null,this.id=this._uniqueId,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new Qh,this.toggleChange=new Qh,this.dragChange=new Qh,this.tabIndex=parseInt(r)||0}get required(){return this._required}set required(t){this._required=jS(t)}get checked(){return this._checked}set checked(t){this._checked=jS(t),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{t||Promise.resolve().then(()=>this._onTouched())})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}_onChangeEvent(t){t.stopPropagation(),this._dragging||this.toggleChange.emit(),this._dragging||this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}_onInputClick(t){t.stopPropagation()}writeValue(t){this.checked=!!t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck()}focus(t){this._focusMonitor.focusVia(this._inputElement,"keyboard",t)}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(new DF(this,this.checked))}_getDragPercentage(t){let e=t/this._thumbBarWidth*100;return this._previousChecked&&(e+=100),Math.max(0,Math.min(e,100))}_onDragStart(){if(!this.disabled&&!this._dragging){const t=this._thumbEl.nativeElement;this._thumbBarWidth=this._thumbBarEl.nativeElement.clientWidth-t.clientWidth,t.classList.add("mat-dragging"),this._previousChecked=this.checked,this._dragging=!0}}_onDrag(t){if(this._dragging){const e=this._dir&&"rtl"===this._dir.value?-1:1;this._dragPercentage=this._getDragPercentage(t.deltaX*e),this._thumbEl.nativeElement.style.transform=`translate3d(${this._dragPercentage/100*this._thumbBarWidth*e}px, 0, 0)`}}_onDragEnd(){if(this._dragging){const t=this._dragPercentage>50;t!==this.checked&&(this.dragChange.emit(),this.defaults.disableDragValue||(this.checked=t,this._emitChangeEvent())),this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._dragging&&(this._dragging=!1,this._thumbEl.nativeElement.classList.remove("mat-dragging"),this._thumbEl.nativeElement.style.transform="")}))}}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}}return t.ngComponentDef=de({type:t,selectors:[["mat-slide-toggle"]],factory:function(e){return new(e||t)(rl(Cu),rl(Wk),rl(_s),il("tabindex"),rl(Qd),rl(EF),rl(NS,8),rl(zS,8))},viewQuery:function(t,e){var n;1&t&&(hd(oF,!0),hd(sF,!0),hd(lF,!0)),2&t&&(ud(n=pd())&&(e._thumbEl=n.first),ud(n=pd())&&(e._thumbBarEl=n.first),ud(n=pd())&&(e._inputElement=n.first))},hostBindings:function(t,e,n){1&t&&(Us(8),Tl("focus",(function(t){return e._inputElement.nativeElement.focus()})),Cl(uF),al()),2&t&&(Wl("id",e.id),Js("tabindex",e.disabled?null:-1)("aria-label",null)("aria-labelledby",null),sl("mat-checked",e.checked),sl("mat-disabled",e.disabled),sl("mat-slide-toggle-label-before","before"==e.labelPosition),sl("_mat-animation-noopable","NoopAnimations"===e._animationMode),dl())},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange",dragChange:"dragChange"},exportAs:["matSlideToggle"],features:[fu([AF]),ru],ngContentSelectors:kF,consts:16,vars:16,template:function(t,e){if(1&t&&(Ll(),wl(0,"label",cF,hF),wl(2,"div",dF,pF),al(),wl(4,"input",fF,mF),Tl("change",(function(t){return e._onChangeEvent(t)})),Tl("click",(function(t){return e._onInputClick(t)})),_l(),wl(6,"div",gF,yF),Tl("slidestart",(function(t){return e._onDragStart()})),Tl("slide",(function(t){return e._onDrag(t)})),Tl("slideend",(function(t){return e._onDragEnd()})),xl(8,"div",vF),wl(9,"div",bF),xl(10,"div",wF),_l(),_l(),_l(),wl(11,"span",_F,xF),Tl("cdkObserveContent",(function(t){return e._onLabelTextChange()})),wl(13,"span",CF),Bl(14,"\xa0"),_l(),Vl(15),_l(),_l()),2&t){const t=nl(1),n=nl(12);Js("for",e.inputId),to(2),sl("mat-slide-toggle-bar-no-side-margin",!n.textContent||!n.textContent.trim()),dl(),to(4),Zs("id",e.inputId)("required",e.required)("tabIndex",e.tabIndex)("checked",e.checked)("disabled",e.disabled),Js("name",e.name)("aria-checked",e.checked.toString())("aria-label",e.ariaLabel)("aria-labelledby",e.ariaLabelledby),to(9),Zs("matRippleTrigger",t)("matRippleDisabled",e.disableRipple||e.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",SF)}},directives:[BE,Ik],styles:[".mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px,0,0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px,0,0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}.mat-slide-toggle-bar,[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-right:8px;margin-left:0}.mat-slide-toggle-label-before .mat-slide-toggle-bar,[dir=rtl] .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0,0,0);transition:all 80ms linear;transition-property:transform;cursor:-webkit-grab;cursor:grab}.mat-slide-toggle-thumb-container.mat-dragging{transition-duration:0s}.mat-slide-toggle-thumb-container:active{cursor:-webkit-grabbing;cursor:grabbing}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media (hover:none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}@media (-ms-high-contrast:active){.mat-slide-toggle-thumb{background:#fff;border:1px solid #000}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb{background:#000;border:1px solid #fff}.mat-slide-toggle-bar{background:#fff}.mat-slide-toggle.cdk-keyboard-focused .mat-slide-toggle-bar{outline:1px dotted;outline-offset:5px}}@media (-ms-high-contrast:black-on-white){.mat-slide-toggle-bar{border:1px solid #000}}"],encapsulation:2,changeDetection:0}),t})(),OF=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();OF.ngInjectorDef=yt({factory:function(t){return new(t||OF)}});let FF=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();FF.ngInjectorDef=yt({factory:function(t){return new(t||FF)},providers:[{provide:pv,useClass:NE}],imports:[[OF,jE,uE,Ak],OF,uE]});var MF=pc({encapsulation:2,styles:[".mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px,0,0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px,0,0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}.mat-slide-toggle-bar,[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-right:8px;margin-left:0}.mat-slide-toggle-label-before .mat-slide-toggle-bar,[dir=rtl] .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0,0,0);transition:all 80ms linear;transition-property:transform;cursor:-webkit-grab;cursor:grab}.mat-slide-toggle-thumb-container.mat-dragging{transition-duration:0s}.mat-slide-toggle-thumb-container:active{cursor:-webkit-grabbing;cursor:grabbing}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media (hover:none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}@media (-ms-high-contrast:active){.mat-slide-toggle-thumb{background:#fff;border:1px solid #000}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb{background:#000;border:1px solid #fff}.mat-slide-toggle-bar{background:#fff}.mat-slide-toggle.cdk-keyboard-focused .mat-slide-toggle-bar{outline:1px dotted;outline-offset:5px}}@media (-ms-high-contrast:black-on-white){.mat-slide-toggle-bar{border:1px solid #000}}"],data:{}});function PF(t){return ff(2,[ef(671088640,1,{_thumbEl:0}),ef(671088640,2,{_thumbBarEl:0}),ef(671088640,3,{_inputElement:0}),(t()(),Yp(3,0,[["label",1]],null,13,"label",[["class","mat-slide-toggle-label"]],[[1,"for",0]],null,null,null,null)),(t()(),Yp(4,0,[[2,0],["toggleBar",1]],null,7,"div",[["class","mat-slide-toggle-bar"]],[[2,"mat-slide-toggle-bar-no-side-margin",null]],null,null,null,null)),(t()(),Yp(5,0,[[3,0],["input",1]],null,0,"input",[["class","mat-slide-toggle-input cdk-visually-hidden"],["role","switch"],["type","checkbox"]],[[8,"id",0],[8,"required",0],[8,"tabIndex",0],[8,"checked",0],[8,"disabled",0],[1,"name",0],[1,"aria-checked",0],[1,"aria-label",0],[1,"aria-labelledby",0]],[[null,"change"],[null,"click"]],(function(t,e,n){var r=!0,i=t.component;return"change"===e&&(r=!1!==i._onChangeEvent(n)&&r),"click"===e&&(r=!1!==i._onInputClick(n)&&r),r}),null,null)),(t()(),Yp(6,0,[[1,0],["thumbContainer",1]],null,5,"div",[["class","mat-slide-toggle-thumb-container"]],null,[[null,"slidestart"],[null,"slide"],[null,"slideend"]],(function(t,e,n){var r=!0,i=t.component;return"slidestart"===e&&(r=!1!==i._onDragStart()&&r),"slide"===e&&(r=!1!==i._onDrag(n)&&r),"slideend"===e&&(r=!1!==i._onDragEnd()&&r),r}),null,null)),(t()(),Yp(7,0,null,null,0,"div",[["class","mat-slide-toggle-thumb"]],null,null,null,null,null)),(t()(),Yp(8,0,null,null,3,"div",[["class","mat-slide-toggle-ripple mat-ripple"],["mat-ripple",""]],[[2,"mat-ripple-unbounded",null]],null,null,null,null)),_h(9,212992,null,0,BE,[Cu,Qd,$S,[2,VE],[2,NS]],{centered:[0,"centered"],radius:[1,"radius"],animation:[2,"animation"],disabled:[3,"disabled"],trigger:[4,"trigger"]},null),uf(10,{enterDuration:0}),(t()(),Yp(11,0,null,null,0,"div",[["class","mat-ripple-element mat-slide-toggle-persistent-ripple"]],null,null,null,null,null)),(t()(),Yp(12,0,[["labelContent",1]],null,4,"span",[["class","mat-slide-toggle-content"]],null,[[null,"cdkObserveContent"]],(function(t,e,n){var r=!0;return"cdkObserveContent"===e&&(r=!1!==t.component._onLabelTextChange()&&r),r}),null,null)),_h(13,1196032,null,0,Ik,[Ek,Cu,Qd],null,{event:"cdkObserveContent"}),(t()(),Yp(14,0,null,null,1,"span",[["style","display:none"]],null,null,null,null,null)),(t()(),hf(-1,null,["\xa0"])),sf(null,0)],(function(t,e){var n=e.component,r=t(e,10,0,150);t(e,9,0,!0,20,r,n.disableRipple||n.disabled,lh(e,3))}),(function(t,e){var n=e.component;t(e,3,0,n.inputId),t(e,4,0,!lh(e,12).textContent||!lh(e,12).textContent.trim()),t(e,5,0,n.inputId,n.required,n.tabIndex,n.checked,n.disabled,n.name,n.checked.toString(),n.ariaLabel,n.ariaLabelledby),t(e,8,0,lh(e,9).unbounded)}))}const LF=[1,"mat-card"],zF=["*",[["mat-card-footer"]]],VF=["*","mat-card-footer"];let BF=(()=>{class t{constructor(t){this._animationMode=t}}return t.ngComponentDef=de({type:t,selectors:[["mat-card"]],factory:function(e){return new(e||t)(rl(NS,8))},hostBindings:function(t,e,n){1&t&&(Us(1),Cl(LF),al()),2&t&&(sl("_mat-animation-noopable","NoopAnimations"===e._animationMode),dl())},exportAs:["matCard"],ngContentSelectors:VF,consts:2,vars:0,template:function(t,e){1&t&&(Ll(zF),Vl(0),Vl(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(.4,0,.2,1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}@media (-ms-high-contrast:active){.mat-card{outline:solid 1px}}.mat-card-actions,.mat-card-content,.mat-card-subtitle{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media (max-width:599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card-content>:first-child,.mat-card>:first-child{margin-top:0}.mat-card-content>:last-child:not(.mat-card-footer),.mat-card>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions .mat-button:first-child,.mat-card-actions .mat-raised-button:first-child,.mat-card-actions .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-subtitle:not(:first-child),.mat-card-title:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}"],encapsulation:2,changeDetection:0}),t})(),jF=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();jF.ngInjectorDef=yt({factory:function(t){return new(t||jF)},imports:[[uE],uE]});var UF=pc({encapsulation:2,styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(.4,0,.2,1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}@media (-ms-high-contrast:active){.mat-card{outline:solid 1px}}.mat-card-actions,.mat-card-content,.mat-card-subtitle{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media (max-width:599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card-content>:first-child,.mat-card>:first-child{margin-top:0}.mat-card-content>:last-child:not(.mat-card-footer),.mat-card>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions .mat-button:first-child,.mat-card-actions .mat-raised-button:first-child,.mat-card-actions .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-subtitle:not(:first-child),.mat-card-title:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}"],data:{}});function WF(t){return ff(2,[sf(null,0),sf(null,1)],null,null)}class HF{constructor(t){if(this.router=t,localStorage.getItem("settings")){const t=JSON.parse(localStorage.getItem("settings"));this.endpoint=t.customVisionEndpoint,this.key=t.customVisionKey,this.isStoringImage=t.isStoringImage,this.isLocal=t.isLocal,this.modelEndpoint=t.modelEndpoint,this.modelLabel=t.modelLabel}}ngOnInit(){}setEndpointsAndKey(){localStorage.setItem("settings",JSON.stringify({customVisionEndpoint:this.endpoint,customVisionKey:this.key,isStoringImage:this.isStoringImage,isLocal:this.isLocal,modelEndpoint:this.modelEndpoint,modelLabel:this.modelLabel})),this.router.navigate(["/scanner"])}}var qF=pc({encapsulation:0,styles:[[".settings[_ngcontent-%COMP%]{height:100%;width:100%}.example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:90%}.example-full-width[_ngcontent-%COMP%]{width:90%}"]],data:{}});function GF(t){return ff(0,[(t()(),Yp(0,0,null,null,38,"div",[],null,null,null,null,null)),(t()(),Yp(1,0,null,null,18,"mat-form-field",[["class","example-full-width mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,yD,aD)),_h(2,7520256,null,9,rD,[Cu,_s,[2,eI],[2,zS],[2,nD],$S,Qd,[2,NS]],null,null),ef(603979776,1,{_controlNonStatic:0}),ef(335544320,2,{_controlStatic:0}),ef(603979776,3,{_labelChildNonStatic:0}),ef(335544320,4,{_labelChildStatic:0}),ef(603979776,5,{_placeholderChild:0}),ef(603979776,6,{_errorChildren:1}),ef(603979776,7,{_hintChildren:1}),ef(603979776,8,{_prefixChildren:1}),ef(603979776,9,{_suffixChildren:1}),(t()(),Yp(12,0,null,1,7,"input",[["class","mat-input-element mat-form-field-autofill-control"],["matInput",""],["placeholder","Put model blob link"]],[[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"]],(function(t,e,n){var r=!0,i=t.component;return"input"===e&&(r=!1!==lh(t,13)._handleInput(n.target.value)&&r),"blur"===e&&(r=!1!==lh(t,13).onTouched()&&r),"compositionstart"===e&&(r=!1!==lh(t,13)._compositionStart()&&r),"compositionend"===e&&(r=!1!==lh(t,13)._compositionEnd(n.target.value)&&r),"blur"===e&&(r=!1!==lh(t,17)._focusChanged(!1)&&r),"focus"===e&&(r=!1!==lh(t,17)._focusChanged(!0)&&r),"input"===e&&(r=!1!==lh(t,17)._onInput()&&r),"ngModelChange"===e&&(r=!1!==(i.modelEndpoint=n)&&r),r}),null,null)),_h(13,16384,null,0,kT,[Au,Cu,[2,ST]],null,null),xh(1024,null,wT,(function(t){return[t]}),[kT]),_h(15,671744,null,0,ON,[[8,null],[8,null],[8,null],[6,wT]],{model:[0,"model"]},{update:"ngModelChange"}),xh(2048,null,DT,null,[ON]),_h(17,999424,null,0,iF,[Cu,$S,[6,DT],[2,kN],[2,PN],IE,[8,null],YO,Qd],{placeholder:[0,"placeholder"]},null),_h(18,16384,null,0,NT,[[4,DT]],null,null),xh(2048,[[1,4],[2,4]],WA,null,[iF]),(t()(),Yp(20,0,null,null,18,"mat-form-field",[["class","example-full-width mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,yD,aD)),_h(21,7520256,null,9,rD,[Cu,_s,[2,eI],[2,zS],[2,nD],$S,Qd,[2,NS]],null,null),ef(603979776,10,{_controlNonStatic:0}),ef(335544320,11,{_controlStatic:0}),ef(603979776,12,{_labelChildNonStatic:0}),ef(335544320,13,{_labelChildStatic:0}),ef(603979776,14,{_placeholderChild:0}),ef(603979776,15,{_errorChildren:1}),ef(603979776,16,{_hintChildren:1}),ef(603979776,17,{_prefixChildren:1}),ef(603979776,18,{_suffixChildren:1}),(t()(),Yp(31,0,null,1,7,"input",[["class","mat-input-element mat-form-field-autofill-control"],["matInput",""],["placeholder","Put model labels blob"]],[[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"]],(function(t,e,n){var r=!0,i=t.component;return"input"===e&&(r=!1!==lh(t,32)._handleInput(n.target.value)&&r),"blur"===e&&(r=!1!==lh(t,32).onTouched()&&r),"compositionstart"===e&&(r=!1!==lh(t,32)._compositionStart()&&r),"compositionend"===e&&(r=!1!==lh(t,32)._compositionEnd(n.target.value)&&r),"blur"===e&&(r=!1!==lh(t,36)._focusChanged(!1)&&r),"focus"===e&&(r=!1!==lh(t,36)._focusChanged(!0)&&r),"input"===e&&(r=!1!==lh(t,36)._onInput()&&r),"ngModelChange"===e&&(r=!1!==(i.modelLabel=n)&&r),r}),null,null)),_h(32,16384,null,0,kT,[Au,Cu,[2,ST]],null,null),xh(1024,null,wT,(function(t){return[t]}),[kT]),_h(34,671744,null,0,ON,[[8,null],[8,null],[8,null],[6,wT]],{model:[0,"model"]},{update:"ngModelChange"}),xh(2048,null,DT,null,[ON]),_h(36,999424,null,0,iF,[Cu,$S,[6,DT],[2,kN],[2,PN],IE,[8,null],YO,Qd],{placeholder:[0,"placeholder"]},null),_h(37,16384,null,0,NT,[[4,DT]],null,null),xh(2048,[[10,4],[11,4]],WA,null,[iF])],(function(t,e){var n=e.component;t(e,15,0,n.modelEndpoint),t(e,17,0,"Put model blob link"),t(e,34,0,n.modelLabel),t(e,36,0,"Put model labels blob")}),(function(t,e){t(e,1,1,["standard"==lh(e,2).appearance,"fill"==lh(e,2).appearance,"outline"==lh(e,2).appearance,"legacy"==lh(e,2).appearance,lh(e,2)._control.errorState,lh(e,2)._canLabelFloat,lh(e,2)._shouldLabelFloat(),lh(e,2)._hasFloatingLabel(),lh(e,2)._hideControlPlaceholder(),lh(e,2)._control.disabled,lh(e,2)._control.autofilled,lh(e,2)._control.focused,"accent"==lh(e,2).color,"warn"==lh(e,2).color,lh(e,2)._shouldForward("untouched"),lh(e,2)._shouldForward("touched"),lh(e,2)._shouldForward("pristine"),lh(e,2)._shouldForward("dirty"),lh(e,2)._shouldForward("valid"),lh(e,2)._shouldForward("invalid"),lh(e,2)._shouldForward("pending"),!lh(e,2)._animationsEnabled]),t(e,12,1,[lh(e,17)._isServer,lh(e,17).id,lh(e,17).placeholder,lh(e,17).disabled,lh(e,17).required,lh(e,17).readonly&&!lh(e,17)._isNativeSelect||null,lh(e,17)._ariaDescribedby||null,lh(e,17).errorState,lh(e,17).required.toString(),lh(e,18).ngClassUntouched,lh(e,18).ngClassTouched,lh(e,18).ngClassPristine,lh(e,18).ngClassDirty,lh(e,18).ngClassValid,lh(e,18).ngClassInvalid,lh(e,18).ngClassPending]),t(e,20,1,["standard"==lh(e,21).appearance,"fill"==lh(e,21).appearance,"outline"==lh(e,21).appearance,"legacy"==lh(e,21).appearance,lh(e,21)._control.errorState,lh(e,21)._canLabelFloat,lh(e,21)._shouldLabelFloat(),lh(e,21)._hasFloatingLabel(),lh(e,21)._hideControlPlaceholder(),lh(e,21)._control.disabled,lh(e,21)._control.autofilled,lh(e,21)._control.focused,"accent"==lh(e,21).color,"warn"==lh(e,21).color,lh(e,21)._shouldForward("untouched"),lh(e,21)._shouldForward("touched"),lh(e,21)._shouldForward("pristine"),lh(e,21)._shouldForward("dirty"),lh(e,21)._shouldForward("valid"),lh(e,21)._shouldForward("invalid"),lh(e,21)._shouldForward("pending"),!lh(e,21)._animationsEnabled]),t(e,31,1,[lh(e,36)._isServer,lh(e,36).id,lh(e,36).placeholder,lh(e,36).disabled,lh(e,36).required,lh(e,36).readonly&&!lh(e,36)._isNativeSelect||null,lh(e,36)._ariaDescribedby||null,lh(e,36).errorState,lh(e,36).required.toString(),lh(e,37).ngClassUntouched,lh(e,37).ngClassTouched,lh(e,37).ngClassPristine,lh(e,37).ngClassDirty,lh(e,37).ngClassValid,lh(e,37).ngClassInvalid,lh(e,37).ngClassPending])}))}function $F(t){return ff(0,[(t()(),Yp(0,0,null,null,45,"div",[],null,null,null,null,null)),(t()(),Yp(1,0,null,null,18,"mat-form-field",[["class","example-full-width mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,yD,aD)),_h(2,7520256,null,9,rD,[Cu,_s,[2,eI],[2,zS],[2,nD],$S,Qd,[2,NS]],null,null),ef(603979776,19,{_controlNonStatic:0}),ef(335544320,20,{_controlStatic:0}),ef(603979776,21,{_labelChildNonStatic:0}),ef(335544320,22,{_labelChildStatic:0}),ef(603979776,23,{_placeholderChild:0}),ef(603979776,24,{_errorChildren:1}),ef(603979776,25,{_hintChildren:1}),ef(603979776,26,{_prefixChildren:1}),ef(603979776,27,{_suffixChildren:1}),(t()(),Yp(12,0,null,1,7,"input",[["class","mat-input-element mat-form-field-autofill-control"],["matInput",""],["placeholder","Put customvision endpoint"]],[[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"]],(function(t,e,n){var r=!0,i=t.component;return"input"===e&&(r=!1!==lh(t,13)._handleInput(n.target.value)&&r),"blur"===e&&(r=!1!==lh(t,13).onTouched()&&r),"compositionstart"===e&&(r=!1!==lh(t,13)._compositionStart()&&r),"compositionend"===e&&(r=!1!==lh(t,13)._compositionEnd(n.target.value)&&r),"blur"===e&&(r=!1!==lh(t,17)._focusChanged(!1)&&r),"focus"===e&&(r=!1!==lh(t,17)._focusChanged(!0)&&r),"input"===e&&(r=!1!==lh(t,17)._onInput()&&r),"ngModelChange"===e&&(r=!1!==(i.endpoint=n)&&r),r}),null,null)),_h(13,16384,null,0,kT,[Au,Cu,[2,ST]],null,null),xh(1024,null,wT,(function(t){return[t]}),[kT]),_h(15,671744,null,0,ON,[[8,null],[8,null],[8,null],[6,wT]],{model:[0,"model"]},{update:"ngModelChange"}),xh(2048,null,DT,null,[ON]),_h(17,999424,null,0,iF,[Cu,$S,[6,DT],[2,kN],[2,PN],IE,[8,null],YO,Qd],{placeholder:[0,"placeholder"]},null),_h(18,16384,null,0,NT,[[4,DT]],null,null),xh(2048,[[19,4],[20,4]],WA,null,[iF]),(t()(),Yp(20,0,null,null,18,"mat-form-field",[["class","example-full-width mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,yD,aD)),_h(21,7520256,null,9,rD,[Cu,_s,[2,eI],[2,zS],[2,nD],$S,Qd,[2,NS]],null,null),ef(603979776,28,{_controlNonStatic:0}),ef(335544320,29,{_controlStatic:0}),ef(603979776,30,{_labelChildNonStatic:0}),ef(335544320,31,{_labelChildStatic:0}),ef(603979776,32,{_placeholderChild:0}),ef(603979776,33,{_errorChildren:1}),ef(603979776,34,{_hintChildren:1}),ef(603979776,35,{_prefixChildren:1}),ef(603979776,36,{_suffixChildren:1}),(t()(),Yp(31,0,null,1,7,"input",[["class","mat-input-element mat-form-field-autofill-control"],["matInput",""],["placeholder","Put customvision key"]],[[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"]],(function(t,e,n){var r=!0,i=t.component;return"input"===e&&(r=!1!==lh(t,32)._handleInput(n.target.value)&&r),"blur"===e&&(r=!1!==lh(t,32).onTouched()&&r),"compositionstart"===e&&(r=!1!==lh(t,32)._compositionStart()&&r),"compositionend"===e&&(r=!1!==lh(t,32)._compositionEnd(n.target.value)&&r),"blur"===e&&(r=!1!==lh(t,36)._focusChanged(!1)&&r),"focus"===e&&(r=!1!==lh(t,36)._focusChanged(!0)&&r),"input"===e&&(r=!1!==lh(t,36)._onInput()&&r),"ngModelChange"===e&&(r=!1!==(i.key=n)&&r),r}),null,null)),_h(32,16384,null,0,kT,[Au,Cu,[2,ST]],null,null),xh(1024,null,wT,(function(t){return[t]}),[kT]),_h(34,671744,null,0,ON,[[8,null],[8,null],[8,null],[6,wT]],{model:[0,"model"]},{update:"ngModelChange"}),xh(2048,null,DT,null,[ON]),_h(36,999424,null,0,iF,[Cu,$S,[6,DT],[2,kN],[2,PN],IE,[8,null],YO,Qd],{placeholder:[0,"placeholder"]},null),_h(37,16384,null,0,NT,[[4,DT]],null,null),xh(2048,[[28,4],[29,4]],WA,null,[iF]),(t()(),Yp(39,0,null,null,6,"mat-slide-toggle",[["class","example-full-width mat-slide-toggle"]],[[8,"id",0],[1,"tabindex",0],[1,"aria-label",0],[1,"aria-labelledby",0],[2,"mat-checked",null],[2,"mat-disabled",null],[2,"mat-slide-toggle-label-before",null],[2,"_mat-animation-noopable",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"focus"]],(function(t,e,n){var r=!0,i=t.component;return"focus"===e&&(r=!1!==lh(t,40)._inputElement.nativeElement.focus()&&r),"ngModelChange"===e&&(r=!1!==(i.isStoringImage=n)&&r),r}),PF,MF)),_h(40,1228800,null,0,RF,[Cu,Wk,_s,[8,null],Qd,EF,[2,NS],[2,zS]],null,null),xh(1024,null,wT,(function(t){return[t]}),[RF]),_h(42,671744,null,0,ON,[[8,null],[8,null],[8,null],[6,wT]],{model:[0,"model"]},{update:"ngModelChange"}),xh(2048,null,DT,null,[ON]),_h(44,16384,null,0,NT,[[4,DT]],null,null),(t()(),hf(-1,0,[" Storing image? "]))],(function(t,e){var n=e.component;t(e,15,0,n.endpoint),t(e,17,0,"Put customvision endpoint"),t(e,34,0,n.key),t(e,36,0,"Put customvision key"),t(e,42,0,n.isStoringImage)}),(function(t,e){t(e,1,1,["standard"==lh(e,2).appearance,"fill"==lh(e,2).appearance,"outline"==lh(e,2).appearance,"legacy"==lh(e,2).appearance,lh(e,2)._control.errorState,lh(e,2)._canLabelFloat,lh(e,2)._shouldLabelFloat(),lh(e,2)._hasFloatingLabel(),lh(e,2)._hideControlPlaceholder(),lh(e,2)._control.disabled,lh(e,2)._control.autofilled,lh(e,2)._control.focused,"accent"==lh(e,2).color,"warn"==lh(e,2).color,lh(e,2)._shouldForward("untouched"),lh(e,2)._shouldForward("touched"),lh(e,2)._shouldForward("pristine"),lh(e,2)._shouldForward("dirty"),lh(e,2)._shouldForward("valid"),lh(e,2)._shouldForward("invalid"),lh(e,2)._shouldForward("pending"),!lh(e,2)._animationsEnabled]),t(e,12,1,[lh(e,17)._isServer,lh(e,17).id,lh(e,17).placeholder,lh(e,17).disabled,lh(e,17).required,lh(e,17).readonly&&!lh(e,17)._isNativeSelect||null,lh(e,17)._ariaDescribedby||null,lh(e,17).errorState,lh(e,17).required.toString(),lh(e,18).ngClassUntouched,lh(e,18).ngClassTouched,lh(e,18).ngClassPristine,lh(e,18).ngClassDirty,lh(e,18).ngClassValid,lh(e,18).ngClassInvalid,lh(e,18).ngClassPending]),t(e,20,1,["standard"==lh(e,21).appearance,"fill"==lh(e,21).appearance,"outline"==lh(e,21).appearance,"legacy"==lh(e,21).appearance,lh(e,21)._control.errorState,lh(e,21)._canLabelFloat,lh(e,21)._shouldLabelFloat(),lh(e,21)._hasFloatingLabel(),lh(e,21)._hideControlPlaceholder(),lh(e,21)._control.disabled,lh(e,21)._control.autofilled,lh(e,21)._control.focused,"accent"==lh(e,21).color,"warn"==lh(e,21).color,lh(e,21)._shouldForward("untouched"),lh(e,21)._shouldForward("touched"),lh(e,21)._shouldForward("pristine"),lh(e,21)._shouldForward("dirty"),lh(e,21)._shouldForward("valid"),lh(e,21)._shouldForward("invalid"),lh(e,21)._shouldForward("pending"),!lh(e,21)._animationsEnabled]),t(e,31,1,[lh(e,36)._isServer,lh(e,36).id,lh(e,36).placeholder,lh(e,36).disabled,lh(e,36).required,lh(e,36).readonly&&!lh(e,36)._isNativeSelect||null,lh(e,36)._ariaDescribedby||null,lh(e,36).errorState,lh(e,36).required.toString(),lh(e,37).ngClassUntouched,lh(e,37).ngClassTouched,lh(e,37).ngClassPristine,lh(e,37).ngClassDirty,lh(e,37).ngClassValid,lh(e,37).ngClassInvalid,lh(e,37).ngClassPending]),t(e,39,1,[lh(e,40).id,lh(e,40).disabled?null:-1,null,null,lh(e,40).checked,lh(e,40).disabled,"before"==lh(e,40).labelPosition,"NoopAnimations"===lh(e,40)._animationMode,lh(e,44).ngClassUntouched,lh(e,44).ngClassTouched,lh(e,44).ngClassPristine,lh(e,44).ngClassDirty,lh(e,44).ngClassValid,lh(e,44).ngClassInvalid,lh(e,44).ngClassPending])}))}function KF(t){return ff(0,[(t()(),Yp(0,0,null,null,15,"mat-card",[["class","settings mat-card"]],[[2,"_mat-animation-noopable",null]],null,null,WF,UF)),_h(1,49152,null,0,BF,[[2,NS]],null,null),(t()(),Yp(2,0,null,0,6,"mat-slide-toggle",[["class","example-full-width mat-slide-toggle"]],[[8,"id",0],[1,"tabindex",0],[1,"aria-label",0],[1,"aria-labelledby",0],[2,"mat-checked",null],[2,"mat-disabled",null],[2,"mat-slide-toggle-label-before",null],[2,"_mat-animation-noopable",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"focus"]],(function(t,e,n){var r=!0,i=t.component;return"focus"===e&&(r=!1!==lh(t,3)._inputElement.nativeElement.focus()&&r),"ngModelChange"===e&&(r=!1!==(i.isLocal=n)&&r),r}),PF,MF)),_h(3,1228800,null,0,RF,[Cu,Wk,_s,[8,null],Qd,EF,[2,NS],[2,zS]],null,null),xh(1024,null,wT,(function(t){return[t]}),[RF]),_h(5,671744,null,0,ON,[[8,null],[8,null],[8,null],[6,wT]],{model:[0,"model"]},{update:"ngModelChange"}),xh(2048,null,DT,null,[ON]),_h(7,16384,null,0,NT,[[4,DT]],null,null),(t()(),hf(-1,0,[" Working localy? "])),(t()(),Xp(16777216,null,0,1,null,GF)),_h(10,16384,null,0,Qm,[Xu,$u],{ngIf:[0,"ngIf"]},null),(t()(),Xp(16777216,null,0,1,null,$F)),_h(12,16384,null,0,Qm,[Xu,$u],{ngIf:[0,"ngIf"]},null),(t()(),Yp(13,0,null,0,2,"button",[["class","example-full-width"],["color","primary"],["mat-raised-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.setEndpointsAndKey()&&r),r}),OI,RI)),_h(14,180224,null,0,TI,[Cu,Wk,[2,NS]],{color:[0,"color"]},null),(t()(),hf(-1,0,[" Save "]))],(function(t,e){var n=e.component;t(e,5,0,n.isLocal),t(e,10,0,n.isLocal),t(e,12,0,!n.isLocal),t(e,14,0,"primary")}),(function(t,e){t(e,0,0,"NoopAnimations"===lh(e,1)._animationMode),t(e,2,1,[lh(e,3).id,lh(e,3).disabled?null:-1,null,null,lh(e,3).checked,lh(e,3).disabled,"before"==lh(e,3).labelPosition,"NoopAnimations"===lh(e,3)._animationMode,lh(e,7).ngClassUntouched,lh(e,7).ngClassTouched,lh(e,7).ngClassPristine,lh(e,7).ngClassDirty,lh(e,7).ngClassValid,lh(e,7).ngClassInvalid,lh(e,7).ngClassPending]),t(e,13,0,lh(e,14).disabled||null,"NoopAnimations"===lh(e,14)._animationMode)}))}function XF(t){return ff(0,[(t()(),Yp(0,0,null,null,1,"app-settings",[],null,null,null,KF,qF)),_h(1,114688,null,0,HF,[Qw],null,null)],(function(t,e){t(e,1,0)}),null)}var YF=Zc("app-settings",HF,XF,{},{},[]);class ZF{constructor(t){this.total=t}call(t,e){return e.subscribe(new QF(t,this.total))}}class QF extends m{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){++this.count>this.total&&this.destination.next(t)}}const JF=new Set;let tM,eM=(()=>{class t{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):nM}matchMedia(t){return this._platform.WEBKIT&&function(t){if(!JF.has(t))try{tM||((tM=document.createElement("style")).setAttribute("type","text/css"),document.head.appendChild(tM)),tM.sheet&&(tM.sheet.insertRule(`@media ${t} {.fx-query-test{ }}`,0),JF.add(t))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt($S))},providedIn:"root"}),t.ngInjectableDef=mt({factory:function(){return new t(qt($S))},token:t,providedIn:"root"}),t})();function nM(t){return{matches:"all"===t||""===t,media:t,addListener:()=>{},removeListener:()=>{}}}let rM=(()=>{class t{constructor(t,e){this._mediaMatcher=t,this._zone=e,this._queries=new Map,this._destroySubject=new I}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return iM(US(t)).some(t=>this._registerQuery(t).mql.matches)}observe(t){let e=Ig(iM(US(t)).map(t=>this._registerQuery(t).observable));return(e=sy(e.pipe(Qg(1)),e.pipe(t=>t.lift(new ZF(1)),_k(0)))).pipe(U(t=>{const e={matches:!1,breakpoints:{}};return t.forEach(t=>{e.matches=e.matches||t.matches,e.breakpoints[t.query]=t.matches}),e}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const e=this._mediaMatcher.matchMedia(t),n={observable:new _(t=>{const n=e=>this._zone.run(()=>t.next(e));return e.addListener(n),()=>{e.removeListener(n)}}).pipe(ly(e),U(e=>({query:t,matches:e.matches})),VI(this._destroySubject)),mql:e};return this._queries.set(t,n),n}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)(qt(eM),qt(Qd))},providedIn:"root"}),t.ngInjectableDef=mt({factory:function(){return new t(qt(eM),qt(Qd))},token:t,providedIn:"root"}),t})();function iM(t){return t.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}const aM={XSmall:"(max-width: 599.99px)",Small:"(min-width: 600px) and (max-width: 959.99px)",Medium:"(min-width: 960px) and (max-width: 1279.99px)",Large:"(min-width: 1280px) and (max-width: 1919.99px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.99px) and (orientation: portrait), (max-width: 959.99px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.99px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.99px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.99px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.99px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.99px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.99px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"},oM=["tabindex","-1","role","dialog","aria-modal","true",1,"mat-bottom-sheet-container"],sM=["cdkPortalOutlet",""];function lM(t,e){}const uM=new Nt("MatBottomSheetData");class cM{constructor(){this.data=null,this.hasBackdrop=!0,this.disableClose=!1,this.ariaLabel=null,this.closeOnNavigation=!0,this.autoFocus=!1,this.restoreFocus=!0}}const hM={bottomSheetState:N_("state",[M_("void, hidden",F_({transform:"translateY(100%)"})),M_("visible",F_({transform:"translateY(0%)"})),P_("visible => void, visible => hidden",R_(`${oE.COMPLEX} ${aE.ACCELERATION_CURVE}`)),P_("void => visible",R_(`${oE.EXITING} ${aE.DECELERATION_CURVE}`))])};let dM=(()=>{class t extends PD{constructor(t,e,n,r,i,a){super(),this._elementRef=t,this._changeDetectorRef=e,this._focusTrapFactory=n,this.bottomSheetConfig=a,this._animationState="void",this._animationStateChanged=new Qh,this._elementFocusedBeforeOpened=null,this._document=i,this._breakpointSubscription=r.observe([aM.Medium,aM.Large,aM.XLarge]).subscribe(()=>{this._toggleClass("mat-bottom-sheet-container-medium",r.isMatched(aM.Medium)),this._toggleClass("mat-bottom-sheet-container-large",r.isMatched(aM.Large)),this._toggleClass("mat-bottom-sheet-container-xlarge",r.isMatched(aM.XLarge))})}attachComponentPortal(t){return this._validatePortalAttached(),this._setPanelClass(),this._savePreviouslyFocusedElement(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._validatePortalAttached(),this._setPanelClass(),this._savePreviouslyFocusedElement(),this._portalOutlet.attachTemplatePortal(t)}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges())}exit(){this._destroyed||(this._animationState="hidden",this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._breakpointSubscription.unsubscribe(),this._destroyed=!0}_onAnimationDone(t){"hidden"===t.toState?this._restoreFocus():"visible"===t.toState&&this._trapFocus(),this._animationStateChanged.emit(t)}_onAnimationStart(t){this._animationStateChanged.emit(t)}_toggleClass(t,e){const n=this._elementRef.nativeElement.classList;e?n.add(t):n.remove(t)}_validatePortalAttached(){if(this._portalOutlet.hasAttached())throw Error("Attempting to attach bottom sheet content after content is already attached")}_setPanelClass(){const t=this._elementRef.nativeElement,e=this.bottomSheetConfig.panelClass;Array.isArray(e)?e.forEach(e=>t.classList.add(e)):e&&t.classList.add(e)}_trapFocus(){const t=this._elementRef.nativeElement;if(this._focusTrap||(this._focusTrap=this._focusTrapFactory.create(t)),this.bottomSheetConfig.autoFocus)this._focusTrap.focusInitialElementWhenReady();else{const e=this._document.activeElement;e===t||t.contains(e)||t.focus()}}_restoreFocus(){const t=this._elementFocusedBeforeOpened;this.bottomSheetConfig.restoreFocus&&t&&"function"==typeof t.focus&&t.focus(),this._focusTrap&&this._focusTrap.destroy()}_savePreviouslyFocusedElement(){this._elementFocusedBeforeOpened=this._document.activeElement,this._elementRef.nativeElement.focus&&Promise.resolve().then(()=>this._elementRef.nativeElement.focus())}}return t.ngComponentDef=de({type:t,selectors:[["mat-bottom-sheet-container"]],factory:function(e){return new(e||t)(rl(Cu),rl(_s),rl(Mk),rl(rM),rl(fg,8),rl(cM))},viewQuery:function(t,e){var n;1&t&&cd(zD,!0),2&t&&ud(n=pd())&&(e._portalOutlet=n.first)},hostBindings:function(t,e,n){1&t&&(Us(2),Nl("@state.start",(function(t){return e._onAnimationStart(t)})),Nl("@state.done",(function(t){return e._onAnimationDone(t)})),Cl(oM)),2&t&&(Js("aria-label",null==e.bottomSheetConfig?null:e.bottomSheetConfig.ariaLabel),Hl("@state",e._animationState))},features:[ru],consts:1,vars:0,template:function(t,e){1&t&&el(0,lM,0,0,"ng-template",sM)},directives:[zD],styles:[".mat-bottom-sheet-container{padding:8px 16px;min-width:100vw;box-sizing:border-box;display:block;outline:0;max-height:80vh;overflow:auto}@media (-ms-high-contrast:active){.mat-bottom-sheet-container{outline:1px solid}}.mat-bottom-sheet-container-large,.mat-bottom-sheet-container-medium,.mat-bottom-sheet-container-xlarge{border-top-left-radius:4px;border-top-right-radius:4px}.mat-bottom-sheet-container-medium{min-width:384px;max-width:calc(100vw - 128px)}.mat-bottom-sheet-container-large{min-width:512px;max-width:calc(100vw - 256px)}.mat-bottom-sheet-container-xlarge{min-width:576px;max-width:calc(100vw - 384px)}"],encapsulation:2,data:{animation:[hM.bottomSheetState]},changeDetection:0}),t})(),pM=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();pM.ngInjectorDef=yt({factory:function(t){return new(t||pM)},imports:[[dg,vT,uE,VD],uE]});class fM{constructor(t,e,n){this._overlayRef=e,this._afterDismissed=new I,this._afterOpened=new I,this.containerInstance=t,this.disableClose=t.bottomSheetConfig.disableClose,t._animationStateChanged.pipe(Rg(t=>"done"===t.phaseName&&"visible"===t.toState),Qg(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),t._animationStateChanged.pipe(Rg(t=>"done"===t.phaseName&&"hidden"===t.toState),Qg(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),e.dispose()}),e.detachments().pipe(Qg(1)).subscribe(()=>{this._afterDismissed.next(this._result),this._afterDismissed.complete()}),Q(e.backdropClick(),e.keydownEvents().pipe(Rg(t=>t.keyCode===ek))).subscribe(t=>{this.disableClose||"keydown"===t.type&&mk(t)||(t.preventDefault(),this.dismiss())})}dismiss(t){this._afterDismissed.closed||(this.containerInstance._animationStateChanged.pipe(Rg(t=>"start"===t.phaseName),Qg(1)).subscribe(t=>{this._closeFallbackTimeout=setTimeout(()=>{this._overlayRef.dispose()},t.totalTime+100),this._overlayRef.detachBackdrop()}),this._result=t,this.containerInstance.exit())}afterDismissed(){return this._afterDismissed.asObservable()}afterOpened(){return this._afterOpened.asObservable()}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}}var mM=pc({encapsulation:2,styles:[".mat-bottom-sheet-container{padding:8px 16px;min-width:100vw;box-sizing:border-box;display:block;outline:0;max-height:80vh;overflow:auto}@media (-ms-high-contrast:active){.mat-bottom-sheet-container{outline:1px solid}}.mat-bottom-sheet-container-large,.mat-bottom-sheet-container-medium,.mat-bottom-sheet-container-xlarge{border-top-left-radius:4px;border-top-right-radius:4px}.mat-bottom-sheet-container-medium{min-width:384px;max-width:calc(100vw - 128px)}.mat-bottom-sheet-container-large{min-width:512px;max-width:calc(100vw - 256px)}.mat-bottom-sheet-container-xlarge{min-width:576px;max-width:calc(100vw - 384px)}"],data:{animation:[{type:7,name:"state",definitions:[{type:0,name:"void, hidden",styles:{type:6,styles:{transform:"translateY(100%)"},offset:null},options:void 0},{type:0,name:"visible",styles:{type:6,styles:{transform:"translateY(0%)"},offset:null},options:void 0},{type:1,expr:"visible => void, visible => hidden",animation:{type:4,styles:null,timings:"375ms cubic-bezier(0.4,0.0,1,1)"},options:null},{type:1,expr:"void => visible",animation:{type:4,styles:null,timings:"195ms cubic-bezier(0.0,0.0,0.2,1)"},options:null}],options:{}}]}});function gM(t){return ff(0,[(t()(),Xp(0,null,null,0))],null,null)}function yM(t){return ff(2,[ef(402653184,1,{_portalOutlet:0}),(t()(),Xp(16777216,null,null,1,null,gM)),_h(2,212992,[[1,4]],0,zD,[wu,Xu],{portal:[0,"portal"]},null)],(function(t,e){t(e,2,0,"")}),null)}function vM(t){return ff(0,[(t()(),Yp(0,0,null,null,1,"mat-bottom-sheet-container",[["aria-modal","true"],["class","mat-bottom-sheet-container"],["role","dialog"],["tabindex","-1"]],[[1,"aria-label",0],[40,"@state",0]],[["component","@state.start"],["component","@state.done"]],(function(t,e,n){var r=!0;return"component:@state.start"===e&&(r=!1!==lh(t,1)._onAnimationStart(n)&&r),"component:@state.done"===e&&(r=!1!==lh(t,1)._onAnimationDone(n)&&r),r}),yM,mM)),_h(1,180224,null,0,dM,[Cu,_s,Mk,rM,[2,fg],cM],null,null)],null,(function(t,e){t(e,0,0,null==lh(e,1).bottomSheetConfig?null:lh(e,1).bottomSheetConfig.ariaLabel,lh(e,1)._animationState)}))}var bM=Zc("mat-bottom-sheet-container",dM,vM,{},{},[]);const wM=[1,"mat-simple-snackbar"],_M=["class","mat-simple-snackbar-action",4,"ngIf"],xM=[1,"mat-simple-snackbar-action"],CM=["mat-button","",3,"click"];function SM(t,e){if(1&t){const t=Il();wl(0,"div",xM),wl(1,"button",CM),Tl("click",(function(e){return qn(t),Ml().action()})),Bl(2),_l(),_l()}if(2&t){const t=Ml();to(2),jl(t.data.action)}}const kM=[1,"mat-snack-bar-container"],EM=["cdkPortalOutlet",""];function IM(t,e){}class AM{constructor(t,e){this._overlayRef=e,this._afterDismissed=new I,this._afterOpened=new I,this._onAction=new I,this._dismissedByAction=!1,this.containerInstance=t,this.onAction().subscribe(()=>this.dismiss()),t._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete())}closeWithAction(){this.dismissWithAction()}_dismissAfter(t){this._durationTimeoutId=setTimeout(()=>this.dismiss(),t)}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed.asObservable()}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction.asObservable()}}const DM=new Nt("MatSnackBarData");class TM{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}let NM=(()=>{class t{constructor(t,e){this.snackBarRef=t,this.data=e}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return t.ngComponentDef=de({type:t,selectors:[["simple-snack-bar"]],factory:function(e){return new(e||t)(rl(AM),rl(DM))},hostBindings:function(t,e,n){1&t&&Cl(wM)},consts:3,vars:2,template:function(t,e){1&t&&(wl(0,"span"),Bl(1),_l(),el(2,SM,3,1,"div",_M)),2&t&&(to(1),jl(e.data.message),to(2),Zs("ngIf",e.hasAction))},directives:[Qm,TI],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}"],encapsulation:2,changeDetection:0}),t})();const RM={snackBarState:N_("state",[M_("void, hidden",F_({transform:"scale(0.8)",opacity:0})),M_("visible",F_({transform:"scale(1)",opacity:1})),P_("* => visible",R_("150ms cubic-bezier(0, 0, 0.2, 1)")),P_("* => void, * => hidden",R_("75ms cubic-bezier(0.4, 0.0, 1, 1)",F_({opacity:0})))])};let OM=(()=>{class t extends PD{constructor(t,e,n,r){super(),this._ngZone=t,this._elementRef=e,this._changeDetectorRef=n,this.snackBarConfig=r,this._destroyed=!1,this._onExit=new I,this._onEnter=new I,this._animationState="void",this._role="assertive"!==r.politeness||r.announcementMessage?"off"===r.politeness?null:"status":"alert"}attachComponentPortal(t){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(t)}onAnimationEnd(t){const{fromState:e,toState:n}=t;if(("void"===n&&"void"!==e||"hidden"===n)&&this._completeExit(),"visible"===n){const t=this._onEnter;this._ngZone.run(()=>{t.next(),t.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges())}exit(){return this._animationState="hidden",this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.asObservable().pipe(Qg(1)).subscribe(()=>{this._onExit.next(),this._onExit.complete()})}_applySnackBarClasses(){const t=this._elementRef.nativeElement,e=this.snackBarConfig.panelClass;e&&(Array.isArray(e)?e.forEach(e=>t.classList.add(e)):t.classList.add(e)),"center"===this.snackBarConfig.horizontalPosition&&t.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&t.classList.add("mat-snack-bar-top")}_assertNotAttached(){if(this._portalOutlet.hasAttached())throw Error("Attempting to attach snack bar content after content is already attached")}}return t.ngComponentDef=de({type:t,selectors:[["snack-bar-container"]],factory:function(e){return new(e||t)(rl(Qd),rl(Cu),rl(_s),rl(TM))},viewQuery:function(t,e){var n;1&t&&cd(zD,!0),2&t&&ud(n=pd())&&(e._portalOutlet=n.first)},hostBindings:function(t,e,n){1&t&&(Us(2),Nl("@state.done",(function(t){return e.onAnimationEnd(t)})),Cl(kM)),2&t&&(Js("role",e._role),Hl("@state",e._animationState))},features:[ru],consts:1,vars:0,template:function(t,e){1&t&&el(0,IM,0,0,"ng-template",EM)},directives:[zD],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}@media (-ms-high-contrast:active){.mat-snack-bar-container{border:solid 1px}}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}"],encapsulation:2,data:{animation:[RM.snackBarState]}}),t})(),FM=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();FM.ngInjectorDef=yt({factory:function(t){return new(t||FM)},imports:[[vT,VD,dg,NI,uE],uE]});var MM=pc({encapsulation:2,styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}@media (-ms-high-contrast:active){.mat-snack-bar-container{border:solid 1px}}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}"],data:{animation:[{type:7,name:"state",definitions:[{type:0,name:"void, hidden",styles:{type:6,styles:{transform:"scale(0.8)",opacity:0},offset:null},options:void 0},{type:0,name:"visible",styles:{type:6,styles:{transform:"scale(1)",opacity:1},offset:null},options:void 0},{type:1,expr:"* => visible",animation:{type:4,styles:null,timings:"150ms cubic-bezier(0, 0, 0.2, 1)"},options:null},{type:1,expr:"* => void, * => hidden",animation:{type:4,styles:{type:6,styles:{opacity:0},offset:null},timings:"75ms cubic-bezier(0.4, 0.0, 1, 1)"},options:null}],options:{}}]}});function PM(t){return ff(0,[(t()(),Xp(0,null,null,0))],null,null)}function LM(t){return ff(0,[ef(402653184,1,{_portalOutlet:0}),(t()(),Xp(16777216,null,null,1,null,PM)),_h(2,212992,[[1,4]],0,zD,[wu,Xu],{portal:[0,"portal"]},null)],(function(t,e){t(e,2,0,"")}),null)}function zM(t){return ff(0,[(t()(),Yp(0,0,null,null,1,"snack-bar-container",[["class","mat-snack-bar-container"]],[[1,"role",0],[40,"@state",0]],[["component","@state.done"]],(function(t,e,n){var r=!0;return"component:@state.done"===e&&(r=!1!==lh(t,1).onAnimationEnd(n)&&r),r}),LM,MM)),_h(1,180224,null,0,OM,[Qd,Cu,_s,TM],null,null)],null,(function(t,e){t(e,0,0,lh(e,1)._role,lh(e,1)._animationState)}))}var VM=Zc("snack-bar-container",OM,zM,{},{},[]),BM=pc({encapsulation:2,styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}"],data:{}});function jM(t){return ff(0,[(t()(),Yp(0,0,null,null,3,"div",[["class","mat-simple-snackbar-action"]],null,null,null,null,null)),(t()(),Yp(1,0,null,null,2,"button",[["mat-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.action()&&r),r}),OI,RI)),_h(2,180224,null,0,TI,[Cu,Wk,[2,NS]],null,null),(t()(),hf(3,0,["",""]))],null,(function(t,e){var n=e.component;t(e,1,0,lh(e,2).disabled||null,"NoopAnimations"===lh(e,2)._animationMode),t(e,3,0,n.data.action)}))}function UM(t){return ff(2,[(t()(),Yp(0,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),hf(1,null,["",""])),(t()(),Xp(16777216,null,null,1,null,jM)),_h(3,16384,null,0,Qm,[Xu,$u],{ngIf:[0,"ngIf"]},null)],(function(t,e){t(e,3,0,e.component.hasAction)}),(function(t,e){t(e,1,0,e.component.data.message)}))}function WM(t){return ff(0,[(t()(),Yp(0,0,null,null,1,"simple-snack-bar",[["class","mat-simple-snackbar"]],null,null,null,UM,BM)),_h(1,49152,null,0,NM,[AM,DM],null,null)],null,null)}var HM=Zc("simple-snack-bar",NM,WM,{},{},[]),qM=pc({encapsulation:2,styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}@media (-ms-high-contrast:active){.mat-dialog-container{outline:solid 1px}}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base{margin-left:0;margin-right:8px}"],data:{animation:[{type:7,name:"dialogContainer",definitions:[{type:0,name:"void, exit",styles:{type:6,styles:{opacity:0,transform:"scale(0.7)"},offset:null},options:void 0},{type:0,name:"enter",styles:{type:6,styles:{transform:"none"},offset:null},options:void 0},{type:1,expr:"* => enter",animation:{type:4,styles:{type:6,styles:{transform:"none",opacity:1},offset:null},timings:"150ms cubic-bezier(0, 0, 0.2, 1)"},options:null},{type:1,expr:"* => void, * => exit",animation:{type:4,styles:{type:6,styles:{opacity:0},offset:null},timings:"75ms cubic-bezier(0.4, 0.0, 0.2, 1)"},options:null}],options:{}}]}});function GM(t){return ff(0,[(t()(),Xp(0,null,null,0))],null,null)}function $M(t){return ff(0,[ef(402653184,1,{_portalOutlet:0}),(t()(),Xp(16777216,null,null,1,null,GM)),_h(2,212992,[[1,4]],0,zD,[wu,Xu],{portal:[0,"portal"]},null)],(function(t,e){t(e,2,0,"")}),null)}function KM(t){return ff(0,[(t()(),Yp(0,0,null,null,1,"mat-dialog-container",[["aria-modal","true"],["class","mat-dialog-container"],["tabindex","-1"]],[[1,"id",0],[1,"role",0],[1,"aria-labelledby",0],[1,"aria-label",0],[1,"aria-describedby",0],[40,"@dialogContainer",0]],[["component","@dialogContainer.start"],["component","@dialogContainer.done"]],(function(t,e,n){var r=!0;return"component:@dialogContainer.start"===e&&(r=!1!==lh(t,1)._onAnimationStart(n)&&r),"component:@dialogContainer.done"===e&&(r=!1!==lh(t,1)._onAnimationDone(n)&&r),r}),$M,qM)),_h(1,49152,null,0,GR,[Cu,Mk,_s,[2,fg],UR],null,null)],null,(function(t,e){t(e,0,0,lh(e,1)._id,lh(e,1)._config.role,lh(e,1)._config.ariaLabel?null:lh(e,1)._ariaLabelledBy,lh(e,1)._config.ariaLabel,lh(e,1)._config.ariaDescribedBy||null,lh(e,1)._state)}))}var XM=Zc("mat-dialog-container",GR,KM,{},{},[]);const YM=["role","grid","aria-readonly","true",1,"mat-calendar-body"],ZM=["mat-calendar-body",""],QM=["aria-hidden","true",4,"ngIf"],JM=["role","row",4,"ngFor","ngForOf"],tP=["aria-hidden","true"],eP=[1,"mat-calendar-body-label"];function nP(t,e){if(1&t&&(wl(0,"tr",tP),wl(1,"td",eP),al(),Bl(2),_l(),_l()),2&t){const t=Ml();to(1),ol("padding-top",t._cellPadding),ol("padding-bottom",t._cellPadding),dl(),Js("colspan",t.numCols),to(2),jl(t.label)}}const rP=["role","row"],iP=["aria-hidden","true","class","mat-calendar-body-label",3,"paddingTop","paddingBottom",4,"ngIf"],aP=["role","gridcell","class","mat-calendar-body-cell","role","button",3,"ngClass","tabindex","mat-calendar-body-disabled","mat-calendar-body-active","width","paddingTop","paddingBottom","click",4,"ngFor","ngForOf"],oP=["aria-hidden","true",1,"mat-calendar-body-label"];function sP(t,e){if(1&t&&(wl(0,"td",oP),al(),Bl(1),_l()),2&t){const t=Ml(2);ol("padding-top",t._cellPadding),ol("padding-bottom",t._cellPadding),dl(),Js("colspan",t._firstRowOffset),to(1),jl(t._firstRowOffset>=t.labelMinRequiredCells?t.label:"")}}const lP=["role","gridcell","role","button",1,"mat-calendar-body-cell",3,"ngClass","tabindex","click"],uP=[1,"mat-calendar-body-cell-content"];function cP(t,e){if(1&t){const t=Il();wl(0,"td",lP),al(),Tl("click",(function(n){qn(t);const r=e.$implicit;return Ml(2)._cellClicked(r)})),wl(1,"div",uP),al(),Bl(2),_l(),_l()}if(2&t){const t=e.$implicit,n=e.index,r=Ml().index,i=Ml();ol("width",i._cellWidth),ol("padding-top",i._cellPadding),ol("padding-bottom",i._cellPadding),sl("mat-calendar-body-disabled",!t.enabled),sl("mat-calendar-body-active",i._isActiveCell(r,n)),dl(),Zs("ngClass",t.cssClasses)("tabindex",i._isActiveCell(r,n)?0:-1),Js("aria-label",t.ariaLabel)("aria-disabled",!t.enabled||null)("aria-selected",i.selectedValue===t.value),to(1),sl("mat-calendar-body-selected",i.selectedValue===t.value),sl("mat-calendar-body-today",i.todayValue===t.value),dl(),to(2),jl(t.displayValue)}}function hP(t,e){if(1&t&&(wl(0,"tr",rP),el(1,sP,2,4,"td",iP),el(2,cP,3,13,"td",aP),_l()),2&t){const t=e.$implicit,n=e.index,r=Ml();to(1),Zs("ngIf",0===n&&r._firstRowOffset),to(2),Zs("ngForOf",t)}}const dP=["role","presentation",1,"mat-calendar-table"],pP=[1,"mat-calendar-table-header"],fP=["scope","col",4,"ngFor","ngForOf"],mP=["colspan","7","aria-hidden","true",1,"mat-calendar-table-header-divider"],gP=["mat-calendar-body","",3,"label","rows","todayValue","selectedValue","labelMinRequiredCells","activeCell","selectedValueChange","keydown"],yP=["scope","col"];function vP(t,e){if(1&t&&(wl(0,"th",yP),Bl(1),_l()),2&t){const t=e.$implicit;Js("aria-label",t.long),to(1),jl(t.narrow)}}const bP=["colspan","4",1,"mat-calendar-table-header-divider"],wP=["mat-calendar-body","",3,"rows","todayValue","selectedValue","numCols","cellAspectRatio","activeCell","selectedValueChange","keydown"],_P=["mat-calendar-body","",3,"label","rows","todayValue","selectedValue","labelMinRequiredCells","numCols","cellAspectRatio","activeCell","selectedValueChange","keydown"],xP=[1,"mat-calendar-header"],CP=[1,"mat-calendar-controls"],SP=["mat-button","","type","button","cdkAriaLive","polite",1,"mat-calendar-period-button",3,"click"],kP=[1,"mat-calendar-arrow"],EP=[1,"mat-calendar-spacer"],IP=["mat-icon-button","","type","button",1,"mat-calendar-previous-button",3,"disabled","click"],AP=["mat-icon-button","","type","button",1,"mat-calendar-next-button",3,"disabled","click"],DP=["*"],TP=[1,"mat-calendar"],NP=[3,"cdkPortalOutlet"],RP=["cdkMonitorSubtreeFocus","","tabindex","-1",1,"mat-calendar-content",3,"ngSwitch"],OP=[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","selectedChange","_userSelection",4,"ngSwitchCase"],FP=[3,"activeDate","selected","dateFilter","maxDate","minDate","activeDateChange","monthSelected","selectedChange",4,"ngSwitchCase"],MP=[3,"activeDate","selected","dateFilter","maxDate","minDate","activeDateChange","yearSelected","selectedChange",4,"ngSwitchCase"];function PP(t,e){}const LP=[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","selectedChange","_userSelection"];function zP(t,e){if(1&t){const t=Il();wl(0,"mat-month-view",LP),Tl("activeDateChange",(function(e){return qn(t),Ml().activeDate=e})),Tl("selectedChange",(function(e){return qn(t),Ml()._dateSelected(e)})),Tl("_userSelection",(function(e){return qn(t),Ml()._userSelected()})),_l()}if(2&t){const t=Ml();Zs("activeDate",t.activeDate)("selected",t.selected)("dateFilter",t.dateFilter)("maxDate",t.maxDate)("minDate",t.minDate)("dateClass",t.dateClass)}}const VP=[3,"activeDate","selected","dateFilter","maxDate","minDate","activeDateChange","monthSelected","selectedChange"];function BP(t,e){if(1&t){const t=Il();wl(0,"mat-year-view",VP),Tl("activeDateChange",(function(e){return qn(t),Ml().activeDate=e})),Tl("monthSelected",(function(e){return qn(t),Ml()._monthSelectedInYearView(e)})),Tl("selectedChange",(function(e){return qn(t),Ml()._goToDateInView(e,"month")})),_l()}if(2&t){const t=Ml();Zs("activeDate",t.activeDate)("selected",t.selected)("dateFilter",t.dateFilter)("maxDate",t.maxDate)("minDate",t.minDate)}}const jP=[3,"activeDate","selected","dateFilter","maxDate","minDate","activeDateChange","yearSelected","selectedChange"];function UP(t,e){if(1&t){const t=Il();wl(0,"mat-multi-year-view",jP),Tl("activeDateChange",(function(e){return qn(t),Ml().activeDate=e})),Tl("yearSelected",(function(e){return qn(t),Ml()._yearSelectedInMultiYearView(e)})),Tl("selectedChange",(function(e){return qn(t),Ml()._goToDateInView(e,"year")})),_l()}if(2&t){const t=Ml();Zs("activeDate",t.activeDate)("selected",t.selected)("dateFilter",t.dateFilter)("maxDate",t.maxDate)("minDate",t.minDate)}}const WP=[1,"mat-datepicker-content"],HP=["cdkTrapFocus","",3,"id","ngClass","startAt","startView","minDate","maxDate","dateFilter","headerComponent","selected","dateClass","selectedChange","yearSelected","monthSelected","_userSelection"];function qP(t){return Error(`MatDatepicker: No provider found for ${t}. You must import one of the following `+"modules at your application root: MatNativeDateModule, MatMomentDateModule, or provide a custom implementation.")}let GP=(()=>{class t{constructor(){this.changes=new I,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 20 years",this.nextMultiYearLabel="Next 20 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year"}formatYearRange(t,e){return`${t} \u2013 ${e}`}}return t.ngInjectableDef=mt({token:t,factory:function(e){return new(e||t)},providedIn:"root"}),t.ngInjectableDef=mt({factory:function(){return new t},token:t,providedIn:"root"}),t})();class $P{constructor(t,e,n,r,i){this.value=t,this.displayValue=e,this.ariaLabel=n,this.enabled=r,this.cssClasses=i}}let KP=(()=>{class t{constructor(t,e){this._elementRef=t,this._ngZone=e,this.numCols=7,this.activeCell=0,this.cellAspectRatio=1,this.selectedValueChange=new Qh}_cellClicked(t){t.enabled&&this.selectedValueChange.emit(t.value)}ngOnChanges(t){const e=t.numCols,{rows:n,numCols:r}=this;(t.rows||e)&&(this._firstRowOffset=n&&n.length&&n[0].length?r-n[0].length:0),(t.cellAspectRatio||e||!this._cellPadding)&&(this._cellPadding=`${50*this.cellAspectRatio/r}%`),!e&&this._cellWidth||(this._cellWidth=`${100/r}%`)}_isActiveCell(t,e){let n=t*this.numCols+e;return t&&(n-=this._firstRowOffset),n==this.activeCell}_focusActiveCell(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.asObservable().pipe(Qg(1)).subscribe(()=>{const t=this._elementRef.nativeElement.querySelector(".mat-calendar-body-active");t&&t.focus()})})}}return t.ngComponentDef=de({type:t,selectors:[["","mat-calendar-body",""]],factory:function(e){return new(e||t)(rl(Cu),rl(Qd))},hostBindings:function(t,e,n){1&t&&Cl(YM)},inputs:{numCols:"numCols",activeCell:"activeCell",cellAspectRatio:"cellAspectRatio",label:"label",rows:"rows",todayValue:"todayValue",selectedValue:"selectedValue",labelMinRequiredCells:"labelMinRequiredCells"},outputs:{selectedValueChange:"selectedValueChange"},exportAs:["matCalendarBody"],features:[Ql()],attrs:ZM,consts:2,vars:2,template:function(t,e){1&t&&(el(0,nP,3,4,"tr",QM),el(1,hP,3,2,"tr",JM)),2&t&&(Zs("ngIf",e._firstRowOffset<e.labelMinRequiredCells),to(1),Zs("ngForOf",e.rows))},directives:[Qm,Ym,Km],styles:[".mat-calendar-body{min-width:224px}.mat-calendar-body-label{height:0;line-height:0;text-align:left;padding-left:4.71429%;padding-right:4.71429%}.mat-calendar-body-cell{position:relative;height:0;line-height:0;text-align:center;outline:0;cursor:pointer}.mat-calendar-body-disabled{cursor:default}.mat-calendar-body-cell-content{position:absolute;top:5%;left:5%;display:flex;align-items:center;justify-content:center;box-sizing:border-box;width:90%;height:90%;line-height:1;border-width:1px;border-style:solid;border-radius:999px}@media (-ms-high-contrast:active){.mat-calendar-body-cell-content{border:none}}@media (-ms-high-contrast:active){.mat-calendar-body-selected,.mat-datepicker-popup:not(:empty){outline:solid 1px}.mat-calendar-body-today{outline:dotted 1px}.cdk-keyboard-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected),.cdk-program-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected){outline:dotted 2px}}[dir=rtl] .mat-calendar-body-label{text-align:right}"],encapsulation:2,changeDetection:0}),t})();const XP=7;let YP=(()=>{class t{constructor(t,e,n,r){if(this._changeDetectorRef=t,this._dateFormats=e,this._dateAdapter=n,this._dir=r,this.selectedChange=new Qh,this._userSelection=new Qh,this.activeDateChange=new Qh,!this._dateAdapter)throw qP("DateAdapter");if(!this._dateFormats)throw qP("MAT_DATE_FORMATS");this._activeDate=this._dateAdapter.today()}get activeDate(){return this._activeDate}set activeDate(t){const e=this._activeDate,n=this._getValidDateOrNull(this._dateAdapter.deserialize(t))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(n,this.minDate,this.maxDate),this._hasSameMonthAndYear(e,this._activeDate)||this._init()}get selected(){return this._selected}set selected(t){this._selected=this._getValidDateOrNull(this._dateAdapter.deserialize(t)),this._selectedDate=this._getDateInCurrentMonth(this._selected)}get minDate(){return this._minDate}set minDate(t){this._minDate=this._getValidDateOrNull(this._dateAdapter.deserialize(t))}get maxDate(){return this._maxDate}set maxDate(t){this._maxDate=this._getValidDateOrNull(this._dateAdapter.deserialize(t))}ngAfterContentInit(){this._init()}_dateSelected(t){if(this._selectedDate!=t){const e=this._dateAdapter.getYear(this.activeDate),n=this._dateAdapter.getMonth(this.activeDate),r=this._dateAdapter.createDate(e,n,t);this.selectedChange.emit(r)}this._userSelection.emit()}_handleCalendarBodyKeydown(t){const e=this._activeDate,n=this._isRtl();switch(t.keyCode){case sk:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,n?1:-1);break;case uk:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,n?-1:1);break;case lk:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,-7);break;case ck:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,7);break;case ok:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,1-this._dateAdapter.getDate(this._activeDate));break;case ak:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,this._dateAdapter.getNumDaysInMonth(this._activeDate)-this._dateAdapter.getDate(this._activeDate));break;case rk:this.activeDate=t.altKey?this._dateAdapter.addCalendarYears(this._activeDate,-1):this._dateAdapter.addCalendarMonths(this._activeDate,-1);break;case ik:this.activeDate=t.altKey?this._dateAdapter.addCalendarYears(this._activeDate,1):this._dateAdapter.addCalendarMonths(this._activeDate,1);break;case tk:case nk:return void(this.dateFilter&&!this.dateFilter(this._activeDate)||(this._dateSelected(this._dateAdapter.getDate(this._activeDate)),this._userSelection.emit(),t.preventDefault()));default:return}this._dateAdapter.compareDate(e,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCell(),t.preventDefault()}_init(){this._selectedDate=this._getDateInCurrentMonth(this.selected),this._todayDate=this._getDateInCurrentMonth(this._dateAdapter.today()),this._monthLabel=this._dateAdapter.getMonthNames("short")[this._dateAdapter.getMonth(this.activeDate)].toLocaleUpperCase();let t=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),1);this._firstWeekOffset=(XP+this._dateAdapter.getDayOfWeek(t)-this._dateAdapter.getFirstDayOfWeek())%XP,this._initWeekdays(),this._createWeekCells(),this._changeDetectorRef.markForCheck()}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_initWeekdays(){const t=this._dateAdapter.getFirstDayOfWeek(),e=this._dateAdapter.getDayOfWeekNames("narrow");let n=this._dateAdapter.getDayOfWeekNames("long").map((t,n)=>({long:t,narrow:e[n]}));this._weekdays=n.slice(t).concat(n.slice(0,t))}_createWeekCells(){const t=this._dateAdapter.getNumDaysInMonth(this.activeDate),e=this._dateAdapter.getDateNames();this._weeks=[[]];for(let n=0,r=this._firstWeekOffset;n<t;n++,r++){r==XP&&(this._weeks.push([]),r=0);const t=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),n+1),i=this._shouldEnableDate(t),a=this._dateAdapter.format(t,this._dateFormats.display.dateA11yLabel),o=this.dateClass?this.dateClass(t):void 0;this._weeks[this._weeks.length-1].push(new $P(n+1,e[n],a,i,o))}}_shouldEnableDate(t){return!!t&&(!this.dateFilter||this.dateFilter(t))&&(!this.minDate||this._dateAdapter.compareDate(t,this.minDate)>=0)&&(!this.maxDate||this._dateAdapter.compareDate(t,this.maxDate)<=0)}_getDateInCurrentMonth(t){return t&&this._hasSameMonthAndYear(t,this.activeDate)?this._dateAdapter.getDate(t):null}_hasSameMonthAndYear(t,e){return!(!t||!e||this._dateAdapter.getMonth(t)!=this._dateAdapter.getMonth(e)||this._dateAdapter.getYear(t)!=this._dateAdapter.getYear(e))}_getValidDateOrNull(t){return this._dateAdapter.isDateInstance(t)&&this._dateAdapter.isValid(t)?t:null}_isRtl(){return this._dir&&"rtl"===this._dir.value}}return t.ngComponentDef=de({type:t,selectors:[["mat-month-view"]],factory:function(e){return new(e||t)(rl(_s),rl(yE,8),rl(gE,8),rl(zS,8))},viewQuery:function(t,e){var n;1&t&&hd(KP,!0),2&t&&ud(n=pd())&&(e._matCalendarBody=n.first)},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",_userSelection:"_userSelection",activeDateChange:"activeDateChange"},exportAs:["matMonthView"],consts:7,vars:7,template:function(t,e){1&t&&(wl(0,"table",dP),wl(1,"thead",pP),wl(2,"tr"),el(3,vP,2,2,"th",fP),_l(),wl(4,"tr"),xl(5,"th",mP),_l(),_l(),wl(6,"tbody",gP),Tl("selectedValueChange",(function(t){return e._dateSelected(t)})),Tl("keydown",(function(t){return e._handleCalendarBodyKeydown(t)})),_l(),_l()),2&t&&(to(3),Zs("ngForOf",e._weekdays),to(6),Zs("label",e._monthLabel)("rows",e._weeks)("todayValue",e._todayDate)("selectedValue",e._selectedDate)("labelMinRequiredCells",3)("activeCell",e._dateAdapter.getDate(e.activeDate)-1))},directives:[Ym,KP],encapsulation:2,changeDetection:0}),t})();const ZP=24,QP=4;let JP=(()=>{class t{constructor(t,e,n){if(this._changeDetectorRef=t,this._dateAdapter=e,this._dir=n,this.selectedChange=new Qh,this.yearSelected=new Qh,this.activeDateChange=new Qh,!this._dateAdapter)throw qP("DateAdapter");this._activeDate=this._dateAdapter.today()}get activeDate(){return this._activeDate}set activeDate(t){let e=this._activeDate;const n=this._getValidDateOrNull(this._dateAdapter.deserialize(t))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(n,this.minDate,this.maxDate),tL(this._dateAdapter,e,this._activeDate,this.minDate,this.maxDate)||this._init()}get selected(){return this._selected}set selected(t){this._selected=this._getValidDateOrNull(this._dateAdapter.deserialize(t)),this._selectedYear=this._selected&&this._dateAdapter.getYear(this._selected)}get minDate(){return this._minDate}set minDate(t){this._minDate=this._getValidDateOrNull(this._dateAdapter.deserialize(t))}get maxDate(){return this._maxDate}set maxDate(t){this._maxDate=this._getValidDateOrNull(this._dateAdapter.deserialize(t))}ngAfterContentInit(){this._init()}_init(){this._todayYear=this._dateAdapter.getYear(this._dateAdapter.today());const t=this._dateAdapter.getYear(this._activeDate)-eL(this._dateAdapter,this.activeDate,this.minDate,this.maxDate);this._years=[];for(let e=0,n=[];e<ZP;e++)n.push(t+e),n.length==QP&&(this._years.push(n.map(t=>this._createCellForYear(t))),n=[]);this._changeDetectorRef.markForCheck()}_yearSelected(t){this.yearSelected.emit(this._dateAdapter.createDate(t,0,1));let e=this._dateAdapter.getMonth(this.activeDate),n=this._dateAdapter.getNumDaysInMonth(this._dateAdapter.createDate(t,e,1));this.selectedChange.emit(this._dateAdapter.createDate(t,e,Math.min(this._dateAdapter.getDate(this.activeDate),n)))}_handleCalendarBodyKeydown(t){const e=this._activeDate,n=this._isRtl();switch(t.keyCode){case sk:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,n?1:-1);break;case uk:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,n?-1:1);break;case lk:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-QP);break;case ck:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,QP);break;case ok:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-eL(this._dateAdapter,this.activeDate,this.minDate,this.maxDate));break;case ak:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,ZP-eL(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)-1);break;case rk:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,t.altKey?10*-ZP:-ZP);break;case ik:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,t.altKey?10*ZP:ZP);break;case tk:case nk:this._yearSelected(this._dateAdapter.getYear(this._activeDate));break;default:return}this._dateAdapter.compareDate(e,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCell(),t.preventDefault()}_getActiveCell(){return eL(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_createCellForYear(t){let e=this._dateAdapter.getYearName(this._dateAdapter.createDate(t,0,1));return new $P(t,e,e,this._shouldEnableYear(t))}_shouldEnableYear(t){if(null==t||this.maxDate&&t>this._dateAdapter.getYear(this.maxDate)||this.minDate&&t<this._dateAdapter.getYear(this.minDate))return!1;if(!this.dateFilter)return!0;for(let e=this._dateAdapter.createDate(t,0,1);this._dateAdapter.getYear(e)==t;e=this._dateAdapter.addCalendarDays(e,1))if(this.dateFilter(e))return!0;return!1}_getValidDateOrNull(t){return this._dateAdapter.isDateInstance(t)&&this._dateAdapter.isValid(t)?t:null}_isRtl(){return this._dir&&"rtl"===this._dir.value}}return t.ngComponentDef=de({type:t,selectors:[["mat-multi-year-view"]],factory:function(e){return new(e||t)(rl(_s),rl(gE,8),rl(zS,8))},viewQuery:function(t,e){var n;1&t&&hd(KP,!0),2&t&&ud(n=pd())&&(e._matCalendarBody=n.first)},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",activeDateChange:"activeDateChange"},exportAs:["matMultiYearView"],consts:5,vars:6,template:function(t,e){1&t&&(wl(0,"table",dP),wl(1,"thead",pP),wl(2,"tr"),xl(3,"th",bP),_l(),_l(),wl(4,"tbody",wP),Tl("selectedValueChange",(function(t){return e._yearSelected(t)})),Tl("keydown",(function(t){return e._handleCalendarBodyKeydown(t)})),_l(),_l()),2&t&&(to(4),Zs("rows",e._years)("todayValue",e._todayYear)("selectedValue",e._selectedYear)("numCols",4)("cellAspectRatio",4/7)("activeCell",e._getActiveCell()))},directives:[KP],encapsulation:2,changeDetection:0}),t})();function tL(t,e,n,r,i){const a=t.getYear(e),o=t.getYear(n),s=nL(t,r,i);return Math.floor((a-s)/ZP)===Math.floor((o-s)/ZP)}function eL(t,e,n,r){return((t.getYear(e)-nL(t,n,r))%(i=ZP)+i)%i;var i}function nL(t,e,n){let r=0;return n?r=t.getYear(n)-ZP+1:e&&(r=t.getYear(e)),r}let rL=(()=>{class t{constructor(t,e,n,r){if(this._changeDetectorRef=t,this._dateFormats=e,this._dateAdapter=n,this._dir=r,this.selectedChange=new Qh,this.monthSelected=new Qh,this.activeDateChange=new Qh,!this._dateAdapter)throw qP("DateAdapter");if(!this._dateFormats)throw qP("MAT_DATE_FORMATS");this._activeDate=this._dateAdapter.today()}get activeDate(){return this._activeDate}set activeDate(t){let e=this._activeDate;const n=this._getValidDateOrNull(this._dateAdapter.deserialize(t))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(n,this.minDate,this.maxDate),this._dateAdapter.getYear(e)!==this._dateAdapter.getYear(this._activeDate)&&this._init()}get selected(){return this._selected}set selected(t){this._selected=this._getValidDateOrNull(this._dateAdapter.deserialize(t)),this._selectedMonth=this._getMonthInCurrentYear(this._selected)}get minDate(){return this._minDate}set minDate(t){this._minDate=this._getValidDateOrNull(this._dateAdapter.deserialize(t))}get maxDate(){return this._maxDate}set maxDate(t){this._maxDate=this._getValidDateOrNull(this._dateAdapter.deserialize(t))}ngAfterContentInit(){this._init()}_monthSelected(t){const e=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),t,1);this.monthSelected.emit(e);const n=this._dateAdapter.getNumDaysInMonth(e);this.selectedChange.emit(this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),t,Math.min(this._dateAdapter.getDate(this.activeDate),n)))}_handleCalendarBodyKeydown(t){const e=this._activeDate,n=this._isRtl();switch(t.keyCode){case sk:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,n?1:-1);break;case uk:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,n?-1:1);break;case lk:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-4);break;case ck:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,4);break;case ok:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-this._dateAdapter.getMonth(this._activeDate));break;case ak:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,11-this._dateAdapter.getMonth(this._activeDate));break;case rk:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,t.altKey?-10:-1);break;case ik:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,t.altKey?10:1);break;case tk:case nk:this._monthSelected(this._dateAdapter.getMonth(this._activeDate));break;default:return}this._dateAdapter.compareDate(e,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCell(),t.preventDefault()}_init(){this._selectedMonth=this._getMonthInCurrentYear(this.selected),this._todayMonth=this._getMonthInCurrentYear(this._dateAdapter.today()),this._yearLabel=this._dateAdapter.getYearName(this.activeDate);let t=this._dateAdapter.getMonthNames("short");this._months=[[0,1,2,3],[4,5,6,7],[8,9,10,11]].map(e=>e.map(e=>this._createCellForMonth(e,t[e]))),this._changeDetectorRef.markForCheck()}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_getMonthInCurrentYear(t){return t&&this._dateAdapter.getYear(t)==this._dateAdapter.getYear(this.activeDate)?this._dateAdapter.getMonth(t):null}_createCellForMonth(t,e){let n=this._dateAdapter.format(this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),t,1),this._dateFormats.display.monthYearA11yLabel);return new $P(t,e.toLocaleUpperCase(),n,this._shouldEnableMonth(t))}_shouldEnableMonth(t){const e=this._dateAdapter.getYear(this.activeDate);if(null==t||this._isYearAndMonthAfterMaxDate(e,t)||this._isYearAndMonthBeforeMinDate(e,t))return!1;if(!this.dateFilter)return!0;for(let n=this._dateAdapter.createDate(e,t,1);this._dateAdapter.getMonth(n)==t;n=this._dateAdapter.addCalendarDays(n,1))if(this.dateFilter(n))return!0;return!1}_isYearAndMonthAfterMaxDate(t,e){if(this.maxDate){const n=this._dateAdapter.getYear(this.maxDate),r=this._dateAdapter.getMonth(this.maxDate);return t>n||t===n&&e>r}return!1}_isYearAndMonthBeforeMinDate(t,e){if(this.minDate){const n=this._dateAdapter.getYear(this.minDate),r=this._dateAdapter.getMonth(this.minDate);return t<n||t===n&&e<r}return!1}_getValidDateOrNull(t){return this._dateAdapter.isDateInstance(t)&&this._dateAdapter.isValid(t)?t:null}_isRtl(){return this._dir&&"rtl"===this._dir.value}}return t.ngComponentDef=de({type:t,selectors:[["mat-year-view"]],factory:function(e){return new(e||t)(rl(_s),rl(yE,8),rl(gE,8),rl(zS,8))},viewQuery:function(t,e){var n;1&t&&hd(KP,!0),2&t&&ud(n=pd())&&(e._matCalendarBody=n.first)},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter"},outputs:{selectedChange:"selectedChange",monthSelected:"monthSelected",activeDateChange:"activeDateChange"},exportAs:["matYearView"],consts:5,vars:8,template:function(t,e){1&t&&(wl(0,"table",dP),wl(1,"thead",pP),wl(2,"tr"),xl(3,"th",bP),_l(),_l(),wl(4,"tbody",_P),Tl("selectedValueChange",(function(t){return e._monthSelected(t)})),Tl("keydown",(function(t){return e._handleCalendarBodyKeydown(t)})),_l(),_l()),2&t&&(to(4),Zs("label",e._yearLabel)("rows",e._months)("todayValue",e._todayMonth)("selectedValue",e._selectedMonth)("labelMinRequiredCells",2)("numCols",4)("cellAspectRatio",4/7)("activeCell",e._dateAdapter.getMonth(e.activeDate)))},directives:[KP],encapsulation:2,changeDetection:0}),t})(),iL=(()=>{class t{constructor(t,e,n,r,i){this._intl=t,this.calendar=e,this._dateAdapter=n,this._dateFormats=r,this.calendar.stateChanges.subscribe(()=>i.markForCheck())}get periodButtonText(){if("month"==this.calendar.currentView)return this._dateAdapter.format(this.calendar.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase();if("year"==this.calendar.currentView)return this._dateAdapter.getYearName(this.calendar.activeDate);const t=this._dateAdapter.getYear(this.calendar.activeDate)-eL(this._dateAdapter,this.calendar.activeDate,this.calendar.minDate,this.calendar.maxDate),e=t+ZP-1,n=this._dateAdapter.getYearName(this._dateAdapter.createDate(t,0,1)),r=this._dateAdapter.getYearName(this._dateAdapter.createDate(e,0,1));return this._intl.formatYearRange(n,r)}get periodButtonLabel(){return"month"==this.calendar.currentView?this._intl.switchToMultiYearViewLabel:this._intl.switchToMonthViewLabel}get prevButtonLabel(){return{month:this._intl.prevMonthLabel,year:this._intl.prevYearLabel,"multi-year":this._intl.prevMultiYearLabel}[this.calendar.currentView]}get nextButtonLabel(){return{month:this._intl.nextMonthLabel,year:this._intl.nextYearLabel,"multi-year":this._intl.nextMultiYearLabel}[this.calendar.currentView]}currentPeriodClicked(){this.calendar.currentView="month"==this.calendar.currentView?"multi-year":"month"}previousClicked(){this.calendar.activeDate="month"==this.calendar.currentView?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,-1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,"year"==this.calendar.currentView?-1:-ZP)}nextClicked(){this.calendar.activeDate="month"==this.calendar.currentView?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,"year"==this.calendar.currentView?1:ZP)}previousEnabled(){return!this.calendar.minDate||!this.calendar.minDate||!this._isSameView(this.calendar.activeDate,this.calendar.minDate)}nextEnabled(){return!this.calendar.maxDate||!this._isSameView(this.calendar.activeDate,this.calendar.maxDate)}_isSameView(t,e){return"month"==this.calendar.currentView?this._dateAdapter.getYear(t)==this._dateAdapter.getYear(e)&&this._dateAdapter.getMonth(t)==this._dateAdapter.getMonth(e):"year"==this.calendar.currentView?this._dateAdapter.getYear(t)==this._dateAdapter.getYear(e):tL(this._dateAdapter,t,e,this.calendar.minDate,this.calendar.maxDate)}}return t.ngComponentDef=de({type:t,selectors:[["mat-calendar-header"]],factory:function(e){return new(e||t)(rl(GP),rl(St(()=>aL)),rl(gE,8),rl(yE,8),rl(_s))},exportAs:["matCalendarHeader"],ngContentSelectors:DP,consts:9,vars:7,template:function(t,e){1&t&&(Ll(),wl(0,"div",xP),wl(1,"div",CP),wl(2,"button",SP),Tl("click",(function(t){return e.currentPeriodClicked()})),Bl(3),wl(4,"div",kP),al(),_l(),_l(),xl(5,"div",EP),Vl(6),wl(7,"button",IP),Tl("click",(function(t){return e.previousClicked()})),_l(),wl(8,"button",AP),Tl("click",(function(t){return e.nextClicked()})),_l(),_l(),_l()),2&t&&(to(2),Js("aria-label",e.periodButtonLabel),to(3),jl(e.periodButtonText),to(4),sl("mat-calendar-invert","month"!=e.calendar.currentView),dl(),to(7),Zs("disabled",!e.previousEnabled()),Js("aria-label",e.prevButtonLabel),to(8),Zs("disabled",!e.nextEnabled()),Js("aria-label",e.nextButtonLabel))},directives:[TI,Bk],encapsulation:2,changeDetection:0}),t})(),aL=(()=>{class t{constructor(t,e,n,r){if(this._dateAdapter=e,this._dateFormats=n,this._changeDetectorRef=r,this._moveFocusOnNextTick=!1,this.startView="month",this.selectedChange=new Qh,this.yearSelected=new Qh,this.monthSelected=new Qh,this._userSelection=new Qh,this.stateChanges=new I,!this._dateAdapter)throw qP("DateAdapter");if(!this._dateFormats)throw qP("MAT_DATE_FORMATS");this._intlChanges=t.changes.subscribe(()=>{r.markForCheck(),this.stateChanges.next()})}get startAt(){return this._startAt}set startAt(t){this._startAt=this._getValidDateOrNull(this._dateAdapter.deserialize(t))}get selected(){return this._selected}set selected(t){this._selected=this._getValidDateOrNull(this._dateAdapter.deserialize(t))}get minDate(){return this._minDate}set minDate(t){this._minDate=this._getValidDateOrNull(this._dateAdapter.deserialize(t))}get maxDate(){return this._maxDate}set maxDate(t){this._maxDate=this._getValidDateOrNull(this._dateAdapter.deserialize(t))}get activeDate(){return this._clampedActiveDate}set activeDate(t){this._clampedActiveDate=this._dateAdapter.clampDate(t,this.minDate,this.maxDate),this.stateChanges.next(),this._changeDetectorRef.markForCheck()}get currentView(){return this._currentView}set currentView(t){this._currentView=t,this._moveFocusOnNextTick=!0,this._changeDetectorRef.markForCheck()}ngAfterContentInit(){this._calendarHeaderPortal=new FD(this.headerComponent||iL),this.activeDate=this.startAt||this._dateAdapter.today(),this._currentView=this.startView}ngAfterViewChecked(){this._moveFocusOnNextTick&&(this._moveFocusOnNextTick=!1,this.focusActiveCell())}ngOnDestroy(){this._intlChanges.unsubscribe(),this.stateChanges.complete()}ngOnChanges(t){const e=t.minDate||t.maxDate||t.dateFilter;if(e&&!e.firstChange){const t=this._getCurrentViewComponent();t&&(this._changeDetectorRef.detectChanges(),t._init())}this.stateChanges.next()}focusActiveCell(){this._getCurrentViewComponent()._focusActiveCell()}updateTodaysDate(){("month"==this.currentView?this.monthView:"year"==this.currentView?this.yearView:this.multiYearView).ngAfterContentInit()}_dateSelected(t){this._dateAdapter.sameDate(t,this.selected)||this.selectedChange.emit(t)}_yearSelectedInMultiYearView(t){this.yearSelected.emit(t)}_monthSelectedInYearView(t){this.monthSelected.emit(t)}_userSelected(){this._userSelection.emit()}_goToDateInView(t,e){this.activeDate=t,this.currentView=e}_getValidDateOrNull(t){return this._dateAdapter.isDateInstance(t)&&this._dateAdapter.isValid(t)?t:null}_getCurrentViewComponent(){return this.monthView||this.yearView||this.multiYearView}}return t.ngComponentDef=de({type:t,selectors:[["mat-calendar"]],factory:function(e){return new(e||t)(rl(GP),rl(gE,8),rl(yE,8),rl(_s))},viewQuery:function(t,e){var n;1&t&&(hd(YP,!0),hd(rL,!0),hd(JP,!0)),2&t&&(ud(n=pd())&&(e.monthView=n.first),ud(n=pd())&&(e.yearView=n.first),ud(n=pd())&&(e.multiYearView=n.first))},hostBindings:function(t,e,n){1&t&&Cl(TP)},inputs:{startView:"startView",startAt:"startAt",selected:"selected",minDate:"minDate",maxDate:"maxDate",headerComponent:"headerComponent",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",monthSelected:"monthSelected",_userSelection:"_userSelection"},exportAs:["matCalendar"],features:[Ql()],consts:5,vars:5,template:function(t,e){1&t&&(el(0,PP,0,0,"ng-template",NP),wl(1,"div",RP),el(2,zP,1,6,"mat-month-view",OP),el(3,BP,1,5,"mat-year-view",FP),el(4,UP,1,5,"mat-multi-year-view",MP),_l()),2&t&&(Zs("cdkPortalOutlet",e._calendarHeaderPortal),to(1),Zs("ngSwitch",e.currentView),to(2),Zs("ngSwitchCase","month"),to(3),Zs("ngSwitchCase","year"),to(4),Zs("ngSwitchCase","multi-year"))},directives:[zD,Hk,ng,rg,YP,rL,JP],styles:[".mat-calendar{display:block}.mat-calendar-header{padding:8px 8px 0 8px}.mat-calendar-content{padding:0 8px 8px 8px;outline:0}.mat-calendar-controls{display:flex;margin:5% calc(33% / 7 - 16px)}.mat-calendar-spacer{flex:1 1 auto}.mat-calendar-period-button{min-width:0}.mat-calendar-arrow{display:inline-block;width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top-width:5px;border-top-style:solid;margin:0 0 0 5px;vertical-align:middle}.mat-calendar-arrow.mat-calendar-invert{transform:rotate(180deg)}[dir=rtl] .mat-calendar-arrow{margin:0 5px 0 0}.mat-calendar-next-button,.mat-calendar-previous-button{position:relative}.mat-calendar-next-button::after,.mat-calendar-previous-button::after{top:0;left:0;right:0;bottom:0;position:absolute;content:'';margin:15.5px;border:0 solid currentColor;border-top-width:2px}[dir=rtl] .mat-calendar-next-button,[dir=rtl] .mat-calendar-previous-button{transform:rotate(180deg)}.mat-calendar-previous-button::after{border-left-width:2px;transform:translateX(2px) rotate(-45deg)}.mat-calendar-next-button::after{border-right-width:2px;transform:translateX(-2px) rotate(45deg)}.mat-calendar-table{border-spacing:0;border-collapse:collapse;width:100%}.mat-calendar-table-header th{text-align:center;padding:0 0 8px 0}.mat-calendar-table-header-divider{position:relative;height:1px}.mat-calendar-table-header-divider::after{content:'';position:absolute;top:0;left:-8px;right:-8px;height:1px}"],encapsulation:2,changeDetection:0}),t})();const oL={transformPanel:N_("transformPanel",[M_("void",F_({opacity:0,transform:"scale(1, 0.8)"})),P_("void => enter",R_("120ms cubic-bezier(0, 0, 0.2, 1)",F_({opacity:1,transform:"scale(1, 1)"}))),P_("* => void",R_("100ms linear",F_({opacity:0})))]),fadeInCalendar:N_("fadeInCalendar",[M_("void",F_({opacity:0})),M_("enter",F_({opacity:1})),P_("void => *",R_("120ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"))])},sL=new Nt("mat-datepicker-scroll-strategy");function lL(t){return()=>t.scrollStrategies.reposition()}const uL={provide:sL,deps:[hT],useFactory:lL};class cL{constructor(t){this._elementRef=t}}const hL=hE(cL);let dL=(()=>{class t extends hL{constructor(t){super(t)}ngAfterViewInit(){this._calendar.focusActiveCell()}}return t.ngComponentDef=de({type:t,selectors:[["mat-datepicker-content"]],factory:function(e){return new(e||t)(rl(Cu))},viewQuery:function(t,e){var n;1&t&&hd(aL,!0),2&t&&ud(n=pd())&&(e._calendar=n.first)},hostBindings:function(t,e,n){1&t&&(Us(2),Cl(WP),al()),2&t&&(Hl("@transformPanel","enter"),sl("mat-datepicker-content-touch",e.datepicker.touchUi),dl())},inputs:{color:"color"},exportAs:["matDatepickerContent"],features:[ru],consts:1,vars:11,template:function(t,e){1&t&&(wl(0,"mat-calendar",HP),Tl("selectedChange",(function(t){return e.datepicker.select(t)})),Tl("yearSelected",(function(t){return e.datepicker._selectYear(t)})),Tl("monthSelected",(function(t){return e.datepicker._selectMonth(t)})),Tl("_userSelection",(function(t){return e.datepicker.close()})),_l()),2&t&&Zs("id",e.datepicker.id)("ngClass",e.datepicker.panelClass)("startAt",e.datepicker.startAt)("startView",e.datepicker.startView)("minDate",e.datepicker._minDate)("maxDate",e.datepicker._maxDate)("dateFilter",e.datepicker._dateFilter)("headerComponent",e.datepicker.calendarHeaderComponent)("selected",e.datepicker._selected)("dateClass",e.datepicker.dateClass)("@fadeInCalendar","enter")},directives:[aL,Pk,Km],styles:[".mat-datepicker-content{display:block;border-radius:4px}.mat-datepicker-content .mat-calendar{width:296px;height:354px}.mat-datepicker-content-touch{display:block;max-height:80vh;overflow:auto;margin:-24px}.mat-datepicker-content-touch .mat-calendar{min-width:250px;min-height:312px;max-width:750px;max-height:788px}@media all and (orientation:landscape){.mat-datepicker-content-touch .mat-calendar{width:64vh;height:80vh}}@media all and (orientation:portrait){.mat-datepicker-content-touch .mat-calendar{width:80vw;height:100vw}}"],encapsulation:2,data:{animation:[oL.transformPanel,oL.fadeInCalendar]},changeDetection:0}),t})(),pL=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();pL.ngInjectorDef=yt({factory:function(t){return new(t||pL)},providers:[GP,uL],imports:[[dg,NI,eO,vT,qk,VD]]});var fL=pc({encapsulation:2,styles:[],data:{}});function mL(t){return ff(2,[(t()(),Yp(0,0,null,null,12,"div",[["class","mat-calendar-header"]],null,null,null,null,null)),(t()(),Yp(1,0,null,null,11,"div",[["class","mat-calendar-controls"]],null,null,null,null,null)),(t()(),Yp(2,0,null,null,4,"button",[["cdkAriaLive","polite"],["class","mat-calendar-period-button"],["mat-button",""],["type","button"]],[[1,"aria-label",0],[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.currentPeriodClicked()&&r),r}),OI,RI)),_h(3,180224,null,0,TI,[Cu,Wk,[2,NS]],null,null),_h(4,147456,null,0,Bk,[Cu,Vk,Ek,Qd],{politeness:[0,"politeness"]},null),(t()(),hf(5,0,["",""])),(t()(),Yp(6,0,null,0,0,"div",[["class","mat-calendar-arrow"]],[[2,"mat-calendar-invert",null]],null,null,null,null)),(t()(),Yp(7,0,null,null,0,"div",[["class","mat-calendar-spacer"]],null,null,null,null,null)),sf(null,0),(t()(),Yp(9,0,null,null,1,"button",[["class","mat-calendar-previous-button"],["mat-icon-button",""],["type","button"]],[[1,"aria-label",0],[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.previousClicked()&&r),r}),OI,RI)),_h(10,180224,null,0,TI,[Cu,Wk,[2,NS]],{disabled:[0,"disabled"]},null),(t()(),Yp(11,0,null,null,1,"button",[["class","mat-calendar-next-button"],["mat-icon-button",""],["type","button"]],[[1,"aria-label",0],[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.nextClicked()&&r),r}),OI,RI)),_h(12,180224,null,0,TI,[Cu,Wk,[2,NS]],{disabled:[0,"disabled"]},null)],(function(t,e){var n=e.component;t(e,4,0,"polite"),t(e,10,0,!n.previousEnabled()),t(e,12,0,!n.nextEnabled())}),(function(t,e){var n=e.component;t(e,2,0,n.periodButtonLabel,lh(e,3).disabled||null,"NoopAnimations"===lh(e,3)._animationMode),t(e,5,0,n.periodButtonText),t(e,6,0,"month"!=n.calendar.currentView),t(e,9,0,n.prevButtonLabel,lh(e,10).disabled||null,"NoopAnimations"===lh(e,10)._animationMode),t(e,11,0,n.nextButtonLabel,lh(e,12).disabled||null,"NoopAnimations"===lh(e,12)._animationMode)}))}function gL(t){return ff(0,[(t()(),Yp(0,0,null,null,1,"mat-calendar-header",[],null,null,null,mL,fL)),_h(1,49152,null,0,iL,[GP,aL,[2,gE],[2,yE],_s],null,null)],null,null)}var yL=Zc("mat-calendar-header",iL,gL,{},{},["*"]),vL=pc({encapsulation:2,styles:[".mat-calendar{display:block}.mat-calendar-header{padding:8px 8px 0 8px}.mat-calendar-content{padding:0 8px 8px 8px;outline:0}.mat-calendar-controls{display:flex;margin:5% calc(33% / 7 - 16px)}.mat-calendar-spacer{flex:1 1 auto}.mat-calendar-period-button{min-width:0}.mat-calendar-arrow{display:inline-block;width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top-width:5px;border-top-style:solid;margin:0 0 0 5px;vertical-align:middle}.mat-calendar-arrow.mat-calendar-invert{transform:rotate(180deg)}[dir=rtl] .mat-calendar-arrow{margin:0 5px 0 0}.mat-calendar-next-button,.mat-calendar-previous-button{position:relative}.mat-calendar-next-button::after,.mat-calendar-previous-button::after{top:0;left:0;right:0;bottom:0;position:absolute;content:'';margin:15.5px;border:0 solid currentColor;border-top-width:2px}[dir=rtl] .mat-calendar-next-button,[dir=rtl] .mat-calendar-previous-button{transform:rotate(180deg)}.mat-calendar-previous-button::after{border-left-width:2px;transform:translateX(2px) rotate(-45deg)}.mat-calendar-next-button::after{border-right-width:2px;transform:translateX(-2px) rotate(45deg)}.mat-calendar-table{border-spacing:0;border-collapse:collapse;width:100%}.mat-calendar-table-header th{text-align:center;padding:0 0 8px 0}.mat-calendar-table-header-divider{position:relative;height:1px}.mat-calendar-table-header-divider::after{content:'';position:absolute;top:0;left:-8px;right:-8px;height:1px}"],data:{}});function bL(t){return ff(0,[(t()(),Xp(0,null,null,0))],null,null)}function wL(t){return ff(0,[(t()(),Yp(0,0,null,null,1,"mat-month-view",[],null,[[null,"activeDateChange"],[null,"selectedChange"],[null,"_userSelection"]],(function(t,e,n){var r=!0,i=t.component;return"activeDateChange"===e&&(r=!1!==(i.activeDate=n)&&r),"selectedChange"===e&&(r=!1!==i._dateSelected(n)&&r),"_userSelection"===e&&(r=!1!==i._userSelected()&&r),r}),PL,FL)),_h(1,1097728,[[1,4]],0,YP,[_s,[2,yE],[2,gE],[2,zS]],{activeDate:[0,"activeDate"],selected:[1,"selected"],minDate:[2,"minDate"],maxDate:[3,"maxDate"],dateFilter:[4,"dateFilter"],dateClass:[5,"dateClass"]},{selectedChange:"selectedChange",_userSelection:"_userSelection",activeDateChange:"activeDateChange"})],(function(t,e){var n=e.component;t(e,1,0,n.activeDate,n.selected,n.minDate,n.maxDate,n.dateFilter,n.dateClass)}),null)}function _L(t){return ff(0,[(t()(),Yp(0,0,null,null,1,"mat-year-view",[],null,[[null,"activeDateChange"],[null,"monthSelected"],[null,"selectedChange"]],(function(t,e,n){var r=!0,i=t.component;return"activeDateChange"===e&&(r=!1!==(i.activeDate=n)&&r),"monthSelected"===e&&(r=!1!==i._monthSelectedInYearView(n)&&r),"selectedChange"===e&&(r=!1!==i._goToDateInView(n,"month")&&r),r}),zL,LL)),_h(1,1097728,[[2,4]],0,rL,[_s,[2,yE],[2,gE],[2,zS]],{activeDate:[0,"activeDate"],selected:[1,"selected"],minDate:[2,"minDate"],maxDate:[3,"maxDate"],dateFilter:[4,"dateFilter"]},{selectedChange:"selectedChange",monthSelected:"monthSelected",activeDateChange:"activeDateChange"})],(function(t,e){var n=e.component;t(e,1,0,n.activeDate,n.selected,n.minDate,n.maxDate,n.dateFilter)}),null)}function xL(t){return ff(0,[(t()(),Yp(0,0,null,null,1,"mat-multi-year-view",[],null,[[null,"activeDateChange"],[null,"yearSelected"],[null,"selectedChange"]],(function(t,e,n){var r=!0,i=t.component;return"activeDateChange"===e&&(r=!1!==(i.activeDate=n)&&r),"yearSelected"===e&&(r=!1!==i._yearSelectedInMultiYearView(n)&&r),"selectedChange"===e&&(r=!1!==i._goToDateInView(n,"year")&&r),r}),BL,VL)),_h(1,1097728,[[3,4]],0,JP,[_s,[2,gE],[2,zS]],{activeDate:[0,"activeDate"],selected:[1,"selected"],minDate:[2,"minDate"],maxDate:[3,"maxDate"],dateFilter:[4,"dateFilter"]},{selectedChange:"selectedChange",yearSelected:"yearSelected",activeDateChange:"activeDateChange"})],(function(t,e){var n=e.component;t(e,1,0,n.activeDate,n.selected,n.minDate,n.maxDate,n.dateFilter)}),null)}function CL(t){return ff(2,[ef(671088640,1,{monthView:0}),ef(671088640,2,{yearView:0}),ef(671088640,3,{multiYearView:0}),(t()(),Xp(16777216,null,null,1,null,bL)),_h(4,212992,null,0,zD,[wu,Xu],{portal:[0,"portal"]},null),(t()(),Yp(5,0,null,null,8,"div",[["cdkMonitorSubtreeFocus",""],["class","mat-calendar-content"],["tabindex","-1"]],null,null,null,null,null)),_h(6,16384,null,0,ng,[],{ngSwitch:[0,"ngSwitch"]},null),_h(7,147456,null,0,Hk,[Cu,Wk],null,null),(t()(),Xp(16777216,null,null,1,null,wL)),_h(9,278528,null,0,rg,[Xu,$u,ng],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),Xp(16777216,null,null,1,null,_L)),_h(11,278528,null,0,rg,[Xu,$u,ng],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),Xp(16777216,null,null,1,null,xL)),_h(13,278528,null,0,rg,[Xu,$u,ng],{ngSwitchCase:[0,"ngSwitchCase"]},null)],(function(t,e){var n=e.component;t(e,4,0,n._calendarHeaderPortal),t(e,6,0,n.currentView),t(e,9,0,"month"),t(e,11,0,"year"),t(e,13,0,"multi-year")}),null)}var SL=pc({encapsulation:2,styles:[".mat-calendar-body{min-width:224px}.mat-calendar-body-label{height:0;line-height:0;text-align:left;padding-left:4.71429%;padding-right:4.71429%}.mat-calendar-body-cell{position:relative;height:0;line-height:0;text-align:center;outline:0;cursor:pointer}.mat-calendar-body-disabled{cursor:default}.mat-calendar-body-cell-content{position:absolute;top:5%;left:5%;display:flex;align-items:center;justify-content:center;box-sizing:border-box;width:90%;height:90%;line-height:1;border-width:1px;border-style:solid;border-radius:999px}@media (-ms-high-contrast:active){.mat-calendar-body-cell-content{border:none}}@media (-ms-high-contrast:active){.mat-calendar-body-selected,.mat-datepicker-popup:not(:empty){outline:solid 1px}.mat-calendar-body-today{outline:dotted 1px}.cdk-keyboard-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected),.cdk-program-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected){outline:dotted 2px}}[dir=rtl] .mat-calendar-body-label{text-align:right}"],data:{}});function kL(t){return ff(0,[(t()(),Yp(0,0,null,null,2,"tr",[["aria-hidden","true"]],null,null,null,null,null)),(t()(),Yp(1,0,null,null,1,"td",[["class","mat-calendar-body-label"]],[[1,"colspan",0],[4,"paddingTop",null],[4,"paddingBottom",null]],null,null,null,null)),(t()(),hf(2,null,["",""]))],null,(function(t,e){var n=e.component;t(e,1,0,n.numCols,n._cellPadding,n._cellPadding),t(e,2,0,n.label)}))}function EL(t){return ff(0,[(t()(),Yp(0,0,null,null,1,"td",[["aria-hidden","true"],["class","mat-calendar-body-label"]],[[1,"colspan",0],[4,"paddingTop",null],[4,"paddingBottom",null]],null,null,null,null)),(t()(),hf(1,null,["",""]))],null,(function(t,e){var n=e.component;t(e,0,0,n._firstRowOffset,n._cellPadding,n._cellPadding),t(e,1,0,n._firstRowOffset>=n.labelMinRequiredCells?n.label:"")}))}function IL(t){return ff(0,[(t()(),Yp(0,0,null,null,4,"td",[["class","mat-calendar-body-cell"],["role","button"]],[[8,"tabIndex",0],[2,"mat-calendar-body-disabled",null],[2,"mat-calendar-body-active",null],[1,"aria-label",0],[1,"aria-disabled",0],[1,"aria-selected",0],[4,"width",null],[4,"paddingTop",null],[4,"paddingBottom",null]],[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component._cellClicked(t.context.$implicit)&&r),r}),null,null)),xh(512,null,Wm,Hm,[Uu,Wu,Cu,Au]),_h(2,278528,null,0,Km,[Wm],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(t()(),Yp(3,0,null,null,1,"div",[["class","mat-calendar-body-cell-content"]],[[2,"mat-calendar-body-selected",null],[2,"mat-calendar-body-today",null]],null,null,null,null)),(t()(),hf(4,null,["",""]))],(function(t,e){t(e,2,0,"mat-calendar-body-cell",e.context.$implicit.cssClasses)}),(function(t,e){var n=e.component;t(e,0,0,n._isActiveCell(e.parent.context.index,e.context.index)?0:-1,!e.context.$implicit.enabled,n._isActiveCell(e.parent.context.index,e.context.index),e.context.$implicit.ariaLabel,!e.context.$implicit.enabled||null,n.selectedValue===e.context.$implicit.value,n._cellWidth,n._cellPadding,n._cellPadding),t(e,3,0,n.selectedValue===e.context.$implicit.value,n.todayValue===e.context.$implicit.value),t(e,4,0,e.context.$implicit.displayValue)}))}function AL(t){return ff(0,[(t()(),Yp(0,0,null,null,4,"tr",[["role","row"]],null,null,null,null,null)),(t()(),Xp(16777216,null,null,1,null,EL)),_h(2,16384,null,0,Qm,[Xu,$u],{ngIf:[0,"ngIf"]},null),(t()(),Xp(16777216,null,null,1,null,IL)),_h(4,278528,null,0,Ym,[Xu,$u,Uu],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){t(e,2,0,0===e.context.index&&e.component._firstRowOffset),t(e,4,0,e.context.$implicit)}),null)}function DL(t){return ff(2,[(t()(),Xp(16777216,null,null,1,null,kL)),_h(1,16384,null,0,Qm,[Xu,$u],{ngIf:[0,"ngIf"]},null),(t()(),Xp(16777216,null,null,1,null,AL)),_h(3,278528,null,0,Ym,[Xu,$u,Uu],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){var n=e.component;t(e,1,0,n._firstRowOffset<n.labelMinRequiredCells),t(e,3,0,n.rows)}),null)}var TL=pc({encapsulation:2,styles:[".mat-datepicker-content{display:block;border-radius:4px}.mat-datepicker-content .mat-calendar{width:296px;height:354px}.mat-datepicker-content-touch{display:block;max-height:80vh;overflow:auto;margin:-24px}.mat-datepicker-content-touch .mat-calendar{min-width:250px;min-height:312px;max-width:750px;max-height:788px}@media all and (orientation:landscape){.mat-datepicker-content-touch .mat-calendar{width:64vh;height:80vh}}@media all and (orientation:portrait){.mat-datepicker-content-touch .mat-calendar{width:80vw;height:100vw}}"],data:{animation:[{type:7,name:"transformPanel",definitions:[{type:0,name:"void",styles:{type:6,styles:{opacity:0,transform:"scale(1, 0.8)"},offset:null},options:void 0},{type:1,expr:"void => enter",animation:{type:4,styles:{type:6,styles:{opacity:1,transform:"scale(1, 1)"},offset:null},timings:"120ms cubic-bezier(0, 0, 0.2, 1)"},options:null},{type:1,expr:"* => void",animation:{type:4,styles:{type:6,styles:{opacity:0},offset:null},timings:"100ms linear"},options:null}],options:{}},{type:7,name:"fadeInCalendar",definitions:[{type:0,name:"void",styles:{type:6,styles:{opacity:0},offset:null},options:void 0},{type:0,name:"enter",styles:{type:6,styles:{opacity:1},offset:null},options:void 0},{type:1,expr:"void => *",animation:{type:4,styles:null,timings:"120ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"},options:null}],options:{}}]}});function NL(t){return ff(2,[ef(671088640,1,{_calendar:0}),(t()(),Yp(1,0,null,null,4,"mat-calendar",[["cdkTrapFocus",""],["class","mat-calendar"]],[[8,"id",0],[24,"@fadeInCalendar",0]],[[null,"selectedChange"],[null,"yearSelected"],[null,"monthSelected"],[null,"_userSelection"]],(function(t,e,n){var r=!0,i=t.component;return"selectedChange"===e&&(r=!1!==i.datepicker.select(n)&&r),"yearSelected"===e&&(r=!1!==i.datepicker._selectYear(n)&&r),"monthSelected"===e&&(r=!1!==i.datepicker._selectMonth(n)&&r),"_userSelection"===e&&(r=!1!==i.datepicker.close()&&r),r}),CL,vL)),xh(512,null,Wm,Hm,[Uu,Wu,Cu,Au]),_h(3,278528,null,0,Km,[Wm],{ngClass:[0,"ngClass"]},null),_h(4,1458176,null,0,Pk,[Cu,Mk,fg],{enabled:[0,"enabled"]},null),_h(5,10141696,[[1,4]],0,aL,[GP,[2,gE],[2,yE],_s],{headerComponent:[0,"headerComponent"],startAt:[1,"startAt"],startView:[2,"startView"],selected:[3,"selected"],minDate:[4,"minDate"],maxDate:[5,"maxDate"],dateFilter:[6,"dateFilter"],dateClass:[7,"dateClass"]},{selectedChange:"selectedChange",yearSelected:"yearSelected",monthSelected:"monthSelected",_userSelection:"_userSelection"})],(function(t,e){var n=e.component;t(e,3,0,n.datepicker.panelClass),t(e,4,0,""),t(e,5,0,n.datepicker.calendarHeaderComponent,n.datepicker.startAt,n.datepicker.startView,n.datepicker._selected,n.datepicker._minDate,n.datepicker._maxDate,n.datepicker._dateFilter,n.datepicker.dateClass)}),(function(t,e){t(e,1,0,e.component.datepicker.id,"enter")}))}function RL(t){return ff(0,[(t()(),Yp(0,0,null,null,1,"mat-datepicker-content",[["class","mat-datepicker-content"]],[[40,"@transformPanel",0],[2,"mat-datepicker-content-touch",null]],null,null,NL,TL)),_h(1,4243456,null,0,dL,[Cu],null,null)],null,(function(t,e){t(e,0,0,"enter",lh(e,1).datepicker.touchUi)}))}var OL=Zc("mat-datepicker-content",dL,RL,{color:"color"},{},[]),FL=pc({encapsulation:2,styles:[],data:{}});function ML(t){return ff(0,[(t()(),Yp(0,0,null,null,1,"th",[["scope","col"]],[[1,"aria-label",0]],null,null,null,null)),(t()(),hf(1,null,["",""]))],null,(function(t,e){t(e,0,0,e.context.$implicit.long),t(e,1,0,e.context.$implicit.narrow)}))}function PL(t){return ff(2,[ef(671088640,1,{_matCalendarBody:0}),(t()(),Yp(1,0,null,null,8,"table",[["class","mat-calendar-table"],["role","presentation"]],null,null,null,null,null)),(t()(),Yp(2,0,null,null,5,"thead",[["class","mat-calendar-table-header"]],null,null,null,null,null)),(t()(),Yp(3,0,null,null,2,"tr",[],null,null,null,null,null)),(t()(),Xp(16777216,null,null,1,null,ML)),_h(5,278528,null,0,Ym,[Xu,$u,Uu],{ngForOf:[0,"ngForOf"]},null),(t()(),Yp(6,0,null,null,1,"tr",[],null,null,null,null,null)),(t()(),Yp(7,0,null,null,0,"th",[["aria-hidden","true"],["class","mat-calendar-table-header-divider"],["colspan","7"]],null,null,null,null,null)),(t()(),Yp(8,0,null,null,1,"tbody",[["aria-readonly","true"],["class","mat-calendar-body"],["mat-calendar-body",""],["role","grid"]],null,[[null,"selectedValueChange"],[null,"keydown"]],(function(t,e,n){var r=!0,i=t.component;return"selectedValueChange"===e&&(r=!1!==i._dateSelected(n)&&r),"keydown"===e&&(r=!1!==i._handleCalendarBodyKeydown(n)&&r),r}),DL,SL)),_h(9,573440,[[1,4]],0,KP,[Cu,Qd],{label:[0,"label"],rows:[1,"rows"],todayValue:[2,"todayValue"],selectedValue:[3,"selectedValue"],labelMinRequiredCells:[4,"labelMinRequiredCells"],activeCell:[5,"activeCell"]},{selectedValueChange:"selectedValueChange"})],(function(t,e){var n=e.component;t(e,5,0,n._weekdays),t(e,9,0,n._monthLabel,n._weeks,n._todayDate,n._selectedDate,3,n._dateAdapter.getDate(n.activeDate)-1)}),null)}var LL=pc({encapsulation:2,styles:[],data:{}});function zL(t){return ff(2,[ef(671088640,1,{_matCalendarBody:0}),(t()(),Yp(1,0,null,null,5,"table",[["class","mat-calendar-table"],["role","presentation"]],null,null,null,null,null)),(t()(),Yp(2,0,null,null,2,"thead",[["class","mat-calendar-table-header"]],null,null,null,null,null)),(t()(),Yp(3,0,null,null,1,"tr",[],null,null,null,null,null)),(t()(),Yp(4,0,null,null,0,"th",[["class","mat-calendar-table-header-divider"],["colspan","4"]],null,null,null,null,null)),(t()(),Yp(5,0,null,null,1,"tbody",[["aria-readonly","true"],["class","mat-calendar-body"],["mat-calendar-body",""],["role","grid"]],null,[[null,"selectedValueChange"],[null,"keydown"]],(function(t,e,n){var r=!0,i=t.component;return"selectedValueChange"===e&&(r=!1!==i._monthSelected(n)&&r),"keydown"===e&&(r=!1!==i._handleCalendarBodyKeydown(n)&&r),r}),DL,SL)),_h(6,573440,[[1,4]],0,KP,[Cu,Qd],{label:[0,"label"],rows:[1,"rows"],todayValue:[2,"todayValue"],selectedValue:[3,"selectedValue"],labelMinRequiredCells:[4,"labelMinRequiredCells"],numCols:[5,"numCols"],activeCell:[6,"activeCell"],cellAspectRatio:[7,"cellAspectRatio"]},{selectedValueChange:"selectedValueChange"})],(function(t,e){var n=e.component;t(e,6,0,n._yearLabel,n._months,n._todayMonth,n._selectedMonth,2,4,n._dateAdapter.getMonth(n.activeDate),4/7)}),null)}var VL=pc({encapsulation:2,styles:[],data:{}});function BL(t){return ff(2,[ef(671088640,1,{_matCalendarBody:0}),(t()(),Yp(1,0,null,null,5,"table",[["class","mat-calendar-table"],["role","presentation"]],null,null,null,null,null)),(t()(),Yp(2,0,null,null,2,"thead",[["class","mat-calendar-table-header"]],null,null,null,null,null)),(t()(),Yp(3,0,null,null,1,"tr",[],null,null,null,null,null)),(t()(),Yp(4,0,null,null,0,"th",[["class","mat-calendar-table-header-divider"],["colspan","4"]],null,null,null,null,null)),(t()(),Yp(5,0,null,null,1,"tbody",[["aria-readonly","true"],["class","mat-calendar-body"],["mat-calendar-body",""],["role","grid"]],null,[[null,"selectedValueChange"],[null,"keydown"]],(function(t,e,n){var r=!0,i=t.component;return"selectedValueChange"===e&&(r=!1!==i._yearSelected(n)&&r),"keydown"===e&&(r=!1!==i._handleCalendarBodyKeydown(n)&&r),r}),DL,SL)),_h(6,573440,[[1,4]],0,KP,[Cu,Qd],{rows:[0,"rows"],todayValue:[1,"todayValue"],selectedValue:[2,"selectedValue"],numCols:[3,"numCols"],activeCell:[4,"activeCell"],cellAspectRatio:[5,"cellAspectRatio"]},{selectedValueChange:"selectedValueChange"})],(function(t,e){var n=e.component;t(e,6,0,n._years,n._todayYear,n._selectedYear,4,n._getActiveCell(),4/7)}),null)}let jL=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();jL.ngInjectorDef=yt({factory:function(t){return new(t||jL)},imports:[[uE,dg],uE]});const UL=["role","navigation",1,"mat-nav-list","mat-list-base"],WL=["*"];class HL{}const qL=dE(HL);let GL=(()=>{class t extends qL{constructor(){super(...arguments),this._stateChanges=new I}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return t.ngComponentDef=de({type:t,selectors:[["mat-nav-list"]],factory:function(e){return $L(e||t)},hostBindings:function(t,e,n){1&t&&Cl(UL)},inputs:{disableRipple:"disableRipple"},exportAs:["matNavList"],features:[ru,Ql()],ngContentSelectors:WL,consts:1,vars:0,template:function(t,e){1&t&&(Ll(),Vl(0))},styles:[".mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:transparent}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;width:100%;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:400;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;width:100%;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:400;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:0}mat-action-list button{background:0 0;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:transparent;text-align:left}[dir=rtl] mat-action-list button{text-align:right}mat-action-list button::-moz-focus-inner{border:0}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:0}@media (-ms-high-contrast:active){.mat-selection-list:focus{outline-style:dotted}.mat-list-option:focus,.mat-list-option:hover,.mat-nav-list .mat-list-item:focus,.mat-nav-list .mat-list-item:hover,mat-action-list .mat-list-item:focus,mat-action-list .mat-list-item:hover{outline:dotted 1px}}@media (hover:none){.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-list-option:not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover{background:0 0}}"],encapsulation:2,changeDetection:0}),t})();const $L=Ai(GL);let KL=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();KL.ngInjectorDef=yt({factory:function(t){return new(t||KL)},imports:[[RE,jE,uE,WE,dg],RE,uE,WE,jL]});var XL=pc({encapsulation:2,styles:[".mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:transparent}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;width:100%;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:400;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;width:100%;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:400;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:0}mat-action-list button{background:0 0;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:transparent;text-align:left}[dir=rtl] mat-action-list button{text-align:right}mat-action-list button::-moz-focus-inner{border:0}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:0}@media (-ms-high-contrast:active){.mat-selection-list:focus{outline-style:dotted}.mat-list-option:focus,.mat-list-option:hover,.mat-nav-list .mat-list-item:focus,.mat-nav-list .mat-list-item:hover,mat-action-list .mat-list-item:focus,mat-action-list .mat-list-item:hover{outline:dotted 1px}}@media (hover:none){.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-list-option:not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover{background:0 0}}"],data:{}});function YL(t){return ff(2,[sf(null,0)],null,null)}class ZL{constructor(t,e){this.bottomSheetRef=t,this.data=e}ngOnInit(){}}var QL=pc({encapsulation:0,styles:[[""]],data:{}});function JL(t){return ff(0,[(t()(),Yp(0,0,null,null,0,"img",[["alt","object"],["style","height:10%"]],[[8,"src",4]],null,null,null,null))],null,(function(t,e){t(e,0,0,e.component.data.image)}))}function tz(t){return ff(0,[(e=0,n=hg,r=[],Ch(-1,e|=16,null,0,n,n,r)),(t()(),Yp(1,0,null,null,12,"mat-nav-list",[["class","mat-nav-list mat-list-base"],["role","navigation"],["style","margin-bottom: 20%"]],null,null,null,YL,XL)),_h(2,704512,null,0,GL,[],null,null),(t()(),Yp(3,0,null,0,5,"div",[["style","text-align:center"]],null,null,null,null,null)),(t()(),Yp(4,0,null,null,2,"h1",[],null,null,null,null,null)),(t()(),hf(5,null,["",""])),cf(128,6,new Array(2)),(t()(),Xp(16777216,null,null,1,null,JL)),_h(8,16384,null,0,Qm,[Xu,$u],{ngIf:[0,"ngIf"]},null),(t()(),Yp(9,0,null,0,0,"hr",[],null,null,null,null,null)),(t()(),Yp(10,0,null,0,1,"p",[],null,null,null,null,null)),(t()(),hf(11,null,["",""])),(t()(),Yp(12,0,null,0,1,"p",[],null,null,null,null,null)),(t()(),hf(13,null,["",""]))],(function(t,e){t(e,8,0,e.component.data.image)}),(function(t,e){var n=e.component,r=function(t,e,n,r){if($s.isWrapped(r)){r=$s.unwrap(r);const e=t.def.nodes[5].bindingIndex+0,n=$s.unwrap(t.oldValues[e]);t.oldValues[e]=new $s(n)}return r}(e,0,0,t(e,6,0,lh(e,0),n.data.label));t(e,5,0,r),t(e,11,0,n.data.description),t(e,13,0,n.data.hint)}));var e,n,r}function ez(t){return ff(0,[(t()(),Yp(0,0,null,null,1,"app-bottom-sheet-detail",[],null,null,null,tz,QL)),_h(1,114688,null,0,ZL,[fM,uM],null,null)],(function(t,e){t(e,1,0)}),null)}var nz=Zc("app-bottom-sheet-detail",ZL,ez,{},{},[]),rz=pc({encapsulation:0,styles:[[""]],data:{}});function iz(t){return ff(0,[(t()(),Yp(0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),_h(1,212992,null,0,e_,[t_,Xu,wu,[8,null],_s],null,null)],(function(t,e){t(e,1,0)}),null)}function az(t){return ff(0,[(t()(),Yp(0,0,null,null,1,"app-root",[],null,null,null,iz,rz)),_h(1,49152,null,0,xm,[],null,null)],null,null)}var oz=Zc("app-root",xm,az,{},{},[]);const sz=new Nt("mat-menu-scroll-strategy");function lz(t){return()=>t.scrollStrategies.reposition()}const uz={provide:sz,deps:[hT],useFactory:lz};let cz=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();cz.ngInjectorDef=yt({factory:function(t){return new(t||cz)},providers:[uz],imports:[uE]});let hz=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();hz.ngInjectorDef=yt({factory:function(t){return new(t||hz)},providers:[uz],imports:[[dg,uE,jE,vT,cz],cz]});class dz{}let pz=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();pz.ngInjectorDef=yt({factory:function(t){return new(t||pz)}});let fz=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();fz.ngInjectorDef=yt({factory:function(t){return new(t||fz)},imports:[[dg,jE,uE,Ak,pz],uE,pz]});let mz=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();mz.ngInjectorDef=yt({factory:function(t){return new(t||mz)},imports:[[uE],uE]});let gz=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();gz.ngInjectorDef=yt({factory:function(t){return new(t||gz)},imports:[[RE,uE],RE,uE]});let yz=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();yz.ngInjectorDef=yt({factory:function(t){return new(t||yz)},imports:[[uE],uE]});let vz=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();vz.ngInjectorDef=yt({factory:function(t){return new(t||vz)}});let bz=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();bz.ngInjectorDef=yt({factory:function(t){return new(t||bz)},imports:[[dg,vz,VD]]});let wz=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();wz.ngInjectorDef=yt({factory:function(t){return new(t||wz)},imports:[[dg,uE,VD,jE,Ak,qk],uE]});let _z=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();_z.ngInjectorDef=yt({factory:function(t){return new(t||_z)},imports:[[dg,uE,AD,KS],uE]});let xz=(()=>{class t{}return t.ngModuleDef=me({type:t}),t})();xz.ngInjectorDef=yt({factory:function(t){return new(t||xz)},providers:[{provide:pv,useClass:NE}],imports:[[dg,uE],uE]});var Cz=bm(_m,[xm],(function(t){return function(t){const e={},n=[];let r=!1;for(let i=0;i<t.length;i++){const a=t[i];a.token===Cs&&!0===a.value&&(r=!0),1073741824&a.flags&&n.push(a.token),a.index=i,e[cc(a.token)]=a}return{factory:null,providersByKey:e,providers:t,modules:n,isRoot:r}}([Hc(512,wu,_u,[[8,[E_,WO,KO,YF,bM,VM,HM,XM,OL,yL,nz,oz]],[3,wu],Yt]),Hc(5120,Rd,qp,[[3,Rd]]),Hc(4608,Fm,Mm,[Rd,[2,Om]]),Hc(5120,zh,$p,[Qd]),Hc(5120,Sd,kd,[]),Hc(5120,Uu,Wp,[]),Hc(5120,Wu,Hp,[]),Hc(4608,wv,_v,[fg]),Hc(6144,sa,null,[wv]),Hc(4608,pv,NE,[[2,AE],[2,uE]]),Hc(5120,My,(function(t,e,n,r,i,a,o,s){return[new hv(t,e,n),new bv(r),new gv(i,a,o,s)]}),[fg,Qd,Dd,fg,fg,pv,Nd,[2,fv]]),Hc(4608,Py,Py,[My,Qd]),Hc(135680,Vy,Vy,[fg]),Hc(4608,Gy,Gy,[Py,Vy,Sd]),Hc(5120,ux,AS,[]),Hc(5120,cC,DS,[]),Hc(4608,GC,IS,[fg,ux,cC]),Hc(5120,Eu,TS,[Gy,GC,Qd]),Hc(6144,zy,null,[Vy]),Hc(4608,ap,ap,[Qd]),Hc(5120,jb,v_,[Qw]),Hc(4608,a_,a_,[]),Hc(6144,r_,null,[a_]),Hc(135680,o_,o_,[Qw,wp,jd,Ls,r_]),Hc(4608,i_,i_,[]),Hc(5120,s_,p_,[Qw,yg,l_]),Hc(5120,x_,__,[b_]),Hc(5120,Td,(function(t){return[t]}),[x_]),Hc(4608,A_,vS,[Eu,fg]),Hc(4608,hT,hT,[KD,eT,wu,uT,tT,Ls,Qd,fg,zS,[2,Im]]),Hc(5120,pT,gT,[hT]),Hc(4608,kk,kk,[]),Hc(4608,IE,IE,[]),Hc(5120,sz,lz,[hT]),Hc(5120,ZR,QR,[hT]),Hc(135680,tO,tO,[hT,Ls,[2,Im],[2,YR],ZR,[3,tO],eT]),Hc(5120,wR,_R,[hT]),Hc(4608,GP,GP,[]),Hc(5120,sL,lL,[hT]),Hc(4608,qT,qT,[]),Hc(4608,AO,DO,[fg,Dd,EO]),Hc(4608,TO,TO,[AO,IO]),Hc(5120,wO,(function(t){return[t]}),[TO]),Hc(4608,SO,SO,[]),Hc(6144,CO,null,[SO]),Hc(4608,kO,kO,[CO]),Hc(6144,rO,null,[kO]),Hc(4608,nO,NO,[rO,Ls]),Hc(4608,vO,vO,[nO]),Hc(1073742336,dg,dg,[]),Hc(1024,Mi,Tv,[]),Hc(1024,pp,(function(){return[h_()]}),[]),Hc(512,b_,b_,[Ls]),Hc(1024,xd,(function(t,e){return[(n=t,Ry("probe",Fy),Ry("coreTokens",Object.assign({},Oy,(n||[]).reduce((t,e)=>(t[e.name]=e.token,t),{}))),()=>Fy),w_(e)];var n}),[[2,pp],b_]),Hc(512,Cd,Cd,[[2,xd]]),Hc(131584,vp,vp,[Qd,Nd,Ls,Mi,wu,Cd]),Hc(1073742336,Kp,Kp,[vp]),Hc(1073742336,Rv,Rv,[[3,Rv]]),Hc(1024,u_,m_,[[3,Qw]]),Hc(512,bb,wb,[]),Hc(512,t_,t_,[]),Hc(256,l_,{},[]),Hc(1024,km,f_,[Cm,[2,Em],l_]),Hc(512,Im,Im,[km,Cm]),Hc(512,jd,jd,[]),Hc(512,wp,kp,[jd,[2,Cp]]),Hc(1024,qw,(function(){return[[{path:"scanner",component:zR},{path:"local",component:HO},{path:"**",component:HF}]]}),[]),Hc(1024,Qw,y_,[vp,bb,t_,Im,Ls,wp,jd,qw,l_,[2,$w],[2,Ww]]),Hc(1073742336,d_,d_,[[2,u_],[2,Qw]]),Hc(1073742336,dz,dz,[]),Hc(1073742336,MS,MS,[]),Hc(1073742336,VS,VS,[]),Hc(1073742336,VD,VD,[]),Hc(1073742336,KS,KS,[]),Hc(1073742336,AD,AD,[]),Hc(1073742336,vT,vT,[]),Hc(1073742336,uE,uE,[[2,lE],[2,fv]]),Hc(1073742336,pM,pM,[]),Hc(1073742336,jE,jE,[]),Hc(1073742336,NI,NI,[]),Hc(1073742336,Ak,Ak,[]),Hc(1073742336,pz,pz,[]),Hc(1073742336,fz,fz,[]),Hc(1073742336,mz,mz,[]),Hc(1073742336,jF,jF,[]),Hc(1073742336,RE,RE,[]),Hc(1073742336,gz,gz,[]),Hc(1073742336,yz,yz,[]),Hc(1073742336,vz,vz,[]),Hc(1073742336,bz,bz,[]),Hc(1073742336,iD,iD,[]),Hc(1073742336,ZO,ZO,[]),Hc(1073742336,aF,aF,[]),Hc(1073742336,WE,WE,[]),Hc(1073742336,jL,jL,[]),Hc(1073742336,KL,KL,[]),Hc(1073742336,qk,qk,[]),Hc(1073742336,wz,wz,[]),Hc(1073742336,cz,cz,[]),Hc(1073742336,hz,hz,[]),Hc(1073742336,OF,OF,[]),Hc(1073742336,FF,FF,[]),Hc(1073742336,_z,_z,[]),Hc(1073742336,vI,vI,[]),Hc(1073742336,FM,FM,[]),Hc(1073742336,eO,eO,[]),Hc(1073742336,tI,tI,[]),Hc(1073742336,AR,AR,[]),Hc(1073742336,pL,pL,[]),Hc(1073742336,xz,xz,[]),Hc(1073742336,LN,LN,[]),Hc(1073742336,VN,VN,[]),Hc(1073742336,RO,RO,[]),Hc(1073742336,OO,OO,[]),Hc(1073742336,_m,_m,[]),Hc(256,Cs,!0,[]),Hc(256,NS,"BrowserAnimations",[]),Hc(256,EO,"XSRF-TOKEN",[]),Hc(256,IO,"X-XSRF-TOKEN",[])])}));(function(){if(Li)throw new Error("Cannot enable prod mode after platform setup.");Pi=!1})(),Dv().bootstrapModuleFactory(Cz).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"}},[[0,0]]]);